(function(i,r){typeof exports=="object"&&typeof module!="undefined"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(i=typeof globalThis!="undefined"?globalThis:i||self,r(i.YoungCasdoorAuth={}))})(this,function(i){"use strict";class r{constructor(e){this.config=e,(e.redirectPath===void 0||e.redirectPath===null)&&(this.config.redirectPath="/callback")}getSignupUrl(e=!0){return e?`${this.config.serverUrl.trim()}/signup/${this.config.appName}`:this.getSigninUrl().replace("/login/oauth/authorize","/signup/oauth/authorize")}getSigninUrl(){const e=`${window.location.origin}${this.config.redirectPath}`,t="read",n=this.config.appName;return`${this.config.serverUrl.trim()}/login/oauth/authorize?client_id=${this.config.clientId}&response_type=code&redirect_uri=${encodeURIComponent(e)}&scope=${t}&state=${n}`}getUserProfileUrl(e,t){let n="";return t!=null&&(n=`?access_token=${t.accessToken}`),`${this.config.serverUrl.trim()}/users/${this.config.organizationName}/${e}${n}`}getMyProfileUrl(e){let t="";return e!=null&&(t=`?access_token=${e.accessToken}`),`${this.config.serverUrl.trim()}/account${t}`}signin(e){const t=new URLSearchParams(window.location.search);return fetch(`${e}/api/signin?code=${t.get("code")}&state=${t.get("state")}`,{method:"POST",credentials:"include"}).then(n=>n.json())}}const o={serverUrl:"https://door.casdoor.com",clientId:"014ae4bd048734ca2dea",organizationName:"casbin",appName:"app-casnode",redirectPath:window.location.pathname};class s{static hasAuthed(){const{code:e,state:t}=Object.fromEntries(new URLSearchParams(window.location.search));return!!(e&&t)}constructor(e={}){const t=Object.assign(o,e);this.sdk=new r(t)}init(e="login"){let t="";e==="register"?t=this.sdk.getSignupUrl():t=this.sdk.getSigninUrl(),window.location.href=t}}i.YoungAuth=s,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
