{"version":3,"file":"index.es.js","sources":["../src/core/create.ts","../src/core/position.ts","../src/type.ts","../src/index.ts"],"sourcesContent":["/*\n * @Author: zhangyang\n * @Date: 2022-05-20 16:33:38\n * @LastEditTime: 2022-05-20 17:18:03\n * @Description: \n */\nexport const createMask = (zIndex: number) => {\n  const mask = document.createElement('div');\n  mask.setAttribute('id', 'mask');\n  mask.setAttribute('style', `\n    width: 100vw;\n    height: 100vh;\n    background-color: gray;\n    opacity: 0.6;\n    position: fixed;\n    top: 0;\n    z-index: ${zIndex};\n  `);\n  return mask;\n};\n\nexport const createDialog = (zIndex: number) => {\n  const dialog = document.createElement('div');\n  dialog.setAttribute('id', 'dialog');\n  dialog.setAttribute('style', `\n    width: 400px;\n    height: 300px;\n    background-color: #fff;\n    position: fixed;\n    top: 0;\n    z-index: ${zIndex};\n  `);\n  return dialog;\n};\n\nexport const createItem = (zIndex: number = 3000) => {\n  const mask = createMask(zIndex);\n  const dialog = createDialog(zIndex + 1);\n  \n  const container = document.createElement('div');\n  container.appendChild(mask);\n  container.appendChild(dialog);\n\n  return container;\n}","/*\n * @Author: zhangyang\n * @Date: 2022-05-20 17:00:04\n * @LastEditTime: 2022-05-20 17:39:47\n * @Description: \n */\nimport type { Position, Selector } from './../type';\nexport const getPosition = (selector: Selector) => {\n  const el = document.querySelector(selector);\n  const { left, top, right, bottom } = el.getBoundingClientRect();\n  // console.log(\"üöÄ ~ file\", el.getBoundingClientRect())\n\n  let positionX: Position = 'left';\n  let positionY: Position = 'top';\n  let x = right + 50;\n  let y = top;\n\n  if (window.innerWidth - right < 400) {\n    positionX = 'right';\n    x = left - 50;\n  }\n\n  if (window.innerHeight - top < 300) {\n    positionY = 'bottom';\n    y = bottom;\n  }\n  return {\n    x,\n    y,\n    positionX,\n    positionY\n  };\n}","/*\n * @Author: zhangyang\n * @Date: 2022-05-20 10:43:29\n * @LastEditTime: 2022-05-20 17:08:00\n * @Description: \n */\ntype VNode = any;\n\nexport type Position = \n| 'left'\n| 'right'\n| 'top'\n| 'bottom';\n\nexport type Selector = keyof HTMLElementTagNameMap | keyof SVGElementTagNameMap | `.${string}` | `#${string}` | `[${string}]`;\n\nexport type Content = string | (() => VNode);\n\nexport type GuidItem = {\n  el: Selector;\n  des: Content;\n};\ndocument.querySelector\nexport type GuidOptions = {\n  /**\n   * ÂÆû‰æãÂåñ‰πãÂêéÁ´ãÂç≥ÂºÄÂßã\n   * @default false\n   */\n  immdiate?: boolean;\n  /**\n   * Âº∫Âà∂ËøõË°åÊñ∞ÊâãÂºïÂØºÔºåÊó†Ê≥ïÁõ¥Êé•ÂÖ≥Èó≠\n   * @default false\n   */\n  force?: boolean;\n};\n\nexport const defautOptions: GuidOptions = {\n  immdiate: false,\n  force: false\n};","/*\n * @Author: zhangyang\n * @Date: 2022-05-20 10:42:47\n * @LastEditTime: 2022-05-20 17:43:41\n * @Description: \n */\nimport { createItem, getPosition } from './core';\nimport type { GuidItem, GuidOptions } from './type';\nimport { defautOptions } from './type';\n\ntype CurrStep = {\n  visible: boolean;\n  index: number;\n  step: GuidItem;\n}\n\nexport default class YoungBeginnerGuid extends HTMLElement {\n  public root: ShadowRoot;\n\n  constructor(\n    public nums: number,\n    public force: boolean\n  ) {\n    super();\n    const mask = createItem();\n    const shadowRoot = this.attachShadow({ mode: 'closed' });\n    shadowRoot.appendChild(mask);\n\n    this.root = shadowRoot;\n  }\n\n  render(item: CurrStep) {\n    if (item.visible) {\n      this.style.display = 'block';\n    } else {\n      this.style.display = 'none';\n    }\n    const {\n      x,\n      y,\n      positionX,\n      positionY\n    } = getPosition(item.step.el);\n    const dialog = this.root.querySelector('#dialog') as HTMLElement;\n    dialog.style[positionX] = x + 'px';\n    dialog.style[positionY] = y + 'px';\n  }\n};\nwindow.customElements.get('young-beginner-guid') ||\nwindow.customElements.define('young-beginner-guid', YoungBeginnerGuid);\n\nexport class YoungBeginnerGuidController {\n  public index = 0;\n  public immdiate = false;\n  public force = false;\n\n  public guids: GuidItem[];\n  public el: YoungBeginnerGuid;\n\n  constructor(guids: GuidItem[], options: GuidOptions = {}) {\n    this.guids = guids;\n    options = Object.assign(defautOptions, options);\n    this.immdiate = options.immdiate;\n    this.force = options.force;\n\n    this.el = new YoungBeginnerGuid(this.guids.length, this.force);\n\n    this.immdiate && this.show();\n  }\n\n  show(index = 0, visible = true) {\n    if (!this.el.isConnected) {\n      document.body.appendChild(this.el);\n    }\n\n    this.index = index;\n    this.el.render({\n      visible,\n      index,\n      step: this.guids[index]\n    });\n  }\n\n  next() {\n    if (this.index < this.guids.length - 1) {\n      this.index++;\n      this.show(this.index);\n    }\n  }\n\n  prev() {\n    if (this.index > 0) {\n      this.index--;\n      this.show(this.index);\n    }\n  }\n\n  hide() {\n    this.show(this.index, false);\n  }\n\n  destory() {\n    this.index = 0;\n    document.body.removeChild(this.el);\n  }\n}"],"names":[],"mappings":"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"}