(function(Cn,$i){typeof exports=="object"&&typeof module!="undefined"?module.exports=$i():typeof define=="function"&&define.amd?define($i):(Cn=typeof globalThis!="undefined"?globalThis:Cn||self,Cn.YoungEditor=$i())})(this,function(){"use strict";var Cn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function $i(d){if(d.__esModule)return d;var i=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(d).forEach(function(e){var t=Object.getOwnPropertyDescriptor(d,e);Object.defineProperty(i,e,t.get?t:{enumerable:!0,get:function(){return d[e]}})}),i}var rr={};Object.defineProperty(rr,"__esModule",{value:!0});for(var Bh=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),os={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},mu={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Bh?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},ss={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},Ba=1;Ba<20;Ba++)ss["f"+Ba]=111+Ba;function Ma(d,i,e){i&&!("byKey"in i)&&(e=i,i=null),Array.isArray(d)||(d=[d]);var t=d.map(function(a){return bu(a,i)}),n=function(o){return t.some(function(l){return yu(l,o)})},r=e==null?n:n(e);return r}function Mh(d,i){return Ma(d,i)}function Ph(d,i){return Ma(d,{byKey:!0},i)}function bu(d,i){var e=i&&i.byKey,t={};d=d.replace("++","+add");var n=d.split("+"),r=n.length;for(var a in os)t[os[a]]=!1;var o=!0,l=!1,u=void 0;try{for(var c=n[Symbol.iterator](),h;!(o=(h=c.next()).done);o=!0){var v=h.value,g=v.endsWith("?")&&v.length>1;g&&(v=v.slice(0,-1));var p=ls(v),b=os[p];if(v.length>1&&!b&&!mu[v]&&!ss[p])throw new TypeError('Unknown modifier: "'+v+'"');(r===1||!b)&&(e?t.key=p:t.which=wu(v)),b&&(t[b]=g?null:!0)}}catch(y){l=!0,u=y}finally{try{!o&&c.return&&c.return()}finally{if(l)throw u}}return t}function yu(d,i){for(var e in d){var t=d[e],n=void 0;if(t!=null&&(e==="key"&&i.key!=null?n=i.key.toLowerCase():e==="which"?n=t===91&&i.which===93?91:i.which:n=i[e],!(n==null&&t===!1)&&n!==t))return!1}return!0}function wu(d){d=ls(d);var i=ss[d]||d.toUpperCase().charCodeAt(0);return i}function ls(d){return d=d.toLowerCase(),d=mu[d]||d,d}var qe=rr.default=Ma,Pa=rr.isHotkey=Ma;rr.isCodeHotkey=Mh,rr.isKeyHotkey=Ph,rr.parseHotkey=bu,rr.compareHotkey=yu,rr.toKeyCode=wu,rr.toKeyName=ls;var ku={exports:{}},Eu={exports:{}};(function(d){function i(e){return d.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d.exports.__esModule=!0,d.exports.default=d.exports,i(e)}d.exports=i,d.exports.__esModule=!0,d.exports.default=d.exports})(Eu),function(d){var i=Eu.exports.default;function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d.exports=e=function(){return t},d.exports.__esModule=!0,d.exports.default=d.exports;var t={},n=Object.prototype,r=n.hasOwnProperty,a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(D,T,q){return Object.defineProperty(D,T,{value:q,enumerable:!0,configurable:!0,writable:!0}),D[T]}try{c({},"")}catch{c=function(q,Z,ie){return q[Z]=ie}}function h(D,T,q,Z){var ie=T&&T.prototype instanceof p?T:p,N=Object.create(ie.prototype),F=new V(Z||[]);return N._invoke=function(H,W,Y){var Q="suspendedStart";return function(re,te){if(Q==="executing")throw new Error("Generator is already running");if(Q==="completed"){if(re==="throw")throw te;return P()}for(Y.method=re,Y.arg=te;;){var J=Y.delegate;if(J){var ne=S(J,Y);if(ne){if(ne===g)continue;return ne}}if(Y.method==="next")Y.sent=Y._sent=Y.arg;else if(Y.method==="throw"){if(Q==="suspendedStart")throw Q="completed",Y.arg;Y.dispatchException(Y.arg)}else Y.method==="return"&&Y.abrupt("return",Y.arg);Q="executing";var ae=v(H,W,Y);if(ae.type==="normal"){if(Q=Y.done?"completed":"suspendedYield",ae.arg===g)continue;return{value:ae.arg,done:Y.done}}ae.type==="throw"&&(Q="completed",Y.method="throw",Y.arg=ae.arg)}}}(D,q,F),N}function v(D,T,q){try{return{type:"normal",arg:D.call(T,q)}}catch(Z){return{type:"throw",arg:Z}}}t.wrap=h;var g={};function p(){}function b(){}function y(){}var k={};c(k,o,function(){return this});var E=Object.getPrototypeOf,_=E&&E(E(j([])));_&&_!==n&&r.call(_,o)&&(k=_);var A=y.prototype=p.prototype=Object.create(k);function x(D){["next","throw","return"].forEach(function(T){c(D,T,function(q){return this._invoke(T,q)})})}function C(D,T){function q(ie,N,F,H){var W=v(D[ie],D,N);if(W.type!=="throw"){var Y=W.arg,Q=Y.value;return Q&&i(Q)=="object"&&r.call(Q,"__await")?T.resolve(Q.__await).then(function(re){q("next",re,F,H)},function(re){q("throw",re,F,H)}):T.resolve(Q).then(function(re){Y.value=re,F(Y)},function(re){return q("throw",re,F,H)})}H(W.arg)}var Z;this._invoke=function(ie,N){function F(){return new T(function(H,W){q(ie,N,H,W)})}return Z=Z?Z.then(F,F):F()}}function S(D,T){var q=D.iterator[T.method];if(q===void 0){if(T.delegate=null,T.method==="throw"){if(D.iterator.return&&(T.method="return",T.arg=void 0,S(D,T),T.method==="throw"))return g;T.method="throw",T.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var Z=v(q,D.iterator,T.arg);if(Z.type==="throw")return T.method="throw",T.arg=Z.arg,T.delegate=null,g;var ie=Z.arg;return ie?ie.done?(T[D.resultName]=ie.value,T.next=D.nextLoc,T.method!=="return"&&(T.method="next",T.arg=void 0),T.delegate=null,g):ie:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,g)}function O(D){var T={tryLoc:D[0]};1 in D&&(T.catchLoc=D[1]),2 in D&&(T.finallyLoc=D[2],T.afterLoc=D[3]),this.tryEntries.push(T)}function M(D){var T=D.completion||{};T.type="normal",delete T.arg,D.completion=T}function V(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(O,this),this.reset(!0)}function j(D){if(D){var T=D[o];if(T)return T.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var q=-1,Z=function ie(){for(;++q<D.length;)if(r.call(D,q))return ie.value=D[q],ie.done=!1,ie;return ie.value=void 0,ie.done=!0,ie};return Z.next=Z}}return{next:P}}function P(){return{value:void 0,done:!0}}return b.prototype=y,c(A,"constructor",y),c(y,"constructor",b),b.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(D){var T=typeof D=="function"&&D.constructor;return!!T&&(T===b||(T.displayName||T.name)==="GeneratorFunction")},t.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,y):(D.__proto__=y,c(D,u,"GeneratorFunction")),D.prototype=Object.create(A),D},t.awrap=function(D){return{__await:D}},x(C.prototype),c(C.prototype,l,function(){return this}),t.AsyncIterator=C,t.async=function(D,T,q,Z,ie){ie===void 0&&(ie=Promise);var N=new C(h(D,T,q,Z),ie);return t.isGeneratorFunction(T)?N:N.next().then(function(F){return F.done?F.value:N.next()})},x(A),c(A,u,"Generator"),c(A,o,function(){return this}),c(A,"toString",function(){return"[object Generator]"}),t.keys=function(D){var T=[];for(var q in D)T.push(q);return T.reverse(),function Z(){for(;T.length;){var ie=T.pop();if(ie in D)return Z.value=ie,Z.done=!1,Z}return Z.done=!0,Z}},t.values=j,V.prototype={constructor:V,reset:function(T){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!T)for(var q in this)q.charAt(0)==="t"&&r.call(this,q)&&!isNaN(+q.slice(1))&&(this[q]=void 0)},stop:function(){this.done=!0;var T=this.tryEntries[0].completion;if(T.type==="throw")throw T.arg;return this.rval},dispatchException:function(T){if(this.done)throw T;var q=this;function Z(Y,Q){return F.type="throw",F.arg=T,q.next=Y,Q&&(q.method="next",q.arg=void 0),!!Q}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var N=this.tryEntries[ie],F=N.completion;if(N.tryLoc==="root")return Z("end");if(N.tryLoc<=this.prev){var H=r.call(N,"catchLoc"),W=r.call(N,"finallyLoc");if(H&&W){if(this.prev<N.catchLoc)return Z(N.catchLoc,!0);if(this.prev<N.finallyLoc)return Z(N.finallyLoc)}else if(H){if(this.prev<N.catchLoc)return Z(N.catchLoc,!0)}else{if(!W)throw new Error("try statement without catch or finally");if(this.prev<N.finallyLoc)return Z(N.finallyLoc)}}}},abrupt:function(T,q){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var ie=this.tryEntries[Z];if(ie.tryLoc<=this.prev&&r.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var N=ie;break}}N&&(T==="break"||T==="continue")&&N.tryLoc<=q&&q<=N.finallyLoc&&(N=null);var F=N?N.completion:{};return F.type=T,F.arg=q,N?(this.method="next",this.next=N.finallyLoc,g):this.complete(F)},complete:function(T,q){if(T.type==="throw")throw T.arg;return T.type==="break"||T.type==="continue"?this.next=T.arg:T.type==="return"?(this.rval=this.arg=T.arg,this.method="return",this.next="end"):T.type==="normal"&&q&&(this.next=q),g},finish:function(T){for(var q=this.tryEntries.length-1;q>=0;--q){var Z=this.tryEntries[q];if(Z.finallyLoc===T)return this.complete(Z.completion,Z.afterLoc),M(Z),g}},catch:function(T){for(var q=this.tryEntries.length-1;q>=0;--q){var Z=this.tryEntries[q];if(Z.tryLoc===T){var ie=Z.completion;if(ie.type==="throw"){var N=ie.arg;M(Z)}return N}}throw new Error("illegal catch attempt")},delegateYield:function(T,q,Z){return this.delegate={iterator:j(T),resultName:q,nextLoc:Z},this.method==="next"&&(this.arg=void 0),g}},t}d.exports=e,d.exports.__esModule=!0,d.exports.default=d.exports}(ku);var Fa=ku.exports(),ht=Fa;try{regeneratorRuntime=Fa}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Fa:Function("r","regeneratorRuntime = r")(Fa)}function lt(d){return lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},lt(d)}function xu(d,i,e,t,n,r,a){try{var o=d[r](a),l=o.value}catch(u){e(u);return}o.done?i(l):Promise.resolve(l).then(t,n)}function _n(d){return function(){var i=this,e=arguments;return new Promise(function(t,n){var r=d.apply(i,e);function a(l){xu(r,t,n,a,o,"next",l)}function o(l){xu(r,t,n,a,o,"throw",l)}a(void 0)})}}function Ge(d,i,e){return i in d?Object.defineProperty(d,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):d[i]=e,d}function Cu(d,i){var e=Object.keys(d);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(d);i&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(d,n).enumerable})),e.push.apply(e,t)}return e}function Pe(d){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?arguments[i]:{};i%2?Cu(Object(e),!0).forEach(function(t){Ge(d,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(e)):Cu(Object(e)).forEach(function(t){Object.defineProperty(d,t,Object.getOwnPropertyDescriptor(e,t))})}return d}function ve(d,i){if(!(d instanceof i))throw new TypeError("Cannot call a class as a function")}function _u(d,i){for(var e=0;e<i.length;e++){var t=i[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(d,t.key,t)}}function we(d,i,e){return i&&_u(d.prototype,i),e&&_u(d,e),Object.defineProperty(d,"prototype",{writable:!1}),d}function Tt(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function Mt(d){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(d)}function Fh(d,i){for(;!Object.prototype.hasOwnProperty.call(d,i)&&(d=Mt(d),d!==null););return d}function Zt(){return typeof Reflect!="undefined"&&Reflect.get?Zt=Reflect.get.bind():Zt=function(i,e,t){var n=Fh(i,e);if(!!n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?i:t):r.value}},Zt.apply(this,arguments)}function us(d,i){return us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},us(d,i)}function Ue(d,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(i&&i.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),i&&us(d,i)}function zh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uh(d,i){if(i&&(lt(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tt(d)}function He(d){var i=zh();return function(){var t=Mt(d),n;if(i){var r=Mt(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return Uh(this,n)}}function Je(d,i){if(!Object.prototype.hasOwnProperty.call(d,i))throw new TypeError("attempted to use private field on non-instance");return d}var Hh=0;function ir(d){return"__private_"+Hh+++"_"+d}var rt={},Vh={Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",amp:"&",AMP:"&",andand:"\u2A55",And:"\u2A53",and:"\u2227",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angmsd:"\u2221",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",apacir:"\u2A6F",ap:"\u2248",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250C",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252C",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxul:"\u2518",boxuL:"\u255B",boxUl:"\u255C",boxUL:"\u255D",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255A",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253C",boxvH:"\u256A",boxVh:"\u256B",boxVH:"\u256C",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251C",boxvR:"\u255E",boxVr:"\u255F",boxVR:"\u2560",bprime:"\u2035",breve:"\u02D8",Breve:"\u02D8",brvbar:"\xA6",bscr:"\u{1D4B7}",Bscr:"\u212C",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsolb:"\u29C5",bsol:"\\",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",cap:"\u2229",Cap:"\u22D2",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",centerdot:"\xB7",CenterDot:"\xB7",cfr:"\u{1D520}",Cfr:"\u212D",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25CB",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",conint:"\u222E",Conint:"\u222F",ContourIntegral:"\u222E",copf:"\u{1D554}",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xA9",COPY:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",cross:"\u2717",Cross:"\u2A2F",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",cupbrcap:"\u2A48",cupcap:"\u2A46",CupCap:"\u224D",cup:"\u222A",Cup:"\u22D3",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21A1",dArr:"\u21D3",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21CA",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",diamond:"\u22C4",Diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21D3",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21BD",DownRightTeeVector:"\u295F",DownRightVectorBar:"\u2957",DownRightVector:"\u21C1",DownTeeArrow:"\u21A7",DownTee:"\u22A4",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",Ecirc:"\xCA",ecirc:"\xEA",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",escr:"\u212F",Escr:"\u2130",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",forall:"\u2200",ForAll:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",fscr:"\u{1D4BB}",Fscr:"\u2131",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",gescc:"\u2AA9",ges:"\u2A7E",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",gg:"\u226B",Gg:"\u22D9",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2AA5",gl:"\u2277",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gnE:"\u2269",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gt:">",GT:">",Gt:"\u226B",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",harrcir:"\u2948",harr:"\u2194",hArr:"\u21D4",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",Hfr:"\u210C",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",hopf:"\u{1D559}",Hopf:"\u210D",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\u{1D4BD}",Hscr:"\u210B",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",ifr:"\u{1D526}",Ifr:"\u2111",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",incare:"\u2105",in:"\u2208",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",intcal:"\u22BA",int:"\u222B",Int:"\u222C",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",iscr:"\u{1D4BE}",Iscr:"\u2110",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",lang:"\u27E8",Lang:"\u27EA",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",larrb:"\u21E4",larrbfs:"\u291F",larr:"\u2190",Larr:"\u219E",lArr:"\u21D0",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",latail:"\u2919",lAtail:"\u291B",lat:"\u2AAB",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lBarr:"\u290E",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27E8",LeftArrowBar:"\u21E4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21D0",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21C3",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTeeArrow:"\u21A4",LeftTee:"\u22A3",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangleBar:"\u29CF",LeftTriangle:"\u22B2",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21BF",LeftVectorBar:"\u2952",LeftVector:"\u21BC",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",lescc:"\u2AA8",les:"\u2A7D",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21C7",ll:"\u226A",Ll:"\u22D8",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoustache:"\u23B0",lmoust:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lnE:"\u2268",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",longleftarrow:"\u27F5",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftrightarrow:"\u27F7",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longmapsto:"\u27FC",longrightarrow:"\u27F6",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",Lscr:"\u2112",lsh:"\u21B0",Lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",lt:"<",LT:"<",Lt:"\u226A",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midast:"*",midcir:"\u2AF0",mid:"\u2223",middot:"\xB7",minusb:"\u229F",minus:"\u2212",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",mscr:"\u{1D4C2}",Mscr:"\u2133",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266E",naturals:"\u2115",natur:"\u266E",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21D7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nharr:"\u21AE",nhArr:"\u21CE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlarr:"\u219A",nlArr:"\u21CD",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219A",nLeftarrow:"\u21CD",nleftrightarrow:"\u21AE",nLeftrightarrow:"\u21CE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nopf:"\u{1D55F}",Nopf:"\u2115",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangle:"\u22EA",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangle:"\u22EB",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",nprec:"\u2280",npreceq:"\u2AAF\u0338",npre:"\u2AAF\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219B",nrArr:"\u21CF",nrarrw:"\u219D\u0338",nrightarrow:"\u219B",nRightarrow:"\u21CF",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvDash:"\u22AD",nVdash:"\u22AE",nVDash:"\u22AF",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21D6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",Ocirc:"\xD4",ocirc:"\xF4",ocir:"\u229A",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",orarr:"\u21BB",Or:"\u2A54",or:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",otimesas:"\u2A36",Otimes:"\u2A37",otimes:"\u2297",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",para:"\xB6",parallel:"\u2225",par:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plus:"+",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",popf:"\u{1D561}",Popf:"\u2119",pound:"\xA3",prap:"\u2AB7",Pr:"\u2ABB",pr:"\u227A",prcue:"\u227C",precapprox:"\u2AB7",prec:"\u227A",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",pre:"\u2AAF",prE:"\u2AB3",precsim:"\u227E",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportional:"\u221D",Proportion:"\u2237",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",qopf:"\u{1D562}",Qopf:"\u211A",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",quot:'"',QUOT:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",rang:"\u27E9",Rang:"\u27EB",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21A0",rArr:"\u21D2",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",ratail:"\u291A",rAtail:"\u291C",ratio:"\u2236",rationals:"\u211A",rbarr:"\u290D",rBarr:"\u290F",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",Re:"\u211C",rect:"\u25AD",reg:"\xAE",REG:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",rfr:"\u{1D52F}",Rfr:"\u211C",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrowBar:"\u21E5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21D2",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVectorBar:"\u2955",RightDownVector:"\u21C2",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTeeArrow:"\u21A6",RightTee:"\u22A2",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangleBar:"\u29D0",RightTriangle:"\u22B3",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVectorBar:"\u2954",RightUpVector:"\u21BE",RightVectorBar:"\u2953",RightVector:"\u21C0",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoustache:"\u23B1",rmoust:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",ropf:"\u{1D563}",Ropf:"\u211D",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",rscr:"\u{1D4C7}",Rscr:"\u211B",rsh:"\u21B1",Rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2ABC",sc:"\u227B",sccue:"\u227D",sce:"\u2AB0",scE:"\u2AB4",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdotb:"\u22A1",sdot:"\u22C5",sdote:"\u2A66",searhk:"\u2925",searr:"\u2198",seArr:"\u21D8",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",solbar:"\u233F",solb:"\u29C4",sol:"/",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25A1",Square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squ:"\u25A1",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",sub:"\u2282",Sub:"\u22D0",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subset:"\u2282",Subset:"\u22D0",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succapprox:"\u2AB8",succ:"\u227B",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",sum:"\u2211",Sum:"\u2211",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",sup:"\u2283",Sup:"\u22D1",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",supset:"\u2283",Supset:"\u22D1",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21D9",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",tilde:"\u02DC",Tilde:"\u223C",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2A31",timesb:"\u22A0",times:"\xD7",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",topbot:"\u2336",topcir:"\u2AF1",top:"\u22A4",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",uarr:"\u2191",Uarr:"\u219F",uArr:"\u21D1",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21D1",UpArrowDownArrow:"\u21C5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21D5",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03C5",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTeeArrow:"\u21A5",UpTee:"\u22A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",varr:"\u2195",vArr:"\u21D5",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",vBar:"\u2AE8",Vbar:"\u2AEB",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22A2",vDash:"\u22A8",Vdash:"\u22A9",VDash:"\u22AB",Vdashl:"\u2AE6",veebar:"\u22BB",vee:"\u2228",Vee:"\u22C1",veeeq:"\u225A",vellip:"\u22EE",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",wedge:"\u2227",Wedge:"\u22C0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xharr:"\u27F7",xhArr:"\u27FA",Xi:"\u039E",xi:"\u03BE",xlarr:"\u27F5",xlArr:"\u27F8",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrarr:"\u27F6",xrArr:"\u27F9",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",yuml:"\xFF",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",zfr:"\u{1D537}",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",Zopf:"\u2124",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"},Au=Vh,cs=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,hi={},Tu={};function jh(d){var i,e,t=Tu[d];if(t)return t;for(t=Tu[d]=[],i=0;i<128;i++)e=String.fromCharCode(i),/^[0-9a-z]$/i.test(e)?t.push(e):t.push("%"+("0"+i.toString(16).toUpperCase()).slice(-2));for(i=0;i<d.length;i++)t[d.charCodeAt(i)]=d[i];return t}function za(d,i,e){var t,n,r,a,o,l="";for(typeof i!="string"&&(e=i,i=za.defaultChars),typeof e=="undefined"&&(e=!0),o=jh(i),t=0,n=d.length;t<n;t++){if(r=d.charCodeAt(t),e&&r===37&&t+2<n&&/^[0-9a-f]{2}$/i.test(d.slice(t+1,t+3))){l+=d.slice(t,t+3),t+=2;continue}if(r<128){l+=o[r];continue}if(r>=55296&&r<=57343){if(r>=55296&&r<=56319&&t+1<n&&(a=d.charCodeAt(t+1),a>=56320&&a<=57343)){l+=encodeURIComponent(d[t]+d[t+1]),t++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(d[t])}return l}za.defaultChars=";/?:@&=+$,-_.!~*'()#",za.componentChars="-_.!~*'()";var Gh=za,Su={};function Wh(d){var i,e,t=Su[d];if(t)return t;for(t=Su[d]=[],i=0;i<128;i++)e=String.fromCharCode(i),t.push(e);for(i=0;i<d.length;i++)e=d.charCodeAt(i),t[e]="%"+("0"+e.toString(16).toUpperCase()).slice(-2);return t}function Ua(d,i){var e;return typeof i!="string"&&(i=Ua.defaultChars),e=Wh(i),d.replace(/(%[a-f0-9]{2})+/gi,function(t){var n,r,a,o,l,u,c,h="";for(n=0,r=t.length;n<r;n+=3){if(a=parseInt(t.slice(n+1,n+3),16),a<128){h+=e[a];continue}if((a&224)===192&&n+3<r&&(o=parseInt(t.slice(n+4,n+6),16),(o&192)===128)){c=a<<6&1984|o&63,c<128?h+="\uFFFD\uFFFD":h+=String.fromCharCode(c),n+=3;continue}if((a&240)===224&&n+6<r&&(o=parseInt(t.slice(n+4,n+6),16),l=parseInt(t.slice(n+7,n+9),16),(o&192)===128&&(l&192)===128)){c=a<<12&61440|o<<6&4032|l&63,c<2048||c>=55296&&c<=57343?h+="\uFFFD\uFFFD\uFFFD":h+=String.fromCharCode(c),n+=6;continue}if((a&248)===240&&n+9<r&&(o=parseInt(t.slice(n+4,n+6),16),l=parseInt(t.slice(n+7,n+9),16),u=parseInt(t.slice(n+10,n+12),16),(o&192)===128&&(l&192)===128&&(u&192)===128)){c=a<<18&1835008|o<<12&258048|l<<6&4032|u&63,c<65536||c>1114111?h+="\uFFFD\uFFFD\uFFFD\uFFFD":(c-=65536,h+=String.fromCharCode(55296+(c>>10),56320+(c&1023))),n+=9;continue}h+="\uFFFD"}return h})}Ua.defaultChars=";/?:@&=+$,#",Ua.componentChars="";var Kh=Ua,Zh=function(i){var e="";return e+=i.protocol||"",e+=i.slashes?"//":"",e+=i.auth?i.auth+"@":"",i.hostname&&i.hostname.indexOf(":")!==-1?e+="["+i.hostname+"]":e+=i.hostname||"",e+=i.port?":"+i.port:"",e+=i.pathname||"",e+=i.search||"",e+=i.hash||"",e};function Ha(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var $h=/^([a-z0-9.+-]+:)/i,Yh=/:[0-9]*$/,Xh=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Jh=["<",">",'"',"`"," ","\r",`
`,"	"],Qh=["{","}","|","\\","^","`"].concat(Jh),ev=["'"].concat(Qh),Nu=["%","/","?",";","#"].concat(ev),Ru=["/","?","#"],tv=255,Du=/^[+a-z0-9A-Z_-]{0,63}$/,nv=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ou={javascript:!0,"javascript:":!0},qu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function rv(d,i){if(d&&d instanceof Ha)return d;var e=new Ha;return e.parse(d,i),e}Ha.prototype.parse=function(d,i){var e,t,n,r,a,o=d;if(o=o.trim(),!i&&d.split("#").length===1){var l=Xh.exec(o);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}var u=$h.exec(o);if(u&&(u=u[0],n=u.toLowerCase(),this.protocol=u,o=o.substr(u.length)),(i||u||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=o.substr(0,2)==="//",a&&!(u&&Ou[u])&&(o=o.substr(2),this.slashes=!0)),!Ou[u]&&(a||u&&!qu[u])){var c=-1;for(e=0;e<Ru.length;e++)r=o.indexOf(Ru[e]),r!==-1&&(c===-1||r<c)&&(c=r);var h,v;for(c===-1?v=o.lastIndexOf("@"):v=o.lastIndexOf("@",c),v!==-1&&(h=o.slice(0,v),o=o.slice(v+1),this.auth=h),c=-1,e=0;e<Nu.length;e++)r=o.indexOf(Nu[e]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=o.length),o[c-1]===":"&&c--;var g=o.slice(0,c);o=o.slice(c),this.parseHost(g),this.hostname=this.hostname||"";var p=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!p){var b=this.hostname.split(/\./);for(e=0,t=b.length;e<t;e++){var y=b[e];if(!!y&&!y.match(Du)){for(var k="",E=0,_=y.length;E<_;E++)y.charCodeAt(E)>127?k+="x":k+=y[E];if(!k.match(Du)){var A=b.slice(0,e),x=b.slice(e+1),C=y.match(nv);C&&(A.push(C[1]),x.unshift(C[2])),x.length&&(o=x.join(".")+o),this.hostname=A.join(".");break}}}}this.hostname.length>tv&&(this.hostname=""),p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var S=o.indexOf("#");S!==-1&&(this.hash=o.substr(S),o=o.slice(0,S));var O=o.indexOf("?");return O!==-1&&(this.search=o.substr(O),o=o.slice(0,O)),o&&(this.pathname=o),qu[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this},Ha.prototype.parseHost=function(d){var i=Yh.exec(d);i&&(i=i[0],i!==":"&&(this.port=i.substr(1)),d=d.substr(0,d.length-i.length)),d&&(this.hostname=d)};var iv=rv;hi.encode=Gh,hi.decode=Kh,hi.format=Zh,hi.parse=iv;var vi={},Iu=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Lu=/[\0-\x1F\x7F-\x9F]/,av=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Bu=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;vi.Any=Iu,vi.Cc=Lu,vi.Cf=av,vi.P=cs,vi.Z=Bu,function(d){function i(T){return Object.prototype.toString.call(T)}function e(T){return i(T)==="[object String]"}var t=Object.prototype.hasOwnProperty;function n(T,q){return t.call(T,q)}function r(T){var q=Array.prototype.slice.call(arguments,1);return q.forEach(function(Z){if(!!Z){if(typeof Z!="object")throw new TypeError(Z+"must be object");Object.keys(Z).forEach(function(ie){T[ie]=Z[ie]})}}),T}function a(T,q,Z){return[].concat(T.slice(0,q),Z,T.slice(q+1))}function o(T){return!(T>=55296&&T<=57343||T>=64976&&T<=65007||(T&65535)===65535||(T&65535)===65534||T>=0&&T<=8||T===11||T>=14&&T<=31||T>=127&&T<=159||T>1114111)}function l(T){if(T>65535){T-=65536;var q=55296+(T>>10),Z=56320+(T&1023);return String.fromCharCode(q,Z)}return String.fromCharCode(T)}var u=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,c=/&([a-z#][a-z0-9]{1,31});/gi,h=new RegExp(u.source+"|"+c.source,"gi"),v=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,g=Au;function p(T,q){var Z=0;return n(g,q)?g[q]:q.charCodeAt(0)===35&&v.test(q)&&(Z=q[1].toLowerCase()==="x"?parseInt(q.slice(2),16):parseInt(q.slice(1),10),o(Z))?l(Z):T}function b(T){return T.indexOf("\\")<0?T:T.replace(u,"$1")}function y(T){return T.indexOf("\\")<0&&T.indexOf("&")<0?T:T.replace(h,function(q,Z,ie){return Z||p(q,ie)})}var k=/[&<>"]/,E=/[&<>"]/g,_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function A(T){return _[T]}function x(T){return k.test(T)?T.replace(E,A):T}var C=/[.?*+^$[\]\\(){}|-]/g;function S(T){return T.replace(C,"\\$&")}function O(T){switch(T){case 9:case 32:return!0}return!1}function M(T){if(T>=8192&&T<=8202)return!0;switch(T){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var V=cs;function j(T){return V.test(T)}function P(T){switch(T){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function D(T){return T=T.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(T=T.replace(//g,"\xDF")),T.toLowerCase().toUpperCase()}d.lib={},d.lib.mdurl=hi,d.lib.ucmicro=vi,d.assign=r,d.isString=e,d.has=n,d.unescapeMd=b,d.unescapeAll=y,d.isValidEntityCode=o,d.fromCodePoint=l,d.escapeHtml=x,d.arrayReplaceAt=a,d.isSpace=O,d.isWhiteSpace=M,d.isMdAsciiPunct=P,d.isPunctChar=j,d.escapeRE=S,d.normalizeReference=D}(rt);var Va={},ov=function(i,e,t){var n,r,a,o,l=-1,u=i.posMax,c=i.pos;for(i.pos=e+1,n=1;i.pos<u;){if(a=i.src.charCodeAt(i.pos),a===93&&(n--,n===0)){r=!0;break}if(o=i.pos,i.md.inline.skipToken(i),a===91){if(o===i.pos-1)n++;else if(t)return i.pos=c,-1}}return r&&(l=i.pos),i.pos=c,l},Mu=rt.unescapeAll,sv=function(i,e,t){var n,r,a=0,o=e,l={ok:!1,pos:0,lines:0,str:""};if(i.charCodeAt(e)===60){for(e++;e<t;){if(n=i.charCodeAt(e),n===10||n===60)return l;if(n===62)return l.pos=e+1,l.str=Mu(i.slice(o+1,e)),l.ok=!0,l;if(n===92&&e+1<t){e+=2;continue}e++}return l}for(r=0;e<t&&(n=i.charCodeAt(e),!(n===32||n<32||n===127));){if(n===92&&e+1<t){if(i.charCodeAt(e+1)===32)break;e+=2;continue}if(n===40&&(r++,r>32))return l;if(n===41){if(r===0)break;r--}e++}return o===e||r!==0||(l.str=Mu(i.slice(o,e)),l.lines=a,l.pos=e,l.ok=!0),l},lv=rt.unescapeAll,uv=function(i,e,t){var n,r,a=0,o=e,l={ok:!1,pos:0,lines:0,str:""};if(e>=t||(r=i.charCodeAt(e),r!==34&&r!==39&&r!==40))return l;for(e++,r===40&&(r=41);e<t;){if(n=i.charCodeAt(e),n===r)return l.pos=e+1,l.lines=a,l.str=lv(i.slice(o+1,e)),l.ok=!0,l;if(n===40&&r===41)return l;n===10?a++:n===92&&e+1<t&&(e++,i.charCodeAt(e)===10&&a++),e++}return l};Va.parseLinkLabel=ov,Va.parseLinkDestination=sv,Va.parseLinkTitle=uv;var cv=rt.assign,fv=rt.unescapeAll,Kr=rt.escapeHtml,Vn={};Vn.code_inline=function(d,i,e,t,n){var r=d[i];return"<code"+n.renderAttrs(r)+">"+Kr(d[i].content)+"</code>"},Vn.code_block=function(d,i,e,t,n){var r=d[i];return"<pre"+n.renderAttrs(r)+"><code>"+Kr(d[i].content)+`</code></pre>
`},Vn.fence=function(d,i,e,t,n){var r=d[i],a=r.info?fv(r.info).trim():"",o="",l="",u,c,h,v,g;return a&&(h=a.split(/(\s+)/g),o=h[0],l=h.slice(2).join("")),e.highlight?u=e.highlight(r.content,o,l)||Kr(r.content):u=Kr(r.content),u.indexOf("<pre")===0?u+`
`:a?(c=r.attrIndex("class"),v=r.attrs?r.attrs.slice():[],c<0?v.push(["class",e.langPrefix+o]):(v[c]=v[c].slice(),v[c][1]+=" "+e.langPrefix+o),g={attrs:v},"<pre><code"+n.renderAttrs(g)+">"+u+`</code></pre>
`):"<pre><code"+n.renderAttrs(r)+">"+u+`</code></pre>
`},Vn.image=function(d,i,e,t,n){var r=d[i];return r.attrs[r.attrIndex("alt")][1]=n.renderInlineAsText(r.children,e,t),n.renderToken(d,i,e)},Vn.hardbreak=function(d,i,e){return e.xhtmlOut?`<br />
`:`<br>
`},Vn.softbreak=function(d,i,e){return e.breaks?e.xhtmlOut?`<br />
`:`<br>
`:`
`},Vn.text=function(d,i){return Kr(d[i].content)},Vn.html_block=function(d,i){return d[i].content},Vn.html_inline=function(d,i){return d[i].content};function gi(){this.rules=cv({},Vn)}gi.prototype.renderAttrs=function(i){var e,t,n;if(!i.attrs)return"";for(n="",e=0,t=i.attrs.length;e<t;e++)n+=" "+Kr(i.attrs[e][0])+'="'+Kr(i.attrs[e][1])+'"';return n},gi.prototype.renderToken=function(i,e,t){var n,r="",a=!1,o=i[e];return o.hidden?"":(o.block&&o.nesting!==-1&&e&&i[e-1].hidden&&(r+=`
`),r+=(o.nesting===-1?"</":"<")+o.tag,r+=this.renderAttrs(o),o.nesting===0&&t.xhtmlOut&&(r+=" /"),o.block&&(a=!0,o.nesting===1&&e+1<i.length&&(n=i[e+1],(n.type==="inline"||n.hidden||n.nesting===-1&&n.tag===o.tag)&&(a=!1))),r+=a?`>
`:">",r)},gi.prototype.renderInline=function(d,i,e){for(var t,n="",r=this.rules,a=0,o=d.length;a<o;a++)t=d[a].type,typeof r[t]!="undefined"?n+=r[t](d,a,i,e,this):n+=this.renderToken(d,a,i);return n},gi.prototype.renderInlineAsText=function(d,i,e){for(var t="",n=0,r=d.length;n<r;n++)d[n].type==="text"?t+=d[n].content:d[n].type==="image"?t+=this.renderInlineAsText(d[n].children,i,e):d[n].type==="softbreak"&&(t+=`
`);return t},gi.prototype.render=function(d,i,e){var t,n,r,a="",o=this.rules;for(t=0,n=d.length;t<n;t++)r=d[t].type,r==="inline"?a+=this.renderInline(d[t].children,i,e):typeof o[r]!="undefined"?a+=o[d[t].type](d,t,i,e,this):a+=this.renderToken(d,t,i,e);return a};var dv=gi;function An(){this.__rules__=[],this.__cache__=null}An.prototype.__find__=function(d){for(var i=0;i<this.__rules__.length;i++)if(this.__rules__[i].name===d)return i;return-1},An.prototype.__compile__=function(){var d=this,i=[""];d.__rules__.forEach(function(e){!e.enabled||e.alt.forEach(function(t){i.indexOf(t)<0&&i.push(t)})}),d.__cache__={},i.forEach(function(e){d.__cache__[e]=[],d.__rules__.forEach(function(t){!t.enabled||e&&t.alt.indexOf(e)<0||d.__cache__[e].push(t.fn)})})},An.prototype.at=function(d,i,e){var t=this.__find__(d),n=e||{};if(t===-1)throw new Error("Parser rule not found: "+d);this.__rules__[t].fn=i,this.__rules__[t].alt=n.alt||[],this.__cache__=null},An.prototype.before=function(d,i,e,t){var n=this.__find__(d),r=t||{};if(n===-1)throw new Error("Parser rule not found: "+d);this.__rules__.splice(n,0,{name:i,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null},An.prototype.after=function(d,i,e,t){var n=this.__find__(d),r=t||{};if(n===-1)throw new Error("Parser rule not found: "+d);this.__rules__.splice(n+1,0,{name:i,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null},An.prototype.push=function(d,i,e){var t=e||{};this.__rules__.push({name:d,enabled:!0,fn:i,alt:t.alt||[]}),this.__cache__=null},An.prototype.enable=function(d,i){Array.isArray(d)||(d=[d]);var e=[];return d.forEach(function(t){var n=this.__find__(t);if(n<0){if(i)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[n].enabled=!0,e.push(t)},this),this.__cache__=null,e},An.prototype.enableOnly=function(d,i){Array.isArray(d)||(d=[d]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(d,i)},An.prototype.disable=function(d,i){Array.isArray(d)||(d=[d]);var e=[];return d.forEach(function(t){var n=this.__find__(t);if(n<0){if(i)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[n].enabled=!1,e.push(t)},this),this.__cache__=null,e},An.prototype.getRules=function(d){return this.__cache__===null&&this.__compile__(),this.__cache__[d]||[]};var fs=An,hv=/\r\n?|\n/g,vv=/\0/g,gv=function(i){var e;e=i.src.replace(hv,`
`),e=e.replace(vv,"\uFFFD"),i.src=e},pv=function(i){var e;i.inlineMode?(e=new i.Token("inline","",0),e.content=i.src,e.map=[0,1],e.children=[],i.tokens.push(e)):i.md.block.parse(i.src,i.md,i.env,i.tokens)},mv=function(i){var e=i.tokens,t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],t.type==="inline"&&i.md.inline.parse(t.content,i.md,i.env,t.children)},bv=rt.arrayReplaceAt;function yv(d){return/^<a[>\s]/i.test(d)}function wv(d){return/^<\/a\s*>/i.test(d)}var kv=function(i){var e,t,n,r,a,o,l,u,c,h,v,g,p,b,y,k,E=i.tokens,_;if(!!i.md.options.linkify){for(t=0,n=E.length;t<n;t++)if(!(E[t].type!=="inline"||!i.md.linkify.pretest(E[t].content)))for(r=E[t].children,p=0,e=r.length-1;e>=0;e--){if(o=r[e],o.type==="link_close"){for(e--;r[e].level!==o.level&&r[e].type!=="link_open";)e--;continue}if(o.type==="html_inline"&&(yv(o.content)&&p>0&&p--,wv(o.content)&&p++),!(p>0)&&o.type==="text"&&i.md.linkify.test(o.content)){for(c=o.content,_=i.md.linkify.match(c),l=[],g=o.level,v=0,_.length>0&&_[0].index===0&&e>0&&r[e-1].type==="text_special"&&(_=_.slice(1)),u=0;u<_.length;u++)b=_[u].url,y=i.md.normalizeLink(b),i.md.validateLink(y)&&(k=_[u].text,_[u].schema?_[u].schema==="mailto:"&&!/^mailto:/i.test(k)?k=i.md.normalizeLinkText("mailto:"+k).replace(/^mailto:/,""):k=i.md.normalizeLinkText(k):k=i.md.normalizeLinkText("http://"+k).replace(/^http:\/\//,""),h=_[u].index,h>v&&(a=new i.Token("text","",0),a.content=c.slice(v,h),a.level=g,l.push(a)),a=new i.Token("link_open","a",1),a.attrs=[["href",y]],a.level=g++,a.markup="linkify",a.info="auto",l.push(a),a=new i.Token("text","",0),a.content=k,a.level=g,l.push(a),a=new i.Token("link_close","a",-1),a.level=--g,a.markup="linkify",a.info="auto",l.push(a),v=_[u].lastIndex);v<c.length&&(a=new i.Token("text","",0),a.content=c.slice(v),a.level=g,l.push(a)),E[t].children=r=bv(r,e,l)}}}},Pu=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Ev=/\((c|tm|r)\)/i,xv=/\((c|tm|r)\)/ig,Cv={c:"\xA9",r:"\xAE",tm:"\u2122"};function _v(d,i){return Cv[i.toLowerCase()]}function Av(d){var i,e,t=0;for(i=d.length-1;i>=0;i--)e=d[i],e.type==="text"&&!t&&(e.content=e.content.replace(xv,_v)),e.type==="link_open"&&e.info==="auto"&&t--,e.type==="link_close"&&e.info==="auto"&&t++}function Tv(d){var i,e,t=0;for(i=d.length-1;i>=0;i--)e=d[i],e.type==="text"&&!t&&Pu.test(e.content)&&(e.content=e.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),e.type==="link_open"&&e.info==="auto"&&t--,e.type==="link_close"&&e.info==="auto"&&t++}var Sv=function(i){var e;if(!!i.md.options.typographer)for(e=i.tokens.length-1;e>=0;e--)i.tokens[e].type==="inline"&&(Ev.test(i.tokens[e].content)&&Av(i.tokens[e].children),Pu.test(i.tokens[e].content)&&Tv(i.tokens[e].children))},Fu=rt.isWhiteSpace,zu=rt.isPunctChar,Uu=rt.isMdAsciiPunct,Nv=/['"]/,Hu=/['"]/g,Vu="\u2019";function ja(d,i,e){return d.slice(0,i)+e+d.slice(i+1)}function Rv(d,i){var e,t,n,r,a,o,l,u,c,h,v,g,p,b,y,k,E,_,A,x,C;for(A=[],e=0;e<d.length;e++){for(t=d[e],l=d[e].level,E=A.length-1;E>=0&&!(A[E].level<=l);E--);if(A.length=E+1,t.type!=="text")continue;n=t.content,a=0,o=n.length;e:for(;a<o&&(Hu.lastIndex=a,r=Hu.exec(n),!!r);){if(y=k=!0,a=r.index+1,_=r[0]==="'",c=32,r.index-1>=0)c=n.charCodeAt(r.index-1);else for(E=e-1;E>=0&&!(d[E].type==="softbreak"||d[E].type==="hardbreak");E--)if(!!d[E].content){c=d[E].content.charCodeAt(d[E].content.length-1);break}if(h=32,a<o)h=n.charCodeAt(a);else for(E=e+1;E<d.length&&!(d[E].type==="softbreak"||d[E].type==="hardbreak");E++)if(!!d[E].content){h=d[E].content.charCodeAt(0);break}if(v=Uu(c)||zu(String.fromCharCode(c)),g=Uu(h)||zu(String.fromCharCode(h)),p=Fu(c),b=Fu(h),b?y=!1:g&&(p||v||(y=!1)),p?k=!1:v&&(b||g||(k=!1)),h===34&&r[0]==='"'&&c>=48&&c<=57&&(k=y=!1),y&&k&&(y=v,k=g),!y&&!k){_&&(t.content=ja(t.content,r.index,Vu));continue}if(k){for(E=A.length-1;E>=0&&(u=A[E],!(A[E].level<l));E--)if(u.single===_&&A[E].level===l){u=A[E],_?(x=i.md.options.quotes[2],C=i.md.options.quotes[3]):(x=i.md.options.quotes[0],C=i.md.options.quotes[1]),t.content=ja(t.content,r.index,C),d[u.token].content=ja(d[u.token].content,u.pos,x),a+=C.length-1,u.token===e&&(a+=x.length-1),n=t.content,o=n.length,A.length=E;continue e}}y?A.push({token:e,pos:r.index,single:_,level:l}):k&&_&&(t.content=ja(t.content,r.index,Vu))}}}var Dv=function(i){var e;if(!!i.md.options.typographer)for(e=i.tokens.length-1;e>=0;e--)i.tokens[e].type!=="inline"||!Nv.test(i.tokens[e].content)||Rv(i.tokens[e].children,i)},Ov=function(i){var e,t,n,r,a,o,l=i.tokens;for(e=0,t=l.length;e<t;e++)if(l[e].type==="inline"){for(n=l[e].children,a=n.length,r=0;r<a;r++)n[r].type==="text_special"&&(n[r].type="text");for(r=o=0;r<a;r++)n[r].type==="text"&&r+1<a&&n[r+1].type==="text"?n[r+1].content=n[r].content+n[r+1].content:(r!==o&&(n[o]=n[r]),o++);r!==o&&(n.length=o)}};function pi(d,i,e){this.type=d,this.tag=i,this.attrs=null,this.map=null,this.nesting=e,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}pi.prototype.attrIndex=function(i){var e,t,n;if(!this.attrs)return-1;for(e=this.attrs,t=0,n=e.length;t<n;t++)if(e[t][0]===i)return t;return-1},pi.prototype.attrPush=function(i){this.attrs?this.attrs.push(i):this.attrs=[i]},pi.prototype.attrSet=function(i,e){var t=this.attrIndex(i),n=[i,e];t<0?this.attrPush(n):this.attrs[t]=n},pi.prototype.attrGet=function(i){var e=this.attrIndex(i),t=null;return e>=0&&(t=this.attrs[e][1]),t},pi.prototype.attrJoin=function(i,e){var t=this.attrIndex(i);t<0?this.attrPush([i,e]):this.attrs[t][1]=this.attrs[t][1]+" "+e};var ds=pi,qv=ds;function ju(d,i,e){this.src=d,this.env=e,this.tokens=[],this.inlineMode=!1,this.md=i}ju.prototype.Token=qv;var Iv=ju,Lv=fs,hs=[["normalize",gv],["block",pv],["inline",mv],["linkify",kv],["replacements",Sv],["smartquotes",Dv],["text_join",Ov]];function vs(){this.ruler=new Lv;for(var d=0;d<hs.length;d++)this.ruler.push(hs[d][0],hs[d][1])}vs.prototype.process=function(d){var i,e,t;for(t=this.ruler.getRules(""),i=0,e=t.length;i<e;i++)t[i](d)},vs.prototype.State=Iv;var Bv=vs,gs=rt.isSpace;function ps(d,i){var e=d.bMarks[i]+d.tShift[i],t=d.eMarks[i];return d.src.slice(e,t)}function Gu(d){var i=[],e=0,t=d.length,n,r=!1,a=0,o="";for(n=d.charCodeAt(e);e<t;)n===124&&(r?(o+=d.substring(a,e-1),a=e):(i.push(o+d.substring(a,e)),o="",a=e+1)),r=n===92,e++,n=d.charCodeAt(e);return i.push(o+d.substring(a)),i}var Mv=function(i,e,t,n){var r,a,o,l,u,c,h,v,g,p,b,y,k,E,_,A,x,C;if(e+2>t||(c=e+1,i.sCount[c]<i.blkIndent)||i.sCount[c]-i.blkIndent>=4||(o=i.bMarks[c]+i.tShift[c],o>=i.eMarks[c])||(x=i.src.charCodeAt(o++),x!==124&&x!==45&&x!==58)||o>=i.eMarks[c]||(C=i.src.charCodeAt(o++),C!==124&&C!==45&&C!==58&&!gs(C))||x===45&&gs(C))return!1;for(;o<i.eMarks[c];){if(r=i.src.charCodeAt(o),r!==124&&r!==45&&r!==58&&!gs(r))return!1;o++}for(a=ps(i,e+1),h=a.split("|"),p=[],l=0;l<h.length;l++){if(b=h[l].trim(),!b){if(l===0||l===h.length-1)continue;return!1}if(!/^:?-+:?$/.test(b))return!1;b.charCodeAt(b.length-1)===58?p.push(b.charCodeAt(0)===58?"center":"right"):b.charCodeAt(0)===58?p.push("left"):p.push("")}if(a=ps(i,e).trim(),a.indexOf("|")===-1||i.sCount[e]-i.blkIndent>=4||(h=Gu(a),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),v=h.length,v===0||v!==p.length))return!1;if(n)return!0;for(E=i.parentType,i.parentType="table",A=i.md.block.ruler.getRules("blockquote"),g=i.push("table_open","table",1),g.map=y=[e,0],g=i.push("thead_open","thead",1),g.map=[e,e+1],g=i.push("tr_open","tr",1),g.map=[e,e+1],l=0;l<h.length;l++)g=i.push("th_open","th",1),p[l]&&(g.attrs=[["style","text-align:"+p[l]]]),g=i.push("inline","",0),g.content=h[l].trim(),g.children=[],g=i.push("th_close","th",-1);for(g=i.push("tr_close","tr",-1),g=i.push("thead_close","thead",-1),c=e+2;c<t&&!(i.sCount[c]<i.blkIndent);c++){for(_=!1,l=0,u=A.length;l<u;l++)if(A[l](i,c,t,!0)){_=!0;break}if(_||(a=ps(i,c).trim(),!a)||i.sCount[c]-i.blkIndent>=4)break;for(h=Gu(a),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),c===e+2&&(g=i.push("tbody_open","tbody",1),g.map=k=[e+2,0]),g=i.push("tr_open","tr",1),g.map=[c,c+1],l=0;l<v;l++)g=i.push("td_open","td",1),p[l]&&(g.attrs=[["style","text-align:"+p[l]]]),g=i.push("inline","",0),g.content=h[l]?h[l].trim():"",g.children=[],g=i.push("td_close","td",-1);g=i.push("tr_close","tr",-1)}return k&&(g=i.push("tbody_close","tbody",-1),k[1]=c),g=i.push("table_close","table",-1),y[1]=c,i.parentType=E,i.line=c,!0},Pv=function(i,e,t){var n,r,a;if(i.sCount[e]-i.blkIndent<4)return!1;for(r=n=e+1;n<t;){if(i.isEmpty(n)){n++;continue}if(i.sCount[n]-i.blkIndent>=4){n++,r=n;continue}break}return i.line=r,a=i.push("code_block","code",0),a.content=i.getLines(e,r,4+i.blkIndent,!1)+`
`,a.map=[e,i.line],!0},Fv=function(i,e,t,n){var r,a,o,l,u,c,h,v=!1,g=i.bMarks[e]+i.tShift[e],p=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||g+3>p||(r=i.src.charCodeAt(g),r!==126&&r!==96)||(u=g,g=i.skipChars(g,r),a=g-u,a<3)||(h=i.src.slice(u,g),o=i.src.slice(g,p),r===96&&o.indexOf(String.fromCharCode(r))>=0))return!1;if(n)return!0;for(l=e;l++,!(l>=t||(g=u=i.bMarks[l]+i.tShift[l],p=i.eMarks[l],g<p&&i.sCount[l]<i.blkIndent));)if(i.src.charCodeAt(g)===r&&!(i.sCount[l]-i.blkIndent>=4)&&(g=i.skipChars(g,r),!(g-u<a)&&(g=i.skipSpaces(g),!(g<p)))){v=!0;break}return a=i.sCount[e],i.line=l+(v?1:0),c=i.push("fence","code",0),c.info=o,c.content=i.getLines(e+1,l,a,!0),c.markup=h,c.map=[e,i.line],!0},Wu=rt.isSpace,zv=function(i,e,t,n){var r,a,o,l,u,c,h,v,g,p,b,y,k,E,_,A,x,C,S,O,M=i.lineMax,V=i.bMarks[e]+i.tShift[e],j=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||i.src.charCodeAt(V++)!==62)return!1;if(n)return!0;for(l=g=i.sCount[e]+1,i.src.charCodeAt(V)===32?(V++,l++,g++,r=!1,A=!0):i.src.charCodeAt(V)===9?(A=!0,(i.bsCount[e]+g)%4===3?(V++,l++,g++,r=!1):r=!0):A=!1,p=[i.bMarks[e]],i.bMarks[e]=V;V<j&&(a=i.src.charCodeAt(V),Wu(a));){a===9?g+=4-(g+i.bsCount[e]+(r?1:0))%4:g++;V++}for(b=[i.bsCount[e]],i.bsCount[e]=i.sCount[e]+1+(A?1:0),c=V>=j,E=[i.sCount[e]],i.sCount[e]=g-l,_=[i.tShift[e]],i.tShift[e]=V-i.bMarks[e],C=i.md.block.ruler.getRules("blockquote"),k=i.parentType,i.parentType="blockquote",v=e+1;v<t&&(O=i.sCount[v]<i.blkIndent,V=i.bMarks[v]+i.tShift[v],j=i.eMarks[v],!(V>=j));v++){if(i.src.charCodeAt(V++)===62&&!O){for(l=g=i.sCount[v]+1,i.src.charCodeAt(V)===32?(V++,l++,g++,r=!1,A=!0):i.src.charCodeAt(V)===9?(A=!0,(i.bsCount[v]+g)%4===3?(V++,l++,g++,r=!1):r=!0):A=!1,p.push(i.bMarks[v]),i.bMarks[v]=V;V<j&&(a=i.src.charCodeAt(V),Wu(a));){a===9?g+=4-(g+i.bsCount[v]+(r?1:0))%4:g++;V++}c=V>=j,b.push(i.bsCount[v]),i.bsCount[v]=i.sCount[v]+1+(A?1:0),E.push(i.sCount[v]),i.sCount[v]=g-l,_.push(i.tShift[v]),i.tShift[v]=V-i.bMarks[v];continue}if(c)break;for(x=!1,o=0,u=C.length;o<u;o++)if(C[o](i,v,t,!0)){x=!0;break}if(x){i.lineMax=v,i.blkIndent!==0&&(p.push(i.bMarks[v]),b.push(i.bsCount[v]),_.push(i.tShift[v]),E.push(i.sCount[v]),i.sCount[v]-=i.blkIndent);break}p.push(i.bMarks[v]),b.push(i.bsCount[v]),_.push(i.tShift[v]),E.push(i.sCount[v]),i.sCount[v]=-1}for(y=i.blkIndent,i.blkIndent=0,S=i.push("blockquote_open","blockquote",1),S.markup=">",S.map=h=[e,0],i.md.block.tokenize(i,e,v),S=i.push("blockquote_close","blockquote",-1),S.markup=">",i.lineMax=M,i.parentType=k,h[1]=i.line,o=0;o<_.length;o++)i.bMarks[o+e]=p[o],i.tShift[o+e]=_[o],i.sCount[o+e]=E[o],i.bsCount[o+e]=b[o];return i.blkIndent=y,!0},Uv=rt.isSpace,Hv=function(i,e,t,n){var r,a,o,l,u=i.bMarks[e]+i.tShift[e],c=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||(r=i.src.charCodeAt(u++),r!==42&&r!==45&&r!==95))return!1;for(a=1;u<c;){if(o=i.src.charCodeAt(u++),o!==r&&!Uv(o))return!1;o===r&&a++}return a<3?!1:(n||(i.line=e+1,l=i.push("hr","hr",0),l.map=[e,i.line],l.markup=Array(a+1).join(String.fromCharCode(r))),!0)},Ku=rt.isSpace;function Zu(d,i){var e,t,n,r;return t=d.bMarks[i]+d.tShift[i],n=d.eMarks[i],e=d.src.charCodeAt(t++),e!==42&&e!==45&&e!==43||t<n&&(r=d.src.charCodeAt(t),!Ku(r))?-1:t}function $u(d,i){var e,t=d.bMarks[i]+d.tShift[i],n=t,r=d.eMarks[i];if(n+1>=r||(e=d.src.charCodeAt(n++),e<48||e>57))return-1;for(;;){if(n>=r)return-1;if(e=d.src.charCodeAt(n++),e>=48&&e<=57){if(n-t>=10)return-1;continue}if(e===41||e===46)break;return-1}return n<r&&(e=d.src.charCodeAt(n),!Ku(e))?-1:n}function Vv(d,i){var e,t,n=d.level+2;for(e=i+2,t=d.tokens.length-2;e<t;e++)d.tokens[e].level===n&&d.tokens[e].type==="paragraph_open"&&(d.tokens[e+2].hidden=!0,d.tokens[e].hidden=!0,e+=2)}var jv=function(i,e,t,n){var r,a,o,l,u,c,h,v,g,p,b,y,k,E,_,A,x,C,S,O,M,V,j,P,D,T,q,Z,ie=!1,N=!0;if(i.sCount[e]-i.blkIndent>=4||i.listIndent>=0&&i.sCount[e]-i.listIndent>=4&&i.sCount[e]<i.blkIndent)return!1;if(n&&i.parentType==="paragraph"&&i.sCount[e]>=i.blkIndent&&(ie=!0),(j=$u(i,e))>=0){if(h=!0,D=i.bMarks[e]+i.tShift[e],k=Number(i.src.slice(D,j-1)),ie&&k!==1)return!1}else if((j=Zu(i,e))>=0)h=!1;else return!1;if(ie&&i.skipSpaces(j)>=i.eMarks[e])return!1;if(y=i.src.charCodeAt(j-1),n)return!0;for(b=i.tokens.length,h?(Z=i.push("ordered_list_open","ol",1),k!==1&&(Z.attrs=[["start",k]])):Z=i.push("bullet_list_open","ul",1),Z.map=p=[e,0],Z.markup=String.fromCharCode(y),_=e,P=!1,q=i.md.block.ruler.getRules("list"),C=i.parentType,i.parentType="list";_<t;){for(V=j,E=i.eMarks[_],c=A=i.sCount[_]+j-(i.bMarks[e]+i.tShift[e]);V<E;){if(r=i.src.charCodeAt(V),r===9)A+=4-(A+i.bsCount[_])%4;else if(r===32)A++;else break;V++}if(a=V,a>=E?u=1:u=A-c,u>4&&(u=1),l=c+u,Z=i.push("list_item_open","li",1),Z.markup=String.fromCharCode(y),Z.map=v=[e,0],h&&(Z.info=i.src.slice(D,j-1)),M=i.tight,O=i.tShift[e],S=i.sCount[e],x=i.listIndent,i.listIndent=i.blkIndent,i.blkIndent=l,i.tight=!0,i.tShift[e]=a-i.bMarks[e],i.sCount[e]=A,a>=E&&i.isEmpty(e+1)?i.line=Math.min(i.line+2,t):i.md.block.tokenize(i,e,t,!0),(!i.tight||P)&&(N=!1),P=i.line-e>1&&i.isEmpty(i.line-1),i.blkIndent=i.listIndent,i.listIndent=x,i.tShift[e]=O,i.sCount[e]=S,i.tight=M,Z=i.push("list_item_close","li",-1),Z.markup=String.fromCharCode(y),_=e=i.line,v[1]=_,a=i.bMarks[e],_>=t||i.sCount[_]<i.blkIndent||i.sCount[e]-i.blkIndent>=4)break;for(T=!1,o=0,g=q.length;o<g;o++)if(q[o](i,_,t,!0)){T=!0;break}if(T)break;if(h){if(j=$u(i,_),j<0)break;D=i.bMarks[_]+i.tShift[_]}else if(j=Zu(i,_),j<0)break;if(y!==i.src.charCodeAt(j-1))break}return h?Z=i.push("ordered_list_close","ol",-1):Z=i.push("bullet_list_close","ul",-1),Z.markup=String.fromCharCode(y),p[1]=_,i.line=_,i.parentType=C,N&&Vv(i,b),!0},Gv=rt.normalizeReference,Ga=rt.isSpace,Wv=function(i,e,t,n){var r,a,o,l,u,c,h,v,g,p,b,y,k,E,_,A,x=0,C=i.bMarks[e]+i.tShift[e],S=i.eMarks[e],O=e+1;if(i.sCount[e]-i.blkIndent>=4||i.src.charCodeAt(C)!==91)return!1;for(;++C<S;)if(i.src.charCodeAt(C)===93&&i.src.charCodeAt(C-1)!==92){if(C+1===S||i.src.charCodeAt(C+1)!==58)return!1;break}for(l=i.lineMax,_=i.md.block.ruler.getRules("reference"),p=i.parentType,i.parentType="reference";O<l&&!i.isEmpty(O);O++)if(!(i.sCount[O]-i.blkIndent>3)&&!(i.sCount[O]<0)){for(E=!1,c=0,h=_.length;c<h;c++)if(_[c](i,O,l,!0)){E=!0;break}if(E)break}for(k=i.getLines(e,O,i.blkIndent,!1).trim(),S=k.length,C=1;C<S;C++){if(r=k.charCodeAt(C),r===91)return!1;if(r===93){g=C;break}else r===10?x++:r===92&&(C++,C<S&&k.charCodeAt(C)===10&&x++)}if(g<0||k.charCodeAt(g+1)!==58)return!1;for(C=g+2;C<S;C++)if(r=k.charCodeAt(C),r===10)x++;else if(!Ga(r))break;if(b=i.md.helpers.parseLinkDestination(k,C,S),!b.ok||(u=i.md.normalizeLink(b.str),!i.md.validateLink(u)))return!1;for(C=b.pos,x+=b.lines,a=C,o=x,y=C;C<S;C++)if(r=k.charCodeAt(C),r===10)x++;else if(!Ga(r))break;for(b=i.md.helpers.parseLinkTitle(k,C,S),C<S&&y!==C&&b.ok?(A=b.str,C=b.pos,x+=b.lines):(A="",C=a,x=o);C<S&&(r=k.charCodeAt(C),!!Ga(r));)C++;if(C<S&&k.charCodeAt(C)!==10&&A)for(A="",C=a,x=o;C<S&&(r=k.charCodeAt(C),!!Ga(r));)C++;return C<S&&k.charCodeAt(C)!==10||(v=Gv(k.slice(1,g)),!v)?!1:(n||(typeof i.env.references=="undefined"&&(i.env.references={}),typeof i.env.references[v]=="undefined"&&(i.env.references[v]={title:A,href:u}),i.parentType=p,i.line=e+x+1),!0)},Kv=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Wa={},Zv="[a-zA-Z_:][a-zA-Z0-9:._-]*",$v="[^\"'=<>`\\x00-\\x20]+",Yv="'[^']*'",Xv='"[^"]*"',Jv="(?:"+$v+"|"+Yv+"|"+Xv+")",Qv="(?:\\s+"+Zv+"(?:\\s*=\\s*"+Jv+")?)",Yu="<[A-Za-z][A-Za-z0-9\\-]*"+Qv+"*\\s*\\/?>",Xu="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",eg="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",tg="<[?][\\s\\S]*?[?]>",ng="<![A-Z]+\\s+[^>]*>",rg="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",ig=new RegExp("^(?:"+Yu+"|"+Xu+"|"+eg+"|"+tg+"|"+ng+"|"+rg+")"),ag=new RegExp("^(?:"+Yu+"|"+Xu+")");Wa.HTML_TAG_RE=ig,Wa.HTML_OPEN_CLOSE_TAG_RE=ag;var og=Kv,sg=Wa.HTML_OPEN_CLOSE_TAG_RE,mi=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+og.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(sg.source+"\\s*$"),/^$/,!1]],lg=function(i,e,t,n){var r,a,o,l,u=i.bMarks[e]+i.tShift[e],c=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||!i.md.options.html||i.src.charCodeAt(u)!==60)return!1;for(l=i.src.slice(u,c),r=0;r<mi.length&&!mi[r][0].test(l);r++);if(r===mi.length)return!1;if(n)return mi[r][2];if(a=e+1,!mi[r][1].test(l)){for(;a<t&&!(i.sCount[a]<i.blkIndent);a++)if(u=i.bMarks[a]+i.tShift[a],c=i.eMarks[a],l=i.src.slice(u,c),mi[r][1].test(l)){l.length!==0&&a++;break}}return i.line=a,o=i.push("html_block","",0),o.map=[e,a],o.content=i.getLines(e,a,i.blkIndent,!0),!0},Ju=rt.isSpace,ug=function(i,e,t,n){var r,a,o,l,u=i.bMarks[e]+i.tShift[e],c=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||(r=i.src.charCodeAt(u),r!==35||u>=c))return!1;for(a=1,r=i.src.charCodeAt(++u);r===35&&u<c&&a<=6;)a++,r=i.src.charCodeAt(++u);return a>6||u<c&&!Ju(r)?!1:(n||(c=i.skipSpacesBack(c,u),o=i.skipCharsBack(c,35,u),o>u&&Ju(i.src.charCodeAt(o-1))&&(c=o),i.line=e+1,l=i.push("heading_open","h"+String(a),1),l.markup="########".slice(0,a),l.map=[e,i.line],l=i.push("inline","",0),l.content=i.src.slice(u,c).trim(),l.map=[e,i.line],l.children=[],l=i.push("heading_close","h"+String(a),-1),l.markup="########".slice(0,a)),!0)},cg=function(i,e,t){var n,r,a,o,l,u,c,h,v,g=e+1,p,b=i.md.block.ruler.getRules("paragraph");if(i.sCount[e]-i.blkIndent>=4)return!1;for(p=i.parentType,i.parentType="paragraph";g<t&&!i.isEmpty(g);g++)if(!(i.sCount[g]-i.blkIndent>3)){if(i.sCount[g]>=i.blkIndent&&(u=i.bMarks[g]+i.tShift[g],c=i.eMarks[g],u<c&&(v=i.src.charCodeAt(u),(v===45||v===61)&&(u=i.skipChars(u,v),u=i.skipSpaces(u),u>=c)))){h=v===61?1:2;break}if(!(i.sCount[g]<0)){for(r=!1,a=0,o=b.length;a<o;a++)if(b[a](i,g,t,!0)){r=!0;break}if(r)break}}return h?(n=i.getLines(e,g,i.blkIndent,!1).trim(),i.line=g+1,l=i.push("heading_open","h"+String(h),1),l.markup=String.fromCharCode(v),l.map=[e,i.line],l=i.push("inline","",0),l.content=n,l.map=[e,i.line-1],l.children=[],l=i.push("heading_close","h"+String(h),-1),l.markup=String.fromCharCode(v),i.parentType=p,!0):!1},fg=function(i,e){var t,n,r,a,o,l,u=e+1,c=i.md.block.ruler.getRules("paragraph"),h=i.lineMax;for(l=i.parentType,i.parentType="paragraph";u<h&&!i.isEmpty(u);u++)if(!(i.sCount[u]-i.blkIndent>3)&&!(i.sCount[u]<0)){for(n=!1,r=0,a=c.length;r<a;r++)if(c[r](i,u,h,!0)){n=!0;break}if(n)break}return t=i.getLines(e,u,i.blkIndent,!1).trim(),i.line=u,o=i.push("paragraph_open","p",1),o.map=[e,i.line],o=i.push("inline","",0),o.content=t,o.map=[e,i.line],o.children=[],o=i.push("paragraph_close","p",-1),i.parentType=l,!0},Qu=ds,Ka=rt.isSpace;function jn(d,i,e,t){var n,r,a,o,l,u,c,h;for(this.src=d,this.md=i,this.env=e,this.tokens=t,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",r=this.src,h=!1,a=o=u=c=0,l=r.length;o<l;o++){if(n=r.charCodeAt(o),!h)if(Ka(n)){u++,n===9?c+=4-c%4:c++;continue}else h=!0;(n===10||o===l-1)&&(n!==10&&o++,this.bMarks.push(a),this.eMarks.push(o),this.tShift.push(u),this.sCount.push(c),this.bsCount.push(0),h=!1,u=0,c=0,a=o+1)}this.bMarks.push(r.length),this.eMarks.push(r.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}jn.prototype.push=function(d,i,e){var t=new Qu(d,i,e);return t.block=!0,e<0&&this.level--,t.level=this.level,e>0&&this.level++,this.tokens.push(t),t},jn.prototype.isEmpty=function(i){return this.bMarks[i]+this.tShift[i]>=this.eMarks[i]},jn.prototype.skipEmptyLines=function(i){for(var e=this.lineMax;i<e&&!(this.bMarks[i]+this.tShift[i]<this.eMarks[i]);i++);return i},jn.prototype.skipSpaces=function(i){for(var e,t=this.src.length;i<t&&(e=this.src.charCodeAt(i),!!Ka(e));i++);return i},jn.prototype.skipSpacesBack=function(i,e){if(i<=e)return i;for(;i>e;)if(!Ka(this.src.charCodeAt(--i)))return i+1;return i},jn.prototype.skipChars=function(i,e){for(var t=this.src.length;i<t&&this.src.charCodeAt(i)===e;i++);return i},jn.prototype.skipCharsBack=function(i,e,t){if(i<=t)return i;for(;i>t;)if(e!==this.src.charCodeAt(--i))return i+1;return i},jn.prototype.getLines=function(i,e,t,n){var r,a,o,l,u,c,h,v=i;if(i>=e)return"";for(c=new Array(e-i),r=0;v<e;v++,r++){for(a=0,h=l=this.bMarks[v],v+1<e||n?u=this.eMarks[v]+1:u=this.eMarks[v];l<u&&a<t;){if(o=this.src.charCodeAt(l),Ka(o))o===9?a+=4-(a+this.bsCount[v])%4:a++;else if(l-h<this.tShift[v])a++;else break;l++}a>t?c[r]=new Array(a-t+1).join(" ")+this.src.slice(l,u):c[r]=this.src.slice(l,u)}return c.join("")},jn.prototype.Token=Qu;var dg=jn,hg=fs,Za=[["table",Mv,["paragraph","reference"]],["code",Pv],["fence",Fv,["paragraph","reference","blockquote","list"]],["blockquote",zv,["paragraph","reference","blockquote","list"]],["hr",Hv,["paragraph","reference","blockquote","list"]],["list",jv,["paragraph","reference","blockquote"]],["reference",Wv],["html_block",lg,["paragraph","reference","blockquote"]],["heading",ug,["paragraph","reference","blockquote"]],["lheading",cg],["paragraph",fg]];function $a(){this.ruler=new hg;for(var d=0;d<Za.length;d++)this.ruler.push(Za[d][0],Za[d][1],{alt:(Za[d][2]||[]).slice()})}$a.prototype.tokenize=function(d,i,e){for(var t,n,r=this.ruler.getRules(""),a=r.length,o=i,l=!1,u=d.md.options.maxNesting;o<e&&(d.line=o=d.skipEmptyLines(o),!(o>=e||d.sCount[o]<d.blkIndent));){if(d.level>=u){d.line=e;break}for(n=0;n<a&&(t=r[n](d,o,e,!1),!t);n++);d.tight=!l,d.isEmpty(d.line-1)&&(l=!0),o=d.line,o<e&&d.isEmpty(o)&&(l=!0,o++,d.line=o)}},$a.prototype.parse=function(d,i,e,t){var n;!d||(n=new this.State(d,i,e,t),this.tokenize(n,n.line,n.lineMax))},$a.prototype.State=dg;var vg=$a;function gg(d){switch(d){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}for(var pg=function(i,e){for(var t=i.pos;t<i.posMax&&!gg(i.src.charCodeAt(t));)t++;return t===i.pos?!1:(e||(i.pending+=i.src.slice(i.pos,t)),i.pos=t,!0)},mg=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,bg=function(i,e){var t,n,r,a,o,l,u,c;return!i.md.options.linkify||i.linkLevel>0||(t=i.pos,n=i.posMax,t+3>n)||i.src.charCodeAt(t)!==58||i.src.charCodeAt(t+1)!==47||i.src.charCodeAt(t+2)!==47||(r=i.pending.match(mg),!r)||(a=r[1],o=i.md.linkify.matchAtStart(i.src.slice(t-a.length)),!o)||(l=o.url,l=l.replace(/\*+$/,""),u=i.md.normalizeLink(l),!i.md.validateLink(u))?!1:(e||(i.pending=i.pending.slice(0,-a.length),c=i.push("link_open","a",1),c.attrs=[["href",u]],c.markup="linkify",c.info="auto",c=i.push("text","",0),c.content=i.md.normalizeLinkText(l),c=i.push("link_close","a",-1),c.markup="linkify",c.info="auto"),i.pos+=l.length-a.length,!0)},yg=rt.isSpace,wg=function(i,e){var t,n,r,a=i.pos;if(i.src.charCodeAt(a)!==10)return!1;if(t=i.pending.length-1,n=i.posMax,!e)if(t>=0&&i.pending.charCodeAt(t)===32)if(t>=1&&i.pending.charCodeAt(t-1)===32){for(r=t-1;r>=1&&i.pending.charCodeAt(r-1)===32;)r--;i.pending=i.pending.slice(0,r),i.push("hardbreak","br",0)}else i.pending=i.pending.slice(0,-1),i.push("softbreak","br",0);else i.push("softbreak","br",0);for(a++;a<n&&yg(i.src.charCodeAt(a));)a++;return i.pos=a,!0},kg=rt.isSpace,ms=[],ec=0;ec<256;ec++)ms.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(d){ms[d.charCodeAt(0)]=1});var Eg=function(i,e){var t,n,r,a,o,l=i.pos,u=i.posMax;if(i.src.charCodeAt(l)!==92||(l++,l>=u))return!1;if(t=i.src.charCodeAt(l),t===10){for(e||i.push("hardbreak","br",0),l++;l<u&&(t=i.src.charCodeAt(l),!!kg(t));)l++;return i.pos=l,!0}return a=i.src[l],t>=55296&&t<=56319&&l+1<u&&(n=i.src.charCodeAt(l+1),n>=56320&&n<=57343&&(a+=i.src[l+1],l++)),r="\\"+a,e||(o=i.push("text_special","",0),t<256&&ms[t]!==0?o.content=a:o.content=r,o.markup=r,o.info="escape"),i.pos=l+1,!0},xg=function(i,e){var t,n,r,a,o,l,u,c,h=i.pos,v=i.src.charCodeAt(h);if(v!==96)return!1;for(t=h,h++,n=i.posMax;h<n&&i.src.charCodeAt(h)===96;)h++;if(r=i.src.slice(t,h),u=r.length,i.backticksScanned&&(i.backticks[u]||0)<=t)return e||(i.pending+=r),i.pos+=u,!0;for(o=l=h;(o=i.src.indexOf("`",l))!==-1;){for(l=o+1;l<n&&i.src.charCodeAt(l)===96;)l++;if(c=l-o,c===u)return e||(a=i.push("code_inline","code",0),a.markup=r,a.content=i.src.slice(h,o).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),i.pos=l,!0;i.backticks[c]=o}return i.backticksScanned=!0,e||(i.pending+=r),i.pos+=u,!0},Ya={};Ya.tokenize=function(i,e){var t,n,r,a,o,l=i.pos,u=i.src.charCodeAt(l);if(e||u!==126||(n=i.scanDelims(i.pos,!0),a=n.length,o=String.fromCharCode(u),a<2))return!1;for(a%2&&(r=i.push("text","",0),r.content=o,a--),t=0;t<a;t+=2)r=i.push("text","",0),r.content=o+o,i.delimiters.push({marker:u,length:0,token:i.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return i.pos+=n.length,!0};function tc(d,i){var e,t,n,r,a,o=[],l=i.length;for(e=0;e<l;e++)n=i[e],n.marker===126&&n.end!==-1&&(r=i[n.end],a=d.tokens[n.token],a.type="s_open",a.tag="s",a.nesting=1,a.markup="~~",a.content="",a=d.tokens[r.token],a.type="s_close",a.tag="s",a.nesting=-1,a.markup="~~",a.content="",d.tokens[r.token-1].type==="text"&&d.tokens[r.token-1].content==="~"&&o.push(r.token-1));for(;o.length;){for(e=o.pop(),t=e+1;t<d.tokens.length&&d.tokens[t].type==="s_close";)t++;t--,e!==t&&(a=d.tokens[t],d.tokens[t]=d.tokens[e],d.tokens[e]=a)}}Ya.postProcess=function(i){var e,t=i.tokens_meta,n=i.tokens_meta.length;for(tc(i,i.delimiters),e=0;e<n;e++)t[e]&&t[e].delimiters&&tc(i,t[e].delimiters)};var Xa={};Xa.tokenize=function(i,e){var t,n,r,a=i.pos,o=i.src.charCodeAt(a);if(e||o!==95&&o!==42)return!1;for(n=i.scanDelims(i.pos,o===42),t=0;t<n.length;t++)r=i.push("text","",0),r.content=String.fromCharCode(o),i.delimiters.push({marker:o,length:n.length,token:i.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return i.pos+=n.length,!0};function nc(d,i){var e,t,n,r,a,o,l=i.length;for(e=l-1;e>=0;e--)t=i[e],!(t.marker!==95&&t.marker!==42)&&t.end!==-1&&(n=i[t.end],o=e>0&&i[e-1].end===t.end+1&&i[e-1].marker===t.marker&&i[e-1].token===t.token-1&&i[t.end+1].token===n.token+1,a=String.fromCharCode(t.marker),r=d.tokens[t.token],r.type=o?"strong_open":"em_open",r.tag=o?"strong":"em",r.nesting=1,r.markup=o?a+a:a,r.content="",r=d.tokens[n.token],r.type=o?"strong_close":"em_close",r.tag=o?"strong":"em",r.nesting=-1,r.markup=o?a+a:a,r.content="",o&&(d.tokens[i[e-1].token].content="",d.tokens[i[t.end+1].token].content="",e--))}Xa.postProcess=function(i){var e,t=i.tokens_meta,n=i.tokens_meta.length;for(nc(i,i.delimiters),e=0;e<n;e++)t[e]&&t[e].delimiters&&nc(i,t[e].delimiters)};var Cg=rt.normalizeReference,bs=rt.isSpace,_g=function(i,e){var t,n,r,a,o,l,u,c,h,v="",g="",p=i.pos,b=i.posMax,y=i.pos,k=!0;if(i.src.charCodeAt(i.pos)!==91||(o=i.pos+1,a=i.md.helpers.parseLinkLabel(i,i.pos,!0),a<0))return!1;if(l=a+1,l<b&&i.src.charCodeAt(l)===40){for(k=!1,l++;l<b&&(n=i.src.charCodeAt(l),!(!bs(n)&&n!==10));l++);if(l>=b)return!1;if(y=l,u=i.md.helpers.parseLinkDestination(i.src,l,i.posMax),u.ok){for(v=i.md.normalizeLink(u.str),i.md.validateLink(v)?l=u.pos:v="",y=l;l<b&&(n=i.src.charCodeAt(l),!(!bs(n)&&n!==10));l++);if(u=i.md.helpers.parseLinkTitle(i.src,l,i.posMax),l<b&&y!==l&&u.ok)for(g=u.str,l=u.pos;l<b&&(n=i.src.charCodeAt(l),!(!bs(n)&&n!==10));l++);}(l>=b||i.src.charCodeAt(l)!==41)&&(k=!0),l++}if(k){if(typeof i.env.references=="undefined")return!1;if(l<b&&i.src.charCodeAt(l)===91?(y=l+1,l=i.md.helpers.parseLinkLabel(i,l),l>=0?r=i.src.slice(y,l++):l=a+1):l=a+1,r||(r=i.src.slice(o,a)),c=i.env.references[Cg(r)],!c)return i.pos=p,!1;v=c.href,g=c.title}return e||(i.pos=o,i.posMax=a,h=i.push("link_open","a",1),h.attrs=t=[["href",v]],g&&t.push(["title",g]),i.linkLevel++,i.md.inline.tokenize(i),i.linkLevel--,h=i.push("link_close","a",-1)),i.pos=l,i.posMax=b,!0},Ag=rt.normalizeReference,ys=rt.isSpace,Tg=function(i,e){var t,n,r,a,o,l,u,c,h,v,g,p,b,y="",k=i.pos,E=i.posMax;if(i.src.charCodeAt(i.pos)!==33||i.src.charCodeAt(i.pos+1)!==91||(l=i.pos+2,o=i.md.helpers.parseLinkLabel(i,i.pos+1,!1),o<0))return!1;if(u=o+1,u<E&&i.src.charCodeAt(u)===40){for(u++;u<E&&(n=i.src.charCodeAt(u),!(!ys(n)&&n!==10));u++);if(u>=E)return!1;for(b=u,h=i.md.helpers.parseLinkDestination(i.src,u,i.posMax),h.ok&&(y=i.md.normalizeLink(h.str),i.md.validateLink(y)?u=h.pos:y=""),b=u;u<E&&(n=i.src.charCodeAt(u),!(!ys(n)&&n!==10));u++);if(h=i.md.helpers.parseLinkTitle(i.src,u,i.posMax),u<E&&b!==u&&h.ok)for(v=h.str,u=h.pos;u<E&&(n=i.src.charCodeAt(u),!(!ys(n)&&n!==10));u++);else v="";if(u>=E||i.src.charCodeAt(u)!==41)return i.pos=k,!1;u++}else{if(typeof i.env.references=="undefined")return!1;if(u<E&&i.src.charCodeAt(u)===91?(b=u+1,u=i.md.helpers.parseLinkLabel(i,u),u>=0?a=i.src.slice(b,u++):u=o+1):u=o+1,a||(a=i.src.slice(l,o)),c=i.env.references[Ag(a)],!c)return i.pos=k,!1;y=c.href,v=c.title}return e||(r=i.src.slice(l,o),i.md.inline.parse(r,i.md,i.env,p=[]),g=i.push("image","img",0),g.attrs=t=[["src",y],["alt",""]],g.children=p,g.content=r,v&&t.push(["title",v])),i.pos=u,i.posMax=E,!0},Sg=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Ng=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,Rg=function(i,e){var t,n,r,a,o,l,u=i.pos;if(i.src.charCodeAt(u)!==60)return!1;for(o=i.pos,l=i.posMax;;){if(++u>=l||(a=i.src.charCodeAt(u),a===60))return!1;if(a===62)break}return t=i.src.slice(o+1,u),Ng.test(t)?(n=i.md.normalizeLink(t),i.md.validateLink(n)?(e||(r=i.push("link_open","a",1),r.attrs=[["href",n]],r.markup="autolink",r.info="auto",r=i.push("text","",0),r.content=i.md.normalizeLinkText(t),r=i.push("link_close","a",-1),r.markup="autolink",r.info="auto"),i.pos+=t.length+2,!0):!1):Sg.test(t)?(n=i.md.normalizeLink("mailto:"+t),i.md.validateLink(n)?(e||(r=i.push("link_open","a",1),r.attrs=[["href",n]],r.markup="autolink",r.info="auto",r=i.push("text","",0),r.content=i.md.normalizeLinkText(t),r=i.push("link_close","a",-1),r.markup="autolink",r.info="auto"),i.pos+=t.length+2,!0):!1):!1},Dg=Wa.HTML_TAG_RE;function Og(d){return/^<a[>\s]/i.test(d)}function qg(d){return/^<\/a\s*>/i.test(d)}function Ig(d){var i=d|32;return i>=97&&i<=122}var Lg=function(i,e){var t,n,r,a,o=i.pos;return!i.md.options.html||(r=i.posMax,i.src.charCodeAt(o)!==60||o+2>=r)||(t=i.src.charCodeAt(o+1),t!==33&&t!==63&&t!==47&&!Ig(t))||(n=i.src.slice(o).match(Dg),!n)?!1:(e||(a=i.push("html_inline","",0),a.content=i.src.slice(o,o+n[0].length),Og(a.content)&&i.linkLevel++,qg(a.content)&&i.linkLevel--),i.pos+=n[0].length,!0)},rc=Au,Bg=rt.has,Mg=rt.isValidEntityCode,ic=rt.fromCodePoint,Pg=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Fg=/^&([a-z][a-z0-9]{1,31});/i,zg=function(i,e){var t,n,r,a,o=i.pos,l=i.posMax;if(i.src.charCodeAt(o)!==38||o+1>=l)return!1;if(t=i.src.charCodeAt(o+1),t===35){if(r=i.src.slice(o).match(Pg),r)return e||(n=r[1][0].toLowerCase()==="x"?parseInt(r[1].slice(1),16):parseInt(r[1],10),a=i.push("text_special","",0),a.content=Mg(n)?ic(n):ic(65533),a.markup=r[0],a.info="entity"),i.pos+=r[0].length,!0}else if(r=i.src.slice(o).match(Fg),r&&Bg(rc,r[1]))return e||(a=i.push("text_special","",0),a.content=rc[r[1]],a.markup=r[0],a.info="entity"),i.pos+=r[0].length,!0;return!1};function ac(d,i){var e,t,n,r,a,o,l,u,c={},h=i.length;if(!!h){var v=0,g=-2,p=[];for(e=0;e<h;e++)if(n=i[e],p.push(0),(i[v].marker!==n.marker||g!==n.token-1)&&(v=e),g=n.token,n.length=n.length||0,!!n.close){for(c.hasOwnProperty(n.marker)||(c[n.marker]=[-1,-1,-1,-1,-1,-1]),a=c[n.marker][(n.open?3:0)+n.length%3],t=v-p[v]-1,o=t;t>a;t-=p[t]+1)if(r=i[t],r.marker===n.marker&&r.open&&r.end<0&&(l=!1,(r.close||n.open)&&(r.length+n.length)%3===0&&(r.length%3!==0||n.length%3!==0)&&(l=!0),!l)){u=t>0&&!i[t-1].open?p[t-1]+1:0,p[e]=e-t+u,p[t]=u,n.open=!1,r.end=e,r.close=!1,o=-1,g=-2;break}o!==-1&&(c[n.marker][(n.open?3:0)+(n.length||0)%3]=o)}}}var Ug=function(i){var e,t=i.tokens_meta,n=i.tokens_meta.length;for(ac(i,i.delimiters),e=0;e<n;e++)t[e]&&t[e].delimiters&&ac(i,t[e].delimiters)},Hg=function(i){var e,t,n=0,r=i.tokens,a=i.tokens.length;for(e=t=0;e<a;e++)r[e].nesting<0&&n--,r[e].level=n,r[e].nesting>0&&n++,r[e].type==="text"&&e+1<a&&r[e+1].type==="text"?r[e+1].content=r[e].content+r[e+1].content:(e!==t&&(r[t]=r[e]),t++);e!==t&&(r.length=t)},ws=ds,oc=rt.isWhiteSpace,sc=rt.isPunctChar,lc=rt.isMdAsciiPunct;function Yi(d,i,e,t){this.src=d,this.env=e,this.md=i,this.tokens=t,this.tokens_meta=Array(t.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Yi.prototype.pushPending=function(){var d=new ws("text","",0);return d.content=this.pending,d.level=this.pendingLevel,this.tokens.push(d),this.pending="",d},Yi.prototype.push=function(d,i,e){this.pending&&this.pushPending();var t=new ws(d,i,e),n=null;return e<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),t.level=this.level,e>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],n={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(t),this.tokens_meta.push(n),t},Yi.prototype.scanDelims=function(d,i){var e=d,t,n,r,a,o,l,u,c,h,v=!0,g=!0,p=this.posMax,b=this.src.charCodeAt(d);for(t=d>0?this.src.charCodeAt(d-1):32;e<p&&this.src.charCodeAt(e)===b;)e++;return r=e-d,n=e<p?this.src.charCodeAt(e):32,u=lc(t)||sc(String.fromCharCode(t)),h=lc(n)||sc(String.fromCharCode(n)),l=oc(t),c=oc(n),c?v=!1:h&&(l||u||(v=!1)),l?g=!1:u&&(c||h||(g=!1)),i?(a=v,o=g):(a=v&&(!g||u),o=g&&(!v||h)),{can_open:a,can_close:o,length:r}},Yi.prototype.Token=ws;var Vg=Yi,uc=fs,ks=[["text",pg],["linkify",bg],["newline",wg],["escape",Eg],["backticks",xg],["strikethrough",Ya.tokenize],["emphasis",Xa.tokenize],["link",_g],["image",Tg],["autolink",Rg],["html_inline",Lg],["entity",zg]],Es=[["balance_pairs",Ug],["strikethrough",Ya.postProcess],["emphasis",Xa.postProcess],["fragments_join",Hg]];function Xi(){var d;for(this.ruler=new uc,d=0;d<ks.length;d++)this.ruler.push(ks[d][0],ks[d][1]);for(this.ruler2=new uc,d=0;d<Es.length;d++)this.ruler2.push(Es[d][0],Es[d][1])}Xi.prototype.skipToken=function(d){var i,e,t=d.pos,n=this.ruler.getRules(""),r=n.length,a=d.md.options.maxNesting,o=d.cache;if(typeof o[t]!="undefined"){d.pos=o[t];return}if(d.level<a)for(e=0;e<r&&(d.level++,i=n[e](d,!0),d.level--,!i);e++);else d.pos=d.posMax;i||d.pos++,o[t]=d.pos},Xi.prototype.tokenize=function(d){for(var i,e,t=this.ruler.getRules(""),n=t.length,r=d.posMax,a=d.md.options.maxNesting;d.pos<r;){if(d.level<a)for(e=0;e<n&&(i=t[e](d,!1),!i);e++);if(i){if(d.pos>=r)break;continue}d.pending+=d.src[d.pos++]}d.pending&&d.pushPending()},Xi.prototype.parse=function(d,i,e,t){var n,r,a,o=new this.State(d,i,e,t);for(this.tokenize(o),r=this.ruler2.getRules(""),a=r.length,n=0;n<a;n++)r[n](o)},Xi.prototype.State=Vg;var jg=Xi,Gg=function(d){var i={};d=d||{},i.src_Any=Iu.source,i.src_Cc=Lu.source,i.src_Z=Bu.source,i.src_P=cs.source,i.src_ZPCc=[i.src_Z,i.src_P,i.src_Cc].join("|"),i.src_ZCc=[i.src_Z,i.src_Cc].join("|");var e="[><\uFF5C]";return i.src_pseudo_letter="(?:(?!"+e+"|"+i.src_ZPCc+")"+i.src_Any+")",i.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",i.src_auth="(?:(?:(?!"+i.src_ZCc+"|[@/\\[\\]()]).)+@)?",i.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",i.src_host_terminator="(?=$|"+e+"|"+i.src_ZPCc+")(?!"+(d["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+i.src_ZPCc+"))",i.src_path="(?:[/?#](?:(?!"+i.src_ZCc+"|"+e+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+i.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+i.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+i.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+i.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+i.src_ZCc+"|[']).)+\\'|\\'(?="+i.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+i.src_ZCc+"|[.]|$)|"+(d["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+i.src_ZCc+"|$)|;(?!"+i.src_ZCc+"|$)|\\!+(?!"+i.src_ZCc+"|[!]|$)|\\?(?!"+i.src_ZCc+"|[?]|$))+|\\/)?",i.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',i.src_xn="xn--[a-z0-9\\-]{1,59}",i.src_domain_root="(?:"+i.src_xn+"|"+i.src_pseudo_letter+"{1,63})",i.src_domain="(?:"+i.src_xn+"|(?:"+i.src_pseudo_letter+")|(?:"+i.src_pseudo_letter+"(?:-|"+i.src_pseudo_letter+"){0,61}"+i.src_pseudo_letter+"))",i.src_host="(?:(?:(?:(?:"+i.src_domain+")\\.)*"+i.src_domain+"))",i.tpl_host_fuzzy="(?:"+i.src_ip4+"|(?:(?:(?:"+i.src_domain+")\\.)+(?:%TLDS%)))",i.tpl_host_no_ip_fuzzy="(?:(?:(?:"+i.src_domain+")\\.)+(?:%TLDS%))",i.src_host_strict=i.src_host+i.src_host_terminator,i.tpl_host_fuzzy_strict=i.tpl_host_fuzzy+i.src_host_terminator,i.src_host_port_strict=i.src_host+i.src_port+i.src_host_terminator,i.tpl_host_port_fuzzy_strict=i.tpl_host_fuzzy+i.src_port+i.src_host_terminator,i.tpl_host_port_no_ip_fuzzy_strict=i.tpl_host_no_ip_fuzzy+i.src_port+i.src_host_terminator,i.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+i.src_ZPCc+"|>|$))",i.tpl_email_fuzzy="(^|"+e+'|"|\\(|'+i.src_ZCc+")("+i.src_email_name+"@"+i.tpl_host_fuzzy_strict+")",i.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+i.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+i.tpl_host_port_fuzzy_strict+i.src_path+")",i.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+i.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+i.tpl_host_port_no_ip_fuzzy_strict+i.src_path+")",i};function xs(d){var i=Array.prototype.slice.call(arguments,1);return i.forEach(function(e){!e||Object.keys(e).forEach(function(t){d[t]=e[t]})}),d}function Ja(d){return Object.prototype.toString.call(d)}function Wg(d){return Ja(d)==="[object String]"}function Kg(d){return Ja(d)==="[object Object]"}function Zg(d){return Ja(d)==="[object RegExp]"}function cc(d){return Ja(d)==="[object Function]"}function $g(d){return d.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var fc={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Yg(d){return Object.keys(d||{}).reduce(function(i,e){return i||fc.hasOwnProperty(e)},!1)}var Xg={"http:":{validate:function(d,i,e){var t=d.slice(i);return e.re.http||(e.re.http=new RegExp("^\\/\\/"+e.re.src_auth+e.re.src_host_port_strict+e.re.src_path,"i")),e.re.http.test(t)?t.match(e.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(d,i,e){var t=d.slice(i);return e.re.no_http||(e.re.no_http=new RegExp("^"+e.re.src_auth+"(?:localhost|(?:(?:"+e.re.src_domain+")\\.)+"+e.re.src_domain_root+")"+e.re.src_port+e.re.src_host_terminator+e.re.src_path,"i")),e.re.no_http.test(t)?i>=3&&d[i-3]===":"||i>=3&&d[i-3]==="/"?0:t.match(e.re.no_http)[0].length:0}},"mailto:":{validate:function(d,i,e){var t=d.slice(i);return e.re.mailto||(e.re.mailto=new RegExp("^"+e.re.src_email_name+"@"+e.re.src_host_strict,"i")),e.re.mailto.test(t)?t.match(e.re.mailto)[0].length:0}}},Jg="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Qg="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function ep(d){d.__index__=-1,d.__text_cache__=""}function tp(d){return function(i,e){var t=i.slice(e);return d.test(t)?t.match(d)[0].length:0}}function dc(){return function(d,i){i.normalize(d)}}function Qa(d){var i=d.re=Gg(d.__opts__),e=d.__tlds__.slice();d.onCompile(),d.__tlds_replaced__||e.push(Jg),e.push(i.src_xn),i.src_tlds=e.join("|");function t(o){return o.replace("%TLDS%",i.src_tlds)}i.email_fuzzy=RegExp(t(i.tpl_email_fuzzy),"i"),i.link_fuzzy=RegExp(t(i.tpl_link_fuzzy),"i"),i.link_no_ip_fuzzy=RegExp(t(i.tpl_link_no_ip_fuzzy),"i"),i.host_fuzzy_test=RegExp(t(i.tpl_host_fuzzy_test),"i");var n=[];d.__compiled__={};function r(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(d.__schemas__).forEach(function(o){var l=d.__schemas__[o];if(l!==null){var u={validate:null,link:null};if(d.__compiled__[o]=u,Kg(l)){Zg(l.validate)?u.validate=tp(l.validate):cc(l.validate)?u.validate=l.validate:r(o,l),cc(l.normalize)?u.normalize=l.normalize:l.normalize?r(o,l):u.normalize=dc();return}if(Wg(l)){n.push(o);return}r(o,l)}}),n.forEach(function(o){!d.__compiled__[d.__schemas__[o]]||(d.__compiled__[o].validate=d.__compiled__[d.__schemas__[o]].validate,d.__compiled__[o].normalize=d.__compiled__[d.__schemas__[o]].normalize)}),d.__compiled__[""]={validate:null,normalize:dc()};var a=Object.keys(d.__compiled__).filter(function(o){return o.length>0&&d.__compiled__[o]}).map($g).join("|");d.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+i.src_ZPCc+"))("+a+")","i"),d.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+i.src_ZPCc+"))("+a+")","ig"),d.re.schema_at_start=RegExp("^"+d.re.schema_search.source,"i"),d.re.pretest=RegExp("("+d.re.schema_test.source+")|("+d.re.host_fuzzy_test.source+")|@","i"),ep(d)}function np(d,i){var e=d.__index__,t=d.__last_index__,n=d.__text_cache__.slice(e,t);this.schema=d.__schema__.toLowerCase(),this.index=e+i,this.lastIndex=t+i,this.raw=n,this.text=n,this.url=n}function Cs(d,i){var e=new np(d,i);return d.__compiled__[e.schema].normalize(e,d),e}function en(d,i){if(!(this instanceof en))return new en(d,i);i||Yg(d)&&(i=d,d={}),this.__opts__=xs({},fc,i),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=xs({},Xg,d),this.__compiled__={},this.__tlds__=Qg,this.__tlds_replaced__=!1,this.re={},Qa(this)}en.prototype.add=function(i,e){return this.__schemas__[i]=e,Qa(this),this},en.prototype.set=function(i){return this.__opts__=xs(this.__opts__,i),this},en.prototype.test=function(i){if(this.__text_cache__=i,this.__index__=-1,!i.length)return!1;var e,t,n,r,a,o,l,u,c;if(this.re.schema_test.test(i)){for(l=this.re.schema_search,l.lastIndex=0;(e=l.exec(i))!==null;)if(r=this.testSchemaAt(i,e[2],l.lastIndex),r){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+r;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=i.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(t=i.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(a=t.index+t[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=t.index+t[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=i.indexOf("@"),c>=0&&(n=i.match(this.re.email_fuzzy))!==null&&(a=n.index+n[1].length,o=n.index+n[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=o))),this.__index__>=0},en.prototype.pretest=function(i){return this.re.pretest.test(i)},en.prototype.testSchemaAt=function(i,e,t){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(i,t,this):0},en.prototype.match=function(i){var e=0,t=[];this.__index__>=0&&this.__text_cache__===i&&(t.push(Cs(this,e)),e=this.__last_index__);for(var n=e?i.slice(e):i;this.test(n);)t.push(Cs(this,e)),n=n.slice(this.__last_index__),e+=this.__last_index__;return t.length?t:null},en.prototype.matchAtStart=function(i){if(this.__text_cache__=i,this.__index__=-1,!i.length)return null;var e=this.re.schema_at_start.exec(i);if(!e)return null;var t=this.testSchemaAt(i,e[2],e[0].length);return t?(this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+t,Cs(this,0)):null},en.prototype.tlds=function(i,e){return i=Array.isArray(i)?i:[i],e?(this.__tlds__=this.__tlds__.concat(i).sort().filter(function(t,n,r){return t!==r[n-1]}).reverse(),Qa(this),this):(this.__tlds__=i.slice(),this.__tlds_replaced__=!0,Qa(this),this)},en.prototype.normalize=function(i){i.schema||(i.url="http://"+i.url),i.schema==="mailto:"&&!/^mailto:/i.test(i.url)&&(i.url="mailto:"+i.url)},en.prototype.onCompile=function(){};var rp=en;const bi=2147483647,Gn=36,_s=1,Ji=26,ip=38,ap=700,hc=72,vc=128,gc="-",op=/^xn--/,sp=/[^\0-\x7E]/,lp=/[\x2E\u3002\uFF0E\uFF61]/g,up={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},As=Gn-_s,Wn=Math.floor,Ts=String.fromCharCode;function Zr(d){throw new RangeError(up[d])}function cp(d,i){const e=[];let t=d.length;for(;t--;)e[t]=i(d[t]);return e}function pc(d,i){const e=d.split("@");let t="";e.length>1&&(t=e[0]+"@",d=e[1]),d=d.replace(lp,".");const n=d.split("."),r=cp(n,i).join(".");return t+r}function Ss(d){const i=[];let e=0;const t=d.length;for(;e<t;){const n=d.charCodeAt(e++);if(n>=55296&&n<=56319&&e<t){const r=d.charCodeAt(e++);(r&64512)==56320?i.push(((n&1023)<<10)+(r&1023)+65536):(i.push(n),e--)}else i.push(n)}return i}const mc=d=>String.fromCodePoint(...d),fp=function(d){return d-48<10?d-22:d-65<26?d-65:d-97<26?d-97:Gn},bc=function(d,i){return d+22+75*(d<26)-((i!=0)<<5)},yc=function(d,i,e){let t=0;for(d=e?Wn(d/ap):d>>1,d+=Wn(d/i);d>As*Ji>>1;t+=Gn)d=Wn(d/As);return Wn(t+(As+1)*d/(d+ip))},Ns=function(d){const i=[],e=d.length;let t=0,n=vc,r=hc,a=d.lastIndexOf(gc);a<0&&(a=0);for(let o=0;o<a;++o)d.charCodeAt(o)>=128&&Zr("not-basic"),i.push(d.charCodeAt(o));for(let o=a>0?a+1:0;o<e;){let l=t;for(let c=1,h=Gn;;h+=Gn){o>=e&&Zr("invalid-input");const v=fp(d.charCodeAt(o++));(v>=Gn||v>Wn((bi-t)/c))&&Zr("overflow"),t+=v*c;const g=h<=r?_s:h>=r+Ji?Ji:h-r;if(v<g)break;const p=Gn-g;c>Wn(bi/p)&&Zr("overflow"),c*=p}const u=i.length+1;r=yc(t-l,u,l==0),Wn(t/u)>bi-n&&Zr("overflow"),n+=Wn(t/u),t%=u,i.splice(t++,0,n)}return String.fromCodePoint(...i)},Rs=function(d){const i=[];d=Ss(d);let e=d.length,t=vc,n=0,r=hc;for(const l of d)l<128&&i.push(Ts(l));let a=i.length,o=a;for(a&&i.push(gc);o<e;){let l=bi;for(const c of d)c>=t&&c<l&&(l=c);const u=o+1;l-t>Wn((bi-n)/u)&&Zr("overflow"),n+=(l-t)*u,t=l;for(const c of d)if(c<t&&++n>bi&&Zr("overflow"),c==t){let h=n;for(let v=Gn;;v+=Gn){const g=v<=r?_s:v>=r+Ji?Ji:v-r;if(h<g)break;const p=h-g,b=Gn-g;i.push(Ts(bc(g+p%b,0))),h=Wn(p/b)}i.push(Ts(bc(h,0))),r=yc(n,u,o==a),n=0,++o}++n,++t}return i.join("")},wc=function(d){return pc(d,function(i){return op.test(i)?Ns(i.slice(4).toLowerCase()):i})},kc=function(d){return pc(d,function(i){return sp.test(i)?"xn--"+Rs(i):i})};var dp=Object.freeze(Object.defineProperty({__proto__:null,ucs2decode:Ss,ucs2encode:mc,decode:Ns,encode:Rs,toASCII:kc,toUnicode:wc,default:{version:"2.1.0",ucs2:{decode:Ss,encode:mc},decode:Ns,encode:Rs,toASCII:kc,toUnicode:wc}},Symbol.toStringTag,{value:"Module"})),hp=$i(dp),vp={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},gp={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},pp={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Qi=rt,mp=Va,bp=dv,yp=Bv,wp=vg,kp=jg,Ep=rp,$r=hi,Ec=hp,xp={default:vp,zero:gp,commonmark:pp},Cp=/^(vbscript|javascript|file|data):/,_p=/^data:image\/(gif|png|jpeg|webp);/;function Ap(d){var i=d.trim().toLowerCase();return Cp.test(i)?!!_p.test(i):!0}var xc=["http:","https:","mailto:"];function Tp(d){var i=$r.parse(d,!0);if(i.hostname&&(!i.protocol||xc.indexOf(i.protocol)>=0))try{i.hostname=Ec.toASCII(i.hostname)}catch{}return $r.encode($r.format(i))}function Sp(d){var i=$r.parse(d,!0);if(i.hostname&&(!i.protocol||xc.indexOf(i.protocol)>=0))try{i.hostname=Ec.toUnicode(i.hostname)}catch{}return $r.decode($r.format(i),$r.decode.defaultChars+"%")}function fn(d,i){if(!(this instanceof fn))return new fn(d,i);i||Qi.isString(d)||(i=d||{},d="default"),this.inline=new kp,this.block=new wp,this.core=new yp,this.renderer=new bp,this.linkify=new Ep,this.validateLink=Ap,this.normalizeLink=Tp,this.normalizeLinkText=Sp,this.utils=Qi,this.helpers=Qi.assign({},mp),this.options={},this.configure(d),i&&this.set(i)}fn.prototype.set=function(d){return Qi.assign(this.options,d),this},fn.prototype.configure=function(d){var i=this,e;if(Qi.isString(d)&&(e=d,d=xp[e],!d))throw new Error('Wrong `markdown-it` preset "'+e+'", check name');if(!d)throw new Error("Wrong `markdown-it` preset, can't be empty");return d.options&&i.set(d.options),d.components&&Object.keys(d.components).forEach(function(t){d.components[t].rules&&i[t].ruler.enableOnly(d.components[t].rules),d.components[t].rules2&&i[t].ruler2.enableOnly(d.components[t].rules2)}),this},fn.prototype.enable=function(d,i){var e=[];Array.isArray(d)||(d=[d]),["core","block","inline"].forEach(function(n){e=e.concat(this[n].ruler.enable(d,!0))},this),e=e.concat(this.inline.ruler2.enable(d,!0));var t=d.filter(function(n){return e.indexOf(n)<0});if(t.length&&!i)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+t);return this},fn.prototype.disable=function(d,i){var e=[];Array.isArray(d)||(d=[d]),["core","block","inline"].forEach(function(n){e=e.concat(this[n].ruler.disable(d,!0))},this),e=e.concat(this.inline.ruler2.disable(d,!0));var t=d.filter(function(n){return e.indexOf(n)<0});if(t.length&&!i)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+t);return this},fn.prototype.use=function(d){var i=[this].concat(Array.prototype.slice.call(arguments,1));return d.apply(d,i),this},fn.prototype.parse=function(d,i){if(typeof d!="string")throw new Error("Input data should be a String");var e=new this.core.State(d,this,i);return this.core.process(e),e.tokens},fn.prototype.render=function(d,i){return i=i||{},this.renderer.render(this.parse(d,i),this.options,i)},fn.prototype.parseInline=function(d,i){var e=new this.core.State(d,this,i);return e.inlineMode=!0,this.core.process(e),e.tokens},fn.prototype.renderInline=function(d,i){return i=i||{},this.renderer.render(this.parseInline(d,i),this.options,i)};var Np=fn,Rp=Np;function Dp(d){if(Array.isArray(d))return d}function Op(d,i){var e=d==null?null:typeof Symbol!="undefined"&&d[Symbol.iterator]||d["@@iterator"];if(e!=null){var t=[],n=!0,r=!1,a,o;try{for(e=e.call(d);!(n=(a=e.next()).done)&&(t.push(a.value),!(i&&t.length===i));n=!0);}catch(l){r=!0,o=l}finally{try{!n&&e.return!=null&&e.return()}finally{if(r)throw o}}return t}}function Ds(d,i){(i==null||i>d.length)&&(i=d.length);for(var e=0,t=new Array(i);e<i;e++)t[e]=d[e];return t}function Os(d,i){if(!!d){if(typeof d=="string")return Ds(d,i);var e=Object.prototype.toString.call(d).slice(8,-1);if(e==="Object"&&d.constructor&&(e=d.constructor.name),e==="Map"||e==="Set")return Array.from(d);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ds(d,i)}}function qp(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ea(d,i){return Dp(d)||Op(d,i)||Os(d,i)||qp()}function ta(d,i){var e=typeof Symbol!="undefined"&&d[Symbol.iterator]||d["@@iterator"];if(!e){if(Array.isArray(d)||(e=Os(d))||i&&d&&typeof d.length=="number"){e&&(d=e);var t=0,n=function(){};return{s:n,n:function(){return t>=d.length?{done:!0}:{done:!1,value:d[t++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r=!0,a=!1,o;return{s:function(){e=e.call(d)},n:function(){var u=e.next();return r=u.done,u},e:function(u){a=!0,o=u},f:function(){try{!r&&e.return!=null&&e.return()}finally{if(a)throw o}}}}var Cc={exports:{}};(function(d){(function(i){function e(x,C){var S=(x&65535)+(C&65535),O=(x>>16)+(C>>16)+(S>>16);return O<<16|S&65535}function t(x,C){return x<<C|x>>>32-C}function n(x,C,S,O,M,V){return e(t(e(e(C,x),e(O,V)),M),S)}function r(x,C,S,O,M,V,j){return n(C&S|~C&O,x,C,M,V,j)}function a(x,C,S,O,M,V,j){return n(C&O|S&~O,x,C,M,V,j)}function o(x,C,S,O,M,V,j){return n(C^S^O,x,C,M,V,j)}function l(x,C,S,O,M,V,j){return n(S^(C|~O),x,C,M,V,j)}function u(x,C){x[C>>5]|=128<<C%32,x[(C+64>>>9<<4)+14]=C;var S,O,M,V,j,P=1732584193,D=-271733879,T=-1732584194,q=271733878;for(S=0;S<x.length;S+=16)O=P,M=D,V=T,j=q,P=r(P,D,T,q,x[S],7,-680876936),q=r(q,P,D,T,x[S+1],12,-389564586),T=r(T,q,P,D,x[S+2],17,606105819),D=r(D,T,q,P,x[S+3],22,-1044525330),P=r(P,D,T,q,x[S+4],7,-176418897),q=r(q,P,D,T,x[S+5],12,1200080426),T=r(T,q,P,D,x[S+6],17,-1473231341),D=r(D,T,q,P,x[S+7],22,-45705983),P=r(P,D,T,q,x[S+8],7,1770035416),q=r(q,P,D,T,x[S+9],12,-1958414417),T=r(T,q,P,D,x[S+10],17,-42063),D=r(D,T,q,P,x[S+11],22,-1990404162),P=r(P,D,T,q,x[S+12],7,1804603682),q=r(q,P,D,T,x[S+13],12,-40341101),T=r(T,q,P,D,x[S+14],17,-1502002290),D=r(D,T,q,P,x[S+15],22,1236535329),P=a(P,D,T,q,x[S+1],5,-165796510),q=a(q,P,D,T,x[S+6],9,-1069501632),T=a(T,q,P,D,x[S+11],14,643717713),D=a(D,T,q,P,x[S],20,-373897302),P=a(P,D,T,q,x[S+5],5,-701558691),q=a(q,P,D,T,x[S+10],9,38016083),T=a(T,q,P,D,x[S+15],14,-660478335),D=a(D,T,q,P,x[S+4],20,-405537848),P=a(P,D,T,q,x[S+9],5,568446438),q=a(q,P,D,T,x[S+14],9,-1019803690),T=a(T,q,P,D,x[S+3],14,-187363961),D=a(D,T,q,P,x[S+8],20,1163531501),P=a(P,D,T,q,x[S+13],5,-1444681467),q=a(q,P,D,T,x[S+2],9,-51403784),T=a(T,q,P,D,x[S+7],14,1735328473),D=a(D,T,q,P,x[S+12],20,-1926607734),P=o(P,D,T,q,x[S+5],4,-378558),q=o(q,P,D,T,x[S+8],11,-2022574463),T=o(T,q,P,D,x[S+11],16,1839030562),D=o(D,T,q,P,x[S+14],23,-35309556),P=o(P,D,T,q,x[S+1],4,-1530992060),q=o(q,P,D,T,x[S+4],11,1272893353),T=o(T,q,P,D,x[S+7],16,-155497632),D=o(D,T,q,P,x[S+10],23,-1094730640),P=o(P,D,T,q,x[S+13],4,681279174),q=o(q,P,D,T,x[S],11,-358537222),T=o(T,q,P,D,x[S+3],16,-722521979),D=o(D,T,q,P,x[S+6],23,76029189),P=o(P,D,T,q,x[S+9],4,-640364487),q=o(q,P,D,T,x[S+12],11,-421815835),T=o(T,q,P,D,x[S+15],16,530742520),D=o(D,T,q,P,x[S+2],23,-995338651),P=l(P,D,T,q,x[S],6,-198630844),q=l(q,P,D,T,x[S+7],10,1126891415),T=l(T,q,P,D,x[S+14],15,-1416354905),D=l(D,T,q,P,x[S+5],21,-57434055),P=l(P,D,T,q,x[S+12],6,1700485571),q=l(q,P,D,T,x[S+3],10,-1894986606),T=l(T,q,P,D,x[S+10],15,-1051523),D=l(D,T,q,P,x[S+1],21,-2054922799),P=l(P,D,T,q,x[S+8],6,1873313359),q=l(q,P,D,T,x[S+15],10,-30611744),T=l(T,q,P,D,x[S+6],15,-1560198380),D=l(D,T,q,P,x[S+13],21,1309151649),P=l(P,D,T,q,x[S+4],6,-145523070),q=l(q,P,D,T,x[S+11],10,-1120210379),T=l(T,q,P,D,x[S+2],15,718787259),D=l(D,T,q,P,x[S+9],21,-343485551),P=e(P,O),D=e(D,M),T=e(T,V),q=e(q,j);return[P,D,T,q]}function c(x){var C,S="",O=x.length*32;for(C=0;C<O;C+=8)S+=String.fromCharCode(x[C>>5]>>>C%32&255);return S}function h(x){var C,S=[];for(S[(x.length>>2)-1]=void 0,C=0;C<S.length;C+=1)S[C]=0;var O=x.length*8;for(C=0;C<O;C+=8)S[C>>5]|=(x.charCodeAt(C/8)&255)<<C%32;return S}function v(x){return c(u(h(x),x.length*8))}function g(x,C){var S,O=h(x),M=[],V=[],j;for(M[15]=V[15]=void 0,O.length>16&&(O=u(O,x.length*8)),S=0;S<16;S+=1)M[S]=O[S]^909522486,V[S]=O[S]^1549556828;return j=u(M.concat(h(C)),512+C.length*8),c(u(V.concat(j),512+128))}function p(x){var C="0123456789abcdef",S="",O,M;for(M=0;M<x.length;M+=1)O=x.charCodeAt(M),S+=C.charAt(O>>>4&15)+C.charAt(O&15);return S}function b(x){return unescape(encodeURIComponent(x))}function y(x){return v(b(x))}function k(x){return p(y(x))}function E(x,C){return g(b(x),b(C))}function _(x,C){return p(E(x,C))}function A(x,C,S){return C?S?E(C,x):_(C,x):S?y(x):k(x)}d.exports?d.exports=A:i.md5=A})(Cn)})(Cc);var Ip=Cc.exports,Qe={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(d,i){(function(){var e,t="4.17.21",n=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",h=1,v=2,g=4,p=1,b=2,y=1,k=2,E=4,_=8,A=16,x=32,C=64,S=128,O=256,M=512,V=30,j="...",P=800,D=16,T=1,q=2,Z=3,ie=1/0,N=9007199254740991,F=17976931348623157e292,H=0/0,W=4294967295,Y=W-1,Q=W>>>1,re=[["ary",S],["bind",y],["bindKey",k],["curry",_],["curryRight",A],["flip",M],["partial",x],["partialRight",C],["rearg",O]],te="[object Arguments]",J="[object Array]",ne="[object AsyncFunction]",ae="[object Boolean]",fe="[object Date]",me="[object DOMException]",pe="[object Error]",ke="[object Function]",L="[object GeneratorFunction]",K="[object Map]",z="[object Number]",le="[object Null]",he="[object Object]",ge="[object Promise]",_e="[object Proxy]",Se="[object RegExp]",be="[object Set]",Ae="[object String]",et="[object Symbol]",at="[object Undefined]",Dt="[object WeakMap]",It="[object WeakSet]",tn="[object ArrayBuffer]",Vt="[object DataView]",Qn="[object Float32Array]",On="[object Float64Array]",qn="[object Int8Array]",In="[object Int16Array]",Ln="[object Int32Array]",gn="[object Uint8Array]",$t="[object Uint8ClampedArray]",Bn="[object Uint16Array]",jt="[object Uint32Array]",ni=/\b__p \+= '';/g,Mr=/\b(__p \+=) '' \+/g,mr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mn=/&(?:amp|lt|gt|quot|#39);/g,ft=/[&<>"']/g,nn=RegExp(Mn.source),Pn=RegExp(ft.source),kt=/<%-([\s\S]+?)%>/g,al=/<%([\s\S]+?)%>/g,Ri=/<%=([\s\S]+?)%>/g,da=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,co=/^\w*$/,ha=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Di=/[\\^$.*+?()[\]{}|]/g,va=RegExp(Di.source),ga=/^\s+/,fo=/\s/,ho=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pa=/\{\n\/\* \[wrapped with (.+)\] \*/,ma=/,? & /,ba=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vo=/[()=,{}\[\]\/\s]/,go=/\\(\\)?/g,Oi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ya=/\w*$/,po=/^[-+]0x[0-9a-f]+$/i,mo=/^0b[01]+$/i,bo=/^\[object .+?Constructor\]$/,qi=/^0o[0-7]+$/i,Ye=/^(?:0|[1-9]\d*)$/,Ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Be=/($^)/,br=/['\n\r\u2028\u2029\\]/g,rn="\\ud800-\\udfff",wa="\\u0300-\\u036f",ol="\\ufe20-\\ufe2f",yo="\\u20d0-\\u20ff",Ii=wa+ol+yo,ri="\\u2700-\\u27bf",hf="a-z\\xdf-\\xf6\\xf8-\\xff",Gb="\\xac\\xb1\\xd7\\xf7",Wb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Kb="\\u2000-\\u206f",Zb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vf="A-Z\\xc0-\\xd6\\xd8-\\xde",gf="\\ufe0e\\ufe0f",pf=Gb+Wb+Kb+Zb,sl="['\u2019]",$b="["+rn+"]",mf="["+pf+"]",wo="["+Ii+"]",bf="\\d+",Yb="["+ri+"]",yf="["+hf+"]",wf="[^"+rn+pf+bf+ri+hf+vf+"]",ll="\\ud83c[\\udffb-\\udfff]",Xb="(?:"+wo+"|"+ll+")",kf="[^"+rn+"]",ul="(?:\\ud83c[\\udde6-\\uddff]){2}",cl="[\\ud800-\\udbff][\\udc00-\\udfff]",Li="["+vf+"]",Ef="\\u200d",xf="(?:"+yf+"|"+wf+")",Jb="(?:"+Li+"|"+wf+")",Cf="(?:"+sl+"(?:d|ll|m|re|s|t|ve))?",_f="(?:"+sl+"(?:D|LL|M|RE|S|T|VE))?",Af=Xb+"?",Tf="["+gf+"]?",Qb="(?:"+Ef+"(?:"+[kf,ul,cl].join("|")+")"+Tf+Af+")*",ey="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ty="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sf=Tf+Af+Qb,ny="(?:"+[Yb,ul,cl].join("|")+")"+Sf,ry="(?:"+[kf+wo+"?",wo,ul,cl,$b].join("|")+")",iy=RegExp(sl,"g"),ay=RegExp(wo,"g"),fl=RegExp(ll+"(?="+ll+")|"+ry+Sf,"g"),oy=RegExp([Li+"?"+yf+"+"+Cf+"(?="+[mf,Li,"$"].join("|")+")",Jb+"+"+_f+"(?="+[mf,Li+xf,"$"].join("|")+")",Li+"?"+xf+"+"+Cf,Li+"+"+_f,ty,ey,bf,ny].join("|"),"g"),sy=RegExp("["+Ef+rn+Ii+gf+"]"),ly=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,uy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],cy=-1,vt={};vt[Qn]=vt[On]=vt[qn]=vt[In]=vt[Ln]=vt[gn]=vt[$t]=vt[Bn]=vt[jt]=!0,vt[te]=vt[J]=vt[tn]=vt[ae]=vt[Vt]=vt[fe]=vt[pe]=vt[ke]=vt[K]=vt[z]=vt[he]=vt[Se]=vt[be]=vt[Ae]=vt[Dt]=!1;var dt={};dt[te]=dt[J]=dt[tn]=dt[Vt]=dt[ae]=dt[fe]=dt[Qn]=dt[On]=dt[qn]=dt[In]=dt[Ln]=dt[K]=dt[z]=dt[he]=dt[Se]=dt[be]=dt[Ae]=dt[et]=dt[gn]=dt[$t]=dt[Bn]=dt[jt]=!0,dt[pe]=dt[ke]=dt[Dt]=!1;var fy={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},dy={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hy={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},vy={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},gy=parseFloat,py=parseInt,Nf=typeof Cn=="object"&&Cn&&Cn.Object===Object&&Cn,my=typeof self=="object"&&self&&self.Object===Object&&self,Lt=Nf||my||Function("return this")(),dl=i&&!i.nodeType&&i,ii=dl&&!0&&d&&!d.nodeType&&d,Rf=ii&&ii.exports===dl,hl=Rf&&Nf.process,pn=function(){try{var X=ii&&ii.require&&ii.require("util").types;return X||hl&&hl.binding&&hl.binding("util")}catch{}}(),Df=pn&&pn.isArrayBuffer,Of=pn&&pn.isDate,qf=pn&&pn.isMap,If=pn&&pn.isRegExp,Lf=pn&&pn.isSet,Bf=pn&&pn.isTypedArray;function an(X,se,oe){switch(oe.length){case 0:return X.call(se);case 1:return X.call(se,oe[0]);case 2:return X.call(se,oe[0],oe[1]);case 3:return X.call(se,oe[0],oe[1],oe[2])}return X.apply(se,oe)}function by(X,se,oe,xe){for(var Me=-1,it=X==null?0:X.length;++Me<it;){var St=X[Me];se(xe,St,oe(St),X)}return xe}function mn(X,se){for(var oe=-1,xe=X==null?0:X.length;++oe<xe&&se(X[oe],oe,X)!==!1;);return X}function yy(X,se){for(var oe=X==null?0:X.length;oe--&&se(X[oe],oe,X)!==!1;);return X}function Mf(X,se){for(var oe=-1,xe=X==null?0:X.length;++oe<xe;)if(!se(X[oe],oe,X))return!1;return!0}function Pr(X,se){for(var oe=-1,xe=X==null?0:X.length,Me=0,it=[];++oe<xe;){var St=X[oe];se(St,oe,X)&&(it[Me++]=St)}return it}function ko(X,se){var oe=X==null?0:X.length;return!!oe&&Bi(X,se,0)>-1}function vl(X,se,oe){for(var xe=-1,Me=X==null?0:X.length;++xe<Me;)if(oe(se,X[xe]))return!0;return!1}function pt(X,se){for(var oe=-1,xe=X==null?0:X.length,Me=Array(xe);++oe<xe;)Me[oe]=se(X[oe],oe,X);return Me}function Fr(X,se){for(var oe=-1,xe=se.length,Me=X.length;++oe<xe;)X[Me+oe]=se[oe];return X}function gl(X,se,oe,xe){var Me=-1,it=X==null?0:X.length;for(xe&&it&&(oe=X[++Me]);++Me<it;)oe=se(oe,X[Me],Me,X);return oe}function wy(X,se,oe,xe){var Me=X==null?0:X.length;for(xe&&Me&&(oe=X[--Me]);Me--;)oe=se(oe,X[Me],Me,X);return oe}function pl(X,se){for(var oe=-1,xe=X==null?0:X.length;++oe<xe;)if(se(X[oe],oe,X))return!0;return!1}var ky=ml("length");function Ey(X){return X.split("")}function xy(X){return X.match(ba)||[]}function Pf(X,se,oe){var xe;return oe(X,function(Me,it,St){if(se(Me,it,St))return xe=it,!1}),xe}function Eo(X,se,oe,xe){for(var Me=X.length,it=oe+(xe?1:-1);xe?it--:++it<Me;)if(se(X[it],it,X))return it;return-1}function Bi(X,se,oe){return se===se?Ly(X,se,oe):Eo(X,Ff,oe)}function Cy(X,se,oe,xe){for(var Me=oe-1,it=X.length;++Me<it;)if(xe(X[Me],se))return Me;return-1}function Ff(X){return X!==X}function zf(X,se){var oe=X==null?0:X.length;return oe?yl(X,se)/oe:H}function ml(X){return function(se){return se==null?e:se[X]}}function bl(X){return function(se){return X==null?e:X[se]}}function Uf(X,se,oe,xe,Me){return Me(X,function(it,St,ct){oe=xe?(xe=!1,it):se(oe,it,St,ct)}),oe}function _y(X,se){var oe=X.length;for(X.sort(se);oe--;)X[oe]=X[oe].value;return X}function yl(X,se){for(var oe,xe=-1,Me=X.length;++xe<Me;){var it=se(X[xe]);it!==e&&(oe=oe===e?it:oe+it)}return oe}function wl(X,se){for(var oe=-1,xe=Array(X);++oe<X;)xe[oe]=se(oe);return xe}function Ay(X,se){return pt(se,function(oe){return[oe,X[oe]]})}function Hf(X){return X&&X.slice(0,Wf(X)+1).replace(ga,"")}function on(X){return function(se){return X(se)}}function kl(X,se){return pt(se,function(oe){return X[oe]})}function ka(X,se){return X.has(se)}function Vf(X,se){for(var oe=-1,xe=X.length;++oe<xe&&Bi(se,X[oe],0)>-1;);return oe}function jf(X,se){for(var oe=X.length;oe--&&Bi(se,X[oe],0)>-1;);return oe}function Ty(X,se){for(var oe=X.length,xe=0;oe--;)X[oe]===se&&++xe;return xe}var Sy=bl(fy),Ny=bl(dy);function Ry(X){return"\\"+vy[X]}function Dy(X,se){return X==null?e:X[se]}function Mi(X){return sy.test(X)}function Oy(X){return ly.test(X)}function qy(X){for(var se,oe=[];!(se=X.next()).done;)oe.push(se.value);return oe}function El(X){var se=-1,oe=Array(X.size);return X.forEach(function(xe,Me){oe[++se]=[Me,xe]}),oe}function Gf(X,se){return function(oe){return X(se(oe))}}function zr(X,se){for(var oe=-1,xe=X.length,Me=0,it=[];++oe<xe;){var St=X[oe];(St===se||St===c)&&(X[oe]=c,it[Me++]=oe)}return it}function xo(X){var se=-1,oe=Array(X.size);return X.forEach(function(xe){oe[++se]=xe}),oe}function Iy(X){var se=-1,oe=Array(X.size);return X.forEach(function(xe){oe[++se]=[xe,xe]}),oe}function Ly(X,se,oe){for(var xe=oe-1,Me=X.length;++xe<Me;)if(X[xe]===se)return xe;return-1}function By(X,se,oe){for(var xe=oe+1;xe--;)if(X[xe]===se)return xe;return xe}function Pi(X){return Mi(X)?Py(X):ky(X)}function Fn(X){return Mi(X)?Fy(X):Ey(X)}function Wf(X){for(var se=X.length;se--&&fo.test(X.charAt(se)););return se}var My=bl(hy);function Py(X){for(var se=fl.lastIndex=0;fl.test(X);)++se;return se}function Fy(X){return X.match(fl)||[]}function zy(X){return X.match(oy)||[]}var Uy=function X(se){se=se==null?Lt:Fi.defaults(Lt.Object(),se,Fi.pick(Lt,uy));var oe=se.Array,xe=se.Date,Me=se.Error,it=se.Function,St=se.Math,ct=se.Object,xl=se.RegExp,Hy=se.String,bn=se.TypeError,Co=oe.prototype,Vy=it.prototype,zi=ct.prototype,_o=se["__core-js_shared__"],Ao=Vy.toString,st=zi.hasOwnProperty,jy=0,Kf=function(){var s=/[^.]+$/.exec(_o&&_o.keys&&_o.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),To=zi.toString,Gy=Ao.call(ct),Wy=Lt._,Ky=xl("^"+Ao.call(st).replace(Di,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),So=Rf?se.Buffer:e,Ur=se.Symbol,No=se.Uint8Array,Zf=So?So.allocUnsafe:e,Ro=Gf(ct.getPrototypeOf,ct),$f=ct.create,Yf=zi.propertyIsEnumerable,Do=Co.splice,Xf=Ur?Ur.isConcatSpreadable:e,Ea=Ur?Ur.iterator:e,ai=Ur?Ur.toStringTag:e,Oo=function(){try{var s=ci(ct,"defineProperty");return s({},"",{}),s}catch{}}(),Zy=se.clearTimeout!==Lt.clearTimeout&&se.clearTimeout,$y=xe&&xe.now!==Lt.Date.now&&xe.now,Yy=se.setTimeout!==Lt.setTimeout&&se.setTimeout,qo=St.ceil,Io=St.floor,Cl=ct.getOwnPropertySymbols,Xy=So?So.isBuffer:e,Jf=se.isFinite,Jy=Co.join,Qy=Gf(ct.keys,ct),Nt=St.max,Pt=St.min,ew=xe.now,tw=se.parseInt,Qf=St.random,nw=Co.reverse,_l=ci(se,"DataView"),xa=ci(se,"Map"),Al=ci(se,"Promise"),Ui=ci(se,"Set"),Ca=ci(se,"WeakMap"),_a=ci(ct,"create"),Lo=Ca&&new Ca,Hi={},rw=fi(_l),iw=fi(xa),aw=fi(Al),ow=fi(Ui),sw=fi(Ca),Bo=Ur?Ur.prototype:e,Aa=Bo?Bo.valueOf:e,ed=Bo?Bo.toString:e;function I(s){if(Et(s)&&!Fe(s)&&!(s instanceof tt)){if(s instanceof yn)return s;if(st.call(s,"__wrapped__"))return th(s)}return new yn(s)}var Vi=function(){function s(){}return function(f){if(!mt(f))return{};if($f)return $f(f);s.prototype=f;var m=new s;return s.prototype=e,m}}();function Mo(){}function yn(s,f){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=e}I.templateSettings={escape:kt,evaluate:al,interpolate:Ri,variable:"",imports:{_:I}},I.prototype=Mo.prototype,I.prototype.constructor=I,yn.prototype=Vi(Mo.prototype),yn.prototype.constructor=yn;function tt(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function lw(){var s=new tt(this.__wrapped__);return s.__actions__=Yt(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Yt(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Yt(this.__views__),s}function uw(){if(this.__filtered__){var s=new tt(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function cw(){var s=this.__wrapped__.value(),f=this.__dir__,m=Fe(s),w=f<0,R=m?s.length:0,B=E1(0,R,this.__views__),G=B.start,$=B.end,ee=$-G,ue=w?$:G-1,ce=this.__iteratees__,de=ce.length,Ee=0,Te=Pt(ee,this.__takeCount__);if(!m||!w&&R==ee&&Te==ee)return Cd(s,this.__actions__);var Re=[];e:for(;ee--&&Ee<Te;){ue+=f;for(var je=-1,De=s[ue];++je<de;){var Xe=ce[je],nt=Xe.iteratee,un=Xe.type,Kt=nt(De);if(un==q)De=Kt;else if(!Kt){if(un==T)continue e;break e}}Re[Ee++]=De}return Re}tt.prototype=Vi(Mo.prototype),tt.prototype.constructor=tt;function oi(s){var f=-1,m=s==null?0:s.length;for(this.clear();++f<m;){var w=s[f];this.set(w[0],w[1])}}function fw(){this.__data__=_a?_a(null):{},this.size=0}function dw(s){var f=this.has(s)&&delete this.__data__[s];return this.size-=f?1:0,f}function hw(s){var f=this.__data__;if(_a){var m=f[s];return m===l?e:m}return st.call(f,s)?f[s]:e}function vw(s){var f=this.__data__;return _a?f[s]!==e:st.call(f,s)}function gw(s,f){var m=this.__data__;return this.size+=this.has(s)?0:1,m[s]=_a&&f===e?l:f,this}oi.prototype.clear=fw,oi.prototype.delete=dw,oi.prototype.get=hw,oi.prototype.has=vw,oi.prototype.set=gw;function yr(s){var f=-1,m=s==null?0:s.length;for(this.clear();++f<m;){var w=s[f];this.set(w[0],w[1])}}function pw(){this.__data__=[],this.size=0}function mw(s){var f=this.__data__,m=Po(f,s);if(m<0)return!1;var w=f.length-1;return m==w?f.pop():Do.call(f,m,1),--this.size,!0}function bw(s){var f=this.__data__,m=Po(f,s);return m<0?e:f[m][1]}function yw(s){return Po(this.__data__,s)>-1}function ww(s,f){var m=this.__data__,w=Po(m,s);return w<0?(++this.size,m.push([s,f])):m[w][1]=f,this}yr.prototype.clear=pw,yr.prototype.delete=mw,yr.prototype.get=bw,yr.prototype.has=yw,yr.prototype.set=ww;function wr(s){var f=-1,m=s==null?0:s.length;for(this.clear();++f<m;){var w=s[f];this.set(w[0],w[1])}}function kw(){this.size=0,this.__data__={hash:new oi,map:new(xa||yr),string:new oi}}function Ew(s){var f=Yo(this,s).delete(s);return this.size-=f?1:0,f}function xw(s){return Yo(this,s).get(s)}function Cw(s){return Yo(this,s).has(s)}function _w(s,f){var m=Yo(this,s),w=m.size;return m.set(s,f),this.size+=m.size==w?0:1,this}wr.prototype.clear=kw,wr.prototype.delete=Ew,wr.prototype.get=xw,wr.prototype.has=Cw,wr.prototype.set=_w;function si(s){var f=-1,m=s==null?0:s.length;for(this.__data__=new wr;++f<m;)this.add(s[f])}function Aw(s){return this.__data__.set(s,l),this}function Tw(s){return this.__data__.has(s)}si.prototype.add=si.prototype.push=Aw,si.prototype.has=Tw;function zn(s){var f=this.__data__=new yr(s);this.size=f.size}function Sw(){this.__data__=new yr,this.size=0}function Nw(s){var f=this.__data__,m=f.delete(s);return this.size=f.size,m}function Rw(s){return this.__data__.get(s)}function Dw(s){return this.__data__.has(s)}function Ow(s,f){var m=this.__data__;if(m instanceof yr){var w=m.__data__;if(!xa||w.length<n-1)return w.push([s,f]),this.size=++m.size,this;m=this.__data__=new wr(w)}return m.set(s,f),this.size=m.size,this}zn.prototype.clear=Sw,zn.prototype.delete=Nw,zn.prototype.get=Rw,zn.prototype.has=Dw,zn.prototype.set=Ow;function td(s,f){var m=Fe(s),w=!m&&di(s),R=!m&&!w&&Wr(s),B=!m&&!w&&!R&&Ki(s),G=m||w||R||B,$=G?wl(s.length,Hy):[],ee=$.length;for(var ue in s)(f||st.call(s,ue))&&!(G&&(ue=="length"||R&&(ue=="offset"||ue=="parent")||B&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Cr(ue,ee)))&&$.push(ue);return $}function nd(s){var f=s.length;return f?s[Ml(0,f-1)]:e}function qw(s,f){return Xo(Yt(s),li(f,0,s.length))}function Iw(s){return Xo(Yt(s))}function Tl(s,f,m){(m!==e&&!Un(s[f],m)||m===e&&!(f in s))&&kr(s,f,m)}function Ta(s,f,m){var w=s[f];(!(st.call(s,f)&&Un(w,m))||m===e&&!(f in s))&&kr(s,f,m)}function Po(s,f){for(var m=s.length;m--;)if(Un(s[m][0],f))return m;return-1}function Lw(s,f,m,w){return Hr(s,function(R,B,G){f(w,R,m(R),G)}),w}function rd(s,f){return s&&tr(f,Ot(f),s)}function Bw(s,f){return s&&tr(f,Jt(f),s)}function kr(s,f,m){f=="__proto__"&&Oo?Oo(s,f,{configurable:!0,enumerable:!0,value:m,writable:!0}):s[f]=m}function Sl(s,f){for(var m=-1,w=f.length,R=oe(w),B=s==null;++m<w;)R[m]=B?e:lu(s,f[m]);return R}function li(s,f,m){return s===s&&(m!==e&&(s=s<=m?s:m),f!==e&&(s=s>=f?s:f)),s}function wn(s,f,m,w,R,B){var G,$=f&h,ee=f&v,ue=f&g;if(m&&(G=R?m(s,w,R,B):m(s)),G!==e)return G;if(!mt(s))return s;var ce=Fe(s);if(ce){if(G=C1(s),!$)return Yt(s,G)}else{var de=Ft(s),Ee=de==ke||de==L;if(Wr(s))return Td(s,$);if(de==he||de==te||Ee&&!R){if(G=ee||Ee?{}:Wd(s),!$)return ee?h1(s,Bw(G,s)):d1(s,rd(G,s))}else{if(!dt[de])return R?s:{};G=_1(s,de,$)}}B||(B=new zn);var Te=B.get(s);if(Te)return Te;B.set(s,G),kh(s)?s.forEach(function(De){G.add(wn(De,f,m,De,s,B))}):yh(s)&&s.forEach(function(De,Xe){G.set(Xe,wn(De,f,m,Xe,s,B))});var Re=ue?ee?Zl:Kl:ee?Jt:Ot,je=ce?e:Re(s);return mn(je||s,function(De,Xe){je&&(Xe=De,De=s[Xe]),Ta(G,Xe,wn(De,f,m,Xe,s,B))}),G}function Mw(s){var f=Ot(s);return function(m){return id(m,s,f)}}function id(s,f,m){var w=m.length;if(s==null)return!w;for(s=ct(s);w--;){var R=m[w],B=f[R],G=s[R];if(G===e&&!(R in s)||!B(G))return!1}return!0}function ad(s,f,m){if(typeof s!="function")throw new bn(a);return Ia(function(){s.apply(e,m)},f)}function Sa(s,f,m,w){var R=-1,B=ko,G=!0,$=s.length,ee=[],ue=f.length;if(!$)return ee;m&&(f=pt(f,on(m))),w?(B=vl,G=!1):f.length>=n&&(B=ka,G=!1,f=new si(f));e:for(;++R<$;){var ce=s[R],de=m==null?ce:m(ce);if(ce=w||ce!==0?ce:0,G&&de===de){for(var Ee=ue;Ee--;)if(f[Ee]===de)continue e;ee.push(ce)}else B(f,de,w)||ee.push(ce)}return ee}var Hr=Od(er),od=Od(Rl,!0);function Pw(s,f){var m=!0;return Hr(s,function(w,R,B){return m=!!f(w,R,B),m}),m}function Fo(s,f,m){for(var w=-1,R=s.length;++w<R;){var B=s[w],G=f(B);if(G!=null&&($===e?G===G&&!ln(G):m(G,$)))var $=G,ee=B}return ee}function Fw(s,f,m,w){var R=s.length;for(m=ze(m),m<0&&(m=-m>R?0:R+m),w=w===e||w>R?R:ze(w),w<0&&(w+=R),w=m>w?0:xh(w);m<w;)s[m++]=f;return s}function sd(s,f){var m=[];return Hr(s,function(w,R,B){f(w,R,B)&&m.push(w)}),m}function Bt(s,f,m,w,R){var B=-1,G=s.length;for(m||(m=T1),R||(R=[]);++B<G;){var $=s[B];f>0&&m($)?f>1?Bt($,f-1,m,w,R):Fr(R,$):w||(R[R.length]=$)}return R}var Nl=qd(),ld=qd(!0);function er(s,f){return s&&Nl(s,f,Ot)}function Rl(s,f){return s&&ld(s,f,Ot)}function zo(s,f){return Pr(f,function(m){return _r(s[m])})}function ui(s,f){f=jr(f,s);for(var m=0,w=f.length;s!=null&&m<w;)s=s[nr(f[m++])];return m&&m==w?s:e}function ud(s,f,m){var w=f(s);return Fe(s)?w:Fr(w,m(s))}function Gt(s){return s==null?s===e?at:le:ai&&ai in ct(s)?k1(s):I1(s)}function Dl(s,f){return s>f}function zw(s,f){return s!=null&&st.call(s,f)}function Uw(s,f){return s!=null&&f in ct(s)}function Hw(s,f,m){return s>=Pt(f,m)&&s<Nt(f,m)}function Ol(s,f,m){for(var w=m?vl:ko,R=s[0].length,B=s.length,G=B,$=oe(B),ee=1/0,ue=[];G--;){var ce=s[G];G&&f&&(ce=pt(ce,on(f))),ee=Pt(ce.length,ee),$[G]=!m&&(f||R>=120&&ce.length>=120)?new si(G&&ce):e}ce=s[0];var de=-1,Ee=$[0];e:for(;++de<R&&ue.length<ee;){var Te=ce[de],Re=f?f(Te):Te;if(Te=m||Te!==0?Te:0,!(Ee?ka(Ee,Re):w(ue,Re,m))){for(G=B;--G;){var je=$[G];if(!(je?ka(je,Re):w(s[G],Re,m)))continue e}Ee&&Ee.push(Re),ue.push(Te)}}return ue}function Vw(s,f,m,w){return er(s,function(R,B,G){f(w,m(R),B,G)}),w}function Na(s,f,m){f=jr(f,s),s=Yd(s,f);var w=s==null?s:s[nr(En(f))];return w==null?e:an(w,s,m)}function cd(s){return Et(s)&&Gt(s)==te}function jw(s){return Et(s)&&Gt(s)==tn}function Gw(s){return Et(s)&&Gt(s)==fe}function Ra(s,f,m,w,R){return s===f?!0:s==null||f==null||!Et(s)&&!Et(f)?s!==s&&f!==f:Ww(s,f,m,w,Ra,R)}function Ww(s,f,m,w,R,B){var G=Fe(s),$=Fe(f),ee=G?J:Ft(s),ue=$?J:Ft(f);ee=ee==te?he:ee,ue=ue==te?he:ue;var ce=ee==he,de=ue==he,Ee=ee==ue;if(Ee&&Wr(s)){if(!Wr(f))return!1;G=!0,ce=!1}if(Ee&&!ce)return B||(B=new zn),G||Ki(s)?Vd(s,f,m,w,R,B):y1(s,f,ee,m,w,R,B);if(!(m&p)){var Te=ce&&st.call(s,"__wrapped__"),Re=de&&st.call(f,"__wrapped__");if(Te||Re){var je=Te?s.value():s,De=Re?f.value():f;return B||(B=new zn),R(je,De,m,w,B)}}return Ee?(B||(B=new zn),w1(s,f,m,w,R,B)):!1}function Kw(s){return Et(s)&&Ft(s)==K}function ql(s,f,m,w){var R=m.length,B=R,G=!w;if(s==null)return!B;for(s=ct(s);R--;){var $=m[R];if(G&&$[2]?$[1]!==s[$[0]]:!($[0]in s))return!1}for(;++R<B;){$=m[R];var ee=$[0],ue=s[ee],ce=$[1];if(G&&$[2]){if(ue===e&&!(ee in s))return!1}else{var de=new zn;if(w)var Ee=w(ue,ce,ee,s,f,de);if(!(Ee===e?Ra(ce,ue,p|b,w,de):Ee))return!1}}return!0}function fd(s){if(!mt(s)||N1(s))return!1;var f=_r(s)?Ky:bo;return f.test(fi(s))}function Zw(s){return Et(s)&&Gt(s)==Se}function $w(s){return Et(s)&&Ft(s)==be}function Yw(s){return Et(s)&&rs(s.length)&&!!vt[Gt(s)]}function dd(s){return typeof s=="function"?s:s==null?Qt:typeof s=="object"?Fe(s)?gd(s[0],s[1]):vd(s):Ih(s)}function Il(s){if(!qa(s))return Qy(s);var f=[];for(var m in ct(s))st.call(s,m)&&m!="constructor"&&f.push(m);return f}function Xw(s){if(!mt(s))return q1(s);var f=qa(s),m=[];for(var w in s)w=="constructor"&&(f||!st.call(s,w))||m.push(w);return m}function Ll(s,f){return s<f}function hd(s,f){var m=-1,w=Xt(s)?oe(s.length):[];return Hr(s,function(R,B,G){w[++m]=f(R,B,G)}),w}function vd(s){var f=Yl(s);return f.length==1&&f[0][2]?Zd(f[0][0],f[0][1]):function(m){return m===s||ql(m,s,f)}}function gd(s,f){return Jl(s)&&Kd(f)?Zd(nr(s),f):function(m){var w=lu(m,s);return w===e&&w===f?uu(m,s):Ra(f,w,p|b)}}function Uo(s,f,m,w,R){s!==f&&Nl(f,function(B,G){if(R||(R=new zn),mt(B))Jw(s,f,G,m,Uo,w,R);else{var $=w?w(eu(s,G),B,G+"",s,f,R):e;$===e&&($=B),Tl(s,G,$)}},Jt)}function Jw(s,f,m,w,R,B,G){var $=eu(s,m),ee=eu(f,m),ue=G.get(ee);if(ue){Tl(s,m,ue);return}var ce=B?B($,ee,m+"",s,f,G):e,de=ce===e;if(de){var Ee=Fe(ee),Te=!Ee&&Wr(ee),Re=!Ee&&!Te&&Ki(ee);ce=ee,Ee||Te||Re?Fe($)?ce=$:Ct($)?ce=Yt($):Te?(de=!1,ce=Td(ee,!0)):Re?(de=!1,ce=Sd(ee,!0)):ce=[]:La(ee)||di(ee)?(ce=$,di($)?ce=Ch($):(!mt($)||_r($))&&(ce=Wd(ee))):de=!1}de&&(G.set(ee,ce),R(ce,ee,w,B,G),G.delete(ee)),Tl(s,m,ce)}function pd(s,f){var m=s.length;if(!!m)return f+=f<0?m:0,Cr(f,m)?s[f]:e}function md(s,f,m){f.length?f=pt(f,function(B){return Fe(B)?function(G){return ui(G,B.length===1?B[0]:B)}:B}):f=[Qt];var w=-1;f=pt(f,on(Ne()));var R=hd(s,function(B,G,$){var ee=pt(f,function(ue){return ue(B)});return{criteria:ee,index:++w,value:B}});return _y(R,function(B,G){return f1(B,G,m)})}function Qw(s,f){return bd(s,f,function(m,w){return uu(s,w)})}function bd(s,f,m){for(var w=-1,R=f.length,B={};++w<R;){var G=f[w],$=ui(s,G);m($,G)&&Da(B,jr(G,s),$)}return B}function e1(s){return function(f){return ui(f,s)}}function Bl(s,f,m,w){var R=w?Cy:Bi,B=-1,G=f.length,$=s;for(s===f&&(f=Yt(f)),m&&($=pt(s,on(m)));++B<G;)for(var ee=0,ue=f[B],ce=m?m(ue):ue;(ee=R($,ce,ee,w))>-1;)$!==s&&Do.call($,ee,1),Do.call(s,ee,1);return s}function yd(s,f){for(var m=s?f.length:0,w=m-1;m--;){var R=f[m];if(m==w||R!==B){var B=R;Cr(R)?Do.call(s,R,1):zl(s,R)}}return s}function Ml(s,f){return s+Io(Qf()*(f-s+1))}function t1(s,f,m,w){for(var R=-1,B=Nt(qo((f-s)/(m||1)),0),G=oe(B);B--;)G[w?B:++R]=s,s+=m;return G}function Pl(s,f){var m="";if(!s||f<1||f>N)return m;do f%2&&(m+=s),f=Io(f/2),f&&(s+=s);while(f);return m}function Ze(s,f){return tu($d(s,f,Qt),s+"")}function n1(s){return nd(Zi(s))}function r1(s,f){var m=Zi(s);return Xo(m,li(f,0,m.length))}function Da(s,f,m,w){if(!mt(s))return s;f=jr(f,s);for(var R=-1,B=f.length,G=B-1,$=s;$!=null&&++R<B;){var ee=nr(f[R]),ue=m;if(ee==="__proto__"||ee==="constructor"||ee==="prototype")return s;if(R!=G){var ce=$[ee];ue=w?w(ce,ee,$):e,ue===e&&(ue=mt(ce)?ce:Cr(f[R+1])?[]:{})}Ta($,ee,ue),$=$[ee]}return s}var wd=Lo?function(s,f){return Lo.set(s,f),s}:Qt,i1=Oo?function(s,f){return Oo(s,"toString",{configurable:!0,enumerable:!1,value:fu(f),writable:!0})}:Qt;function a1(s){return Xo(Zi(s))}function kn(s,f,m){var w=-1,R=s.length;f<0&&(f=-f>R?0:R+f),m=m>R?R:m,m<0&&(m+=R),R=f>m?0:m-f>>>0,f>>>=0;for(var B=oe(R);++w<R;)B[w]=s[w+f];return B}function o1(s,f){var m;return Hr(s,function(w,R,B){return m=f(w,R,B),!m}),!!m}function Ho(s,f,m){var w=0,R=s==null?w:s.length;if(typeof f=="number"&&f===f&&R<=Q){for(;w<R;){var B=w+R>>>1,G=s[B];G!==null&&!ln(G)&&(m?G<=f:G<f)?w=B+1:R=B}return R}return Fl(s,f,Qt,m)}function Fl(s,f,m,w){var R=0,B=s==null?0:s.length;if(B===0)return 0;f=m(f);for(var G=f!==f,$=f===null,ee=ln(f),ue=f===e;R<B;){var ce=Io((R+B)/2),de=m(s[ce]),Ee=de!==e,Te=de===null,Re=de===de,je=ln(de);if(G)var De=w||Re;else ue?De=Re&&(w||Ee):$?De=Re&&Ee&&(w||!Te):ee?De=Re&&Ee&&!Te&&(w||!je):Te||je?De=!1:De=w?de<=f:de<f;De?R=ce+1:B=ce}return Pt(B,Y)}function kd(s,f){for(var m=-1,w=s.length,R=0,B=[];++m<w;){var G=s[m],$=f?f(G):G;if(!m||!Un($,ee)){var ee=$;B[R++]=G===0?0:G}}return B}function Ed(s){return typeof s=="number"?s:ln(s)?H:+s}function sn(s){if(typeof s=="string")return s;if(Fe(s))return pt(s,sn)+"";if(ln(s))return ed?ed.call(s):"";var f=s+"";return f=="0"&&1/s==-ie?"-0":f}function Vr(s,f,m){var w=-1,R=ko,B=s.length,G=!0,$=[],ee=$;if(m)G=!1,R=vl;else if(B>=n){var ue=f?null:m1(s);if(ue)return xo(ue);G=!1,R=ka,ee=new si}else ee=f?[]:$;e:for(;++w<B;){var ce=s[w],de=f?f(ce):ce;if(ce=m||ce!==0?ce:0,G&&de===de){for(var Ee=ee.length;Ee--;)if(ee[Ee]===de)continue e;f&&ee.push(de),$.push(ce)}else R(ee,de,m)||(ee!==$&&ee.push(de),$.push(ce))}return $}function zl(s,f){return f=jr(f,s),s=Yd(s,f),s==null||delete s[nr(En(f))]}function xd(s,f,m,w){return Da(s,f,m(ui(s,f)),w)}function Vo(s,f,m,w){for(var R=s.length,B=w?R:-1;(w?B--:++B<R)&&f(s[B],B,s););return m?kn(s,w?0:B,w?B+1:R):kn(s,w?B+1:0,w?R:B)}function Cd(s,f){var m=s;return m instanceof tt&&(m=m.value()),gl(f,function(w,R){return R.func.apply(R.thisArg,Fr([w],R.args))},m)}function Ul(s,f,m){var w=s.length;if(w<2)return w?Vr(s[0]):[];for(var R=-1,B=oe(w);++R<w;)for(var G=s[R],$=-1;++$<w;)$!=R&&(B[R]=Sa(B[R]||G,s[$],f,m));return Vr(Bt(B,1),f,m)}function _d(s,f,m){for(var w=-1,R=s.length,B=f.length,G={};++w<R;){var $=w<B?f[w]:e;m(G,s[w],$)}return G}function Hl(s){return Ct(s)?s:[]}function Vl(s){return typeof s=="function"?s:Qt}function jr(s,f){return Fe(s)?s:Jl(s,f)?[s]:eh(ot(s))}var s1=Ze;function Gr(s,f,m){var w=s.length;return m=m===e?w:m,!f&&m>=w?s:kn(s,f,m)}var Ad=Zy||function(s){return Lt.clearTimeout(s)};function Td(s,f){if(f)return s.slice();var m=s.length,w=Zf?Zf(m):new s.constructor(m);return s.copy(w),w}function jl(s){var f=new s.constructor(s.byteLength);return new No(f).set(new No(s)),f}function l1(s,f){var m=f?jl(s.buffer):s.buffer;return new s.constructor(m,s.byteOffset,s.byteLength)}function u1(s){var f=new s.constructor(s.source,ya.exec(s));return f.lastIndex=s.lastIndex,f}function c1(s){return Aa?ct(Aa.call(s)):{}}function Sd(s,f){var m=f?jl(s.buffer):s.buffer;return new s.constructor(m,s.byteOffset,s.length)}function Nd(s,f){if(s!==f){var m=s!==e,w=s===null,R=s===s,B=ln(s),G=f!==e,$=f===null,ee=f===f,ue=ln(f);if(!$&&!ue&&!B&&s>f||B&&G&&ee&&!$&&!ue||w&&G&&ee||!m&&ee||!R)return 1;if(!w&&!B&&!ue&&s<f||ue&&m&&R&&!w&&!B||$&&m&&R||!G&&R||!ee)return-1}return 0}function f1(s,f,m){for(var w=-1,R=s.criteria,B=f.criteria,G=R.length,$=m.length;++w<G;){var ee=Nd(R[w],B[w]);if(ee){if(w>=$)return ee;var ue=m[w];return ee*(ue=="desc"?-1:1)}}return s.index-f.index}function Rd(s,f,m,w){for(var R=-1,B=s.length,G=m.length,$=-1,ee=f.length,ue=Nt(B-G,0),ce=oe(ee+ue),de=!w;++$<ee;)ce[$]=f[$];for(;++R<G;)(de||R<B)&&(ce[m[R]]=s[R]);for(;ue--;)ce[$++]=s[R++];return ce}function Dd(s,f,m,w){for(var R=-1,B=s.length,G=-1,$=m.length,ee=-1,ue=f.length,ce=Nt(B-$,0),de=oe(ce+ue),Ee=!w;++R<ce;)de[R]=s[R];for(var Te=R;++ee<ue;)de[Te+ee]=f[ee];for(;++G<$;)(Ee||R<B)&&(de[Te+m[G]]=s[R++]);return de}function Yt(s,f){var m=-1,w=s.length;for(f||(f=oe(w));++m<w;)f[m]=s[m];return f}function tr(s,f,m,w){var R=!m;m||(m={});for(var B=-1,G=f.length;++B<G;){var $=f[B],ee=w?w(m[$],s[$],$,m,s):e;ee===e&&(ee=s[$]),R?kr(m,$,ee):Ta(m,$,ee)}return m}function d1(s,f){return tr(s,Xl(s),f)}function h1(s,f){return tr(s,jd(s),f)}function jo(s,f){return function(m,w){var R=Fe(m)?by:Lw,B=f?f():{};return R(m,s,Ne(w,2),B)}}function ji(s){return Ze(function(f,m){var w=-1,R=m.length,B=R>1?m[R-1]:e,G=R>2?m[2]:e;for(B=s.length>3&&typeof B=="function"?(R--,B):e,G&&Wt(m[0],m[1],G)&&(B=R<3?e:B,R=1),f=ct(f);++w<R;){var $=m[w];$&&s(f,$,w,B)}return f})}function Od(s,f){return function(m,w){if(m==null)return m;if(!Xt(m))return s(m,w);for(var R=m.length,B=f?R:-1,G=ct(m);(f?B--:++B<R)&&w(G[B],B,G)!==!1;);return m}}function qd(s){return function(f,m,w){for(var R=-1,B=ct(f),G=w(f),$=G.length;$--;){var ee=G[s?$:++R];if(m(B[ee],ee,B)===!1)break}return f}}function v1(s,f,m){var w=f&y,R=Oa(s);function B(){var G=this&&this!==Lt&&this instanceof B?R:s;return G.apply(w?m:this,arguments)}return B}function Id(s){return function(f){f=ot(f);var m=Mi(f)?Fn(f):e,w=m?m[0]:f.charAt(0),R=m?Gr(m,1).join(""):f.slice(1);return w[s]()+R}}function Gi(s){return function(f){return gl(Oh(Dh(f).replace(iy,"")),s,"")}}function Oa(s){return function(){var f=arguments;switch(f.length){case 0:return new s;case 1:return new s(f[0]);case 2:return new s(f[0],f[1]);case 3:return new s(f[0],f[1],f[2]);case 4:return new s(f[0],f[1],f[2],f[3]);case 5:return new s(f[0],f[1],f[2],f[3],f[4]);case 6:return new s(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new s(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var m=Vi(s.prototype),w=s.apply(m,f);return mt(w)?w:m}}function g1(s,f,m){var w=Oa(s);function R(){for(var B=arguments.length,G=oe(B),$=B,ee=Wi(R);$--;)G[$]=arguments[$];var ue=B<3&&G[0]!==ee&&G[B-1]!==ee?[]:zr(G,ee);if(B-=ue.length,B<m)return Fd(s,f,Go,R.placeholder,e,G,ue,e,e,m-B);var ce=this&&this!==Lt&&this instanceof R?w:s;return an(ce,this,G)}return R}function Ld(s){return function(f,m,w){var R=ct(f);if(!Xt(f)){var B=Ne(m,3);f=Ot(f),m=function($){return B(R[$],$,R)}}var G=s(f,m,w);return G>-1?R[B?f[G]:G]:e}}function Bd(s){return xr(function(f){var m=f.length,w=m,R=yn.prototype.thru;for(s&&f.reverse();w--;){var B=f[w];if(typeof B!="function")throw new bn(a);if(R&&!G&&$o(B)=="wrapper")var G=new yn([],!0)}for(w=G?w:m;++w<m;){B=f[w];var $=$o(B),ee=$=="wrapper"?$l(B):e;ee&&Ql(ee[0])&&ee[1]==(S|_|x|O)&&!ee[4].length&&ee[9]==1?G=G[$o(ee[0])].apply(G,ee[3]):G=B.length==1&&Ql(B)?G[$]():G.thru(B)}return function(){var ue=arguments,ce=ue[0];if(G&&ue.length==1&&Fe(ce))return G.plant(ce).value();for(var de=0,Ee=m?f[de].apply(this,ue):ce;++de<m;)Ee=f[de].call(this,Ee);return Ee}})}function Go(s,f,m,w,R,B,G,$,ee,ue){var ce=f&S,de=f&y,Ee=f&k,Te=f&(_|A),Re=f&M,je=Ee?e:Oa(s);function De(){for(var Xe=arguments.length,nt=oe(Xe),un=Xe;un--;)nt[un]=arguments[un];if(Te)var Kt=Wi(De),cn=Ty(nt,Kt);if(w&&(nt=Rd(nt,w,R,Te)),B&&(nt=Dd(nt,B,G,Te)),Xe-=cn,Te&&Xe<ue){var _t=zr(nt,Kt);return Fd(s,f,Go,De.placeholder,m,nt,_t,$,ee,ue-Xe)}var Hn=de?m:this,Tr=Ee?Hn[s]:s;return Xe=nt.length,$?nt=L1(nt,$):Re&&Xe>1&&nt.reverse(),ce&&ee<Xe&&(nt.length=ee),this&&this!==Lt&&this instanceof De&&(Tr=je||Oa(Tr)),Tr.apply(Hn,nt)}return De}function Md(s,f){return function(m,w){return Vw(m,s,f(w),{})}}function Wo(s,f){return function(m,w){var R;if(m===e&&w===e)return f;if(m!==e&&(R=m),w!==e){if(R===e)return w;typeof m=="string"||typeof w=="string"?(m=sn(m),w=sn(w)):(m=Ed(m),w=Ed(w)),R=s(m,w)}return R}}function Gl(s){return xr(function(f){return f=pt(f,on(Ne())),Ze(function(m){var w=this;return s(f,function(R){return an(R,w,m)})})})}function Ko(s,f){f=f===e?" ":sn(f);var m=f.length;if(m<2)return m?Pl(f,s):f;var w=Pl(f,qo(s/Pi(f)));return Mi(f)?Gr(Fn(w),0,s).join(""):w.slice(0,s)}function p1(s,f,m,w){var R=f&y,B=Oa(s);function G(){for(var $=-1,ee=arguments.length,ue=-1,ce=w.length,de=oe(ce+ee),Ee=this&&this!==Lt&&this instanceof G?B:s;++ue<ce;)de[ue]=w[ue];for(;ee--;)de[ue++]=arguments[++$];return an(Ee,R?m:this,de)}return G}function Pd(s){return function(f,m,w){return w&&typeof w!="number"&&Wt(f,m,w)&&(m=w=e),f=Ar(f),m===e?(m=f,f=0):m=Ar(m),w=w===e?f<m?1:-1:Ar(w),t1(f,m,w,s)}}function Zo(s){return function(f,m){return typeof f=="string"&&typeof m=="string"||(f=xn(f),m=xn(m)),s(f,m)}}function Fd(s,f,m,w,R,B,G,$,ee,ue){var ce=f&_,de=ce?G:e,Ee=ce?e:G,Te=ce?B:e,Re=ce?e:B;f|=ce?x:C,f&=~(ce?C:x),f&E||(f&=~(y|k));var je=[s,f,R,Te,de,Re,Ee,$,ee,ue],De=m.apply(e,je);return Ql(s)&&Xd(De,je),De.placeholder=w,Jd(De,s,f)}function Wl(s){var f=St[s];return function(m,w){if(m=xn(m),w=w==null?0:Pt(ze(w),292),w&&Jf(m)){var R=(ot(m)+"e").split("e"),B=f(R[0]+"e"+(+R[1]+w));return R=(ot(B)+"e").split("e"),+(R[0]+"e"+(+R[1]-w))}return f(m)}}var m1=Ui&&1/xo(new Ui([,-0]))[1]==ie?function(s){return new Ui(s)}:vu;function zd(s){return function(f){var m=Ft(f);return m==K?El(f):m==be?Iy(f):Ay(f,s(f))}}function Er(s,f,m,w,R,B,G,$){var ee=f&k;if(!ee&&typeof s!="function")throw new bn(a);var ue=w?w.length:0;if(ue||(f&=~(x|C),w=R=e),G=G===e?G:Nt(ze(G),0),$=$===e?$:ze($),ue-=R?R.length:0,f&C){var ce=w,de=R;w=R=e}var Ee=ee?e:$l(s),Te=[s,f,m,w,R,ce,de,B,G,$];if(Ee&&O1(Te,Ee),s=Te[0],f=Te[1],m=Te[2],w=Te[3],R=Te[4],$=Te[9]=Te[9]===e?ee?0:s.length:Nt(Te[9]-ue,0),!$&&f&(_|A)&&(f&=~(_|A)),!f||f==y)var Re=v1(s,f,m);else f==_||f==A?Re=g1(s,f,$):(f==x||f==(y|x))&&!R.length?Re=p1(s,f,m,w):Re=Go.apply(e,Te);var je=Ee?wd:Xd;return Jd(je(Re,Te),s,f)}function Ud(s,f,m,w){return s===e||Un(s,zi[m])&&!st.call(w,m)?f:s}function Hd(s,f,m,w,R,B){return mt(s)&&mt(f)&&(B.set(f,s),Uo(s,f,e,Hd,B),B.delete(f)),s}function b1(s){return La(s)?e:s}function Vd(s,f,m,w,R,B){var G=m&p,$=s.length,ee=f.length;if($!=ee&&!(G&&ee>$))return!1;var ue=B.get(s),ce=B.get(f);if(ue&&ce)return ue==f&&ce==s;var de=-1,Ee=!0,Te=m&b?new si:e;for(B.set(s,f),B.set(f,s);++de<$;){var Re=s[de],je=f[de];if(w)var De=G?w(je,Re,de,f,s,B):w(Re,je,de,s,f,B);if(De!==e){if(De)continue;Ee=!1;break}if(Te){if(!pl(f,function(Xe,nt){if(!ka(Te,nt)&&(Re===Xe||R(Re,Xe,m,w,B)))return Te.push(nt)})){Ee=!1;break}}else if(!(Re===je||R(Re,je,m,w,B))){Ee=!1;break}}return B.delete(s),B.delete(f),Ee}function y1(s,f,m,w,R,B,G){switch(m){case Vt:if(s.byteLength!=f.byteLength||s.byteOffset!=f.byteOffset)return!1;s=s.buffer,f=f.buffer;case tn:return!(s.byteLength!=f.byteLength||!B(new No(s),new No(f)));case ae:case fe:case z:return Un(+s,+f);case pe:return s.name==f.name&&s.message==f.message;case Se:case Ae:return s==f+"";case K:var $=El;case be:var ee=w&p;if($||($=xo),s.size!=f.size&&!ee)return!1;var ue=G.get(s);if(ue)return ue==f;w|=b,G.set(s,f);var ce=Vd($(s),$(f),w,R,B,G);return G.delete(s),ce;case et:if(Aa)return Aa.call(s)==Aa.call(f)}return!1}function w1(s,f,m,w,R,B){var G=m&p,$=Kl(s),ee=$.length,ue=Kl(f),ce=ue.length;if(ee!=ce&&!G)return!1;for(var de=ee;de--;){var Ee=$[de];if(!(G?Ee in f:st.call(f,Ee)))return!1}var Te=B.get(s),Re=B.get(f);if(Te&&Re)return Te==f&&Re==s;var je=!0;B.set(s,f),B.set(f,s);for(var De=G;++de<ee;){Ee=$[de];var Xe=s[Ee],nt=f[Ee];if(w)var un=G?w(nt,Xe,Ee,f,s,B):w(Xe,nt,Ee,s,f,B);if(!(un===e?Xe===nt||R(Xe,nt,m,w,B):un)){je=!1;break}De||(De=Ee=="constructor")}if(je&&!De){var Kt=s.constructor,cn=f.constructor;Kt!=cn&&"constructor"in s&&"constructor"in f&&!(typeof Kt=="function"&&Kt instanceof Kt&&typeof cn=="function"&&cn instanceof cn)&&(je=!1)}return B.delete(s),B.delete(f),je}function xr(s){return tu($d(s,e,ih),s+"")}function Kl(s){return ud(s,Ot,Xl)}function Zl(s){return ud(s,Jt,jd)}var $l=Lo?function(s){return Lo.get(s)}:vu;function $o(s){for(var f=s.name+"",m=Hi[f],w=st.call(Hi,f)?m.length:0;w--;){var R=m[w],B=R.func;if(B==null||B==s)return R.name}return f}function Wi(s){var f=st.call(I,"placeholder")?I:s;return f.placeholder}function Ne(){var s=I.iteratee||du;return s=s===du?dd:s,arguments.length?s(arguments[0],arguments[1]):s}function Yo(s,f){var m=s.__data__;return S1(f)?m[typeof f=="string"?"string":"hash"]:m.map}function Yl(s){for(var f=Ot(s),m=f.length;m--;){var w=f[m],R=s[w];f[m]=[w,R,Kd(R)]}return f}function ci(s,f){var m=Dy(s,f);return fd(m)?m:e}function k1(s){var f=st.call(s,ai),m=s[ai];try{s[ai]=e;var w=!0}catch{}var R=To.call(s);return w&&(f?s[ai]=m:delete s[ai]),R}var Xl=Cl?function(s){return s==null?[]:(s=ct(s),Pr(Cl(s),function(f){return Yf.call(s,f)}))}:gu,jd=Cl?function(s){for(var f=[];s;)Fr(f,Xl(s)),s=Ro(s);return f}:gu,Ft=Gt;(_l&&Ft(new _l(new ArrayBuffer(1)))!=Vt||xa&&Ft(new xa)!=K||Al&&Ft(Al.resolve())!=ge||Ui&&Ft(new Ui)!=be||Ca&&Ft(new Ca)!=Dt)&&(Ft=function(s){var f=Gt(s),m=f==he?s.constructor:e,w=m?fi(m):"";if(w)switch(w){case rw:return Vt;case iw:return K;case aw:return ge;case ow:return be;case sw:return Dt}return f});function E1(s,f,m){for(var w=-1,R=m.length;++w<R;){var B=m[w],G=B.size;switch(B.type){case"drop":s+=G;break;case"dropRight":f-=G;break;case"take":f=Pt(f,s+G);break;case"takeRight":s=Nt(s,f-G);break}}return{start:s,end:f}}function x1(s){var f=s.match(pa);return f?f[1].split(ma):[]}function Gd(s,f,m){f=jr(f,s);for(var w=-1,R=f.length,B=!1;++w<R;){var G=nr(f[w]);if(!(B=s!=null&&m(s,G)))break;s=s[G]}return B||++w!=R?B:(R=s==null?0:s.length,!!R&&rs(R)&&Cr(G,R)&&(Fe(s)||di(s)))}function C1(s){var f=s.length,m=new s.constructor(f);return f&&typeof s[0]=="string"&&st.call(s,"index")&&(m.index=s.index,m.input=s.input),m}function Wd(s){return typeof s.constructor=="function"&&!qa(s)?Vi(Ro(s)):{}}function _1(s,f,m){var w=s.constructor;switch(f){case tn:return jl(s);case ae:case fe:return new w(+s);case Vt:return l1(s,m);case Qn:case On:case qn:case In:case Ln:case gn:case $t:case Bn:case jt:return Sd(s,m);case K:return new w;case z:case Ae:return new w(s);case Se:return u1(s);case be:return new w;case et:return c1(s)}}function A1(s,f){var m=f.length;if(!m)return s;var w=m-1;return f[w]=(m>1?"& ":"")+f[w],f=f.join(m>2?", ":" "),s.replace(ho,`{
/* [wrapped with `+f+`] */
`)}function T1(s){return Fe(s)||di(s)||!!(Xf&&s&&s[Xf])}function Cr(s,f){var m=typeof s;return f=f==null?N:f,!!f&&(m=="number"||m!="symbol"&&Ye.test(s))&&s>-1&&s%1==0&&s<f}function Wt(s,f,m){if(!mt(m))return!1;var w=typeof f;return(w=="number"?Xt(m)&&Cr(f,m.length):w=="string"&&f in m)?Un(m[f],s):!1}function Jl(s,f){if(Fe(s))return!1;var m=typeof s;return m=="number"||m=="symbol"||m=="boolean"||s==null||ln(s)?!0:co.test(s)||!da.test(s)||f!=null&&s in ct(f)}function S1(s){var f=typeof s;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?s!=="__proto__":s===null}function Ql(s){var f=$o(s),m=I[f];if(typeof m!="function"||!(f in tt.prototype))return!1;if(s===m)return!0;var w=$l(m);return!!w&&s===w[0]}function N1(s){return!!Kf&&Kf in s}var R1=_o?_r:pu;function qa(s){var f=s&&s.constructor,m=typeof f=="function"&&f.prototype||zi;return s===m}function Kd(s){return s===s&&!mt(s)}function Zd(s,f){return function(m){return m==null?!1:m[s]===f&&(f!==e||s in ct(m))}}function D1(s){var f=ts(s,function(w){return m.size===u&&m.clear(),w}),m=f.cache;return f}function O1(s,f){var m=s[1],w=f[1],R=m|w,B=R<(y|k|S),G=w==S&&m==_||w==S&&m==O&&s[7].length<=f[8]||w==(S|O)&&f[7].length<=f[8]&&m==_;if(!(B||G))return s;w&y&&(s[2]=f[2],R|=m&y?0:E);var $=f[3];if($){var ee=s[3];s[3]=ee?Rd(ee,$,f[4]):$,s[4]=ee?zr(s[3],c):f[4]}return $=f[5],$&&(ee=s[5],s[5]=ee?Dd(ee,$,f[6]):$,s[6]=ee?zr(s[5],c):f[6]),$=f[7],$&&(s[7]=$),w&S&&(s[8]=s[8]==null?f[8]:Pt(s[8],f[8])),s[9]==null&&(s[9]=f[9]),s[0]=f[0],s[1]=R,s}function q1(s){var f=[];if(s!=null)for(var m in ct(s))f.push(m);return f}function I1(s){return To.call(s)}function $d(s,f,m){return f=Nt(f===e?s.length-1:f,0),function(){for(var w=arguments,R=-1,B=Nt(w.length-f,0),G=oe(B);++R<B;)G[R]=w[f+R];R=-1;for(var $=oe(f+1);++R<f;)$[R]=w[R];return $[f]=m(G),an(s,this,$)}}function Yd(s,f){return f.length<2?s:ui(s,kn(f,0,-1))}function L1(s,f){for(var m=s.length,w=Pt(f.length,m),R=Yt(s);w--;){var B=f[w];s[w]=Cr(B,m)?R[B]:e}return s}function eu(s,f){if(!(f==="constructor"&&typeof s[f]=="function")&&f!="__proto__")return s[f]}var Xd=Qd(wd),Ia=Yy||function(s,f){return Lt.setTimeout(s,f)},tu=Qd(i1);function Jd(s,f,m){var w=f+"";return tu(s,A1(w,B1(x1(w),m)))}function Qd(s){var f=0,m=0;return function(){var w=ew(),R=D-(w-m);if(m=w,R>0){if(++f>=P)return arguments[0]}else f=0;return s.apply(e,arguments)}}function Xo(s,f){var m=-1,w=s.length,R=w-1;for(f=f===e?w:f;++m<f;){var B=Ml(m,R),G=s[B];s[B]=s[m],s[m]=G}return s.length=f,s}var eh=D1(function(s){var f=[];return s.charCodeAt(0)===46&&f.push(""),s.replace(ha,function(m,w,R,B){f.push(R?B.replace(go,"$1"):w||m)}),f});function nr(s){if(typeof s=="string"||ln(s))return s;var f=s+"";return f=="0"&&1/s==-ie?"-0":f}function fi(s){if(s!=null){try{return Ao.call(s)}catch{}try{return s+""}catch{}}return""}function B1(s,f){return mn(re,function(m){var w="_."+m[0];f&m[1]&&!ko(s,w)&&s.push(w)}),s.sort()}function th(s){if(s instanceof tt)return s.clone();var f=new yn(s.__wrapped__,s.__chain__);return f.__actions__=Yt(s.__actions__),f.__index__=s.__index__,f.__values__=s.__values__,f}function M1(s,f,m){(m?Wt(s,f,m):f===e)?f=1:f=Nt(ze(f),0);var w=s==null?0:s.length;if(!w||f<1)return[];for(var R=0,B=0,G=oe(qo(w/f));R<w;)G[B++]=kn(s,R,R+=f);return G}function P1(s){for(var f=-1,m=s==null?0:s.length,w=0,R=[];++f<m;){var B=s[f];B&&(R[w++]=B)}return R}function F1(){var s=arguments.length;if(!s)return[];for(var f=oe(s-1),m=arguments[0],w=s;w--;)f[w-1]=arguments[w];return Fr(Fe(m)?Yt(m):[m],Bt(f,1))}var z1=Ze(function(s,f){return Ct(s)?Sa(s,Bt(f,1,Ct,!0)):[]}),U1=Ze(function(s,f){var m=En(f);return Ct(m)&&(m=e),Ct(s)?Sa(s,Bt(f,1,Ct,!0),Ne(m,2)):[]}),H1=Ze(function(s,f){var m=En(f);return Ct(m)&&(m=e),Ct(s)?Sa(s,Bt(f,1,Ct,!0),e,m):[]});function V1(s,f,m){var w=s==null?0:s.length;return w?(f=m||f===e?1:ze(f),kn(s,f<0?0:f,w)):[]}function j1(s,f,m){var w=s==null?0:s.length;return w?(f=m||f===e?1:ze(f),f=w-f,kn(s,0,f<0?0:f)):[]}function G1(s,f){return s&&s.length?Vo(s,Ne(f,3),!0,!0):[]}function W1(s,f){return s&&s.length?Vo(s,Ne(f,3),!0):[]}function K1(s,f,m,w){var R=s==null?0:s.length;return R?(m&&typeof m!="number"&&Wt(s,f,m)&&(m=0,w=R),Fw(s,f,m,w)):[]}function nh(s,f,m){var w=s==null?0:s.length;if(!w)return-1;var R=m==null?0:ze(m);return R<0&&(R=Nt(w+R,0)),Eo(s,Ne(f,3),R)}function rh(s,f,m){var w=s==null?0:s.length;if(!w)return-1;var R=w-1;return m!==e&&(R=ze(m),R=m<0?Nt(w+R,0):Pt(R,w-1)),Eo(s,Ne(f,3),R,!0)}function ih(s){var f=s==null?0:s.length;return f?Bt(s,1):[]}function Z1(s){var f=s==null?0:s.length;return f?Bt(s,ie):[]}function $1(s,f){var m=s==null?0:s.length;return m?(f=f===e?1:ze(f),Bt(s,f)):[]}function Y1(s){for(var f=-1,m=s==null?0:s.length,w={};++f<m;){var R=s[f];w[R[0]]=R[1]}return w}function ah(s){return s&&s.length?s[0]:e}function X1(s,f,m){var w=s==null?0:s.length;if(!w)return-1;var R=m==null?0:ze(m);return R<0&&(R=Nt(w+R,0)),Bi(s,f,R)}function J1(s){var f=s==null?0:s.length;return f?kn(s,0,-1):[]}var Q1=Ze(function(s){var f=pt(s,Hl);return f.length&&f[0]===s[0]?Ol(f):[]}),ek=Ze(function(s){var f=En(s),m=pt(s,Hl);return f===En(m)?f=e:m.pop(),m.length&&m[0]===s[0]?Ol(m,Ne(f,2)):[]}),tk=Ze(function(s){var f=En(s),m=pt(s,Hl);return f=typeof f=="function"?f:e,f&&m.pop(),m.length&&m[0]===s[0]?Ol(m,e,f):[]});function nk(s,f){return s==null?"":Jy.call(s,f)}function En(s){var f=s==null?0:s.length;return f?s[f-1]:e}function rk(s,f,m){var w=s==null?0:s.length;if(!w)return-1;var R=w;return m!==e&&(R=ze(m),R=R<0?Nt(w+R,0):Pt(R,w-1)),f===f?By(s,f,R):Eo(s,Ff,R,!0)}function ik(s,f){return s&&s.length?pd(s,ze(f)):e}var ak=Ze(oh);function oh(s,f){return s&&s.length&&f&&f.length?Bl(s,f):s}function ok(s,f,m){return s&&s.length&&f&&f.length?Bl(s,f,Ne(m,2)):s}function sk(s,f,m){return s&&s.length&&f&&f.length?Bl(s,f,e,m):s}var lk=xr(function(s,f){var m=s==null?0:s.length,w=Sl(s,f);return yd(s,pt(f,function(R){return Cr(R,m)?+R:R}).sort(Nd)),w});function uk(s,f){var m=[];if(!(s&&s.length))return m;var w=-1,R=[],B=s.length;for(f=Ne(f,3);++w<B;){var G=s[w];f(G,w,s)&&(m.push(G),R.push(w))}return yd(s,R),m}function nu(s){return s==null?s:nw.call(s)}function ck(s,f,m){var w=s==null?0:s.length;return w?(m&&typeof m!="number"&&Wt(s,f,m)?(f=0,m=w):(f=f==null?0:ze(f),m=m===e?w:ze(m)),kn(s,f,m)):[]}function fk(s,f){return Ho(s,f)}function dk(s,f,m){return Fl(s,f,Ne(m,2))}function hk(s,f){var m=s==null?0:s.length;if(m){var w=Ho(s,f);if(w<m&&Un(s[w],f))return w}return-1}function vk(s,f){return Ho(s,f,!0)}function gk(s,f,m){return Fl(s,f,Ne(m,2),!0)}function pk(s,f){var m=s==null?0:s.length;if(m){var w=Ho(s,f,!0)-1;if(Un(s[w],f))return w}return-1}function mk(s){return s&&s.length?kd(s):[]}function bk(s,f){return s&&s.length?kd(s,Ne(f,2)):[]}function yk(s){var f=s==null?0:s.length;return f?kn(s,1,f):[]}function wk(s,f,m){return s&&s.length?(f=m||f===e?1:ze(f),kn(s,0,f<0?0:f)):[]}function kk(s,f,m){var w=s==null?0:s.length;return w?(f=m||f===e?1:ze(f),f=w-f,kn(s,f<0?0:f,w)):[]}function Ek(s,f){return s&&s.length?Vo(s,Ne(f,3),!1,!0):[]}function xk(s,f){return s&&s.length?Vo(s,Ne(f,3)):[]}var Ck=Ze(function(s){return Vr(Bt(s,1,Ct,!0))}),_k=Ze(function(s){var f=En(s);return Ct(f)&&(f=e),Vr(Bt(s,1,Ct,!0),Ne(f,2))}),Ak=Ze(function(s){var f=En(s);return f=typeof f=="function"?f:e,Vr(Bt(s,1,Ct,!0),e,f)});function Tk(s){return s&&s.length?Vr(s):[]}function Sk(s,f){return s&&s.length?Vr(s,Ne(f,2)):[]}function Nk(s,f){return f=typeof f=="function"?f:e,s&&s.length?Vr(s,e,f):[]}function ru(s){if(!(s&&s.length))return[];var f=0;return s=Pr(s,function(m){if(Ct(m))return f=Nt(m.length,f),!0}),wl(f,function(m){return pt(s,ml(m))})}function sh(s,f){if(!(s&&s.length))return[];var m=ru(s);return f==null?m:pt(m,function(w){return an(f,e,w)})}var Rk=Ze(function(s,f){return Ct(s)?Sa(s,f):[]}),Dk=Ze(function(s){return Ul(Pr(s,Ct))}),Ok=Ze(function(s){var f=En(s);return Ct(f)&&(f=e),Ul(Pr(s,Ct),Ne(f,2))}),qk=Ze(function(s){var f=En(s);return f=typeof f=="function"?f:e,Ul(Pr(s,Ct),e,f)}),Ik=Ze(ru);function Lk(s,f){return _d(s||[],f||[],Ta)}function Bk(s,f){return _d(s||[],f||[],Da)}var Mk=Ze(function(s){var f=s.length,m=f>1?s[f-1]:e;return m=typeof m=="function"?(s.pop(),m):e,sh(s,m)});function lh(s){var f=I(s);return f.__chain__=!0,f}function Pk(s,f){return f(s),s}function Jo(s,f){return f(s)}var Fk=xr(function(s){var f=s.length,m=f?s[0]:0,w=this.__wrapped__,R=function(B){return Sl(B,s)};return f>1||this.__actions__.length||!(w instanceof tt)||!Cr(m)?this.thru(R):(w=w.slice(m,+m+(f?1:0)),w.__actions__.push({func:Jo,args:[R],thisArg:e}),new yn(w,this.__chain__).thru(function(B){return f&&!B.length&&B.push(e),B}))});function zk(){return lh(this)}function Uk(){return new yn(this.value(),this.__chain__)}function Hk(){this.__values__===e&&(this.__values__=Eh(this.value()));var s=this.__index__>=this.__values__.length,f=s?e:this.__values__[this.__index__++];return{done:s,value:f}}function Vk(){return this}function jk(s){for(var f,m=this;m instanceof Mo;){var w=th(m);w.__index__=0,w.__values__=e,f?R.__wrapped__=w:f=w;var R=w;m=m.__wrapped__}return R.__wrapped__=s,f}function Gk(){var s=this.__wrapped__;if(s instanceof tt){var f=s;return this.__actions__.length&&(f=new tt(this)),f=f.reverse(),f.__actions__.push({func:Jo,args:[nu],thisArg:e}),new yn(f,this.__chain__)}return this.thru(nu)}function Wk(){return Cd(this.__wrapped__,this.__actions__)}var Kk=jo(function(s,f,m){st.call(s,m)?++s[m]:kr(s,m,1)});function Zk(s,f,m){var w=Fe(s)?Mf:Pw;return m&&Wt(s,f,m)&&(f=e),w(s,Ne(f,3))}function $k(s,f){var m=Fe(s)?Pr:sd;return m(s,Ne(f,3))}var Yk=Ld(nh),Xk=Ld(rh);function Jk(s,f){return Bt(Qo(s,f),1)}function Qk(s,f){return Bt(Qo(s,f),ie)}function eE(s,f,m){return m=m===e?1:ze(m),Bt(Qo(s,f),m)}function uh(s,f){var m=Fe(s)?mn:Hr;return m(s,Ne(f,3))}function ch(s,f){var m=Fe(s)?yy:od;return m(s,Ne(f,3))}var tE=jo(function(s,f,m){st.call(s,m)?s[m].push(f):kr(s,m,[f])});function nE(s,f,m,w){s=Xt(s)?s:Zi(s),m=m&&!w?ze(m):0;var R=s.length;return m<0&&(m=Nt(R+m,0)),is(s)?m<=R&&s.indexOf(f,m)>-1:!!R&&Bi(s,f,m)>-1}var rE=Ze(function(s,f,m){var w=-1,R=typeof f=="function",B=Xt(s)?oe(s.length):[];return Hr(s,function(G){B[++w]=R?an(f,G,m):Na(G,f,m)}),B}),iE=jo(function(s,f,m){kr(s,m,f)});function Qo(s,f){var m=Fe(s)?pt:hd;return m(s,Ne(f,3))}function aE(s,f,m,w){return s==null?[]:(Fe(f)||(f=f==null?[]:[f]),m=w?e:m,Fe(m)||(m=m==null?[]:[m]),md(s,f,m))}var oE=jo(function(s,f,m){s[m?0:1].push(f)},function(){return[[],[]]});function sE(s,f,m){var w=Fe(s)?gl:Uf,R=arguments.length<3;return w(s,Ne(f,4),m,R,Hr)}function lE(s,f,m){var w=Fe(s)?wy:Uf,R=arguments.length<3;return w(s,Ne(f,4),m,R,od)}function uE(s,f){var m=Fe(s)?Pr:sd;return m(s,ns(Ne(f,3)))}function cE(s){var f=Fe(s)?nd:n1;return f(s)}function fE(s,f,m){(m?Wt(s,f,m):f===e)?f=1:f=ze(f);var w=Fe(s)?qw:r1;return w(s,f)}function dE(s){var f=Fe(s)?Iw:a1;return f(s)}function hE(s){if(s==null)return 0;if(Xt(s))return is(s)?Pi(s):s.length;var f=Ft(s);return f==K||f==be?s.size:Il(s).length}function vE(s,f,m){var w=Fe(s)?pl:o1;return m&&Wt(s,f,m)&&(f=e),w(s,Ne(f,3))}var gE=Ze(function(s,f){if(s==null)return[];var m=f.length;return m>1&&Wt(s,f[0],f[1])?f=[]:m>2&&Wt(f[0],f[1],f[2])&&(f=[f[0]]),md(s,Bt(f,1),[])}),es=$y||function(){return Lt.Date.now()};function pE(s,f){if(typeof f!="function")throw new bn(a);return s=ze(s),function(){if(--s<1)return f.apply(this,arguments)}}function fh(s,f,m){return f=m?e:f,f=s&&f==null?s.length:f,Er(s,S,e,e,e,e,f)}function dh(s,f){var m;if(typeof f!="function")throw new bn(a);return s=ze(s),function(){return--s>0&&(m=f.apply(this,arguments)),s<=1&&(f=e),m}}var iu=Ze(function(s,f,m){var w=y;if(m.length){var R=zr(m,Wi(iu));w|=x}return Er(s,w,f,m,R)}),hh=Ze(function(s,f,m){var w=y|k;if(m.length){var R=zr(m,Wi(hh));w|=x}return Er(f,w,s,m,R)});function vh(s,f,m){f=m?e:f;var w=Er(s,_,e,e,e,e,e,f);return w.placeholder=vh.placeholder,w}function gh(s,f,m){f=m?e:f;var w=Er(s,A,e,e,e,e,e,f);return w.placeholder=gh.placeholder,w}function ph(s,f,m){var w,R,B,G,$,ee,ue=0,ce=!1,de=!1,Ee=!0;if(typeof s!="function")throw new bn(a);f=xn(f)||0,mt(m)&&(ce=!!m.leading,de="maxWait"in m,B=de?Nt(xn(m.maxWait)||0,f):B,Ee="trailing"in m?!!m.trailing:Ee);function Te(_t){var Hn=w,Tr=R;return w=R=e,ue=_t,G=s.apply(Tr,Hn),G}function Re(_t){return ue=_t,$=Ia(Xe,f),ce?Te(_t):G}function je(_t){var Hn=_t-ee,Tr=_t-ue,Lh=f-Hn;return de?Pt(Lh,B-Tr):Lh}function De(_t){var Hn=_t-ee,Tr=_t-ue;return ee===e||Hn>=f||Hn<0||de&&Tr>=B}function Xe(){var _t=es();if(De(_t))return nt(_t);$=Ia(Xe,je(_t))}function nt(_t){return $=e,Ee&&w?Te(_t):(w=R=e,G)}function un(){$!==e&&Ad($),ue=0,w=ee=R=$=e}function Kt(){return $===e?G:nt(es())}function cn(){var _t=es(),Hn=De(_t);if(w=arguments,R=this,ee=_t,Hn){if($===e)return Re(ee);if(de)return Ad($),$=Ia(Xe,f),Te(ee)}return $===e&&($=Ia(Xe,f)),G}return cn.cancel=un,cn.flush=Kt,cn}var mE=Ze(function(s,f){return ad(s,1,f)}),bE=Ze(function(s,f,m){return ad(s,xn(f)||0,m)});function yE(s){return Er(s,M)}function ts(s,f){if(typeof s!="function"||f!=null&&typeof f!="function")throw new bn(a);var m=function(){var w=arguments,R=f?f.apply(this,w):w[0],B=m.cache;if(B.has(R))return B.get(R);var G=s.apply(this,w);return m.cache=B.set(R,G)||B,G};return m.cache=new(ts.Cache||wr),m}ts.Cache=wr;function ns(s){if(typeof s!="function")throw new bn(a);return function(){var f=arguments;switch(f.length){case 0:return!s.call(this);case 1:return!s.call(this,f[0]);case 2:return!s.call(this,f[0],f[1]);case 3:return!s.call(this,f[0],f[1],f[2])}return!s.apply(this,f)}}function wE(s){return dh(2,s)}var kE=s1(function(s,f){f=f.length==1&&Fe(f[0])?pt(f[0],on(Ne())):pt(Bt(f,1),on(Ne()));var m=f.length;return Ze(function(w){for(var R=-1,B=Pt(w.length,m);++R<B;)w[R]=f[R].call(this,w[R]);return an(s,this,w)})}),au=Ze(function(s,f){var m=zr(f,Wi(au));return Er(s,x,e,f,m)}),mh=Ze(function(s,f){var m=zr(f,Wi(mh));return Er(s,C,e,f,m)}),EE=xr(function(s,f){return Er(s,O,e,e,e,f)});function xE(s,f){if(typeof s!="function")throw new bn(a);return f=f===e?f:ze(f),Ze(s,f)}function CE(s,f){if(typeof s!="function")throw new bn(a);return f=f==null?0:Nt(ze(f),0),Ze(function(m){var w=m[f],R=Gr(m,0,f);return w&&Fr(R,w),an(s,this,R)})}function _E(s,f,m){var w=!0,R=!0;if(typeof s!="function")throw new bn(a);return mt(m)&&(w="leading"in m?!!m.leading:w,R="trailing"in m?!!m.trailing:R),ph(s,f,{leading:w,maxWait:f,trailing:R})}function AE(s){return fh(s,1)}function TE(s,f){return au(Vl(f),s)}function SE(){if(!arguments.length)return[];var s=arguments[0];return Fe(s)?s:[s]}function NE(s){return wn(s,g)}function RE(s,f){return f=typeof f=="function"?f:e,wn(s,g,f)}function DE(s){return wn(s,h|g)}function OE(s,f){return f=typeof f=="function"?f:e,wn(s,h|g,f)}function qE(s,f){return f==null||id(s,f,Ot(f))}function Un(s,f){return s===f||s!==s&&f!==f}var IE=Zo(Dl),LE=Zo(function(s,f){return s>=f}),di=cd(function(){return arguments}())?cd:function(s){return Et(s)&&st.call(s,"callee")&&!Yf.call(s,"callee")},Fe=oe.isArray,BE=Df?on(Df):jw;function Xt(s){return s!=null&&rs(s.length)&&!_r(s)}function Ct(s){return Et(s)&&Xt(s)}function ME(s){return s===!0||s===!1||Et(s)&&Gt(s)==ae}var Wr=Xy||pu,PE=Of?on(Of):Gw;function FE(s){return Et(s)&&s.nodeType===1&&!La(s)}function zE(s){if(s==null)return!0;if(Xt(s)&&(Fe(s)||typeof s=="string"||typeof s.splice=="function"||Wr(s)||Ki(s)||di(s)))return!s.length;var f=Ft(s);if(f==K||f==be)return!s.size;if(qa(s))return!Il(s).length;for(var m in s)if(st.call(s,m))return!1;return!0}function UE(s,f){return Ra(s,f)}function HE(s,f,m){m=typeof m=="function"?m:e;var w=m?m(s,f):e;return w===e?Ra(s,f,e,m):!!w}function ou(s){if(!Et(s))return!1;var f=Gt(s);return f==pe||f==me||typeof s.message=="string"&&typeof s.name=="string"&&!La(s)}function VE(s){return typeof s=="number"&&Jf(s)}function _r(s){if(!mt(s))return!1;var f=Gt(s);return f==ke||f==L||f==ne||f==_e}function bh(s){return typeof s=="number"&&s==ze(s)}function rs(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=N}function mt(s){var f=typeof s;return s!=null&&(f=="object"||f=="function")}function Et(s){return s!=null&&typeof s=="object"}var yh=qf?on(qf):Kw;function jE(s,f){return s===f||ql(s,f,Yl(f))}function GE(s,f,m){return m=typeof m=="function"?m:e,ql(s,f,Yl(f),m)}function WE(s){return wh(s)&&s!=+s}function KE(s){if(R1(s))throw new Me(r);return fd(s)}function ZE(s){return s===null}function $E(s){return s==null}function wh(s){return typeof s=="number"||Et(s)&&Gt(s)==z}function La(s){if(!Et(s)||Gt(s)!=he)return!1;var f=Ro(s);if(f===null)return!0;var m=st.call(f,"constructor")&&f.constructor;return typeof m=="function"&&m instanceof m&&Ao.call(m)==Gy}var su=If?on(If):Zw;function YE(s){return bh(s)&&s>=-N&&s<=N}var kh=Lf?on(Lf):$w;function is(s){return typeof s=="string"||!Fe(s)&&Et(s)&&Gt(s)==Ae}function ln(s){return typeof s=="symbol"||Et(s)&&Gt(s)==et}var Ki=Bf?on(Bf):Yw;function XE(s){return s===e}function JE(s){return Et(s)&&Ft(s)==Dt}function QE(s){return Et(s)&&Gt(s)==It}var ex=Zo(Ll),tx=Zo(function(s,f){return s<=f});function Eh(s){if(!s)return[];if(Xt(s))return is(s)?Fn(s):Yt(s);if(Ea&&s[Ea])return qy(s[Ea]());var f=Ft(s),m=f==K?El:f==be?xo:Zi;return m(s)}function Ar(s){if(!s)return s===0?s:0;if(s=xn(s),s===ie||s===-ie){var f=s<0?-1:1;return f*F}return s===s?s:0}function ze(s){var f=Ar(s),m=f%1;return f===f?m?f-m:f:0}function xh(s){return s?li(ze(s),0,W):0}function xn(s){if(typeof s=="number")return s;if(ln(s))return H;if(mt(s)){var f=typeof s.valueOf=="function"?s.valueOf():s;s=mt(f)?f+"":f}if(typeof s!="string")return s===0?s:+s;s=Hf(s);var m=mo.test(s);return m||qi.test(s)?py(s.slice(2),m?2:8):po.test(s)?H:+s}function Ch(s){return tr(s,Jt(s))}function nx(s){return s?li(ze(s),-N,N):s===0?s:0}function ot(s){return s==null?"":sn(s)}var rx=ji(function(s,f){if(qa(f)||Xt(f)){tr(f,Ot(f),s);return}for(var m in f)st.call(f,m)&&Ta(s,m,f[m])}),_h=ji(function(s,f){tr(f,Jt(f),s)}),as=ji(function(s,f,m,w){tr(f,Jt(f),s,w)}),ix=ji(function(s,f,m,w){tr(f,Ot(f),s,w)}),ax=xr(Sl);function ox(s,f){var m=Vi(s);return f==null?m:rd(m,f)}var sx=Ze(function(s,f){s=ct(s);var m=-1,w=f.length,R=w>2?f[2]:e;for(R&&Wt(f[0],f[1],R)&&(w=1);++m<w;)for(var B=f[m],G=Jt(B),$=-1,ee=G.length;++$<ee;){var ue=G[$],ce=s[ue];(ce===e||Un(ce,zi[ue])&&!st.call(s,ue))&&(s[ue]=B[ue])}return s}),lx=Ze(function(s){return s.push(e,Hd),an(Ah,e,s)});function ux(s,f){return Pf(s,Ne(f,3),er)}function cx(s,f){return Pf(s,Ne(f,3),Rl)}function fx(s,f){return s==null?s:Nl(s,Ne(f,3),Jt)}function dx(s,f){return s==null?s:ld(s,Ne(f,3),Jt)}function hx(s,f){return s&&er(s,Ne(f,3))}function vx(s,f){return s&&Rl(s,Ne(f,3))}function gx(s){return s==null?[]:zo(s,Ot(s))}function px(s){return s==null?[]:zo(s,Jt(s))}function lu(s,f,m){var w=s==null?e:ui(s,f);return w===e?m:w}function mx(s,f){return s!=null&&Gd(s,f,zw)}function uu(s,f){return s!=null&&Gd(s,f,Uw)}var bx=Md(function(s,f,m){f!=null&&typeof f.toString!="function"&&(f=To.call(f)),s[f]=m},fu(Qt)),yx=Md(function(s,f,m){f!=null&&typeof f.toString!="function"&&(f=To.call(f)),st.call(s,f)?s[f].push(m):s[f]=[m]},Ne),wx=Ze(Na);function Ot(s){return Xt(s)?td(s):Il(s)}function Jt(s){return Xt(s)?td(s,!0):Xw(s)}function kx(s,f){var m={};return f=Ne(f,3),er(s,function(w,R,B){kr(m,f(w,R,B),w)}),m}function Ex(s,f){var m={};return f=Ne(f,3),er(s,function(w,R,B){kr(m,R,f(w,R,B))}),m}var xx=ji(function(s,f,m){Uo(s,f,m)}),Ah=ji(function(s,f,m,w){Uo(s,f,m,w)}),Cx=xr(function(s,f){var m={};if(s==null)return m;var w=!1;f=pt(f,function(B){return B=jr(B,s),w||(w=B.length>1),B}),tr(s,Zl(s),m),w&&(m=wn(m,h|v|g,b1));for(var R=f.length;R--;)zl(m,f[R]);return m});function _x(s,f){return Th(s,ns(Ne(f)))}var Ax=xr(function(s,f){return s==null?{}:Qw(s,f)});function Th(s,f){if(s==null)return{};var m=pt(Zl(s),function(w){return[w]});return f=Ne(f),bd(s,m,function(w,R){return f(w,R[0])})}function Tx(s,f,m){f=jr(f,s);var w=-1,R=f.length;for(R||(R=1,s=e);++w<R;){var B=s==null?e:s[nr(f[w])];B===e&&(w=R,B=m),s=_r(B)?B.call(s):B}return s}function Sx(s,f,m){return s==null?s:Da(s,f,m)}function Nx(s,f,m,w){return w=typeof w=="function"?w:e,s==null?s:Da(s,f,m,w)}var Sh=zd(Ot),Nh=zd(Jt);function Rx(s,f,m){var w=Fe(s),R=w||Wr(s)||Ki(s);if(f=Ne(f,4),m==null){var B=s&&s.constructor;R?m=w?new B:[]:mt(s)?m=_r(B)?Vi(Ro(s)):{}:m={}}return(R?mn:er)(s,function(G,$,ee){return f(m,G,$,ee)}),m}function Dx(s,f){return s==null?!0:zl(s,f)}function Ox(s,f,m){return s==null?s:xd(s,f,Vl(m))}function qx(s,f,m,w){return w=typeof w=="function"?w:e,s==null?s:xd(s,f,Vl(m),w)}function Zi(s){return s==null?[]:kl(s,Ot(s))}function Ix(s){return s==null?[]:kl(s,Jt(s))}function Lx(s,f,m){return m===e&&(m=f,f=e),m!==e&&(m=xn(m),m=m===m?m:0),f!==e&&(f=xn(f),f=f===f?f:0),li(xn(s),f,m)}function Bx(s,f,m){return f=Ar(f),m===e?(m=f,f=0):m=Ar(m),s=xn(s),Hw(s,f,m)}function Mx(s,f,m){if(m&&typeof m!="boolean"&&Wt(s,f,m)&&(f=m=e),m===e&&(typeof f=="boolean"?(m=f,f=e):typeof s=="boolean"&&(m=s,s=e)),s===e&&f===e?(s=0,f=1):(s=Ar(s),f===e?(f=s,s=0):f=Ar(f)),s>f){var w=s;s=f,f=w}if(m||s%1||f%1){var R=Qf();return Pt(s+R*(f-s+gy("1e-"+((R+"").length-1))),f)}return Ml(s,f)}var Px=Gi(function(s,f,m){return f=f.toLowerCase(),s+(m?Rh(f):f)});function Rh(s){return cu(ot(s).toLowerCase())}function Dh(s){return s=ot(s),s&&s.replace(Ve,Sy).replace(ay,"")}function Fx(s,f,m){s=ot(s),f=sn(f);var w=s.length;m=m===e?w:li(ze(m),0,w);var R=m;return m-=f.length,m>=0&&s.slice(m,R)==f}function zx(s){return s=ot(s),s&&Pn.test(s)?s.replace(ft,Ny):s}function Ux(s){return s=ot(s),s&&va.test(s)?s.replace(Di,"\\$&"):s}var Hx=Gi(function(s,f,m){return s+(m?"-":"")+f.toLowerCase()}),Vx=Gi(function(s,f,m){return s+(m?" ":"")+f.toLowerCase()}),jx=Id("toLowerCase");function Gx(s,f,m){s=ot(s),f=ze(f);var w=f?Pi(s):0;if(!f||w>=f)return s;var R=(f-w)/2;return Ko(Io(R),m)+s+Ko(qo(R),m)}function Wx(s,f,m){s=ot(s),f=ze(f);var w=f?Pi(s):0;return f&&w<f?s+Ko(f-w,m):s}function Kx(s,f,m){s=ot(s),f=ze(f);var w=f?Pi(s):0;return f&&w<f?Ko(f-w,m)+s:s}function Zx(s,f,m){return m||f==null?f=0:f&&(f=+f),tw(ot(s).replace(ga,""),f||0)}function $x(s,f,m){return(m?Wt(s,f,m):f===e)?f=1:f=ze(f),Pl(ot(s),f)}function Yx(){var s=arguments,f=ot(s[0]);return s.length<3?f:f.replace(s[1],s[2])}var Xx=Gi(function(s,f,m){return s+(m?"_":"")+f.toLowerCase()});function Jx(s,f,m){return m&&typeof m!="number"&&Wt(s,f,m)&&(f=m=e),m=m===e?W:m>>>0,m?(s=ot(s),s&&(typeof f=="string"||f!=null&&!su(f))&&(f=sn(f),!f&&Mi(s))?Gr(Fn(s),0,m):s.split(f,m)):[]}var Qx=Gi(function(s,f,m){return s+(m?" ":"")+cu(f)});function eC(s,f,m){return s=ot(s),m=m==null?0:li(ze(m),0,s.length),f=sn(f),s.slice(m,m+f.length)==f}function tC(s,f,m){var w=I.templateSettings;m&&Wt(s,f,m)&&(f=e),s=ot(s),f=as({},f,w,Ud);var R=as({},f.imports,w.imports,Ud),B=Ot(R),G=kl(R,B),$,ee,ue=0,ce=f.interpolate||Be,de="__p += '",Ee=xl((f.escape||Be).source+"|"+ce.source+"|"+(ce===Ri?Oi:Be).source+"|"+(f.evaluate||Be).source+"|$","g"),Te="//# sourceURL="+(st.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++cy+"]")+`
`;s.replace(Ee,function(De,Xe,nt,un,Kt,cn){return nt||(nt=un),de+=s.slice(ue,cn).replace(br,Ry),Xe&&($=!0,de+=`' +
__e(`+Xe+`) +
'`),Kt&&(ee=!0,de+=`';
`+Kt+`;
__p += '`),nt&&(de+=`' +
((__t = (`+nt+`)) == null ? '' : __t) +
'`),ue=cn+De.length,De}),de+=`';
`;var Re=st.call(f,"variable")&&f.variable;if(!Re)de=`with (obj) {
`+de+`
}
`;else if(vo.test(Re))throw new Me(o);de=(ee?de.replace(ni,""):de).replace(Mr,"$1").replace(mr,"$1;"),de="function("+(Re||"obj")+`) {
`+(Re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($?", __e = _.escape":"")+(ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+de+`return __p
}`;var je=qh(function(){return it(B,Te+"return "+de).apply(e,G)});if(je.source=de,ou(je))throw je;return je}function nC(s){return ot(s).toLowerCase()}function rC(s){return ot(s).toUpperCase()}function iC(s,f,m){if(s=ot(s),s&&(m||f===e))return Hf(s);if(!s||!(f=sn(f)))return s;var w=Fn(s),R=Fn(f),B=Vf(w,R),G=jf(w,R)+1;return Gr(w,B,G).join("")}function aC(s,f,m){if(s=ot(s),s&&(m||f===e))return s.slice(0,Wf(s)+1);if(!s||!(f=sn(f)))return s;var w=Fn(s),R=jf(w,Fn(f))+1;return Gr(w,0,R).join("")}function oC(s,f,m){if(s=ot(s),s&&(m||f===e))return s.replace(ga,"");if(!s||!(f=sn(f)))return s;var w=Fn(s),R=Vf(w,Fn(f));return Gr(w,R).join("")}function sC(s,f){var m=V,w=j;if(mt(f)){var R="separator"in f?f.separator:R;m="length"in f?ze(f.length):m,w="omission"in f?sn(f.omission):w}s=ot(s);var B=s.length;if(Mi(s)){var G=Fn(s);B=G.length}if(m>=B)return s;var $=m-Pi(w);if($<1)return w;var ee=G?Gr(G,0,$).join(""):s.slice(0,$);if(R===e)return ee+w;if(G&&($+=ee.length-$),su(R)){if(s.slice($).search(R)){var ue,ce=ee;for(R.global||(R=xl(R.source,ot(ya.exec(R))+"g")),R.lastIndex=0;ue=R.exec(ce);)var de=ue.index;ee=ee.slice(0,de===e?$:de)}}else if(s.indexOf(sn(R),$)!=$){var Ee=ee.lastIndexOf(R);Ee>-1&&(ee=ee.slice(0,Ee))}return ee+w}function lC(s){return s=ot(s),s&&nn.test(s)?s.replace(Mn,My):s}var uC=Gi(function(s,f,m){return s+(m?" ":"")+f.toUpperCase()}),cu=Id("toUpperCase");function Oh(s,f,m){return s=ot(s),f=m?e:f,f===e?Oy(s)?zy(s):xy(s):s.match(f)||[]}var qh=Ze(function(s,f){try{return an(s,e,f)}catch(m){return ou(m)?m:new Me(m)}}),cC=xr(function(s,f){return mn(f,function(m){m=nr(m),kr(s,m,iu(s[m],s))}),s});function fC(s){var f=s==null?0:s.length,m=Ne();return s=f?pt(s,function(w){if(typeof w[1]!="function")throw new bn(a);return[m(w[0]),w[1]]}):[],Ze(function(w){for(var R=-1;++R<f;){var B=s[R];if(an(B[0],this,w))return an(B[1],this,w)}})}function dC(s){return Mw(wn(s,h))}function fu(s){return function(){return s}}function hC(s,f){return s==null||s!==s?f:s}var vC=Bd(),gC=Bd(!0);function Qt(s){return s}function du(s){return dd(typeof s=="function"?s:wn(s,h))}function pC(s){return vd(wn(s,h))}function mC(s,f){return gd(s,wn(f,h))}var bC=Ze(function(s,f){return function(m){return Na(m,s,f)}}),yC=Ze(function(s,f){return function(m){return Na(s,m,f)}});function hu(s,f,m){var w=Ot(f),R=zo(f,w);m==null&&!(mt(f)&&(R.length||!w.length))&&(m=f,f=s,s=this,R=zo(f,Ot(f)));var B=!(mt(m)&&"chain"in m)||!!m.chain,G=_r(s);return mn(R,function($){var ee=f[$];s[$]=ee,G&&(s.prototype[$]=function(){var ue=this.__chain__;if(B||ue){var ce=s(this.__wrapped__),de=ce.__actions__=Yt(this.__actions__);return de.push({func:ee,args:arguments,thisArg:s}),ce.__chain__=ue,ce}return ee.apply(s,Fr([this.value()],arguments))})}),s}function wC(){return Lt._===this&&(Lt._=Wy),this}function vu(){}function kC(s){return s=ze(s),Ze(function(f){return pd(f,s)})}var EC=Gl(pt),xC=Gl(Mf),CC=Gl(pl);function Ih(s){return Jl(s)?ml(nr(s)):e1(s)}function _C(s){return function(f){return s==null?e:ui(s,f)}}var AC=Pd(),TC=Pd(!0);function gu(){return[]}function pu(){return!1}function SC(){return{}}function NC(){return""}function RC(){return!0}function DC(s,f){if(s=ze(s),s<1||s>N)return[];var m=W,w=Pt(s,W);f=Ne(f),s-=W;for(var R=wl(w,f);++m<s;)f(m);return R}function OC(s){return Fe(s)?pt(s,nr):ln(s)?[s]:Yt(eh(ot(s)))}function qC(s){var f=++jy;return ot(s)+f}var IC=Wo(function(s,f){return s+f},0),LC=Wl("ceil"),BC=Wo(function(s,f){return s/f},1),MC=Wl("floor");function PC(s){return s&&s.length?Fo(s,Qt,Dl):e}function FC(s,f){return s&&s.length?Fo(s,Ne(f,2),Dl):e}function zC(s){return zf(s,Qt)}function UC(s,f){return zf(s,Ne(f,2))}function HC(s){return s&&s.length?Fo(s,Qt,Ll):e}function VC(s,f){return s&&s.length?Fo(s,Ne(f,2),Ll):e}var jC=Wo(function(s,f){return s*f},1),GC=Wl("round"),WC=Wo(function(s,f){return s-f},0);function KC(s){return s&&s.length?yl(s,Qt):0}function ZC(s,f){return s&&s.length?yl(s,Ne(f,2)):0}return I.after=pE,I.ary=fh,I.assign=rx,I.assignIn=_h,I.assignInWith=as,I.assignWith=ix,I.at=ax,I.before=dh,I.bind=iu,I.bindAll=cC,I.bindKey=hh,I.castArray=SE,I.chain=lh,I.chunk=M1,I.compact=P1,I.concat=F1,I.cond=fC,I.conforms=dC,I.constant=fu,I.countBy=Kk,I.create=ox,I.curry=vh,I.curryRight=gh,I.debounce=ph,I.defaults=sx,I.defaultsDeep=lx,I.defer=mE,I.delay=bE,I.difference=z1,I.differenceBy=U1,I.differenceWith=H1,I.drop=V1,I.dropRight=j1,I.dropRightWhile=G1,I.dropWhile=W1,I.fill=K1,I.filter=$k,I.flatMap=Jk,I.flatMapDeep=Qk,I.flatMapDepth=eE,I.flatten=ih,I.flattenDeep=Z1,I.flattenDepth=$1,I.flip=yE,I.flow=vC,I.flowRight=gC,I.fromPairs=Y1,I.functions=gx,I.functionsIn=px,I.groupBy=tE,I.initial=J1,I.intersection=Q1,I.intersectionBy=ek,I.intersectionWith=tk,I.invert=bx,I.invertBy=yx,I.invokeMap=rE,I.iteratee=du,I.keyBy=iE,I.keys=Ot,I.keysIn=Jt,I.map=Qo,I.mapKeys=kx,I.mapValues=Ex,I.matches=pC,I.matchesProperty=mC,I.memoize=ts,I.merge=xx,I.mergeWith=Ah,I.method=bC,I.methodOf=yC,I.mixin=hu,I.negate=ns,I.nthArg=kC,I.omit=Cx,I.omitBy=_x,I.once=wE,I.orderBy=aE,I.over=EC,I.overArgs=kE,I.overEvery=xC,I.overSome=CC,I.partial=au,I.partialRight=mh,I.partition=oE,I.pick=Ax,I.pickBy=Th,I.property=Ih,I.propertyOf=_C,I.pull=ak,I.pullAll=oh,I.pullAllBy=ok,I.pullAllWith=sk,I.pullAt=lk,I.range=AC,I.rangeRight=TC,I.rearg=EE,I.reject=uE,I.remove=uk,I.rest=xE,I.reverse=nu,I.sampleSize=fE,I.set=Sx,I.setWith=Nx,I.shuffle=dE,I.slice=ck,I.sortBy=gE,I.sortedUniq=mk,I.sortedUniqBy=bk,I.split=Jx,I.spread=CE,I.tail=yk,I.take=wk,I.takeRight=kk,I.takeRightWhile=Ek,I.takeWhile=xk,I.tap=Pk,I.throttle=_E,I.thru=Jo,I.toArray=Eh,I.toPairs=Sh,I.toPairsIn=Nh,I.toPath=OC,I.toPlainObject=Ch,I.transform=Rx,I.unary=AE,I.union=Ck,I.unionBy=_k,I.unionWith=Ak,I.uniq=Tk,I.uniqBy=Sk,I.uniqWith=Nk,I.unset=Dx,I.unzip=ru,I.unzipWith=sh,I.update=Ox,I.updateWith=qx,I.values=Zi,I.valuesIn=Ix,I.without=Rk,I.words=Oh,I.wrap=TE,I.xor=Dk,I.xorBy=Ok,I.xorWith=qk,I.zip=Ik,I.zipObject=Lk,I.zipObjectDeep=Bk,I.zipWith=Mk,I.entries=Sh,I.entriesIn=Nh,I.extend=_h,I.extendWith=as,hu(I,I),I.add=IC,I.attempt=qh,I.camelCase=Px,I.capitalize=Rh,I.ceil=LC,I.clamp=Lx,I.clone=NE,I.cloneDeep=DE,I.cloneDeepWith=OE,I.cloneWith=RE,I.conformsTo=qE,I.deburr=Dh,I.defaultTo=hC,I.divide=BC,I.endsWith=Fx,I.eq=Un,I.escape=zx,I.escapeRegExp=Ux,I.every=Zk,I.find=Yk,I.findIndex=nh,I.findKey=ux,I.findLast=Xk,I.findLastIndex=rh,I.findLastKey=cx,I.floor=MC,I.forEach=uh,I.forEachRight=ch,I.forIn=fx,I.forInRight=dx,I.forOwn=hx,I.forOwnRight=vx,I.get=lu,I.gt=IE,I.gte=LE,I.has=mx,I.hasIn=uu,I.head=ah,I.identity=Qt,I.includes=nE,I.indexOf=X1,I.inRange=Bx,I.invoke=wx,I.isArguments=di,I.isArray=Fe,I.isArrayBuffer=BE,I.isArrayLike=Xt,I.isArrayLikeObject=Ct,I.isBoolean=ME,I.isBuffer=Wr,I.isDate=PE,I.isElement=FE,I.isEmpty=zE,I.isEqual=UE,I.isEqualWith=HE,I.isError=ou,I.isFinite=VE,I.isFunction=_r,I.isInteger=bh,I.isLength=rs,I.isMap=yh,I.isMatch=jE,I.isMatchWith=GE,I.isNaN=WE,I.isNative=KE,I.isNil=$E,I.isNull=ZE,I.isNumber=wh,I.isObject=mt,I.isObjectLike=Et,I.isPlainObject=La,I.isRegExp=su,I.isSafeInteger=YE,I.isSet=kh,I.isString=is,I.isSymbol=ln,I.isTypedArray=Ki,I.isUndefined=XE,I.isWeakMap=JE,I.isWeakSet=QE,I.join=nk,I.kebabCase=Hx,I.last=En,I.lastIndexOf=rk,I.lowerCase=Vx,I.lowerFirst=jx,I.lt=ex,I.lte=tx,I.max=PC,I.maxBy=FC,I.mean=zC,I.meanBy=UC,I.min=HC,I.minBy=VC,I.stubArray=gu,I.stubFalse=pu,I.stubObject=SC,I.stubString=NC,I.stubTrue=RC,I.multiply=jC,I.nth=ik,I.noConflict=wC,I.noop=vu,I.now=es,I.pad=Gx,I.padEnd=Wx,I.padStart=Kx,I.parseInt=Zx,I.random=Mx,I.reduce=sE,I.reduceRight=lE,I.repeat=$x,I.replace=Yx,I.result=Tx,I.round=GC,I.runInContext=X,I.sample=cE,I.size=hE,I.snakeCase=Xx,I.some=vE,I.sortedIndex=fk,I.sortedIndexBy=dk,I.sortedIndexOf=hk,I.sortedLastIndex=vk,I.sortedLastIndexBy=gk,I.sortedLastIndexOf=pk,I.startCase=Qx,I.startsWith=eC,I.subtract=WC,I.sum=KC,I.sumBy=ZC,I.template=tC,I.times=DC,I.toFinite=Ar,I.toInteger=ze,I.toLength=xh,I.toLower=nC,I.toNumber=xn,I.toSafeInteger=nx,I.toString=ot,I.toUpper=rC,I.trim=iC,I.trimEnd=aC,I.trimStart=oC,I.truncate=sC,I.unescape=lC,I.uniqueId=qC,I.upperCase=uC,I.upperFirst=cu,I.each=uh,I.eachRight=ch,I.first=ah,hu(I,function(){var s={};return er(I,function(f,m){st.call(I.prototype,m)||(s[m]=f)}),s}(),{chain:!1}),I.VERSION=t,mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){I[s].placeholder=I}),mn(["drop","take"],function(s,f){tt.prototype[s]=function(m){m=m===e?1:Nt(ze(m),0);var w=this.__filtered__&&!f?new tt(this):this.clone();return w.__filtered__?w.__takeCount__=Pt(m,w.__takeCount__):w.__views__.push({size:Pt(m,W),type:s+(w.__dir__<0?"Right":"")}),w},tt.prototype[s+"Right"]=function(m){return this.reverse()[s](m).reverse()}}),mn(["filter","map","takeWhile"],function(s,f){var m=f+1,w=m==T||m==Z;tt.prototype[s]=function(R){var B=this.clone();return B.__iteratees__.push({iteratee:Ne(R,3),type:m}),B.__filtered__=B.__filtered__||w,B}}),mn(["head","last"],function(s,f){var m="take"+(f?"Right":"");tt.prototype[s]=function(){return this[m](1).value()[0]}}),mn(["initial","tail"],function(s,f){var m="drop"+(f?"":"Right");tt.prototype[s]=function(){return this.__filtered__?new tt(this):this[m](1)}}),tt.prototype.compact=function(){return this.filter(Qt)},tt.prototype.find=function(s){return this.filter(s).head()},tt.prototype.findLast=function(s){return this.reverse().find(s)},tt.prototype.invokeMap=Ze(function(s,f){return typeof s=="function"?new tt(this):this.map(function(m){return Na(m,s,f)})}),tt.prototype.reject=function(s){return this.filter(ns(Ne(s)))},tt.prototype.slice=function(s,f){s=ze(s);var m=this;return m.__filtered__&&(s>0||f<0)?new tt(m):(s<0?m=m.takeRight(-s):s&&(m=m.drop(s)),f!==e&&(f=ze(f),m=f<0?m.dropRight(-f):m.take(f-s)),m)},tt.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},tt.prototype.toArray=function(){return this.take(W)},er(tt.prototype,function(s,f){var m=/^(?:filter|find|map|reject)|While$/.test(f),w=/^(?:head|last)$/.test(f),R=I[w?"take"+(f=="last"?"Right":""):f],B=w||/^find/.test(f);!R||(I.prototype[f]=function(){var G=this.__wrapped__,$=w?[1]:arguments,ee=G instanceof tt,ue=$[0],ce=ee||Fe(G),de=function(Xe){var nt=R.apply(I,Fr([Xe],$));return w&&Ee?nt[0]:nt};ce&&m&&typeof ue=="function"&&ue.length!=1&&(ee=ce=!1);var Ee=this.__chain__,Te=!!this.__actions__.length,Re=B&&!Ee,je=ee&&!Te;if(!B&&ce){G=je?G:new tt(this);var De=s.apply(G,$);return De.__actions__.push({func:Jo,args:[de],thisArg:e}),new yn(De,Ee)}return Re&&je?s.apply(this,$):(De=this.thru(de),Re?w?De.value()[0]:De.value():De)})}),mn(["pop","push","shift","sort","splice","unshift"],function(s){var f=Co[s],m=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",w=/^(?:pop|shift)$/.test(s);I.prototype[s]=function(){var R=arguments;if(w&&!this.__chain__){var B=this.value();return f.apply(Fe(B)?B:[],R)}return this[m](function(G){return f.apply(Fe(G)?G:[],R)})}}),er(tt.prototype,function(s,f){var m=I[f];if(m){var w=m.name+"";st.call(Hi,w)||(Hi[w]=[]),Hi[w].push({name:f,func:m})}}),Hi[Go(e,k).name]=[{name:"wrapper",func:e}],tt.prototype.clone=lw,tt.prototype.reverse=uw,tt.prototype.value=cw,I.prototype.at=Fk,I.prototype.chain=zk,I.prototype.commit=Uk,I.prototype.next=Hk,I.prototype.plant=jk,I.prototype.reverse=Gk,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=Wk,I.prototype.first=I.prototype.head,Ea&&(I.prototype[Ea]=Vk),I},Fi=Uy();ii?((ii.exports=Fi)._=Fi,dl._=Fi):Lt._=Fi}).call(Cn)})(Qe,Qe.exports);function Lp(d){if(Array.isArray(d))return Ds(d)}function Bp(d){if(typeof Symbol!="undefined"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function Mp(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(d){return Lp(d)||Bp(d)||Os(d)||Mp()}var _c={exports:{}};(function(d){(function(i){var e=/^\s+/,t=/\s+$/,n=0,r=i.round,a=i.min,o=i.max,l=i.random;function u(L,K){if(L=L||"",K=K||{},L instanceof u)return L;if(!(this instanceof u))return new u(L,K);var z=c(L);this._originalInput=L,this._r=z.r,this._g=z.g,this._b=z.b,this._a=z.a,this._roundA=r(100*this._a)/100,this._format=K.format||z.format,this._gradientType=K.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=z.ok,this._tc_id=n++}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var L=this.toRgb();return(L.r*299+L.g*587+L.b*114)/1e3},getLuminance:function(){var L=this.toRgb(),K,z,le,he,ge,_e;return K=L.r/255,z=L.g/255,le=L.b/255,K<=.03928?he=K/12.92:he=i.pow((K+.055)/1.055,2.4),z<=.03928?ge=z/12.92:ge=i.pow((z+.055)/1.055,2.4),le<=.03928?_e=le/12.92:_e=i.pow((le+.055)/1.055,2.4),.2126*he+.7152*ge+.0722*_e},setAlpha:function(L){return this._a=F(L),this._roundA=r(100*this._a)/100,this},toHsv:function(){var L=p(this._r,this._g,this._b);return{h:L.h*360,s:L.s,v:L.v,a:this._a}},toHsvString:function(){var L=p(this._r,this._g,this._b),K=r(L.h*360),z=r(L.s*100),le=r(L.v*100);return this._a==1?"hsv("+K+", "+z+"%, "+le+"%)":"hsva("+K+", "+z+"%, "+le+"%, "+this._roundA+")"},toHsl:function(){var L=v(this._r,this._g,this._b);return{h:L.h*360,s:L.s,l:L.l,a:this._a}},toHslString:function(){var L=v(this._r,this._g,this._b),K=r(L.h*360),z=r(L.s*100),le=r(L.l*100);return this._a==1?"hsl("+K+", "+z+"%, "+le+"%)":"hsla("+K+", "+z+"%, "+le+"%, "+this._roundA+")"},toHex:function(L){return y(this._r,this._g,this._b,L)},toHexString:function(L){return"#"+this.toHex(L)},toHex8:function(L){return k(this._r,this._g,this._b,this._a,L)},toHex8String:function(L){return"#"+this.toHex8(L)},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(H(this._r,255)*100)+"%",g:r(H(this._g,255)*100)+"%",b:r(H(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+r(H(this._r,255)*100)+"%, "+r(H(this._g,255)*100)+"%, "+r(H(this._b,255)*100)+"%)":"rgba("+r(H(this._r,255)*100)+"%, "+r(H(this._g,255)*100)+"%, "+r(H(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ie[y(this._r,this._g,this._b,!0)]||!1},toFilter:function(L){var K="#"+E(this._r,this._g,this._b,this._a),z=K,le=this._gradientType?"GradientType = 1, ":"";if(L){var he=u(L);z="#"+E(he._r,he._g,he._b,he._a)}return"progid:DXImageTransform.Microsoft.gradient("+le+"startColorstr="+K+",endColorstr="+z+")"},toString:function(L){var K=!!L;L=L||this._format;var z=!1,le=this._a<1&&this._a>=0,he=!K&&le&&(L==="hex"||L==="hex6"||L==="hex3"||L==="hex4"||L==="hex8"||L==="name");return he?L==="name"&&this._a===0?this.toName():this.toRgbString():(L==="rgb"&&(z=this.toRgbString()),L==="prgb"&&(z=this.toPercentageRgbString()),(L==="hex"||L==="hex6")&&(z=this.toHexString()),L==="hex3"&&(z=this.toHexString(!0)),L==="hex4"&&(z=this.toHex8String(!0)),L==="hex8"&&(z=this.toHex8String()),L==="name"&&(z=this.toName()),L==="hsl"&&(z=this.toHslString()),L==="hsv"&&(z=this.toHsvString()),z||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(L,K){var z=L.apply(null,[this].concat([].slice.call(K)));return this._r=z._r,this._g=z._g,this._b=z._b,this.setAlpha(z._a),this},lighten:function(){return this._applyModification(C,arguments)},brighten:function(){return this._applyModification(S,arguments)},darken:function(){return this._applyModification(O,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(A,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(M,arguments)},_applyCombination:function(L,K){return L.apply(null,[this].concat([].slice.call(K)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(V,arguments)},monochromatic:function(){return this._applyCombination(q,arguments)},splitcomplement:function(){return this._applyCombination(D,arguments)},triad:function(){return this._applyCombination(j,arguments)},tetrad:function(){return this._applyCombination(P,arguments)}},u.fromRatio=function(L,K){if(typeof L=="object"){var z={};for(var le in L)L.hasOwnProperty(le)&&(le==="a"?z[le]=L[le]:z[le]=J(L[le]));L=z}return u(L,K)};function c(L){var K={r:0,g:0,b:0},z=1,le=null,he=null,ge=null,_e=!1,Se=!1;return typeof L=="string"&&(L=pe(L)),typeof L=="object"&&(me(L.r)&&me(L.g)&&me(L.b)?(K=h(L.r,L.g,L.b),_e=!0,Se=String(L.r).substr(-1)==="%"?"prgb":"rgb"):me(L.h)&&me(L.s)&&me(L.v)?(le=J(L.s),he=J(L.v),K=b(L.h,le,he),_e=!0,Se="hsv"):me(L.h)&&me(L.s)&&me(L.l)&&(le=J(L.s),ge=J(L.l),K=g(L.h,le,ge),_e=!0,Se="hsl"),L.hasOwnProperty("a")&&(z=L.a)),z=F(z),{ok:_e,format:L.format||Se,r:a(255,o(K.r,0)),g:a(255,o(K.g,0)),b:a(255,o(K.b,0)),a:z}}function h(L,K,z){return{r:H(L,255)*255,g:H(K,255)*255,b:H(z,255)*255}}function v(L,K,z){L=H(L,255),K=H(K,255),z=H(z,255);var le=o(L,K,z),he=a(L,K,z),ge,_e,Se=(le+he)/2;if(le==he)ge=_e=0;else{var be=le-he;switch(_e=Se>.5?be/(2-le-he):be/(le+he),le){case L:ge=(K-z)/be+(K<z?6:0);break;case K:ge=(z-L)/be+2;break;case z:ge=(L-K)/be+4;break}ge/=6}return{h:ge,s:_e,l:Se}}function g(L,K,z){var le,he,ge;L=H(L,360),K=H(K,100),z=H(z,100);function _e(Ae,et,at){return at<0&&(at+=1),at>1&&(at-=1),at<1/6?Ae+(et-Ae)*6*at:at<1/2?et:at<2/3?Ae+(et-Ae)*(2/3-at)*6:Ae}if(K===0)le=he=ge=z;else{var Se=z<.5?z*(1+K):z+K-z*K,be=2*z-Se;le=_e(be,Se,L+1/3),he=_e(be,Se,L),ge=_e(be,Se,L-1/3)}return{r:le*255,g:he*255,b:ge*255}}function p(L,K,z){L=H(L,255),K=H(K,255),z=H(z,255);var le=o(L,K,z),he=a(L,K,z),ge,_e,Se=le,be=le-he;if(_e=le===0?0:be/le,le==he)ge=0;else{switch(le){case L:ge=(K-z)/be+(K<z?6:0);break;case K:ge=(z-L)/be+2;break;case z:ge=(L-K)/be+4;break}ge/=6}return{h:ge,s:_e,v:Se}}function b(L,K,z){L=H(L,360)*6,K=H(K,100),z=H(z,100);var le=i.floor(L),he=L-le,ge=z*(1-K),_e=z*(1-he*K),Se=z*(1-(1-he)*K),be=le%6,Ae=[z,_e,ge,ge,Se,z][be],et=[Se,z,z,_e,ge,ge][be],at=[ge,ge,Se,z,z,_e][be];return{r:Ae*255,g:et*255,b:at*255}}function y(L,K,z,le){var he=[te(r(L).toString(16)),te(r(K).toString(16)),te(r(z).toString(16))];return le&&he[0].charAt(0)==he[0].charAt(1)&&he[1].charAt(0)==he[1].charAt(1)&&he[2].charAt(0)==he[2].charAt(1)?he[0].charAt(0)+he[1].charAt(0)+he[2].charAt(0):he.join("")}function k(L,K,z,le,he){var ge=[te(r(L).toString(16)),te(r(K).toString(16)),te(r(z).toString(16)),te(ne(le))];return he&&ge[0].charAt(0)==ge[0].charAt(1)&&ge[1].charAt(0)==ge[1].charAt(1)&&ge[2].charAt(0)==ge[2].charAt(1)&&ge[3].charAt(0)==ge[3].charAt(1)?ge[0].charAt(0)+ge[1].charAt(0)+ge[2].charAt(0)+ge[3].charAt(0):ge.join("")}function E(L,K,z,le){var he=[te(ne(le)),te(r(L).toString(16)),te(r(K).toString(16)),te(r(z).toString(16))];return he.join("")}u.equals=function(L,K){return!L||!K?!1:u(L).toRgbString()==u(K).toRgbString()},u.random=function(){return u.fromRatio({r:l(),g:l(),b:l()})};function _(L,K){K=K===0?0:K||10;var z=u(L).toHsl();return z.s-=K/100,z.s=W(z.s),u(z)}function A(L,K){K=K===0?0:K||10;var z=u(L).toHsl();return z.s+=K/100,z.s=W(z.s),u(z)}function x(L){return u(L).desaturate(100)}function C(L,K){K=K===0?0:K||10;var z=u(L).toHsl();return z.l+=K/100,z.l=W(z.l),u(z)}function S(L,K){K=K===0?0:K||10;var z=u(L).toRgb();return z.r=o(0,a(255,z.r-r(255*-(K/100)))),z.g=o(0,a(255,z.g-r(255*-(K/100)))),z.b=o(0,a(255,z.b-r(255*-(K/100)))),u(z)}function O(L,K){K=K===0?0:K||10;var z=u(L).toHsl();return z.l-=K/100,z.l=W(z.l),u(z)}function M(L,K){var z=u(L).toHsl(),le=(z.h+K)%360;return z.h=le<0?360+le:le,u(z)}function V(L){var K=u(L).toHsl();return K.h=(K.h+180)%360,u(K)}function j(L){var K=u(L).toHsl(),z=K.h;return[u(L),u({h:(z+120)%360,s:K.s,l:K.l}),u({h:(z+240)%360,s:K.s,l:K.l})]}function P(L){var K=u(L).toHsl(),z=K.h;return[u(L),u({h:(z+90)%360,s:K.s,l:K.l}),u({h:(z+180)%360,s:K.s,l:K.l}),u({h:(z+270)%360,s:K.s,l:K.l})]}function D(L){var K=u(L).toHsl(),z=K.h;return[u(L),u({h:(z+72)%360,s:K.s,l:K.l}),u({h:(z+216)%360,s:K.s,l:K.l})]}function T(L,K,z){K=K||6,z=z||30;var le=u(L).toHsl(),he=360/z,ge=[u(L)];for(le.h=(le.h-(he*K>>1)+720)%360;--K;)le.h=(le.h+he)%360,ge.push(u(le));return ge}function q(L,K){K=K||6;for(var z=u(L).toHsv(),le=z.h,he=z.s,ge=z.v,_e=[],Se=1/K;K--;)_e.push(u({h:le,s:he,v:ge})),ge=(ge+Se)%1;return _e}u.mix=function(L,K,z){z=z===0?0:z||50;var le=u(L).toRgb(),he=u(K).toRgb(),ge=z/100,_e={r:(he.r-le.r)*ge+le.r,g:(he.g-le.g)*ge+le.g,b:(he.b-le.b)*ge+le.b,a:(he.a-le.a)*ge+le.a};return u(_e)},u.readability=function(L,K){var z=u(L),le=u(K);return(i.max(z.getLuminance(),le.getLuminance())+.05)/(i.min(z.getLuminance(),le.getLuminance())+.05)},u.isReadable=function(L,K,z){var le=u.readability(L,K),he,ge;switch(ge=!1,he=ke(z),he.level+he.size){case"AAsmall":case"AAAlarge":ge=le>=4.5;break;case"AAlarge":ge=le>=3;break;case"AAAsmall":ge=le>=7;break}return ge},u.mostReadable=function(L,K,z){var le=null,he=0,ge,_e,Se,be;z=z||{},_e=z.includeFallbackColors,Se=z.level,be=z.size;for(var Ae=0;Ae<K.length;Ae++)ge=u.readability(L,K[Ae]),ge>he&&(he=ge,le=u(K[Ae]));return u.isReadable(L,le,{level:Se,size:be})||!_e?le:(z.includeFallbackColors=!1,u.mostReadable(L,["#fff","#000"],z))};var Z=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ie=u.hexNames=N(Z);function N(L){var K={};for(var z in L)L.hasOwnProperty(z)&&(K[L[z]]=z);return K}function F(L){return L=parseFloat(L),(isNaN(L)||L<0||L>1)&&(L=1),L}function H(L,K){Q(L)&&(L="100%");var z=re(L);return L=a(K,o(0,parseFloat(L))),z&&(L=parseInt(L*K,10)/100),i.abs(L-K)<1e-6?1:L%K/parseFloat(K)}function W(L){return a(1,o(0,L))}function Y(L){return parseInt(L,16)}function Q(L){return typeof L=="string"&&L.indexOf(".")!=-1&&parseFloat(L)===1}function re(L){return typeof L=="string"&&L.indexOf("%")!=-1}function te(L){return L.length==1?"0"+L:""+L}function J(L){return L<=1&&(L=L*100+"%"),L}function ne(L){return i.round(parseFloat(L)*255).toString(16)}function ae(L){return Y(L)/255}var fe=function(){var L="[-\\+]?\\d+%?",K="[-\\+]?\\d*\\.\\d+%?",z="(?:"+K+")|(?:"+L+")",le="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",he="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?";return{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+le),rgba:new RegExp("rgba"+he),hsl:new RegExp("hsl"+le),hsla:new RegExp("hsla"+he),hsv:new RegExp("hsv"+le),hsva:new RegExp("hsva"+he),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function me(L){return!!fe.CSS_UNIT.exec(L)}function pe(L){L=L.replace(e,"").replace(t,"").toLowerCase();var K=!1;if(Z[L])L=Z[L],K=!0;else if(L=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var z;return(z=fe.rgb.exec(L))?{r:z[1],g:z[2],b:z[3]}:(z=fe.rgba.exec(L))?{r:z[1],g:z[2],b:z[3],a:z[4]}:(z=fe.hsl.exec(L))?{h:z[1],s:z[2],l:z[3]}:(z=fe.hsla.exec(L))?{h:z[1],s:z[2],l:z[3],a:z[4]}:(z=fe.hsv.exec(L))?{h:z[1],s:z[2],v:z[3]}:(z=fe.hsva.exec(L))?{h:z[1],s:z[2],v:z[3],a:z[4]}:(z=fe.hex8.exec(L))?{r:Y(z[1]),g:Y(z[2]),b:Y(z[3]),a:ae(z[4]),format:K?"name":"hex8"}:(z=fe.hex6.exec(L))?{r:Y(z[1]),g:Y(z[2]),b:Y(z[3]),format:K?"name":"hex"}:(z=fe.hex4.exec(L))?{r:Y(z[1]+""+z[1]),g:Y(z[2]+""+z[2]),b:Y(z[3]+""+z[3]),a:ae(z[4]+""+z[4]),format:K?"name":"hex8"}:(z=fe.hex3.exec(L))?{r:Y(z[1]+""+z[1]),g:Y(z[2]+""+z[2]),b:Y(z[3]+""+z[3]),format:K?"name":"hex"}:!1}function ke(L){var K,z;return L=L||{level:"AA",size:"small"},K=(L.level||"AA").toUpperCase(),z=(L.size||"small").toLowerCase(),K!=="AA"&&K!=="AAA"&&(K="AA"),z!=="small"&&z!=="large"&&(z="small"),{level:K,size:z}}d.exports?d.exports=u:window.tinycolor=u})(Math)})(_c);var ar=_c.exports,yi={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(d,i){(function(e){var t=Object.hasOwnProperty,n=Array.isArray?Array.isArray:function(F){return Object.prototype.toString.call(F)==="[object Array]"},r=10,a=typeof process=="object"&&typeof process.nextTick=="function",o=typeof Symbol=="function",l=typeof Reflect=="object",u=typeof setImmediate=="function",c=u?setImmediate:setTimeout,h=o?l&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(N){var F=Object.getOwnPropertyNames(N);return F.push.apply(F,Object.getOwnPropertySymbols(N)),F}:Object.keys;function v(){this._events={},this._conf&&g.call(this,this._conf)}function g(N){N&&(this._conf=N,N.delimiter&&(this.delimiter=N.delimiter),N.maxListeners!==e&&(this._maxListeners=N.maxListeners),N.wildcard&&(this.wildcard=N.wildcard),N.newListener&&(this._newListener=N.newListener),N.removeListener&&(this._removeListener=N.removeListener),N.verboseMemoryLeak&&(this.verboseMemoryLeak=N.verboseMemoryLeak),N.ignoreErrors&&(this.ignoreErrors=N.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(N,F){var H="(node) warning: possible EventEmitter memory leak detected. "+N+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(H+=" Event name: "+F+"."),typeof process!="undefined"&&process.emitWarning){var W=new Error(H);W.name="MaxListenersExceededWarning",W.emitter=this,W.count=N,process.emitWarning(W)}else console.error(H),console.trace&&console.trace()}var b=function(N,F,H){var W=arguments.length;switch(W){case 0:return[];case 1:return[N];case 2:return[N,F];case 3:return[N,F,H];default:for(var Y=new Array(W);W--;)Y[W]=arguments[W];return Y}};function y(N,F){for(var H={},W,Y=N.length,Q=F?value.length:0,re=0;re<Y;re++)W=N[re],H[W]=re<Q?F[re]:e;return H}function k(N,F,H){this._emitter=N,this._target=F,this._listeners={},this._listenersCount=0;var W,Y;if((H.on||H.off)&&(W=H.on,Y=H.off),F.addEventListener?(W=F.addEventListener,Y=F.removeEventListener):F.addListener?(W=F.addListener,Y=F.removeListener):F.on&&(W=F.on,Y=F.off),!W&&!Y)throw Error("target does not implement any known event API");if(typeof W!="function")throw TypeError("on method must be a function");if(typeof Y!="function")throw TypeError("off method must be a function");this._on=W,this._off=Y;var Q=N._observers;Q?Q.push(this):N._observers=[this]}Object.assign(k.prototype,{subscribe:function(N,F,H){var W=this,Y=this._target,Q=this._emitter,re=this._listeners,te=function(){var J=b.apply(null,arguments),ne={data:J,name:F,original:N};if(H){var ae=H.call(Y,ne);ae!==!1&&Q.emit.apply(Q,[ne.name].concat(J));return}Q.emit.apply(Q,[F].concat(J))};if(re[N])throw Error("Event '"+N+"' is already listening");this._listenersCount++,Q._newListener&&Q._removeListener&&!W._onNewListener?(this._onNewListener=function(J){J===F&&re[N]===null&&(re[N]=te,W._on.call(Y,N,te))},Q.on("newListener",this._onNewListener),this._onRemoveListener=function(J){J===F&&!Q.hasListeners(J)&&re[N]&&(re[N]=null,W._off.call(Y,N,te))},re[N]=null,Q.on("removeListener",this._onRemoveListener)):(re[N]=te,W._on.call(Y,N,te))},unsubscribe:function(N){var F=this,H=this._listeners,W=this._emitter,Y,Q,re=this._off,te=this._target,J;if(N&&typeof N!="string")throw TypeError("event must be a string");function ne(){F._onNewListener&&(W.off("newListener",F._onNewListener),W.off("removeListener",F._onRemoveListener),F._onNewListener=null,F._onRemoveListener=null);var ae=O.call(W,F);W._observers.splice(ae,1)}if(N){if(Y=H[N],!Y)return;re.call(te,N,Y),delete H[N],--this._listenersCount||ne()}else{for(Q=h(H),J=Q.length;J-- >0;)N=Q[J],re.call(te,N,H[N]);this._listeners={},this._listenersCount=0,ne()}}});function E(N,F,H,W){var Y=Object.assign({},F);if(!N)return Y;if(typeof N!="object")throw TypeError("options must be an object");var Q=Object.keys(N),re=Q.length,te,J,ne;function ae(me){throw Error('Invalid "'+te+'" option value'+(me?". Reason: "+me:""))}for(var fe=0;fe<re;fe++){if(te=Q[fe],!W&&!t.call(F,te))throw Error('Unknown "'+te+'" option');J=N[te],J!==e&&(ne=H[te],Y[te]=ne?ne(J,ae):J)}return Y}function _(N,F){return(typeof N!="function"||!N.hasOwnProperty("prototype"))&&F("value must be a constructor"),N}function A(N){var F="value must be type of "+N.join("|"),H=N.length,W=N[0],Y=N[1];return H===1?function(Q,re){if(typeof Q===W)return Q;re(F)}:H===2?function(Q,re){var te=typeof Q;if(te===W||te===Y)return Q;re(F)}:function(Q,re){for(var te=typeof Q,J=H;J-- >0;)if(te===N[J])return Q;re(F)}}var x=A(["function"]),C=A(["object","function"]);function S(N,F,H){var W,Y,Q=0,re,te=new N(function(J,ne,ae){H=E(H,{timeout:0,overload:!1},{timeout:function(ke,L){return ke*=1,(typeof ke!="number"||ke<0||!Number.isFinite(ke))&&L("timeout must be a positive number"),ke}}),W=!H.overload&&typeof N.prototype.cancel=="function"&&typeof ae=="function";function fe(){Y&&(Y=null),Q&&(clearTimeout(Q),Q=0)}var me=function(ke){fe(),J(ke)},pe=function(ke){fe(),ne(ke)};W?F(me,pe,ae):(Y=[function(ke){pe(ke||Error("canceled"))}],F(me,pe,function(ke){if(re)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof ke!="function")throw TypeError("onCancel callback must be a function");Y.push(ke)}),re=!0),H.timeout>0&&(Q=setTimeout(function(){var ke=Error("timeout");ke.code="ETIMEDOUT",Q=0,te.cancel(ke),ne(ke)},H.timeout))});return W||(te.cancel=function(J){if(!!Y){for(var ne=Y.length,ae=1;ae<ne;ae++)Y[ae](J);Y[0](J),Y=null}}),te}function O(N){var F=this._observers;if(!F)return-1;for(var H=F.length,W=0;W<H;W++)if(F[W]._target===N)return W;return-1}function M(N,F,H,W,Y){if(!H)return null;if(W===0){var Q=typeof F;if(Q==="string"){var re,te,J=0,ne=0,ae=this.delimiter,fe=ae.length;if((te=F.indexOf(ae))!==-1){re=new Array(5);do re[J++]=F.slice(ne,te),ne=te+fe;while((te=F.indexOf(ae,ne))!==-1);re[J++]=F.slice(ne),F=re,Y=J}else F=[F],Y=1}else Q==="object"?Y=F.length:(F=[F],Y=1)}var me=null,pe,ke,L,K,z,le=F[W],he=F[W+1],ge,_e;if(W===Y)H._listeners&&(typeof H._listeners=="function"?(N&&N.push(H._listeners),me=[H]):(N&&N.push.apply(N,H._listeners),me=[H]));else if(le==="*"){for(ge=h(H),te=ge.length;te-- >0;)pe=ge[te],pe!=="_listeners"&&(_e=M(N,F,H[pe],W+1,Y),_e&&(me?me.push.apply(me,_e):me=_e));return me}else if(le==="**"){for(z=W+1===Y||W+2===Y&&he==="*",z&&H._listeners&&(me=M(N,F,H,Y,Y)),ge=h(H),te=ge.length;te-- >0;)pe=ge[te],pe!=="_listeners"&&(pe==="*"||pe==="**"?(H[pe]._listeners&&!z&&(_e=M(N,F,H[pe],Y,Y),_e&&(me?me.push.apply(me,_e):me=_e)),_e=M(N,F,H[pe],W,Y)):pe===he?_e=M(N,F,H[pe],W+2,Y):_e=M(N,F,H[pe],W,Y),_e&&(me?me.push.apply(me,_e):me=_e));return me}else H[le]&&(me=M(N,F,H[le],W+1,Y));if(ke=H["*"],ke&&M(N,F,ke,W+1,Y),L=H["**"],L)if(W<Y)for(L._listeners&&M(N,F,L,Y,Y),ge=h(L),te=ge.length;te-- >0;)pe=ge[te],pe!=="_listeners"&&(pe===he?M(N,F,L[pe],W+2,Y):pe===le?M(N,F,L[pe],W+1,Y):(K={},K[pe]=L[pe],M(N,F,{"**":K},W+1,Y)));else L._listeners?M(N,F,L,Y,Y):L["*"]&&L["*"]._listeners&&M(N,F,L["*"],Y,Y);return me}function V(N,F,H){var W=0,Y=0,Q,re=this.delimiter,te=re.length,J;if(typeof N=="string")if((Q=N.indexOf(re))!==-1){J=new Array(5);do J[W++]=N.slice(Y,Q),Y=Q+te;while((Q=N.indexOf(re,Y))!==-1);J[W++]=N.slice(Y)}else J=[N],W=1;else J=N,W=N.length;if(W>1){for(Q=0;Q+1<W;Q++)if(J[Q]==="**"&&J[Q+1]==="**")return}var ne=this.listenerTree,ae;for(Q=0;Q<W;Q++)if(ae=J[Q],ne=ne[ae]||(ne[ae]={}),Q===W-1)return ne._listeners?(typeof ne._listeners=="function"&&(ne._listeners=[ne._listeners]),H?ne._listeners.unshift(F):ne._listeners.push(F),!ne._listeners.warned&&this._maxListeners>0&&ne._listeners.length>this._maxListeners&&(ne._listeners.warned=!0,p.call(this,ne._listeners.length,ae))):ne._listeners=F,!0;return!0}function j(N,F,H,W){for(var Y=h(N),Q=Y.length,re,te,J,ne=N._listeners,ae;Q-- >0;)te=Y[Q],re=N[te],te==="_listeners"?J=H:J=H?H.concat(te):[te],ae=W||typeof te=="symbol",ne&&F.push(ae?J:J.join(this.delimiter)),typeof re=="object"&&j.call(this,re,F,J,ae);return F}function P(N){for(var F=h(N),H=F.length,W,Y,Q;H-- >0;)Y=F[H],W=N[Y],W&&(Q=!0,Y!=="_listeners"&&!P(W)&&delete N[Y]);return Q}function D(N,F,H){this.emitter=N,this.event=F,this.listener=H}D.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function T(N,F,H){if(H===!0)Y=!0;else if(H===!1)W=!0;else{if(!H||typeof H!="object")throw TypeError("options should be an object or true");var W=H.async,Y=H.promisify,Q=H.nextTick,re=H.objectify}if(W||Q||Y){var te=F,J=F._origin||F;if(Q&&!a)throw Error("process.nextTick is not supported");Y===e&&(Y=F.constructor.name==="AsyncFunction"),F=function(){var ne=arguments,ae=this,fe=this.event;return Y?Q?Promise.resolve():new Promise(function(me){c(me)}).then(function(){return ae.event=fe,te.apply(ae,ne)}):(Q?process.nextTick:c)(function(){ae.event=fe,te.apply(ae,ne)})},F._async=!0,F._origin=J}return[F,re?new D(this,N,F):this]}function q(N){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,g.call(this,N)}q.EventEmitter2=q,q.prototype.listenTo=function(N,F,H){if(typeof N!="object")throw TypeError("target musts be an object");var W=this;H=E(H,{on:e,off:e,reducers:e},{on:x,off:x,reducers:C});function Y(Q){if(typeof Q!="object")throw TypeError("events must be an object");var re=H.reducers,te=O.call(W,N),J;te===-1?J=new k(W,N,H):J=W._observers[te];for(var ne=h(Q),ae=ne.length,fe,me=typeof re=="function",pe=0;pe<ae;pe++)fe=ne[pe],J.subscribe(fe,Q[fe]||fe,me?re:re&&re[fe])}return n(F)?Y(y(F)):Y(typeof F=="string"?y(F.split(/\s+/)):F),this},q.prototype.stopListeningTo=function(N,F){var H=this._observers;if(!H)return!1;var W=H.length,Y,Q=!1;if(N&&typeof N!="object")throw TypeError("target should be an object");for(;W-- >0;)Y=H[W],(!N||Y._target===N)&&(Y.unsubscribe(F),Q=!0);return Q},q.prototype.delimiter=".",q.prototype.setMaxListeners=function(N){N!==e&&(this._maxListeners=N,this._conf||(this._conf={}),this._conf.maxListeners=N)},q.prototype.getMaxListeners=function(){return this._maxListeners},q.prototype.event="",q.prototype.once=function(N,F,H){return this._once(N,F,!1,H)},q.prototype.prependOnceListener=function(N,F,H){return this._once(N,F,!0,H)},q.prototype._once=function(N,F,H,W){return this._many(N,1,F,H,W)},q.prototype.many=function(N,F,H,W){return this._many(N,F,H,!1,W)},q.prototype.prependMany=function(N,F,H,W){return this._many(N,F,H,!0,W)},q.prototype._many=function(N,F,H,W,Y){var Q=this;if(typeof H!="function")throw new Error("many only accepts instances of Function");function re(){return--F===0&&Q.off(N,re),H.apply(this,arguments)}return re._origin=H,this._on(N,re,W,Y)},q.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||v.call(this);var N=arguments[0],F,H=this.wildcard,W,Y,Q,re,te;if(N==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(H&&(F=N,N!=="newListener"&&N!=="removeListener"&&typeof N=="object")){if(Y=N.length,o){for(Q=0;Q<Y;Q++)if(typeof N[Q]=="symbol"){te=!0;break}}te||(N=N.join(this.delimiter))}var J=arguments.length,ne;if(this._all&&this._all.length)for(ne=this._all.slice(),Q=0,Y=ne.length;Q<Y;Q++)switch(this.event=N,J){case 1:ne[Q].call(this,N);break;case 2:ne[Q].call(this,N,arguments[1]);break;case 3:ne[Q].call(this,N,arguments[1],arguments[2]);break;default:ne[Q].apply(this,arguments)}if(H)ne=[],M.call(this,ne,F,this.listenerTree,0,Y);else if(ne=this._events[N],typeof ne=="function"){switch(this.event=N,J){case 1:ne.call(this);break;case 2:ne.call(this,arguments[1]);break;case 3:ne.call(this,arguments[1],arguments[2]);break;default:for(W=new Array(J-1),re=1;re<J;re++)W[re-1]=arguments[re];ne.apply(this,W)}return!0}else ne&&(ne=ne.slice());if(ne&&ne.length){if(J>3)for(W=new Array(J-1),re=1;re<J;re++)W[re-1]=arguments[re];for(Q=0,Y=ne.length;Q<Y;Q++)switch(this.event=N,J){case 1:ne[Q].call(this);break;case 2:ne[Q].call(this,arguments[1]);break;case 3:ne[Q].call(this,arguments[1],arguments[2]);break;default:ne[Q].apply(this,W)}return!0}else if(!this.ignoreErrors&&!this._all&&N==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},q.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||v.call(this);var N=arguments[0],F=this.wildcard,H,W,Y,Q,re,te;if(N==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(F&&(H=N,N!=="newListener"&&N!=="removeListener"&&typeof N=="object")){if(Q=N.length,o){for(re=0;re<Q;re++)if(typeof N[re]=="symbol"){W=!0;break}}W||(N=N.join(this.delimiter))}var J=[],ne=arguments.length,ae;if(this._all)for(re=0,Q=this._all.length;re<Q;re++)switch(this.event=N,ne){case 1:J.push(this._all[re].call(this,N));break;case 2:J.push(this._all[re].call(this,N,arguments[1]));break;case 3:J.push(this._all[re].call(this,N,arguments[1],arguments[2]));break;default:J.push(this._all[re].apply(this,arguments))}if(F?(ae=[],M.call(this,ae,H,this.listenerTree,0)):ae=this._events[N],typeof ae=="function")switch(this.event=N,ne){case 1:J.push(ae.call(this));break;case 2:J.push(ae.call(this,arguments[1]));break;case 3:J.push(ae.call(this,arguments[1],arguments[2]));break;default:for(Y=new Array(ne-1),te=1;te<ne;te++)Y[te-1]=arguments[te];J.push(ae.apply(this,Y))}else if(ae&&ae.length){if(ae=ae.slice(),ne>3)for(Y=new Array(ne-1),te=1;te<ne;te++)Y[te-1]=arguments[te];for(re=0,Q=ae.length;re<Q;re++)switch(this.event=N,ne){case 1:J.push(ae[re].call(this));break;case 2:J.push(ae[re].call(this,arguments[1]));break;case 3:J.push(ae[re].call(this,arguments[1],arguments[2]));break;default:J.push(ae[re].apply(this,Y))}}else if(!this.ignoreErrors&&!this._all&&N==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(J)},q.prototype.on=function(N,F,H){return this._on(N,F,!1,H)},q.prototype.prependListener=function(N,F,H){return this._on(N,F,!0,H)},q.prototype.onAny=function(N){return this._onAny(N,!1)},q.prototype.prependAny=function(N){return this._onAny(N,!0)},q.prototype.addListener=q.prototype.on,q.prototype._onAny=function(N,F){if(typeof N!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),F?this._all.unshift(N):this._all.push(N),this},q.prototype._on=function(N,F,H,W){if(typeof N=="function")return this._onAny(N,F),this;if(typeof F!="function")throw new Error("on only accepts instances of Function");this._events||v.call(this);var Y=this,Q;return W!==e&&(Q=T.call(this,N,F,W),F=Q[0],Y=Q[1]),this._newListener&&this.emit("newListener",N,F),this.wildcard?(V.call(this,N,F,H),Y):(this._events[N]?(typeof this._events[N]=="function"&&(this._events[N]=[this._events[N]]),H?this._events[N].unshift(F):this._events[N].push(F),!this._events[N].warned&&this._maxListeners>0&&this._events[N].length>this._maxListeners&&(this._events[N].warned=!0,p.call(this,this._events[N].length,N))):this._events[N]=F,Y)},q.prototype.off=function(N,F){if(typeof F!="function")throw new Error("removeListener only takes instances of Function");var H,W=[];if(this.wildcard){var Y=typeof N=="string"?N.split(this.delimiter):N.slice();if(W=M.call(this,null,Y,this.listenerTree,0),!W)return this}else{if(!this._events[N])return this;H=this._events[N],W.push({_listeners:H})}for(var Q=0;Q<W.length;Q++){var re=W[Q];if(H=re._listeners,n(H)){for(var te=-1,J=0,ne=H.length;J<ne;J++)if(H[J]===F||H[J].listener&&H[J].listener===F||H[J]._origin&&H[J]._origin===F){te=J;break}if(te<0)continue;return this.wildcard?re._listeners.splice(te,1):this._events[N].splice(te,1),H.length===0&&(this.wildcard?delete re._listeners:delete this._events[N]),this._removeListener&&this.emit("removeListener",N,F),this}else(H===F||H.listener&&H.listener===F||H._origin&&H._origin===F)&&(this.wildcard?delete re._listeners:delete this._events[N],this._removeListener&&this.emit("removeListener",N,F))}return this.listenerTree&&P(this.listenerTree),this},q.prototype.offAny=function(N){var F=0,H=0,W;if(N&&this._all&&this._all.length>0){for(W=this._all,F=0,H=W.length;F<H;F++)if(N===W[F])return W.splice(F,1),this._removeListener&&this.emit("removeListenerAny",N),this}else{if(W=this._all,this._removeListener)for(F=0,H=W.length;F<H;F++)this.emit("removeListenerAny",W[F]);this._all=[]}return this},q.prototype.removeListener=q.prototype.off,q.prototype.removeAllListeners=function(N){if(N===e)return!this._events||v.call(this),this;if(this.wildcard){var F=M.call(this,null,N,this.listenerTree,0),H,W;if(!F)return this;for(W=0;W<F.length;W++)H=F[W],H._listeners=null;this.listenerTree&&P(this.listenerTree)}else this._events&&(this._events[N]=null);return this},q.prototype.listeners=function(N){var F=this._events,H,W,Y,Q,re;if(N===e){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!F)return[];for(H=h(F),Q=H.length,Y=[];Q-- >0;)W=F[H[Q]],typeof W=="function"?Y.push(W):Y.push.apply(Y,W);return Y}else{if(this.wildcard){if(re=this.listenerTree,!re)return[];var te=[],J=typeof N=="string"?N.split(this.delimiter):N.slice();return M.call(this,te,J,re,0),te}return F?(W=F[N],W?typeof W=="function"?[W]:W:[]):[]}},q.prototype.eventNames=function(N){var F=this._events;return this.wildcard?j.call(this,this.listenerTree,[],null,N):F?h(F):[]},q.prototype.listenerCount=function(N){return this.listeners(N).length},q.prototype.hasListeners=function(N){if(this.wildcard){var F=[],H=typeof N=="string"?N.split(this.delimiter):N.slice();return M.call(this,F,H,this.listenerTree,0),F.length>0}var W=this._events,Y=this._all;return!!(Y&&Y.length||W&&(N===e?h(W).length:W[N]))},q.prototype.listenersAny=function(){return this._all?this._all:[]},q.prototype.waitFor=function(N,F){var H=this,W=typeof F;return W==="number"?F={timeout:F}:W==="function"&&(F={filter:F}),F=E(F,{timeout:0,filter:e,handleError:!1,Promise,overload:!1},{filter:x,Promise:_}),S(F.Promise,function(Y,Q,re){function te(){var J=F.filter;if(!(J&&!J.apply(H,arguments)))if(H.off(N,te),F.handleError){var ne=arguments[0];ne?Q(ne):Y(b.apply(null,arguments).slice(1))}else Y(b.apply(null,arguments))}re(function(){H.off(N,te)}),H._on(N,te,!1)},{timeout:F.timeout,overload:F.overload})};function Z(N,F,H){H=E(H,{Promise,timeout:0,overload:!1},{Promise:_});var W=H.Promise;return S(W,function(Y,Q,re){var te;if(typeof N.addEventListener=="function"){te=function(){Y(b.apply(null,arguments))},re(function(){N.removeEventListener(F,te)}),N.addEventListener(F,te,{once:!0});return}var J=function(){ne&&N.removeListener("error",ne),Y(b.apply(null,arguments))},ne;F!=="error"&&(ne=function(ae){N.removeListener(F,J),Q(ae)},N.once("error",ne)),re(function(){ne&&N.removeListener("error",ne),N.removeListener(F,J)}),N.once(F,J)},{timeout:H.timeout,overload:H.overload})}var ie=q.prototype;Object.defineProperties(q,{defaultMaxListeners:{get:function(){return ie._maxListeners},set:function(N){if(typeof N!="number"||N<0||Number.isNaN(N))throw TypeError("n must be a non-negative number");ie._maxListeners=N},enumerable:!0},once:{value:Z,writable:!0,configurable:!0}}),Object.defineProperties(ie,{_maxListeners:{value:r,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof e=="function"&&e.amd?e(function(){return q}):d.exports=q})()})(yi);var Ac=Pp;function Pp(d,i,e,t){var n=function(a,o,l,u){i(l,a,o,"left"),i(u,o,a,"right")},r=d.transformX=function(a,o){e(a),e(o);for(var l=[],u=0;u<o.length;u++){for(var c=o[u],h=[],v=0;v<a.length;){var g=[];if(n(a[v],c,h,g),v++,g.length===1)c=g[0];else if(g.length===0){for(var p=v;p<a.length;p++)t(h,a[p]);c=null;break}else{for(var b=r(a.slice(v),g),y=0;y<b[0].length;y++)t(h,b[0][y]);for(var k=0;k<b[1].length;k++)t(l,b[1][k]);c=null;break}}c!=null&&t(l,c),a=h}return[a,l]};d.transform=function(a,o,l){if(!(l==="left"||l==="right"))throw new Error("type must be 'left' or 'right'");return o.length===0?a:a.length===1&&o.length===1?i([],a[0],o[0],l):l==="left"?r(a,o)[0]:r(o,a)[1]}}var Tc={exports:{}},Sr=Tc.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(d){if(d!=null&&typeof d!="string")throw new Error("Initial data must be a string");return d||""}},qs=function(d,i,e){return d.slice(0,i)+e+d.slice(i)},Is=function(d){if(typeof d.p!="number")throw new Error("component missing position field");if(typeof d.i=="string"==(typeof d.d=="string"))throw new Error("component needs an i or d field");if(d.p<0)throw new Error("position cannot be negative")},eo=function(d){for(var i=0;i<d.length;i++)Is(d[i])};Sr.apply=function(d,i){var e;eo(i);for(var t=0;t<i.length;t++){var n=i[t];if(n.i!=null)d=qs(d,n.p,n.i);else{if(e=d.slice(n.p,n.p+n.d.length),n.d!==e)throw new Error("Delete component '"+n.d+"' does not match deleted text '"+e+"'");d=d.slice(0,n.p)+d.slice(n.p+n.d.length)}}return d};var or=Sr._append=function(d,i){if(!(i.i===""||i.d===""))if(d.length===0)d.push(i);else{var e=d[d.length-1];e.i!=null&&i.i!=null&&e.p<=i.p&&i.p<=e.p+e.i.length?d[d.length-1]={i:qs(e.i,i.p-e.p,i.i),p:e.p}:e.d!=null&&i.d!=null&&i.p<=e.p&&e.p<=i.p+i.d.length?d[d.length-1]={d:qs(i.d,e.p-i.p,e.d),p:i.p}:d.push(i)}};Sr.compose=function(d,i){eo(d),eo(i);for(var e=d.slice(),t=0;t<i.length;t++)or(e,i[t]);return e},Sr.normalize=function(d){var i=[];(d.i!=null||d.p!=null)&&(d=[d]);for(var e=0;e<d.length;e++){var t=d[e];t.p==null&&(t.p=0),or(i,t)}return i};var Ls=function(d,i,e){return i.i!=null?i.p<d||i.p===d&&e?d+i.i.length:d:d<=i.p?d:d<=i.p+i.d.length?i.p:d-i.d.length};Sr.transformCursor=function(d,i,e){for(var t=e==="right",n=0;n<i.length;n++)d=Ls(d,i[n],t);return d};var Fp=Sr._tc=function(d,i,e,t){if(Is(i),Is(e),i.i!=null)or(d,{i:i.i,p:Ls(i.p,e,t==="right")});else if(e.i!=null){var n=i.d;i.p<e.p&&(or(d,{d:n.slice(0,e.p-i.p),p:i.p}),n=n.slice(e.p-i.p)),n!==""&&or(d,{d:n,p:i.p+e.i.length})}else if(i.p>=e.p+e.d.length)or(d,{d:i.d,p:i.p-e.d.length});else if(i.p+i.d.length<=e.p)or(d,i);else{var r={d:"",p:i.p};i.p<e.p&&(r.d=i.d.slice(0,e.p-i.p)),i.p+i.d.length>e.p+e.d.length&&(r.d+=i.d.slice(e.p+e.d.length-i.p));var a=Math.max(i.p,e.p),o=Math.min(i.p+i.d.length,e.p+e.d.length),l=i.d.slice(a-i.p,o-i.p),u=e.d.slice(a-e.p,o-e.p);if(l!==u)throw new Error("Delete ops delete different text in the same region of the document");r.d!==""&&(r.p=Ls(r.p,e),or(d,r))}return d},zp=function(d){return d.i!=null?{d:d.i,p:d.p}:{i:d.d,p:d.p}};Sr.invert=function(d){d=d.slice().reverse();for(var i=0;i<d.length;i++)d[i]=zp(d[i]);return d},Ac(Sr,Fp,eo,or);var to=function(d){return Object.prototype.toString.call(d)=="[object Array]"},Up=function(d){return!!d&&d.constructor===Object},Tn=function(d){return JSON.parse(JSON.stringify(d))},Ie={name:"json0",uri:"http://sharejs.org/types/JSONv0"},sr={};Ie.registerSubtype=function(d){sr[d.name]=d},Ie.create=function(d){return d===void 0?null:Tn(d)},Ie.invertComponent=function(d){var i={p:d.p};return d.t&&sr[d.t]&&(i.t=d.t,i.o=sr[d.t].invert(d.o)),d.si!==void 0&&(i.sd=d.si),d.sd!==void 0&&(i.si=d.sd),d.oi!==void 0&&(i.od=d.oi),d.od!==void 0&&(i.oi=d.od),d.li!==void 0&&(i.ld=d.li),d.ld!==void 0&&(i.li=d.ld),d.na!==void 0&&(i.na=-d.na),d.lm!==void 0&&(i.lm=d.p[d.p.length-1],i.p=d.p.slice(0,d.p.length-1).concat([d.lm])),i},Ie.invert=function(d){for(var i=d.slice().reverse(),e=[],t=0;t<i.length;t++)e.push(Ie.invertComponent(i[t]));return e},Ie.checkValidOp=function(d){for(var i=0;i<d.length;i++)if(!to(d[i].p))throw new Error("Missing path")},Ie.checkList=function(d){if(!to(d))throw new Error("Referenced element not a list")},Ie.checkObj=function(d){if(!Up(d))throw new Error("Referenced element not an object (it was "+JSON.stringify(d)+")")};function na(d){d.t="text0";var i={p:d.p.pop()};d.si!=null&&(i.i=d.si),d.sd!=null&&(i.d=d.sd),d.o=[i]}function ra(d){d.p.push(d.o[0].p),d.o[0].i!=null&&(d.si=d.o[0].i),d.o[0].d!=null&&(d.sd=d.o[0].d),delete d.t,delete d.o}Ie.apply=function(d,i){Ie.checkValidOp(i),i=Tn(i);for(var e={data:d},t=0;t<i.length;t++){var n=i[t];(n.si!=null||n.sd!=null)&&na(n);for(var r=null,a=e,o="data",l=0;l<n.p.length;l++){var u=n.p[l];if(r=a,a=a[o],o=u,r==null)throw new Error("Path invalid")}if(n.t&&n.o!==void 0&&sr[n.t])a[o]=sr[n.t].apply(a[o],n.o);else if(n.na!==void 0){if(typeof a[o]!="number")throw new Error("Referenced element not a number");a[o]+=n.na}else if(n.li!==void 0&&n.ld!==void 0)Ie.checkList(a),a[o]=n.li;else if(n.li!==void 0)Ie.checkList(a),a.splice(o,0,n.li);else if(n.ld!==void 0)Ie.checkList(a),a.splice(o,1);else if(n.lm!==void 0){if(Ie.checkList(a),n.lm!=o){var c=a[o];a.splice(o,1),a.splice(n.lm,0,c)}}else if(n.oi!==void 0)Ie.checkObj(a),a[o]=n.oi;else if(n.od!==void 0)Ie.checkObj(a),delete a[o];else throw new Error("invalid / missing instruction in op")}return e.data},Ie.shatter=function(d){for(var i=[],e=0;e<d.length;e++)i.push([d[e]]);return i},Ie.incrementalApply=function(d,i,e){for(var t=0;t<i.length;t++){var n=[i[t]];d=Ie.apply(d,n),e(n,d)}return d};var Hp=Ie.pathMatches=function(d,i,e){if(d.length!=i.length)return!1;for(var t=0;t<d.length;t++)if(d[t]!==i[t]&&(!e||t!==d.length-1))return!1;return!0};Ie.append=function(d,i){if(i=Tn(i),d.length===0){d.push(i);return}var e=d[d.length-1];if((i.si!=null||i.sd!=null)&&(e.si!=null||e.sd!=null)&&(na(i),na(e)),Hp(i.p,e.p))if(i.t&&e.t&&i.t===e.t&&sr[i.t]){if(e.o=sr[i.t].compose(e.o,i.o),i.si!=null||i.sd!=null){for(var t=i.p,n=0;n<e.o.length-1;n++)i.o=[e.o.pop()],i.p=t.slice(),ra(i),d.push(i);ra(e)}}else e.na!=null&&i.na!=null?d[d.length-1]={p:e.p,na:e.na+i.na}:e.li!==void 0&&i.li===void 0&&i.ld===e.li?e.ld!==void 0?delete e.li:d.pop():e.od!==void 0&&e.oi===void 0&&i.oi!==void 0&&i.od===void 0?e.oi=i.oi:e.oi!==void 0&&i.od!==void 0?i.oi!==void 0?e.oi=i.oi:e.od!==void 0?delete e.oi:d.pop():i.lm!==void 0&&i.p[i.p.length-1]===i.lm||d.push(i);else(i.si!=null||i.sd!=null)&&(e.si!=null||e.sd!=null)&&(ra(i),ra(e)),d.push(i)},Ie.compose=function(d,i){Ie.checkValidOp(d),Ie.checkValidOp(i);for(var e=Tn(d),t=0;t<i.length;t++)Ie.append(e,i[t]);return e},Ie.normalize=function(d){var i=[];d=to(d)?d:[d];for(var e=0;e<d.length;e++){var t=d[e];t.p==null&&(t.p=[]),Ie.append(i,t)}return i},Ie.commonLengthForOps=function(d,i){var e=d.p.length,t=i.p.length;if((d.na!=null||d.t)&&e++,(i.na!=null||i.t)&&t++,e===0)return-1;if(t===0)return null;e--,t--;for(var n=0;n<e;n++){var r=d.p[n];if(n>=t||r!==i.p[n])return null}return e},Ie.canOpAffectPath=function(d,i){return Ie.commonLengthForOps({p:i},d)!=null},Ie.transformComponent=function(d,i,e,t){i=Tn(i);var n=Ie.commonLengthForOps(e,i),r=Ie.commonLengthForOps(i,e),a=i.p.length,o=e.p.length;if((i.na!=null||i.t)&&a++,(e.na!=null||e.t)&&o++,r!=null&&o>a&&i.p[r]==e.p[r]){if(i.ld!==void 0){var l=Tn(e);l.p=l.p.slice(a),i.ld=Ie.apply(Tn(i.ld),[l])}else if(i.od!==void 0){var l=Tn(e);l.p=l.p.slice(a),i.od=Ie.apply(Tn(i.od),[l])}}if(n!=null){var u=a==o,l=e;if((i.si!=null||i.sd!=null)&&(e.si!=null||e.sd!=null)&&(na(i),l=Tn(e),na(l)),l.t&&sr[l.t]){if(i.t&&i.t===l.t){var c=sr[i.t].transform(i.o,l.o,t);if(i.si!=null||i.sd!=null)for(var h=i.p,v=0;v<c.length;v++)i.o=[c[v]],i.p=h.slice(),ra(i),Ie.append(d,i);else(!to(c)||c.length>0)&&(i.o=c,Ie.append(d,i));return d}}else if(e.na===void 0){if(e.li!==void 0&&e.ld!==void 0){if(e.p[n]===i.p[n])if(u){if(i.ld!==void 0)if(i.li!==void 0&&t==="left")i.ld=Tn(e.li);else return d}else return d}else if(e.li!==void 0)i.li!==void 0&&i.ld===void 0&&u&&i.p[n]===e.p[n]?t==="right"&&i.p[n]++:e.p[n]<=i.p[n]&&i.p[n]++,i.lm!==void 0&&u&&e.p[n]<=i.lm&&i.lm++;else if(e.ld!==void 0){if(i.lm!==void 0&&u){if(e.p[n]===i.p[n])return d;var h=e.p[n],g=i.p[n],p=i.lm;(h<p||h===p&&g<p)&&i.lm--}if(e.p[n]<i.p[n])i.p[n]--;else if(e.p[n]===i.p[n]){if(o<a)return d;if(i.ld!==void 0)if(i.li!==void 0)delete i.ld;else return d}}else if(e.lm!==void 0)if(i.lm!==void 0&&a===o){var g=i.p[n],p=i.lm,b=e.p[n],y=e.lm;if(b!==y)if(g===b)if(t==="left")i.p[n]=y,g===p&&(i.lm=y);else return d;else g>b&&i.p[n]--,g>y?i.p[n]++:g===y&&b>y&&(i.p[n]++,g===p&&i.lm++),(p>b||p===b&&p>g)&&i.lm--,p>y?i.lm++:p===y&&(y>b&&p>g||y<b&&p<g?t==="right"&&i.lm++:p>g?i.lm++:p===b&&i.lm--)}else if(i.li!==void 0&&i.ld===void 0&&u){var g=e.p[n],p=e.lm;h=i.p[n],h>g&&i.p[n]--,h>p&&i.p[n]++}else{var g=e.p[n],p=e.lm;h=i.p[n],h===g?i.p[n]=p:(h>g&&i.p[n]--,(h>p||h===p&&g>p)&&i.p[n]++)}else if(e.oi!==void 0&&e.od!==void 0){if(i.p[n]===e.p[n])if(i.oi!==void 0&&u){if(t==="right")return d;i.od=e.oi}else return d}else if(e.oi!==void 0){if(i.oi!==void 0&&i.p[n]===e.p[n])if(t==="left")Ie.append(d,{p:i.p,od:e.oi});else return d}else if(e.od!==void 0&&i.p[n]==e.p[n]){if(!u)return d;if(i.oi!==void 0)delete i.od;else return d}}}return Ie.append(d,i),d},Ac(Ie,Ie.transformComponent,Ie.checkValidOp,Ie.append);var Vp=Tc.exports;Ie.registerSubtype(Vp);var jp=Ie,wi={type:jp},ia={exports:{}};(function(d){var i=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},e=-1,t=1,n=0;i.Diff=function(r,a){return[r,a]},i.prototype.diff_main=function(r,a,o,l){typeof l=="undefined"&&(this.Diff_Timeout<=0?l=Number.MAX_VALUE:l=new Date().getTime()+this.Diff_Timeout*1e3);var u=l;if(r==null||a==null)throw new Error("Null input. (diff_main)");if(r==a)return r?[new i.Diff(n,r)]:[];typeof o=="undefined"&&(o=!0);var c=o,h=this.diff_commonPrefix(r,a),v=r.substring(0,h);r=r.substring(h),a=a.substring(h),h=this.diff_commonSuffix(r,a);var g=r.substring(r.length-h);r=r.substring(0,r.length-h),a=a.substring(0,a.length-h);var p=this.diff_compute_(r,a,c,u);return v&&p.unshift(new i.Diff(n,v)),g&&p.push(new i.Diff(n,g)),this.diff_cleanupMerge(p),p},i.prototype.diff_compute_=function(r,a,o,l){var u;if(!r)return[new i.Diff(t,a)];if(!a)return[new i.Diff(e,r)];var c=r.length>a.length?r:a,h=r.length>a.length?a:r,v=c.indexOf(h);if(v!=-1)return u=[new i.Diff(t,c.substring(0,v)),new i.Diff(n,h),new i.Diff(t,c.substring(v+h.length))],r.length>a.length&&(u[0][0]=u[2][0]=e),u;if(h.length==1)return[new i.Diff(e,r),new i.Diff(t,a)];var g=this.diff_halfMatch_(r,a);if(g){var p=g[0],b=g[1],y=g[2],k=g[3],E=g[4],_=this.diff_main(p,y,o,l),A=this.diff_main(b,k,o,l);return _.concat([new i.Diff(n,E)],A)}return o&&r.length>100&&a.length>100?this.diff_lineMode_(r,a,l):this.diff_bisect_(r,a,l)},i.prototype.diff_lineMode_=function(r,a,o){var l=this.diff_linesToChars_(r,a);r=l.chars1,a=l.chars2;var u=l.lineArray,c=this.diff_main(r,a,!1,o);this.diff_charsToLines_(c,u),this.diff_cleanupSemantic(c),c.push(new i.Diff(n,""));for(var h=0,v=0,g=0,p="",b="";h<c.length;){switch(c[h][0]){case t:g++,b+=c[h][1];break;case e:v++,p+=c[h][1];break;case n:if(v>=1&&g>=1){c.splice(h-v-g,v+g),h=h-v-g;for(var y=this.diff_main(p,b,!1,o),k=y.length-1;k>=0;k--)c.splice(h,0,y[k]);h=h+y.length}g=0,v=0,p="",b="";break}h++}return c.pop(),c},i.prototype.diff_bisect_=function(r,a,o){for(var l=r.length,u=a.length,c=Math.ceil((l+u)/2),h=c,v=2*c,g=new Array(v),p=new Array(v),b=0;b<v;b++)g[b]=-1,p[b]=-1;g[h+1]=0,p[h+1]=0;for(var y=l-u,k=y%2!=0,E=0,_=0,A=0,x=0,C=0;C<c&&!(new Date().getTime()>o);C++){for(var S=-C+E;S<=C-_;S+=2){var O=h+S,M;S==-C||S!=C&&g[O-1]<g[O+1]?M=g[O+1]:M=g[O-1]+1;for(var V=M-S;M<l&&V<u&&r.charAt(M)==a.charAt(V);)M++,V++;if(g[O]=M,M>l)_+=2;else if(V>u)E+=2;else if(k){var j=h+y-S;if(j>=0&&j<v&&p[j]!=-1){var P=l-p[j];if(M>=P)return this.diff_bisectSplit_(r,a,M,V,o)}}}for(var D=-C+A;D<=C-x;D+=2){var j=h+D,P;D==-C||D!=C&&p[j-1]<p[j+1]?P=p[j+1]:P=p[j-1]+1;for(var T=P-D;P<l&&T<u&&r.charAt(l-P-1)==a.charAt(u-T-1);)P++,T++;if(p[j]=P,P>l)x+=2;else if(T>u)A+=2;else if(!k){var O=h+y-D;if(O>=0&&O<v&&g[O]!=-1){var M=g[O],V=h+M-O;if(P=l-P,M>=P)return this.diff_bisectSplit_(r,a,M,V,o)}}}}return[new i.Diff(e,r),new i.Diff(t,a)]},i.prototype.diff_bisectSplit_=function(r,a,o,l,u){var c=r.substring(0,o),h=a.substring(0,l),v=r.substring(o),g=a.substring(l),p=this.diff_main(c,h,!1,u),b=this.diff_main(v,g,!1,u);return p.concat(b)},i.prototype.diff_linesToChars_=function(r,a){var o=[],l={};o[0]="";function u(g){for(var p="",b=0,y=-1,k=o.length;y<g.length-1;){y=g.indexOf(`
`,b),y==-1&&(y=g.length-1);var E=g.substring(b,y+1);(l.hasOwnProperty?l.hasOwnProperty(E):l[E]!==void 0)?p+=String.fromCharCode(l[E]):(k==c&&(E=g.substring(b),y=g.length),p+=String.fromCharCode(k),l[E]=k,o[k++]=E),b=y+1}return p}var c=4e4,h=u(r);c=65535;var v=u(a);return{chars1:h,chars2:v,lineArray:o}},i.prototype.diff_charsToLines_=function(r,a){for(var o=0;o<r.length;o++){for(var l=r[o][1],u=[],c=0;c<l.length;c++)u[c]=a[l.charCodeAt(c)];r[o][1]=u.join("")}},i.prototype.diff_commonPrefix=function(r,a){if(!r||!a||r.charAt(0)!=a.charAt(0))return 0;for(var o=0,l=Math.min(r.length,a.length),u=l,c=0;o<u;)r.substring(c,u)==a.substring(c,u)?(o=u,c=o):l=u,u=Math.floor((l-o)/2+o);return u},i.prototype.diff_commonSuffix=function(r,a){if(!r||!a||r.charAt(r.length-1)!=a.charAt(a.length-1))return 0;for(var o=0,l=Math.min(r.length,a.length),u=l,c=0;o<u;)r.substring(r.length-u,r.length-c)==a.substring(a.length-u,a.length-c)?(o=u,c=o):l=u,u=Math.floor((l-o)/2+o);return u},i.prototype.diff_commonOverlap_=function(r,a){var o=r.length,l=a.length;if(o==0||l==0)return 0;o>l?r=r.substring(o-l):o<l&&(a=a.substring(0,o));var u=Math.min(o,l);if(r==a)return u;for(var c=0,h=1;;){var v=r.substring(u-h),g=a.indexOf(v);if(g==-1)return c;h+=g,(g==0||r.substring(u-h)==a.substring(0,h))&&(c=h,h++)}},i.prototype.diff_halfMatch_=function(r,a){if(this.Diff_Timeout<=0)return null;var o=r.length>a.length?r:a,l=r.length>a.length?a:r;if(o.length<4||l.length*2<o.length)return null;var u=this;function c(_,A,x){for(var C=_.substring(x,x+Math.floor(_.length/4)),S=-1,O="",M,V,j,P;(S=A.indexOf(C,S+1))!=-1;){var D=u.diff_commonPrefix(_.substring(x),A.substring(S)),T=u.diff_commonSuffix(_.substring(0,x),A.substring(0,S));O.length<T+D&&(O=A.substring(S-T,S)+A.substring(S,S+D),M=_.substring(0,x-T),V=_.substring(x+D),j=A.substring(0,S-T),P=A.substring(S+D))}return O.length*2>=_.length?[M,V,j,P,O]:null}var h=c(o,l,Math.ceil(o.length/4)),v=c(o,l,Math.ceil(o.length/2)),g;if(!h&&!v)return null;v?h?g=h[4].length>v[4].length?h:v:g=v:g=h;var p,b,y,k;r.length>a.length?(p=g[0],b=g[1],y=g[2],k=g[3]):(y=g[0],k=g[1],p=g[2],b=g[3]);var E=g[4];return[p,b,y,k,E]},i.prototype.diff_cleanupSemantic=function(r){for(var a=!1,o=[],l=0,u=null,c=0,h=0,v=0,g=0,p=0;c<r.length;)r[c][0]==n?(o[l++]=c,h=g,v=p,g=0,p=0,u=r[c][1]):(r[c][0]==t?g+=r[c][1].length:p+=r[c][1].length,u&&u.length<=Math.max(h,v)&&u.length<=Math.max(g,p)&&(r.splice(o[l-1],0,new i.Diff(e,u)),r[o[l-1]+1][0]=t,l--,l--,c=l>0?o[l-1]:-1,h=0,v=0,g=0,p=0,u=null,a=!0)),c++;for(a&&this.diff_cleanupMerge(r),this.diff_cleanupSemanticLossless(r),c=1;c<r.length;){if(r[c-1][0]==e&&r[c][0]==t){var b=r[c-1][1],y=r[c][1],k=this.diff_commonOverlap_(b,y),E=this.diff_commonOverlap_(y,b);k>=E?(k>=b.length/2||k>=y.length/2)&&(r.splice(c,0,new i.Diff(n,y.substring(0,k))),r[c-1][1]=b.substring(0,b.length-k),r[c+1][1]=y.substring(k),c++):(E>=b.length/2||E>=y.length/2)&&(r.splice(c,0,new i.Diff(n,b.substring(0,E))),r[c-1][0]=t,r[c-1][1]=y.substring(0,y.length-E),r[c+1][0]=e,r[c+1][1]=b.substring(E),c++),c++}c++}},i.prototype.diff_cleanupSemanticLossless=function(r){function a(E,_){if(!E||!_)return 6;var A=E.charAt(E.length-1),x=_.charAt(0),C=A.match(i.nonAlphaNumericRegex_),S=x.match(i.nonAlphaNumericRegex_),O=C&&A.match(i.whitespaceRegex_),M=S&&x.match(i.whitespaceRegex_),V=O&&A.match(i.linebreakRegex_),j=M&&x.match(i.linebreakRegex_),P=V&&E.match(i.blanklineEndRegex_),D=j&&_.match(i.blanklineStartRegex_);return P||D?5:V||j?4:C&&!O&&M?3:O||M?2:C||S?1:0}for(var o=1;o<r.length-1;){if(r[o-1][0]==n&&r[o+1][0]==n){var l=r[o-1][1],u=r[o][1],c=r[o+1][1],h=this.diff_commonSuffix(l,u);if(h){var v=u.substring(u.length-h);l=l.substring(0,l.length-h),u=v+u.substring(0,u.length-h),c=v+c}for(var g=l,p=u,b=c,y=a(l,u)+a(u,c);u.charAt(0)===c.charAt(0);){l+=u.charAt(0),u=u.substring(1)+c.charAt(0),c=c.substring(1);var k=a(l,u)+a(u,c);k>=y&&(y=k,g=l,p=u,b=c)}r[o-1][1]!=g&&(g?r[o-1][1]=g:(r.splice(o-1,1),o--),r[o][1]=p,b?r[o+1][1]=b:(r.splice(o+1,1),o--))}o++}},i.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,i.whitespaceRegex_=/\s/,i.linebreakRegex_=/[\r\n]/,i.blanklineEndRegex_=/\n\r?\n$/,i.blanklineStartRegex_=/^\r?\n\r?\n/,i.prototype.diff_cleanupEfficiency=function(r){for(var a=!1,o=[],l=0,u=null,c=0,h=!1,v=!1,g=!1,p=!1;c<r.length;)r[c][0]==n?(r[c][1].length<this.Diff_EditCost&&(g||p)?(o[l++]=c,h=g,v=p,u=r[c][1]):(l=0,u=null),g=p=!1):(r[c][0]==e?p=!0:g=!0,u&&(h&&v&&g&&p||u.length<this.Diff_EditCost/2&&h+v+g+p==3)&&(r.splice(o[l-1],0,new i.Diff(e,u)),r[o[l-1]+1][0]=t,l--,u=null,h&&v?(g=p=!0,l=0):(l--,c=l>0?o[l-1]:-1,g=p=!1),a=!0)),c++;a&&this.diff_cleanupMerge(r)},i.prototype.diff_cleanupMerge=function(r){r.push(new i.Diff(n,""));for(var a=0,o=0,l=0,u="",c="",h;a<r.length;)switch(r[a][0]){case t:l++,c+=r[a][1],a++;break;case e:o++,u+=r[a][1],a++;break;case n:o+l>1?(o!==0&&l!==0&&(h=this.diff_commonPrefix(c,u),h!==0&&(a-o-l>0&&r[a-o-l-1][0]==n?r[a-o-l-1][1]+=c.substring(0,h):(r.splice(0,0,new i.Diff(n,c.substring(0,h))),a++),c=c.substring(h),u=u.substring(h)),h=this.diff_commonSuffix(c,u),h!==0&&(r[a][1]=c.substring(c.length-h)+r[a][1],c=c.substring(0,c.length-h),u=u.substring(0,u.length-h))),a-=o+l,r.splice(a,o+l),u.length&&(r.splice(a,0,new i.Diff(e,u)),a++),c.length&&(r.splice(a,0,new i.Diff(t,c)),a++),a++):a!==0&&r[a-1][0]==n?(r[a-1][1]+=r[a][1],r.splice(a,1)):a++,l=0,o=0,u="",c="";break}r[r.length-1][1]===""&&r.pop();var v=!1;for(a=1;a<r.length-1;)r[a-1][0]==n&&r[a+1][0]==n&&(r[a][1].substring(r[a][1].length-r[a-1][1].length)==r[a-1][1]?(r[a][1]=r[a-1][1]+r[a][1].substring(0,r[a][1].length-r[a-1][1].length),r[a+1][1]=r[a-1][1]+r[a+1][1],r.splice(a-1,1),v=!0):r[a][1].substring(0,r[a+1][1].length)==r[a+1][1]&&(r[a-1][1]+=r[a+1][1],r[a][1]=r[a][1].substring(r[a+1][1].length)+r[a+1][1],r.splice(a+1,1),v=!0)),a++;v&&this.diff_cleanupMerge(r)},i.prototype.diff_xIndex=function(r,a){var o=0,l=0,u=0,c=0,h;for(h=0;h<r.length&&(r[h][0]!==t&&(o+=r[h][1].length),r[h][0]!==e&&(l+=r[h][1].length),!(o>a));h++)u=o,c=l;return r.length!=h&&r[h][0]===e?c:c+(a-u)},i.prototype.diff_prettyHtml=function(r){for(var a=[],o=/&/g,l=/</g,u=/>/g,c=/\n/g,h=0;h<r.length;h++){var v=r[h][0],g=r[h][1],p=g.replace(o,"&amp;").replace(l,"&lt;").replace(u,"&gt;").replace(c,"&para;<br>");switch(v){case t:a[h]='<ins style="background:#e6ffe6;">'+p+"</ins>";break;case e:a[h]='<del style="background:#ffe6e6;">'+p+"</del>";break;case n:a[h]="<span>"+p+"</span>";break}}return a.join("")},i.prototype.diff_text1=function(r){for(var a=[],o=0;o<r.length;o++)r[o][0]!==t&&(a[o]=r[o][1]);return a.join("")},i.prototype.diff_text2=function(r){for(var a=[],o=0;o<r.length;o++)r[o][0]!==e&&(a[o]=r[o][1]);return a.join("")},i.prototype.diff_levenshtein=function(r){for(var a=0,o=0,l=0,u=0;u<r.length;u++){var c=r[u][0],h=r[u][1];switch(c){case t:o+=h.length;break;case e:l+=h.length;break;case n:a+=Math.max(o,l),o=0,l=0;break}}return a+=Math.max(o,l),a},i.prototype.diff_toDelta=function(r){for(var a=[],o=0;o<r.length;o++)switch(r[o][0]){case t:a[o]="+"+encodeURI(r[o][1]);break;case e:a[o]="-"+r[o][1].length;break;case n:a[o]="="+r[o][1].length;break}return a.join("	").replace(/%20/g," ")},i.prototype.diff_fromDelta=function(r,a){for(var o=[],l=0,u=0,c=a.split(/\t/g),h=0;h<c.length;h++){var v=c[h].substring(1);switch(c[h].charAt(0)){case"+":try{o[l++]=new i.Diff(t,decodeURI(v))}catch{throw new Error("Illegal escape in diff_fromDelta: "+v)}break;case"-":case"=":var g=parseInt(v,10);if(isNaN(g)||g<0)throw new Error("Invalid number in diff_fromDelta: "+v);var p=r.substring(u,u+=g);c[h].charAt(0)=="="?o[l++]=new i.Diff(n,p):o[l++]=new i.Diff(e,p);break;default:if(c[h])throw new Error("Invalid diff operation in diff_fromDelta: "+c[h])}}if(u!=r.length)throw new Error("Delta length ("+u+") does not equal source text length ("+r.length+").");return o},i.prototype.match_main=function(r,a,o){if(r==null||a==null||o==null)throw new Error("Null input. (match_main)");return o=Math.max(0,Math.min(o,r.length)),r==a?0:r.length?r.substring(o,o+a.length)==a?o:this.match_bitap_(r,a,o):-1},i.prototype.match_bitap_=function(r,a,o){if(a.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(a),u=this;function c(M,V){var j=M/a.length,P=Math.abs(o-V);return u.Match_Distance?j+P/u.Match_Distance:P?1:j}var h=this.Match_Threshold,v=r.indexOf(a,o);v!=-1&&(h=Math.min(c(0,v),h),v=r.lastIndexOf(a,o+a.length),v!=-1&&(h=Math.min(c(0,v),h)));var g=1<<a.length-1;v=-1;for(var p,b,y=a.length+r.length,k,E=0;E<a.length;E++){for(p=0,b=y;p<b;)c(E,o+b)<=h?p=b:y=b,b=Math.floor((y-p)/2+p);y=b;var _=Math.max(1,o-b+1),A=Math.min(o+b,r.length)+a.length,x=Array(A+2);x[A+1]=(1<<E)-1;for(var C=A;C>=_;C--){var S=l[r.charAt(C-1)];if(E===0?x[C]=(x[C+1]<<1|1)&S:x[C]=(x[C+1]<<1|1)&S|((k[C+1]|k[C])<<1|1)|k[C+1],x[C]&g){var O=c(E,C-1);if(O<=h)if(h=O,v=C-1,v>o)_=Math.max(1,2*o-v);else break}}if(c(E+1,o)>h)break;k=x}return v},i.prototype.match_alphabet_=function(r){for(var a={},o=0;o<r.length;o++)a[r.charAt(o)]=0;for(var o=0;o<r.length;o++)a[r.charAt(o)]|=1<<r.length-o-1;return a},i.prototype.patch_addContext_=function(r,a){if(a.length!=0){if(r.start2===null)throw Error("patch not initialized");for(var o=a.substring(r.start2,r.start2+r.length1),l=0;a.indexOf(o)!=a.lastIndexOf(o)&&o.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,o=a.substring(r.start2-l,r.start2+r.length1+l);l+=this.Patch_Margin;var u=a.substring(r.start2-l,r.start2);u&&r.diffs.unshift(new i.Diff(n,u));var c=a.substring(r.start2+r.length1,r.start2+r.length1+l);c&&r.diffs.push(new i.Diff(n,c)),r.start1-=u.length,r.start2-=u.length,r.length1+=u.length+c.length,r.length2+=u.length+c.length}},i.prototype.patch_make=function(r,a,o){var l,u;if(typeof r=="string"&&typeof a=="string"&&typeof o=="undefined")l=r,u=this.diff_main(l,a,!0),u.length>2&&(this.diff_cleanupSemantic(u),this.diff_cleanupEfficiency(u));else if(r&&typeof r=="object"&&typeof a=="undefined"&&typeof o=="undefined")u=r,l=this.diff_text1(u);else if(typeof r=="string"&&a&&typeof a=="object"&&typeof o=="undefined")l=r,u=a;else if(typeof r=="string"&&typeof a=="string"&&o&&typeof o=="object")l=r,u=o;else throw new Error("Unknown call format to patch_make.");if(u.length===0)return[];for(var c=[],h=new i.patch_obj,v=0,g=0,p=0,b=l,y=l,k=0;k<u.length;k++){var E=u[k][0],_=u[k][1];switch(!v&&E!==n&&(h.start1=g,h.start2=p),E){case t:h.diffs[v++]=u[k],h.length2+=_.length,y=y.substring(0,p)+_+y.substring(p);break;case e:h.length1+=_.length,h.diffs[v++]=u[k],y=y.substring(0,p)+y.substring(p+_.length);break;case n:_.length<=2*this.Patch_Margin&&v&&u.length!=k+1?(h.diffs[v++]=u[k],h.length1+=_.length,h.length2+=_.length):_.length>=2*this.Patch_Margin&&v&&(this.patch_addContext_(h,b),c.push(h),h=new i.patch_obj,v=0,b=y,g=p);break}E!==t&&(g+=_.length),E!==e&&(p+=_.length)}return v&&(this.patch_addContext_(h,b),c.push(h)),c},i.prototype.patch_deepCopy=function(r){for(var a=[],o=0;o<r.length;o++){var l=r[o],u=new i.patch_obj;u.diffs=[];for(var c=0;c<l.diffs.length;c++)u.diffs[c]=new i.Diff(l.diffs[c][0],l.diffs[c][1]);u.start1=l.start1,u.start2=l.start2,u.length1=l.length1,u.length2=l.length2,a[o]=u}return a},i.prototype.patch_apply=function(r,a){if(r.length==0)return[a,[]];r=this.patch_deepCopy(r);var o=this.patch_addPadding(r);a=o+a+o,this.patch_splitMax(r);for(var l=0,u=[],c=0;c<r.length;c++){var h=r[c].start2+l,v=this.diff_text1(r[c].diffs),g,p=-1;if(v.length>this.Match_MaxBits?(g=this.match_main(a,v.substring(0,this.Match_MaxBits),h),g!=-1&&(p=this.match_main(a,v.substring(v.length-this.Match_MaxBits),h+v.length-this.Match_MaxBits),(p==-1||g>=p)&&(g=-1))):g=this.match_main(a,v,h),g==-1)u[c]=!1,l-=r[c].length2-r[c].length1;else{u[c]=!0,l=g-h;var b;if(p==-1?b=a.substring(g,g+v.length):b=a.substring(g,p+this.Match_MaxBits),v==b)a=a.substring(0,g)+this.diff_text2(r[c].diffs)+a.substring(g+v.length);else{var y=this.diff_main(v,b,!1);if(v.length>this.Match_MaxBits&&this.diff_levenshtein(y)/v.length>this.Patch_DeleteThreshold)u[c]=!1;else{this.diff_cleanupSemanticLossless(y);for(var k=0,E,_=0;_<r[c].diffs.length;_++){var A=r[c].diffs[_];A[0]!==n&&(E=this.diff_xIndex(y,k)),A[0]===t?a=a.substring(0,g+E)+A[1]+a.substring(g+E):A[0]===e&&(a=a.substring(0,g+E)+a.substring(g+this.diff_xIndex(y,k+A[1].length))),A[0]!==e&&(k+=A[1].length)}}}}}return a=a.substring(o.length,a.length-o.length),[a,u]},i.prototype.patch_addPadding=function(r){for(var a=this.Patch_Margin,o="",l=1;l<=a;l++)o+=String.fromCharCode(l);for(var l=0;l<r.length;l++)r[l].start1+=a,r[l].start2+=a;var u=r[0],c=u.diffs;if(c.length==0||c[0][0]!=n)c.unshift(new i.Diff(n,o)),u.start1-=a,u.start2-=a,u.length1+=a,u.length2+=a;else if(a>c[0][1].length){var h=a-c[0][1].length;c[0][1]=o.substring(c[0][1].length)+c[0][1],u.start1-=h,u.start2-=h,u.length1+=h,u.length2+=h}if(u=r[r.length-1],c=u.diffs,c.length==0||c[c.length-1][0]!=n)c.push(new i.Diff(n,o)),u.length1+=a,u.length2+=a;else if(a>c[c.length-1][1].length){var h=a-c[c.length-1][1].length;c[c.length-1][1]+=o.substring(0,h),u.length1+=h,u.length2+=h}return o},i.prototype.patch_splitMax=function(r){for(var a=this.Match_MaxBits,o=0;o<r.length;o++)if(!(r[o].length1<=a)){var l=r[o];r.splice(o--,1);for(var u=l.start1,c=l.start2,h="";l.diffs.length!==0;){var v=new i.patch_obj,g=!0;for(v.start1=u-h.length,v.start2=c-h.length,h!==""&&(v.length1=v.length2=h.length,v.diffs.push(new i.Diff(n,h)));l.diffs.length!==0&&v.length1<a-this.Patch_Margin;){var p=l.diffs[0][0],b=l.diffs[0][1];p===t?(v.length2+=b.length,c+=b.length,v.diffs.push(l.diffs.shift()),g=!1):p===e&&v.diffs.length==1&&v.diffs[0][0]==n&&b.length>2*a?(v.length1+=b.length,u+=b.length,g=!1,v.diffs.push(new i.Diff(p,b)),l.diffs.shift()):(b=b.substring(0,a-v.length1-this.Patch_Margin),v.length1+=b.length,u+=b.length,p===n?(v.length2+=b.length,c+=b.length):g=!1,v.diffs.push(new i.Diff(p,b)),b==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(b.length))}h=this.diff_text2(v.diffs),h=h.substring(h.length-this.Patch_Margin);var y=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);y!==""&&(v.length1+=y.length,v.length2+=y.length,v.diffs.length!==0&&v.diffs[v.diffs.length-1][0]===n?v.diffs[v.diffs.length-1][1]+=y:v.diffs.push(new i.Diff(n,y))),g||r.splice(++o,0,v)}}},i.prototype.patch_toText=function(r){for(var a=[],o=0;o<r.length;o++)a[o]=r[o];return a.join("")},i.prototype.patch_fromText=function(r){var a=[];if(!r)return a;for(var o=r.split(`
`),l=0,u=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<o.length;){var c=o[l].match(u);if(!c)throw new Error("Invalid patch string: "+o[l]);var h=new i.patch_obj;for(a.push(h),h.start1=parseInt(c[1],10),c[2]===""?(h.start1--,h.length1=1):c[2]=="0"?h.length1=0:(h.start1--,h.length1=parseInt(c[2],10)),h.start2=parseInt(c[3],10),c[4]===""?(h.start2--,h.length2=1):c[4]=="0"?h.length2=0:(h.start2--,h.length2=parseInt(c[4],10)),l++;l<o.length;){var v=o[l].charAt(0);try{var g=decodeURI(o[l].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+g)}if(v=="-")h.diffs.push(new i.Diff(e,g));else if(v=="+")h.diffs.push(new i.Diff(t,g));else if(v==" ")h.diffs.push(new i.Diff(n,g));else{if(v=="@")break;if(v!=="")throw new Error('Invalid patch mode "'+v+'" in: '+g)}l++}}return a},i.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},i.patch_obj.prototype.toString=function(){var r,a;this.length1===0?r=this.start1+",0":this.length1==1?r=this.start1+1:r=this.start1+1+","+this.length1,this.length2===0?a=this.start2+",0":this.length2==1?a=this.start2+1:a=this.start2+1+","+this.length2;for(var o=["@@ -"+r+" +"+a+` @@
`],l,u=0;u<this.diffs.length;u++){switch(this.diffs[u][0]){case t:l="+";break;case e:l="-";break;case n:l=" ";break}o[u+1]=l+encodeURI(this.diffs[u][1])+`
`}return o.join("").replace(/%20/g," ")},d.exports=i,d.exports.diff_match_patch=i,d.exports.DIFF_DELETE=e,d.exports.DIFF_INSERT=t,d.exports.DIFF_EQUAL=n})(ia);var Gp=function(){var d=document.getSelection();if(!d.rangeCount)return function(){};for(var i=document.activeElement,e=[],t=0;t<d.rangeCount;t++)e.push(d.getRangeAt(t));switch(i.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":i.blur();break;default:i=null;break}return d.removeAllRanges(),function(){d.type==="Caret"&&d.removeAllRanges(),d.rangeCount||e.forEach(function(n){d.addRange(n)}),i&&i.focus()}},Wp=Gp,Sc={"text/plain":"Text","text/html":"Url",default:"Text"},Kp="Copy to clipboard: #{key}, Enter";function Zp(d){var i=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return d.replace(/#{\s*key\s*}/g,i)}function $p(d,i){var e,t,n,r,a,o,l=!1;i||(i={}),e=i.debug||!1;try{n=Wp(),r=document.createRange(),a=document.getSelection(),o=document.createElement("span"),o.textContent=d,o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(c){if(c.stopPropagation(),i.format)if(c.preventDefault(),typeof c.clipboardData=="undefined"){e&&console.warn("unable to use e.clipboardData"),e&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var h=Sc[i.format]||Sc.default;window.clipboardData.setData(h,d)}else c.clipboardData.clearData(),c.clipboardData.setData(i.format,d);i.onCopy&&(c.preventDefault(),i.onCopy(c.clipboardData))}),document.body.appendChild(o),r.selectNodeContents(o),a.addRange(r);var u=document.execCommand("copy");if(!u)throw new Error("copy command was unsuccessful");l=!0}catch(c){e&&console.error("unable to copy using execCommand: ",c),e&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(i.format||"text",d),i.onCopy&&i.onCopy(window.clipboardData),l=!0}catch(h){e&&console.error("unable to copy using clipboardData: ",h),e&&console.error("falling back to prompt"),t=Zp("message"in i?i.message:Kp),window.prompt(t,d)}}finally{a&&(typeof a.removeRange=="function"?a.removeRange(r):a.removeAllRanges()),o&&document.body.removeChild(o),n()}return l}var Yp=$p,Xp={exports:{}};/*!
 2020 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 6.4.0
*/(function(d,i){(function(e,t){d.exports=t()})(Cn,function(){var e=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},n={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function a(o){var l,u,c,h,v,g,p,b,y,k,E,_,A,x,C,S,O,M,V,j,P,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=[],q=0;if(isNaN(o))throw new TypeError("Invalid number");if(c=D.bits===!0,C=D.unix===!0,_=D.pad===!0,u=D.base||2,A=D.round!==void 0?D.round:C?1:2,p=D.locale!==void 0?D.locale:"",b=D.localeOptions||{},S=D.separator!==void 0?D.separator:"",O=D.spacer!==void 0?D.spacer:C?"":" ",V=D.symbols||{},M=u===2&&D.standard||"jedec",E=D.output||"string",v=D.fullform===!0,g=D.fullforms instanceof Array?D.fullforms:[],l=D.exponent!==void 0?D.exponent:-1,j=r[D.roundingMethod]||Math.round,y=(k=Number(o))<0,h=u>2?1e3:1024,P=isNaN(D.precision)===!1?parseInt(D.precision,10):0,y&&(k=-k),(l===-1||isNaN(l))&&(l=Math.floor(Math.log(k)/Math.log(h)))<0&&(l=0),l>8&&(P>0&&(P+=8-l),l=8),E==="exponent")return l;if(k===0)T[0]=0,x=T[1]=C?"":t[M][c?"bits":"bytes"][l];else{q=k/(u===2?Math.pow(2,10*l):Math.pow(1e3,l)),c&&(q*=8)>=h&&l<8&&(q/=h,l++);var Z=Math.pow(10,l>0?A:0);T[0]=j(q*Z)/Z,T[0]===h&&l<8&&D.exponent===void 0&&(T[0]=1,l++),x=T[1]=u===10&&l===1?c?"kb":"kB":t[M][c?"bits":"bytes"][l],C&&(T[1]=M==="jedec"?T[1].charAt(0):l>0?T[1].replace(/B$/,""):T[1],e.test(T[1])&&(T[0]=Math.floor(T[0]),T[1]=""))}if(y&&(T[0]=-T[0]),P>0&&(T[0]=T[0].toPrecision(P)),T[1]=V[T[1]]||T[1],p===!0?T[0]=T[0].toLocaleString():p.length>0?T[0]=T[0].toLocaleString(p,b):S.length>0&&(T[0]=T[0].toString().replace(".",S)),_&&Number.isInteger(T[0])===!1&&A>0){var ie=S||".",N=T[0].toString().split(ie),F=N[1]||"",H=F.length,W=A-H;T[0]="".concat(N[0]).concat(ie).concat(F.padEnd(H+W,"0"))}return v&&(T[1]=g[l]?g[l]:n[M][l]+(c?"bit":"byte")+(T[0]===1?"":"s")),E==="array"?T:E==="object"?{value:T[0],symbol:T[1],exponent:l,unit:x}:T.join(O)}return a.partial=function(o){return function(l){return a(l,o)}},a})})(Xp);var Jp=function(){function d(i){if(ve(this,d),this.options={limitHeight:5e3,canvasCache:[],canvasCount:0},!i.container)throw new Error("need a cantainer!");this.options=Pe(Pe({},this.options),i),i.container.style["line-height"]="0px"}return we(d,[{key:"removeCanvas",value:function(){var e=this.options.canvasCache;e==null||e.forEach(function(t){var n;t==null||(n=t.parentElement)===null||n===void 0||n.removeChild(t)}),this.options.canvasCache=[]}},{key:"getCanvas",value:function(e){var t=this.options.canvasCache;return e=e>0?e-1:e,t?t[e]:void 0}},{key:"resize",value:function(e,t){var n=this.options,r=n.limitHeight,a=n.canvasCount,o=n.container,l=this.options.canvasCache,u=Math.ceil(t/(r||0));if(u!==a){this.removeCanvas(),l=[];for(var c=0;c<u;c++){var h=document.createElement("canvas");h.style["vertical-align"]="bottom",h.setAttribute("width",e.toString()),c===u-1?h.setAttribute("height",(t%(r||0)).toString()):h.setAttribute("height",(r||0).toString()),o==null||o.appendChild(h),l.push(h)}this.options.canvasCache=l}else{var v,g=this.getCanvas(u);(v=l)===null||v===void 0||v.forEach(function(p){p.setAttribute("width",e.toString())}),g&&g.setAttribute("height",(t%(r||0)).toString())}}},{key:"handleSingleRect",value:function(e){var t=e.x,n=e.y,r=e.index,a=e.width,o=e.height,l=e.callback,u=this.options.limitHeight,c=this.getCanvas(r);if(c){var h=c.getContext("2d"),v=new DOMRect(t,n-(u||0)*(r-1),a,o);l(Pe(Pe({},v.toJSON()),{},{context:h}))}}},{key:"drawRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.fill,l=e.stroke,u=function(v){var g=v.context;!g||(g.fillStyle=o===void 0?"#FFEC3D":o,g.strokeStyle=l===void 0?"#FFEC3D":l,g.fillRect(v.x,v.y,v.width,v.height))},c=new DOMRect(t,n,r,a);this.handleRect(Pe(Pe({},c.toJSON()),{},{callback:u}))}},{key:"handleRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.callback,l=this.options.limitHeight,u={x:t+r,y:n+a},c=Math.ceil(n/(l||0)),h=Math.ceil(u.y/(l||0)),v=new DOMRect(t,n,r,a);this.handleSingleRect(Pe(Pe({},v.toJSON()),{},{index:c,callback:o})),c!==h&&this.handleSingleRect(Pe(Pe({},v.toJSON()),{},{index:h,callback:o}))}},{key:"getImageData",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=this.options.limitHeight,l=Math.ceil(n/(o||0)),u=this.getCanvas(l),c=u==null?void 0:u.getContext("2d");return c==null?void 0:c.getImageData(t,n,r,a)}},{key:"clearRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=function(c){var h=c.context,v=c.x,g=c.y,p=c.width,b=c.height;h==null||h.clearRect(v,g,p,b)},l=new DOMRect(t,n,r,a);this.handleRect(Pe(Pe({},l.toJSON()),{},{callback:o}))}},{key:"clear",value:function(){var e=this.options.canvasCache;e==null||e.forEach(function(t){var n=t.getContext("2d"),r=Number(t.getAttribute("width")),a=Number(t.getAttribute("height"));n==null||n.clearRect(0,0,r,a)})}},{key:"destroy",value:function(){this.removeCanvas()}}]),d}(),Ce="data-element",Oe="data-id",lr="root",Nr="[".concat(Ce,'="').concat(lr,'"]'),ur="ui",ki="[".concat(Ce,'="').concat(ur,'"]'),Yr="editable",xt="[".concat(Ce,'="').concat(Yr,'"]'),Nc="data-transient-attributes",no="data-transient-element",Bs="am-engine",Qp="am-engine-mobile",em="am-engine-view",Kn="anchor",Zn="focus",$n="cursor",Ms="span[".concat(Ce,"=").concat(Kn,"],anchor"),Ps="span[".concat(Ce,"=").concat(Zn,"],focus"),ro="span[".concat(Ce,"=").concat($n,"],cursor"),tm="card",We="data-card-key",bt="data-ready-card",qt="data-card-type",cr="data-card-value",ut="data-card-element",dn="data-card-loading",fr="data-card-editable",yt="div[".concat(We,"],span[").concat(We,"]"),Ei="div[".concat(bt,"],span[").concat(bt,"]"),zt="span[".concat(ut,"=left]"),nm="div[".concat(ut,"=center],span[").concat(ut,"=center]"),Ut="span[".concat(ut,"=right]"),Rc="trigger-card-id",dr=(typeof navigator!="undefined"?navigator:window.navigator).userAgent.toLowerCase(),Fs=/edge/i.test(dr),rm=!Fs&&/chrome/i.test(dr),im=/firefox/i.test(dr),zs=!Fs&&!rm&&/safari/i.test(dr),aa=/mobile/i.test(dr),am=/os [\.\_\d]+ like mac os/i.test(dr),Dc=/android/i.test(dr);!am&&/mac os x/i.test(dr),/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(dr);var Oc=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5;i<5&&(i=5);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<i;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},Us;(function(d){d.UPPER="upper",d.LOWER="lower"})(Us||(Us={}));var Hs=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Us.LOWER;return i.split("-").map(function(t,n){return e==="upper"||n>0?t.charAt(0).toUpperCase()+t.substr(1):e==="lower"&&n===0?t.charAt(0).toLowerCase()+t.substr(1):t}).join("")},qc=function(i){var e=function(r){var a=parseInt(r,10).toString(16).toUpperCase();return a.length>1?a:"0"+a},t=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi;return i.replace(t,function(n,r,a,o){return"#"+e(r)+e(a)+e(o)})},om=function(i){for(var e={},t=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g,n;n=t.exec(i);){var r=(n[1]||n[2]||n[4]||n[6]).toLowerCase(),a=(n[2]?n[3]:n[4]?n[5]:n[7])||"";e[r]=a}return e},Ic=new Map,xi=function(i){var e=i.replace(/\s+/g,""),t={};if(!e)return t;var n=Ic.get(e);if(n)return Object.assign({},n);var r=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,a;for(i=i.toLowerCase();a=r.exec(i);){var o=a,l=ea(o,3);l[0];var u=l[1],c=l[2];(u.endsWith("color")||c.includes("rgb"))&&(c=qc(c)),t[u.trim()]=c.trim()}return Ic.set(e,t),Object.assign({},t)},sm=function(i,e){var t=Hs(e),n=window.getComputedStyle(i,null);return n?n[t]:""},Xr=function(i){return(i||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Vs=function(i){return(i||"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},Lc=function(i){return i.replace(/&dot;/g,".")},io=function(i){var e;return i&&(e=/^((-?\d+)(\.\d+)?)/.exec(i))?Math.floor(parseFloat(e[1])*1e4)/1e4:0},lm=function(i){var e="";try{e=encodeURIComponent(JSON.stringify(i||""))}catch{}return"data:".concat(e)},Bc=function(i){try{return i=i.substr(5),JSON.parse(decodeURIComponent(i))}catch{return{}}},js=function(i){return i.replace(/<anchor\s*\/>/gi,"<span ".concat(Ce,'="').concat(Kn,'"></span>')).replace(/<focus\s*\/>/gi,"<span ".concat(Ce,'="').concat(Zn,'"></span>')).replace(/<cursor\s*\/>/gi,"<span ".concat(Ce,'="').concat($n,'"></span>')).replace(/(<card\s+[^>]+>).*?<\/card>/gi,function(e,t){var n=om(t),r=n.type,a=n.name,o=n.value,l=n.editable,u=r==="inline",c=u?"span":"div",h=["<".concat(c)];return h.push(" ".concat(qt,'="').concat(r||"",'"')),h.push(" ".concat(bt,'="').concat(a||"",'"')),l!==""&&h.push(" ".concat(fr,'="').concat(l||"false",'"')),Object.keys(n).forEach(function(v){v.indexOf("data-")===0&&v.indexOf("data-card")!==0&&h.push(" ".concat(v,'="').concat(n[v]||"",'"'))}),o!==void 0&&h.push(" ".concat(cr,'="').concat(o,'"')),h.push("></".concat(c,">")),h.join("")})},um=function(i){return typeof i!="string"||(i=i.toLowerCase(),i.startsWith("data:text/html"))||!i.match(/^\S*$/)?!1:!!(["http:","https:","data:","ftp:"].some(function(e){return i.startsWith(e)})||i.startsWith("./")||i.startsWith("/")||i.indexOf(":")<0)},Mc=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!(e=+e))return"\u2022";switch(i==null?void 0:i.toLowerCase()){case"disc":return"\u2022";case"circle":return"\u25E6";case"square":return"\u25FC";case"lower-alpha":return String.fromCharCode("a".charCodeAt(0)+e);case"lower-roman":return String.fromCharCode(8559+e);case"decimal":default:return e}},wt=function(i){if(typeof document=="undefined"&&typeof global.__amWindow=="undefined")throw"document is not defined,If you are using ssr, you can assign a value to the `__amWindow` global variable.";return i?i.ownerDocument||i.document||i:typeof document=="undefined"?global.__amWindow.document:document},cm=function(i){i instanceof Node||(i=i[0]),i.normalize()},Gs=function(i){return i.nodeType===wt().ELEMENT_NODE&&i.getAttribute(Ce)===lr?void 0:i.parentNode||void 0},ye=function(i){return i.kind==="engine"},ao=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",t=new Rp(e,{html:!0,typographer:!0,linkify:!0});return i.trigger("markdown-it",t),t},Ws=function(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,r=e.renderer,a=e.options,o=!1,l=i.schema.getTags("blocks"),u="",c=[];return t.forEach(function(h,v){var g=h.type,p=h.tag,b=h.children,y=h.nesting,k=i.trigger("markdown-it-token",{token:h,markdown:e,callback:function(x){u+=x}});if(k===!1){o=!0;return}var E="";if(g==="inline"&&b?(E=r.renderInline(b,a,{}),n&&b.find(function(A){return A.type.endsWith("_open")})&&(o=!0)):typeof r.rules[g]!="undefined"?E=r.rules[g](t,v,a,{},r):E=r.renderToken(t,v,a),y===1)c.push(""),u+=E;else if(y===0)c.length===0?(u+=E,p&&!o&&(o=!0)):E&&(c[c.length-1]+=E);else if(y===-1){var _;c.length>0&&!c[c.length-1]&&l.includes(p)&&(c[c.length-1]+="<br />"),u+=(_=c[c.length-1])!==null&&_!==void 0?_:"",c.pop(),c.every(function(A){return!A})&&(c=[]),u+=E,!o&&p!=="p"&&(o=!0)}}),o&&u?u:null},$e={TAG_NAME:0,ATTRIBUTE:1,ELEMENT:2},hr="data-uuid",Ks="data-color",Pc=function(){function d(){ve(this,d),this.listeners={}}return we(d,[{key:"on",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),(lt(n)!=="object"||!n.once)&&this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=this.listeners[e];if(!!n){for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}}}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=this.listeners[e];if(a){var o=void 0;return a.every(function(l){return o=l.apply(void 0,n),typeof o!="boolean"||o!==!1}),o}}},{key:"destroy",value:function(){var e=this;Object.keys(this.listeners).forEach(function(t){e.listeners[t].forEach(function(n){e.off(t,n)})})}}]),d}(),At=function(i){return!!i&&i.get!==void 0},fm=function(i){return!!i&&i.entries!==void 0},Le=function(i){return!!i&&i.nodeType!==void 0},Zs=function(i,e){if(i.nodeType!==Node.ELEMENT_NODE||!e)return!1;var t=function(a,o){for(var l,u=(l=wt(a))===null||l===void 0?void 0:l.querySelectorAll(o),c=u?u.length:0;--c>=0&&(u==null?void 0:u.item(c))!==a;);return c>-1},n=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.matchesSelector||t;return n.call(i,e)},Ci=function(i){return i.nodeName===tm||!!i.getAttribute(qt)},dm=function(i){return i.getAttribute(qt)==="block"},hm=function(i){return i.getAttribute(qt)==="inline"},oa=function(i){return i.getAttribute(Ce)===Yr||i.getAttribute(fr)==="true"||!!(i!=null&&i.querySelector(xt))},Jr=function(i,e){return i.getAttribute(Ce)===lr&&(!e||i===e)},vm=function(i){return Jr(i)||i.getAttribute(Ce)===Yr},gm=function(i,e){if(i.nodeType===Node.ELEMENT_NODE&&Jr(i,e))return!1;var t=$s(i,Nr);return!!t&&(!e||t===e)},pm=function(i){var e=i.getAttribute(Ce);return!!e&&[Kn,Zn,$n].indexOf(e)>-1},$s=function(i,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(r){return r.parentElement||void 0},n=i||void 0;n;){if(Zs(n,e))return n;n=t(n)}return n},Fc=new Map;function Qr(d,i){if(!d)return[];if(typeof d=="string"){if(!i||/<.+>/.test(d)){var e=d.indexOf("<tr")===0,t=d.indexOf("<td")===0;d=d.trim().replace(/<!--[^>]*-->/g,"");var n=Fc.get(d);if(n){if(e){var r=n.querySelector("tbody");return r?r.cloneNode(!0).childNodes:[]}if(t){var a=n.querySelector("tr");return a?a.cloneNode(!0).childNodes:[]}return n.cloneNode(!0).childNodes}e&&(d="<table><tbody>".concat(d,"</tbody></table>")),t&&(d="<table><tbody><tr>".concat(d,"</tr></tbody></table>"));var o=wt().createElement("div");if(o.innerHTML=d,Fc.set(d,o.cloneNode(!0)),e){var l=o.querySelector("tbody");return l?l.childNodes:[]}if(t){var u=o.querySelector("tr");return u?u.childNodes:[]}return o.childNodes}return i.querySelectorAll(d)}if(fm(d)||Array.isArray(d))return d;if(At(d)){var c=[];return d.each(function(b){c.push(b)}),c}if(Le(d)&&d.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var h=[],v=ta(d.childNodes),g;try{for(v.s();!(g=v.n()).done;){var p=g.value;h.push(p)}}catch(b){v.e(b)}finally{v.f()}return h}return[d]}var mm=function(){function d(i,e){var t=this;ve(this,d),this.events=[],this.document=null,this.context=void 0,this.name="",this.type=void 0,this.window=null,this.display=void 0,this.fragment=void 0,Le(i)&&(i.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(this.fragment=i),i=[i]),i.forEach(function(o,l){t[l]=o,t.events[l]=new Pc});var n=this[0];if(n){this.document=wt(e),this.context=e;var r=n.nodeName,a=n.nodeType;this.name=r.toLowerCase(),this.type=a,this.window=this.document.defaultView||window}}return we(d,[{key:"length",get:function(){for(var e=0;this[e];)e++;return e}},{key:"each",value:function(e){for(var t=0,n;(n=this[t])&&e(n,t)!==!1;)t++;return this}},{key:"toArray",value:function(){var e=[];return this.each(function(t){e.push(new d(t))}),e}},{key:"isElement",value:function(){return this.type===Node.ELEMENT_NODE}},{key:"isText",value:function(){return this.type===Node.TEXT_NODE}},{key:"isCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&Ci(e)}},{key:"isBlockCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&dm(e)}},{key:"isInlineCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&hm(e)}},{key:"isEditableCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&oa(e)}},{key:"isRoot",value:function(e){var t,n=this.get();return(n==null?void 0:n.nodeType)===Node.ELEMENT_NODE&&Jr(n,e?(t=e[0])!==null&&t!==void 0?t:e:void 0)}},{key:"isEditable",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&vm(e)}},{key:"inEditor",value:function(e){var t,n=this.get();return!!n&&gm(n,e?(t=e[0])!==null&&t!==void 0?t:e:void 0)}},{key:"isCursor",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&pm(e)}},{key:"get",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.length===0?null:this[e]}},{key:"eq",value:function(e){return e>-1&&e<this.length?new d(this[e]):void 0}},{key:"index",value:function(){for(var e,t=(e=this.get())===null||e===void 0?void 0:e.previousSibling,n=0;t&&t.nodeType===Node.ELEMENT_NODE;)n++,t=t.previousSibling;return n}},{key:"parent",value:function(){var e,t=(e=this.get())===null||e===void 0?void 0:e.parentNode;return t?new d(t):void 0}},{key:"children",value:function(e){if(this.length===0)return new d([]);var t=this.get().childNodes;if(e){for(var n=[],r=0;r<t.length;r++){var a=t[r];Zs(a,e)&&n.push(a)}return new d(n)}return new d(t)}},{key:"first",value:function(){var e;if(this.fragment)return this.eq(0)||null;var t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.firstChild;return t?new d(t):null}},{key:"last",value:function(){var e;if(this.fragment)return this.eq(this.length-1)||null;var t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.lastChild;return t?new d(t):null}},{key:"prev",value:function(){var e,t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.previousSibling;return t?new d(t):null}},{key:"next",value:function(){var e,t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.nextSibling;return t?new d(t):null}},{key:"prevElement",value:function(){var e=this.length===0?null:this.get().previousElementSibling;return e?new d(e):null}},{key:"nextElement",value:function(){var e=this.length===0?null:this.get().nextElementSibling;return e?new d(e):null}},{key:"getPath",value:function(e,t,n){e=e||document.body;var r=[];if(this.length>0){var a=this.getIndex(t);if(n){var o=n(a,r,this);o&&(r=o)}else r.unshift(a)}if(this.equal(e))return r;for(var l=this.parent();l&&!l.equal(e);){var u=l.getIndex(t);if(n){var c=n(u,r,l);c&&(r=c)}else r.unshift(u);l=l.parent()}return r}},{key:"contains",value:function(e){var t,n=Le(e)?e:e.get();if(this.length===0)return!1;if(this.get().nodeType===Node.DOCUMENT_NODE&&((t=n)===null||t===void 0?void 0:t.nodeType)!==Node.DOCUMENT_NODE||n===this[0])return!0;for(;n=((r=n)===null||r===void 0?void 0:r.parentNode)||null;){var r;if(n===this[0])return!0}return!1}},{key:"find",value:function(e){if(this.length>0&&(this.isElement()||this.fragment)){var t,n=(t=this.fragment?this.fragment:this.get())===null||t===void 0?void 0:t.querySelectorAll(e);return new d(n||[])}return new d([])}},{key:"closest",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(a){return a.parentNode||void 0},n=[],r=this.get()||void 0;r;){if(Zs(r,e))return n.push(r),new d(n);r=t(r)}return new d(n)}},{key:"on",value:function(e,t,n){var r=this;return this.each(function(a,o){a.addEventListener(e,t,n),r.events[o]&&r.events[o].on(e,t,n)}),this}},{key:"off",value:function(e,t,n){var r=this;return this.each(function(a,o){a.removeEventListener(e,t,n),r.events[o]&&r.events[o].off(e,t,n)}),this}},{key:"getBoundingClientRect",value:function(e){if(this.length!==0){try{var t=this.get(),n=t.getBoundingClientRect(),r=document.documentElement.clientTop,a=document.documentElement.clientLeft;return{top:n.top-r,bottom:n.bottom-r,left:n.left-a,right:n.right-a}}catch(o){console.error(o)}return e}}},{key:"removeAllEvents",value:function(){var e=this;return this.each(function(t,n){!e.events[n]||Object.keys(e.events[n].listeners).forEach(function(r){for(var a=e.events[n].listeners[r],o=0;o<a.length;o++)e.off(r,a[o]),e.events[n].off(r,a[o]),t.removeEventListener(r,a[o],!1)})}),this}},{key:"attributes",value:function(e,t){if(e===void 0){var n=this.get();if(!n)return{};for(var r={},a=n.attributes,o=a.length;o--;){var l=a[o];r[l.name]=l.value}return r}if(lt(e)==="object"){for(var u in e){var c=e[u];this.attributes(u,c)}return this}if(t===void 0){var h=this.get();return this.length>0&&this.isElement()&&(h==null?void 0:h.getAttribute(e))||""}var v=e==="style"&&t==="";return this.each(function(g){var p=g;v?p.removeAttribute("style"):p.setAttribute(e,t.toString())}),this}},{key:"removeAttributes",value:function(e){return this.each(function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=t;n.removeAttribute(e)}}),this}},{key:"hasClass",value:function(e){if(this.length===0)return!1;var t=this.get();if(!t)return!1;for(var n=0,r=null,a=t.classList||{};r=a[n];){if(r===e)return!0;n++}return!1}},{key:"addClass",value:function(e){return this.each(function(t){var n=t;n.classList.add(e)}),this}},{key:"removeClass",value:function(e){return this.each(function(t){var n=t;n.classList.remove(e)}),this}},{key:"css",value:function(e,t){if(e===void 0)return xi(this.attributes("style")||"");if(lt(e)==="object"){for(var n in e){var r=e[n];this.css(n,r)}return this}if(t===void 0){if(this.length===0||this.isText())return"";var a=this.get();return a&&(a.style[Hs(e)]||sm(this[0],e))||""}return this.each(function(o){var l=o;l.style[Hs(e)]=t.toString(),l.style.length===0&&l.removeAttribute("style")}),this}},{key:"width",value:function(){var e=this.css("width");if(e==="auto"){var t=this.get();e=t.offsetWidth.toString()}return e&&io(e)||0}},{key:"height",value:function(){var e=this.css("height");if(e==="auto"){var t=this.get();e=t.offsetHeight.toString()}return e&&parseFloat(e)||0}},{key:"html",value:function(e){if(e!==void 0){var t=Qr(e);return this.each(function(n){if(n.nodeType===Node.ELEMENT_NODE){for(var r=n.firstChild;r;){var a=r.nextSibling;n.removeChild(r),r=a}t.forEach(function(o){n.appendChild(o.cloneNode(!0))})}}),this}return this.length>0?this[0].innerHTML:""}},{key:"text",value:function(e){var t;return e!==void 0?(this.each(function(n){n.textContent=e}),this):this.length===0?"":((t=this.get())===null||t===void 0?void 0:t.textContent)||""}},{key:"show",value:function(e){return e===void 0&&(e=this.display||""),e==="none"&&(e=""),this.css("display")!=="none"?this:this.css("display",e)}},{key:"hide",value:function(){var e;return this.length===0?this:(this.display=(e=this.get())===null||e===void 0?void 0:e.style.display,this.css("display","none"))}},{key:"remove",value:function(){var e=this;return this.each(function(t,n){!t.parentNode||(t.parentNode.removeChild(t),delete e[n])}),this}},{key:"empty",value:function(){return this.each(function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.removeChild(t),t=n}}),this}},{key:"equal",value:function(e){return Le(e)?this.get()===e:At(e)?this.get()===e.get():!1}},{key:"clone",value:function(e){var t=[];return this.each(function(n){t.push(n.cloneNode(e))}),new d(t)}},{key:"prepend",value:function(e){var t=Qr(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){for(var a=t.length-1;a>=0;a--){var o=n?t[a].cloneNode(!0):t[a];r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)}}),this}},{key:"append",value:function(e){var t=Qr(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){for(var a=0;a<t.length;a++){var o=n?t[a].cloneNode(!0):t[a];typeof e=="string"?r.append(o):r.appendChild(o)}}),this}},{key:"before",value:function(e){var t=Qr(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){var a=r.parentNode;!a||t.forEach(function(o){n&&(o=o.cloneNode(!0)),a.insertBefore(o,r),r=o})}),this}},{key:"after",value:function(e){var t=Qr(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){var a=r.parentNode;!a||t.forEach(function(o){n&&(o=o.cloneNode(!0)),r.nextSibling?(a.insertBefore(o,r.nextSibling),r=o):a.appendChild(o)})}),this}},{key:"replaceWith",value:function(e){var t=[],n=Qr(e,this.context),r=typeof e=="string"&&/<.+>/.test(e);return this.each(function(a){var o=a.parentNode;if(!!o){var l=r?n[0].cloneNode(!0):n[0];o.replaceChild(l,a),t.push(l)}}),new d(t)}},{key:"getRoot",value:function(){return this.closest(Nr)}},{key:"traverse",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=function l(u){var c=u.isCard();if(!(c&&(!n||n==="editable"&&!u.isEditableCard())))for(var h=t?u.first():u.last();h;){var v=t?h.next():h.prev();r&&r(h);var g=e(h);if(g===!1)return;if(g!==!0){var p=g&&typeof g!="boolean";p&&(h=g),c=h.isCard(),c?n===!0?(p&&e(h),l(h)):n==="editable"&&h.isEditableCard()&&function(){var b=h.find(xt);b.each(function(y,k){var E=b.eq(k);E&&l(E)})}():(p&&e(h),l(h))}a&&a(h,v),h=v}};e(this),o(this)}},{key:"getChildByPath",value:function(e,t){var n=this.get();if(e.length===0)return n;for(var r=function(u){var c=0,h=ta(n.childNodes),v;try{for(h.s();!(v=h.n()).done;){var g=v.value;if(!(t&&!t(g))){if(c==u)return g;c++}}}catch(p){h.e(p)}finally{h.f()}},a=0;e[a]!==void 0;){var o=r(e[a]);if(!o)break;n=o,a++}return n}},{key:"getIndex",value:function(e){var t=this[0].parentNode;if(!t)return 0;var n=0,r=ta(t.childNodes),a;try{for(r.s();!(a=r.n()).done;){var o=a.value;if(!(e&&!e(o))){if(o===this[0])return n;n++}}}catch(l){r.e(l)}finally{r.f()}return-1}},{key:"findParent",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.closest(Nr),n=(e=t[0])!==null&&e!==void 0?e:t;if(this.length===0||!n.parentNode)return null;for(var r=this[0];r.parentNode!==n;){if(!r.parentNode)return null;r=r.parentNode}return new d(r)}},{key:"allChildren",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=[];return this.traverse(function(n){t.push(n)},void 0,e),t.shift(),t}},{key:"getViewport",value:function(){var e,t=this.window||{innerHeight:0,innerWidth:0},n=t.innerHeight,r=t.innerWidth,a=this.isText()?(e=this.parent())===null||e===void 0?void 0:e.get():this.get();if(!a)return{top:0,left:0,bottom:0,right:0};var o=a.getBoundingClientRect(),l=o.top,u=o.left,c=o.bottom,h=o.right;return{top:l,left:u,bottom:Math.min(c,n),right:Math.min(h,r)}}},{key:"inViewport",value:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=null;if(e.type!==Node.ELEMENT_NODE){if(!e.document)return!1;if(r=e.document.createElement("span"),e.next()){var a;(a=e[0].parentNode)===null||a===void 0||a.insertBefore(r,e[0].nextSibling)}else{var o;(o=e[0].parentNode)===null||o===void 0||o.appendChild(r)}e=new d(r)}var l=e.get();if(!l)return!0;var u=l.getBoundingClientRect(),c=u.top,h=u.left,v=u.right,g=u.bottom,p=this.getViewport();return r&&((t=r.parentNode)===null||t===void 0||t.removeChild(r)),n?c>0&&c<=p.bottom||g>0&&g<=p.bottom:c>0&&c>=p.top&&h>0&&h>=p.left&&g<=p.bottom&&v<=p.right}},{key:"scrollIntoView",value:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"nearest";if(typeof((t=e.document)===null||t===void 0?void 0:t.body.scrollIntoView)=="function"){var r,a=null;if(e.type!==Node.ELEMENT_NODE||e.name.toLowerCase()==="br"){var o;a=e.document.createElement("span"),a.innerHTML="&nbsp;",(o=e[0].parentNode)===null||o===void 0||o.insertBefore(a,e[0]),e=new d(a)}if(!this.inViewport(e)){var l;(l=e.get())===null||l===void 0||l.scrollIntoView({block:n,inline:n})}a&&((r=a.parentNode)===null||r===void 0||r.removeChild(a))}}}]),d}(),U=function(d,i,e){i===void 0&&(i=wt());var t=Qr(d,i),n=new(e||mm)(t,i||void 0);return Le(d)&&d.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE&&(n.fragment=d),n},bm=[{from:function(i,e,t){return!!t[We]||!!t[bt]},to:function(i,e,t){var n=t[cr],r=Pe({},t);t=Ge({type:t[qt],name:(t[We]||t[bt]).toLowerCase(),editable:t[fr]},Oe,t[Oe]);for(var a in r)a!==bt&&a.indexOf("data-")===0&&a.indexOf("data-card")!==0&&(t[a]=r[a]);n!==void 0&&(t.value=n);var o=U("<card />");for(var l in t)o.attributes(l,t[l]);return o}},{from:function(i,e,t){return i==="div"&&(!t[We]||!t[bt])&&t[Ce]!==lr},to:function(i,e,t){var n=U("<p />");n.css(e);for(var r in t)n.attributes(r,t[r]);return n}},{from:function(i){return[$n,Kn,Zn].includes(i)},to:function(i){return{node:U("<".concat(i," />")),replace:!0}}}],Rr,Dr,Or,qr,ym=[{type:"block",attributes:Ge({},Oe,"*")},{name:"p",type:"block",allowIn:["$root"]},{name:"br",type:"inline",isVoid:!0},{name:Kn,type:"inline",isVoid:!0},{name:Zn,type:"inline",isVoid:!0},{name:$n,type:"inline",isVoid:!0},{name:"span",type:"mark",attributes:Ge({},Ce,{required:!0,value:["anchor","cursor","focus"]})},{name:"card",type:"inline",attributes:{name:{required:!0,value:/\w+/},type:{required:!0,value:"inline"},editable:"*",value:"*"}},{name:"span",type:"inline",attributes:(Rr={},Ge(Rr,We,{required:!0,value:/\w+/}),Ge(Rr,qt,{required:!0,value:"inline"}),Ge(Rr,cr,"*"),Ge(Rr,fr,"*"),Ge(Rr,"class","*"),Ge(Rr,"contenteditable","*"),Rr)},{name:"span",type:"inline",attributes:(Dr={},Ge(Dr,bt,{required:!0,value:/\w+/}),Ge(Dr,qt,{required:!0,value:"inline"}),Ge(Dr,cr,"*"),Ge(Dr,fr,"*"),Ge(Dr,"class","*"),Ge(Dr,"contenteditable","*"),Dr)},{name:"card",type:"block",attributes:{name:{required:!0,value:/\w+/},type:{required:!0,value:"block"},editable:"*",value:"*"}},{name:"div",type:"block",attributes:(Or={},Ge(Or,We,{required:!0,value:/\w+/}),Ge(Or,qt,{required:!0,value:"block"}),Ge(Or,cr,"*"),Ge(Or,fr,"*"),Ge(Or,"class","*"),Ge(Or,"contenteditable","*"),Or)},{name:"div",type:"block",attributes:(qr={},Ge(qr,bt,{required:!0,value:/\w+/}),Ge(qr,qt,{required:!0,value:"block"}),Ge(qr,cr,"*"),Ge(qr,fr,"*"),Ge(qr,"class","*"),Ge(qr,"contenteditable","*"),qr)}],Yn="contenteditable",Ys={},wm=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[],r;if(e=e||t.length,e>t.length&&(e=t.length),i)for(r=0;r<i;r++)n[r]=t[0|Math.random()*e];else{var a;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",r=0;r<36;r++)n[r]||(a=0|Math.random()*16,n[r]=t[r==19?a&3|8:a])}return n.join("")},zc=new Map,Xs=function(d){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e="";if(typeof d!="string"){var t,n=(t=d[0])!==null&&t!==void 0?t:d;if(n.nodeType===Node.ELEMENT_NODE){var r=n,a=r.localName;e=a.substring(0,1),d=a;for(var o=r.attributes,l=o.length;l--;){var u=o[l];[Oe,"id"].includes(u.name)||(d+="".concat(u.name,'="').concat(u.value,'"'))}}else{var c;d=(c=n.textContent)!==null&&c!==void 0?c:""}}var h=zc.get(d);if(h)e=h;else{var v=Ip(d);e=e+v.substr(0,4)+v.substr(v.length-3),zc.set(d,e)}var g=e;if(i){var p=Ys[g]||0;return Ys[g]=p+1,"".concat(g,"-").concat(wm(8,48+Ys[g]))}return g},km=function(){function d(i){var e=this;ve(this,d),this.editor=void 0,this.addBrForBlock=function(t){if(!t.isText()){var n=t.get().childNodes,r=0,a=!0,o=!1,l=t.name==="p",u=ta(n),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;if(a&&h.nodeType===Node.TEXT_NODE?a=!1:!l&&!o&&h.nodeType===Node.ELEMENT_NODE&&e.isBlock(h)&&(o=!0),h.nodeType===Node.ELEMENT_NODE&&[Kn,Zn,$n].indexOf(h.getAttribute(Ce)||"")<1&&r++,!a&&r>1)break}}catch(g){u.e(g)}finally{u.f()}if(l&&r===0){var v=document.createElement("br");t.each(function(g){g.appendChild(v.cloneNode())})}!o&&a&&e.isBlock(t)&&(n.length!==1||n[0].nodeName!=="BR")&&e.isEmptyWithTrim(t)&&(t.empty(),t.append(document.createElement("br")))}},this.editor=i}return we(d,[{key:"isVoid",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema,n=typeof e=="string"?e:"";return Le(e)?n=e.nodeName.toLowerCase():At(e)&&(n=e.name),t.find(function(r){return r.name===n&&r.isVoid===!0}).length>0}},{key:"isMark",value:function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema;return r.getTags("marks").includes(((t=(n=e.nodeName)===null||n===void 0?void 0:n.toLowerCase())!==null&&t!==void 0?t:e.name).toLowerCase())&&r.getType(e)==="mark"}},{key:"isInline",value:function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema;return r.getTags("inlines").includes((t=(n=e.nodeName)===null||n===void 0?void 0:n.toLowerCase())!==null&&t!==void 0?t:e.name)&&r.getType(e)==="inline"}},{key:"isBlock",value:function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema;return r.getTags("blocks").includes(((t=(n=e.nodeName)===null||n===void 0?void 0:n.toLowerCase())!==null&&t!==void 0?t:e.name).toLowerCase())&&r.getType(e)==="block"}},{key:"isNestedBlock",value:function(e){if(!this.isBlock(e))return!1;var t=e.length?e[0]:e;if(!t)return!1;for(var n=t.firstChild;n;){if(this.isBlock(n))return!1;n=n.nextSibling}return!0}},{key:"isRootBlock",value:function(e,t){var n;return!(!((n=e.parent())===null||n===void 0)&&n.isEditable())||!this.isNestedBlock(e)?!1:(t||this.editor.schema).find(function(r){return r.name===e.name}).every(function(r){if(r.type!=="block")return!1;var a=r.allowIn;return a?a.indexOf("$root")>-1:!0})}},{key:"isEmpty",value:function(e,t){var n,r;if(e.length>0&&e.isElement()){var a,o=e.attributes(),l=(a=e.fragment)!==null&&a!==void 0?a:e.get(),u=Array.from(l.querySelectorAll("".concat(yt,",").concat(Ei,",").concat(xt,",br")));if(o[We]||o[bt]||u.some(function(h){return h.hasAttribute(We)||h.hasAttribute(bt)})&&!u.some(function(h){return h.getAttribute(Ce)===Yr})||e.name!=="br"&&this.isVoid(e)||u.filter(function(h){return h.localName==="br"}).length>1)return!1}var c=e.isText()?e[0].nodeValue||"":e.text();return c=(n=c)===null||n===void 0?void 0:n.replace(/\u200B/g,""),c=(r=c)===null||r===void 0?void 0:r.replace(/\r\n|\n/,""),c&&t&&(c=c.trim()),c===""}},{key:"isEmptyWithTrim",value:function(e){return this.isEmpty(e,!0)}},{key:"isEmptyWidthChild",value:function(e){if(e.length===0)return!0;if(e.isCard())return!1;if(e.isText())return this.isEmpty(e);var t=e[0].childNodes;if(t.length===0)return!0;for(var n=0;n<t.length;n++){var r=t[n];if(r.nodeType===Node.TEXT_NODE){if(r.data.replace(/\u200b/g,"")!=="")return!1}else if(r.nodeType===Node.ELEMENT_NODE&&(r.nodeName.toLowerCase()==="li"&&!this.editor.list.isEmptyItem(U(r))||r.hasAttribute(We)||!this.isEmptyWidthChild(U(r))))return!1}return!0}},{key:"isList",value:function(e){var t=typeof e=="string"?e:"";return Le(e)?t=e.nodeName.toLowerCase():At(e)&&(t=e.name),["ul","ol"].indexOf(t)>-1}},{key:"isCustomize",value:function(e){var t=this.editor.list;switch(e.name){case"li":return e.hasClass(t.CUSTOMZIE_LI_CLASS);case"ul":return e.hasClass(t.CUSTOMZIE_UL_CLASS);default:return!1}}},{key:"unwrap",value:function(e){for(var t=e.first(),n=[];t;){var r=t.next();e.before(t),n.push(t),t=r}return e.remove(),n}},{key:"wrap",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this.editor.mark;if(Le(e)&&(e=U(e)),t=this.clone(t,!1),e.isText())return t.append(this.clone(e,!1)),e.replaceWith(t);if(r&&this.isMark(t)){var o=this.clone(t,!1,!1);if(e.name===t.name){var l=e.attributes();delete l.style,delete l[Oe],Object.keys(l).forEach(function(g){if(!t.attributes(g))t.attributes(g,l[g]);else{var p=t.attributes(g).split(",");p[g]!==void 0&&p.indexOf(p[g])<0&&p.push(p[g]),t.attributes(g,p.join(","))}});var u=e.css();Object.keys(u).forEach(function(g){t.css(g)||t.css(g,u[g])}),t.append(this.clone(e,!0,!1).children())}else t.append(this.clone(e,!0,!1));var c=t.allChildren();return c.forEach(function(g){!g.isText()&&n.isMark(g)&&a.compare(g,o)&&n.unwrap(g)}),e.replaceWith(t)}var h=e.parent(),v=this.clone(e,!1,!1);return e.after(v),t.append(e),h?v.replaceWith(t):t}},{key:"merge",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e.equal(t)){if(t.isText()){e.append(t),this.removeSide(e);return}var r=this.editor,a=r.block,o=r.mark,l=r.list,u=t,c=this.isList(e),h=this.isList(t.name);if(c&&!h){var v=e.find("li");if(v.length===0)return;e=U(v[v.length-1])}if(!c&&h){var g=t.find("li");g.length>0&&(t=U(g[0])),g[1]&&(u=U(g[0]))}if(this.isCustomize(e)){var p,b,y=e.first();if(!(!((p=y)===null||p===void 0)&&p.isCard())){var k=l.getPlugins(),E=l.getPluginNameByNode(e),_=k.find(function(N){return N.constructor.pluginName===E});_!=null&&_.cardName&&(l.addCardToCustomize(e,_.cardName),y=e.first())}if(this.isCustomize(t)&&!(!((b=y)===null||b===void 0)&&b.equal(t))){var A=t.first();(A==null?void 0:A.isCard())&&y.attributes(We)===A.attributes(We)&&A.remove()}}for(var x=e.last(),C=t.first(),S=a.findPlugin(e);C;){var O,M,V=C.next(),j=o.findPlugin(C);if(S&&j&&S.disableMark&&S.disableMark.indexOf(j.constructor.pluginName)>-1){var P=this.unwrap(C);P.forEach(function(N){e.append(N)})}else if(C.isText()&&/\u200b/.test(C.text())){var D=C.parent(),T=C.prev(),q=C.next();if(!D||!this.isMark(D)&&(T&&!this.isInline(T)||q&&!this.isInline(q))){C.remove(),C=q;continue}}else if(j&&((O=C.get())===null||O===void 0?void 0:O.childNodes.length)===1){var Z=C.prev();(!Z||Z.isText())&&C.allChildren().forEach(function(N){var F,H=N.text();N.type===wt().TEXT_NODE&&!!H&&!(!((F=N.next())===null||F===void 0)&&F.isCursor())&&N.text(H.replace(/\u200b/,""))})}C.length>0&&!C.equal(e)&&!(!((M=C.parent())===null||M===void 0)&&M.equal(e))&&e.append(C),C=V}if(n&&u.remove(),x&&x.name==="br")for(var ie=x.next();ie;){if(ie.isCursor()){x.remove();break}ie=ie.next()}this.removeSide(e)}}},{key:"replace",value:function(e,t){for(var n,r,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=this.clone(t,!1,a),l=this.isCustomize(e)&&e.name==="li"&&((n=e.first())===null||n===void 0?void 0:n.isCard())?(r=e.first())===null||r===void 0?void 0:r.next():e.first();l;){var u=l.next();o.append(l),l=u}return e.isText()&&o.append(e.clone()),e.replaceWith(o)}},{key:"insertText",value:function(e,t){var n,r=this.editor;if(!!ye(r)){var a=r.change,o=t||a.range.toTrusty(),l=wt(o.startContainer);o.collapsed||a.delete(t);var u=l.createTextNode(e);return(n=this.insert(u,o))===null||n===void 0||n.handleBr(),t||a.apply(o),o}}},{key:"insert",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(At(e)){if(e.length===0)throw"Not found node";e=e[0]}var a=this.editor;if(!!ye(a)){var o=a.change,l=a.block,u=a.schema,c=a.mark;t=t||o.range.get();var h=t.cloneRange().shrinkToTextNode(),v=h.startNode,g=h.startOffset,p=v.prev(),b=v.parent(),y=v.text()||"",k=y.substr(0,g);v.isText()&&/\u200b$/.test(k)&&y.length>1&&(p&&!this.isInline(p)||!p&&b&&!this.isInline(b))&&v.get().splitText(y.length-1).remove();var E=b==null?void 0:b.attributes(ut);if(!E&&v.isCard()&&t.setStartAfter(v),E&&b&&["left","right"].includes(E)){var _=a.card.find(b);_&&(E==="left"?t.setStartBefore(_.root):t.setStartAfter(_.root))}if(this.isBlock(e)){var A=t,x=A.commonAncestorNode;x.isText()&&(x=a.block.closest(x));var C=null;if(this.isBlock(x)&&this.isEmpty(x))C=r?x:void 0;else{var S=!1;if(l.isFirstOffset(t,"start")&&(S=!0),C=l.split(t),S){var O;C=(O=C)===null||O===void 0?void 0:O.prev()}}var M=l.closest(t.startNode.isEditable()?t.cloneRange().shrinkToElementNode().shrinkToTextNode().startNode:t.startNode);if(!M.isCard()&&u.isAllowIn(M.name,e.nodeName.toLowerCase()))M.find("br").remove(),M.append(e);else{for(var V,j=M.parent();j&&this.isBlock(j)&&!M.isEditable()&&!u.isAllowIn(j.name,e.nodeName.toLowerCase());)M=j,j=M.parent();M.isEditable()&&((V=M.get())===null||V===void 0?void 0:V.childNodes.length)===0?M.append(e):this.isEmptyWidthChild(M)||l.isLastOffset(t,"start")?(M.after(e),this.isEmptyWidthChild(M)&&C&&M.remove()):(M.before(e),C&&this.isEmptyWidthChild(C)&&C.remove())}(e instanceof Element||e instanceof DocumentFragment)&&a.nodeId.generate(e)}else{var P=l.closest(t.startNode.isEditable()?t.cloneRange().shrinkToElementNode().shrinkToTextNode().startNode:t.startNode),D=P?l.findPlugin(P):void 0;if(D){var T=U(e),q=function(N){if(n.isMark(N)){var F=c.findPlugin(N);if(!F)return;if(D.disableMark&&D.disableMark.indexOf(F.constructor.pluginName)>-1)return!0}return!1};if(T.allChildren().forEach(function(ie){q(ie)&&n.unwrap(ie)}),q(T)){var Z=T.document.createDocumentFragment();T.children().each(function(ie){Z.appendChild(ie)}),T.remove(),e=Z.childNodes[Z.childNodes.length-1],t.insertNode(Z)}else t.insertNode(e);if(T.length===0)return t}else t.insertNode(e)}return e.nodeType===Node.ELEMENT_NODE&&(e.hasAttribute(bt)||e.hasAttribute(We))?t.collapse(!1):t.select(e,!(this.isVoid(e)||e.nodeType===Node.TEXT_NODE)).shrinkToElementNode().collapse(!1)}}},{key:"setAttributes",value:function(e,t){var n=t.style;for(var r in t)if(r!=="style")if(r==="className"){var a=t[r];Array.isArray(a)?a.forEach(function(c){return e.addClass(c)}):e.addClass(a)}else e.attributes(r,t[r].toString());typeof n=="number"?n={}:typeof n=="string"&&(n=xi(n)),n=n||{};var o=Object.keys(n);for(var l in n){var u=n[l];/^0(px|em)?$/.test(u.toString())&&(u=""),e.css(l,u.toString())}return(o.length===0||Object.keys(e.attributes("style")).length===0)&&e.removeAttributes("style"),e}},{key:"removeMinusStyle",value:function(e,t){if(e.isElement()){var n=e.css();if(n[t]){var r=parseInt(n[t]||"0",10)||0;r<0&&e.css(t,"")}}}},{key:"mergeChild",value:function(e){for(var t=this.editor,n=t.schema,r=t.list,a=n.getAllowInTags(),o=e.first();o;){for(var l=o.next();l&&o.name===l.name&&(a.indexOf(o.name)>-1&&!this.isList(o)||this.isList(o)&&r.isSame(o,l));){for(var u=l.next(),c=l.first();c;){var h=c.next();o.append(c),c=h}l.remove(),this.mergeChild(o),l=u}o=l}}},{key:"removeSide",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"br",n=e.first();(n==null?void 0:n.name)===t&&e.children().toArray().filter(function(a){return!a.isCursor()}).length>1&&n.remove();var r=e.last();(r==null?void 0:r.name)===t&&e.children().toArray().filter(function(a){return!a.isCursor()}).length>1&&r.remove()}},{key:"flat",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.editor.block,r=e.first(),a=e.fragment?U("<p />"):this.clone(e,!1);r;){var o=r.next();if(r.isBlockCard()||this.isNestedBlock(r))n.flat(r,t);else if(this.isBlock(r))r=this.flat(r,t);else{var l=this.clone(a,!1),u=l.name==="li";for(r.before(l);r;){var c,h;o=r.next();var v=r.name==="br"&&!u;if(v&&((c=r.parent())===null||c===void 0?void 0:c.isRoot())&&l.append(r),r.isText()){var g=r.text(),p=/^((\n|\r)+)/.exec(g),b=!1;if(p&&(g=g.substring(p[1].length),b=!0,g.length===0&&r.remove()),p=/((\n|\r)+)$/.exec(g),p){r.text(g.substr(0,p.index)),l.append(r);break}else b&&r.length>0&&r.text(g)}if(r.length>0&&l.append(r),!((h=o)===null||h===void 0)&&h.isText()){var y=o.text(),k=/^(\n|\r)+/.exec(y);if(k)break}if(v||!o||this.isBlock(o)||o.isBlockCard())break;r=o}this.removeSide(l),n.flat(l,t),this.addBrForBlock(l)}this.addBrForBlock(r),this.removeSide(r),r=o}return e.fragment&&(e=U(e.fragment)),r=e.first(),r||e.remove(),e}},{key:"normalize",value:function(e){return e=this.flat(e),this.mergeChild(e),e}},{key:"html",value:function(e,t){var n=this;if(t===void 0){var r;return e.length>0&&((r=e.get())===null||r===void 0?void 0:r.innerHTML)||""}return e.each(function(a){var o=a;o.innerHTML=t,n.editor.nodeId.generateAll(o)}),e}},{key:"clone",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=this.editor.nodeId,a=[];return e.each(function(o){var l=o.cloneNode(t),u=U(l);n||(r.generateAll(u,!0),r.isNeed(u)&&r.generate(u,!0)),a.push(l)}),U(a)}},{key:"getBatchAppendHTML",value:function(e,t){var n;if(e.length===0)return t;var r=t.startsWith("\\u")||t.startsWith("&#")?U(t,null):U(t);return e.forEach(function(a){a=a.clone(!1),a.append(r),r=a}),((n=r.get())===null||n===void 0?void 0:n.outerHTML)||""}},{key:"removeZeroWidthSpace",value:function(e){var t=this;e.traverse(function(n){var r=n[0];if(r.nodeType===Node.TEXT_NODE){var a=r.nodeValue;if((a==null?void 0:a.length)===2){var o=r.nextSibling,l=r.previousSibling;if(!(a.charCodeAt(1)===8203&&o&&o.nodeType===Node.ELEMENT_NODE&&[Kn,Zn,$n].indexOf(o.getAttribute(Ce)||"")>=0)){var u=n.parent();if(!(a.charCodeAt(1)===8203&&(!o&&u&&t.isInline(u)||o&&t.isInline(o)))&&!(a.charCodeAt(0)===8203&&(!l&&u&&t.isInline(u)||l&&t.isInline(l)))&&a.charCodeAt(0)===8203){var c,h=r.splitText(1);h.previousSibling&&((c=h.parentNode)===null||c===void 0||c.removeChild(h.previousSibling))}}}}})}}]),d}(),oo=function(){function d(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";ve(this,d),this.range=void 0,this.editor=void 0,this.key="",this.anchor=null,this.focus=null,this.editor=i,this.range=e,this.key=t}return we(d,[{key:"has",value:function(){return!!this.focus&&!!this.anchor}},{key:"create",value:function(){var e=this.range,t=e.commonAncestorNode,n=e.startNode,r=e.endNode;if(!(!t.isEditable()&&!t.inEditor())){var a=t.document;if(!!a){var o=t.closest(Nr);if(this.key)o.find('[data-anchor-id="'.concat(this.key,'"]')).remove(),o.find('[data-focus-id="'.concat(this.key,'"]')).remove(),o.find('[data-cursor-id="'.concat(this.key,'"]')).remove();else{var l=o.find(Ms);l.each(function(C,S){var O=l.eq(S);O&&!O.attributes("data-anchor-id")&&O.remove()});var u=o.find(Ps);u.each(function(C,S){var O=u.eq(S);O&&!O.attributes("data-focus-id")&&O.remove()});var c=o.find(ro);c.each(function(C,S){var O=c.eq(S);O&&!O.attributes("data-cursor-id")&&O.remove()})}var h=n.closest(yt);if(h.length>0){var v=n.closest(zt);v.length>0&&this.range.setStartBefore(h);var g=n.closest(Ut);g.length>0&&this.range.setStartAfter(h)}if(!n.equal(r)){var p=r.closest(yt);if(p.length>0){var b=r.closest(zt);b.length>0&&this.range.setEndBefore(p);var y=r.closest(Ut);y.length>0&&this.range.setEndAfter(p)}}if(this.range.collapsed){var k=U(a.createElement("span"));k.attributes(Ce,$n),this.key&&k.attributes("data-cursor-id",this.key),this.range.insertNode(k),this.anchor=k,this.focus=k;return}var E=this.range.cloneRange();E.collapse(!0);var _=U(a.createElement("span"));_.attributes(Ce,Kn),this.key&&_.attributes("data-anchor-id",this.key),E.insertNode(_),this.range.setStartAfter(_);var A=this.range.cloneRange();A.collapse(!1);var x=U(a.createElement("span"));x.attributes(Ce,Zn),this.key&&x.attributes("data-focus-id",this.key),A.insertNode(x),this.anchor=_,this.focus=x}}}},{key:"move",value:function(){var e,t;if(!(!this.focus||!this.anchor)){if(this.key){var n,r,a=this.range.commonAncestorNode,o=a.closest(Nr);(!this.focus.inEditor()||!(!((n=this.focus.get())===null||n===void 0)&&n.isConnected))&&(this.focus=o.find("[data-".concat(this.focus.attributes(Ce),'-id="').concat(this.key,'"]'))),(!this.anchor.inEditor()||!(!((r=this.anchor.get())===null||r===void 0)&&r.isConnected))&&(this.anchor=o.find("[data-".concat(this.anchor.attributes(Ce),'-id="').concat(this.key,'"]')))}var l=this.editor.node;if(!((e=this.anchor.get())===null||e===void 0)&&e.isConnected||(this.anchor=this.range.commonAncestorNode.find("[".concat(Ce,'="anchor"]'))),!((t=this.focus.get())===null||t===void 0)&&t.isConnected||(this.focus=this.range.commonAncestorNode.find("[".concat(Ce,'="focus"]'))),this.anchor.equal(this.focus)){var u,c=this.anchor,h=c.parent();if(!h)return;l.removeZeroWidthSpace(h),h[0].normalize();var v=!1,g=c.prev(),p=c.next();if(g&&g.isCard()){var b=g.find(Ut);b.length>0&&(this.range.select(b,!0),this.range.collapse(!1),v=!0)}else if(p&&p.isCard()){var y=p.find(zt);y.length>0&&(this.range.select(y,!0),this.range.collapse(!1),v=!0)}v||(this.range.setStartBefore(c[0]),this.range.collapse(!0)),Fs?(h[0].normalize(),c.remove()):(c.remove(),h[0].normalize()),h.name==="p"&&((u=h.get())===null||u===void 0?void 0:u.childNodes.length)===0&&h.append(U("<br />"));return}var k=this.anchor.parent();if(k&&(l.removeZeroWidthSpace(k),this.anchor.length>0&&this.range.setStartBefore(this.anchor),this.anchor.remove(),k[0].normalize()),k=this.focus.parent(),k){var E;if(l.removeZeroWidthSpace(k),this.focus.length>0&&this.range.setEndBefore(this.focus),this.focus.remove(),k[0].normalize(),k.name==="p"&&((E=k.get())===null||E===void 0?void 0:E.childNodes.length)===0&&k.append(U("<br />")),zs){var _=window.getSelection();_==null||_.removeAllRanges(),_==null||_.addRange(this.range.base)}}}}},{key:"getNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"center",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){return!0},a=n?e.clone(!0):e;if(!this.focus||!this.anchor)return a;if(t==="left"||t==="center"){var o=t!=="center"?this.anchor:this.focus,l=U(this.key?"[data-".concat(o.attributes(Ce),'-id="').concat(this.key,'"]'):"[".concat(Ce,"=").concat(o.attributes(Ce),"]"),a.get());this.key||(l=l.toArray().find(function(g){return!g.attributes("data-".concat(o.attributes(Ce),"-id"))}));var u=!1;a.traverse(function(g){if(l&&g.equal(l)){var p,b=g.parent();l.remove(),(b==null?void 0:b.name)==="p"&&((p=b.get())===null||p===void 0?void 0:p.childNodes.length)===0&&b.append(U("<br />")),u=!0;return}u&&r(g)&&(g.attributes(Ce)!==o.attributes(Ce)||o.attributes(Ce)==="cursor")&&g.remove()},!0)}if(t==="right"||t==="center"){var c=t!=="center"?this.focus:this.anchor,h=U(this.key?"[data-".concat(c.attributes(Ce),'-id="').concat(this.key,'"]'):"[".concat(Ce,"=").concat(c.attributes(Ce),"]"),a.get());this.key||(h=h.toArray().find(function(g){return!g.attributes("data-".concat(c.attributes(Ce),"-id"))}));var v=!1;a.traverse(function(g){if(h&&g.equal(h)){var p,b=g.parent();h.remove(),(b==null?void 0:b.name)==="p"&&((p=b.get())===null||p===void 0?void 0:p.childNodes.length)===0&&b.append(U("<br />")),v=!0;return}v&&r(g)&&(g.attributes(Ce)!==c.attributes(Ce)||c.attributes(Ce)==="cursor")&&g.remove()},!1)}return a}}]),d}();oo.removeTags=function(d){return d.replace(/<anchor\s*\/>/gi,"").replace(/<focus\s*\/>/gi,"").replace(/<cursor\s*\/>/gi,"")};var Ir=function(i,e,t){var n=Le(i)?i:i[0];if(n.nodeType===Node.ELEMENT_NODE){var r=n.getAttribute(Ce)||"";if([$n,Kn,Zn].indexOf(r)>-1||!!n.getAttribute(no)||r===ur)return!0;var a=n.parentElement,o=(a==null?void 0:a.getAttribute(Ce))||"";if(r===lr||o===lr)return!1;var l=Ci(n),u=a==null?void 0:a.getAttribute(dn);if(u&&a&&(t==null||t.push(U(a))),!l&&a&&Ci(a)&&!oa(a))return!0;if(e){if(l)return!1;var c=e.find(function(p){return p===i[0]});if(c)return c.__card_root&&(t==null||t.push(c.__card_root)),!0}var h=$s(n,"".concat(yt,",").concat(ki),Gs);if(!h||!(h instanceof Element))return!1;if(h.getAttribute(Ce)===ur||(h.getAttribute(dn)&&(t==null||t.push(U(h))),!l&&Ci(h)&&!oa(h)))return!0;if(!l||oa(n)||!a)return!1;var v=$s(a,yt,Gs);if(!v||!(v instanceof Element))return!1;var g=v.getAttribute(dn);if(g&&v&&(t==null||t.push(U(v))),v&&Ci(v)&&!oa(v))return!0}return!1},Uc=function(i,e){var t=Le(i)?i:i[0];if(Jr(t)||Ci(t)&&["id","class","style",dn,fr].includes(e))return!0;var n=t.getAttribute(Nc);return!!(n==="*"||n&&n.split(",").some(function(r){return r.trim().toLowerCase()===e.toLowerCase()}))},Em=function(i){for(var e=[],t=0;t<i.length;t++){var n=i[t],r=i[t+1];Js(n,r)?t++:e.push(n)}return e},Js=function(i,e){var t=i,n=i,r=e,a=e,o=i,l=i,u=e,c=e;return!i||!e?!1:t.li&&a.ld?Qe.exports.isEqual(t.li,a.ld)&&Qe.exports.isEqual(i.p,e.p):n.ld&&r.li?Qe.exports.isEqual(n.ld,r.li)&&Qe.exports.isEqual(i.p,e.p):o.si&&c.sd?Qe.exports.isEqual(o.si,c.sd)&&(Qe.exports.isEqual(i.p,e.p)||Hc(i.p,e.p,o.si.length)||Hc(e.p,i.p,o.si.length)):l.sd&&u.si?Qe.exports.isEqual(l.sd,u.si)&&Qe.exports.isEqual(i.p,e.p):!1},Hc=function(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(i.length!==e.length)return!1;var n=e.slice();return n[n.length-1]=n[n.length-1]-t,Qe.exports.isEqual(i.slice(),n)},Vc=function d(i){var e=document.createDocumentFragment(),t=null,n=0,r=null;for(typeof i[0]=="string"&&(t=i[0],n=1);n<i.length;n++)if(Array.isArray(i[n])){var a=i[n-1];if(a&&a.toString()==="[object Object]"&&Object.keys(a).includes(bt))continue;var o=d(i[n]);o&&e.appendChild(o)}else if(i[n].toString()==="[object Object]"){if(t){r=document.createElement(t);for(var l in i[n]){var u;(u=r)===null||u===void 0||u.setAttribute(Lc(l),Vs(i[n][l]))}var c=Object.keys(i[n]);if(c.indexOf(We)>-1&&c.indexOf(bt)<0){var h,v;(h=r)===null||h===void 0||h.setAttribute(bt,i[n][We]),(v=r)===null||v===void 0||v.removeAttribute(We)}}}else if(typeof i[n]=="number"||typeof i[n]=="string"){var g=document.createTextNode(i[n].toString());e.appendChild(g)}return!r&&t&&(r=document.createElement(t)),r?(r.appendChild(e),r):e.childNodes[0]},xm=function(i,e){i instanceof Node||(i=i[0]);var t=i.childNodes;if(t.length!==0)for(var n=0;n<t.length;n++){var r=t.item(n);if(!!r){var a=Xn(r);a&&e.push(a)}}},Xn=function(i){var e;if(i instanceof Node||(i=i[0]),!Ir(i)){var t=i,n=t.nodeValue;if(i instanceof Element){var r=i.attributes;e=[i.nodeName.toLowerCase()];for(var a={},o=0;r&&o<r.length;o++){var l=r[o],u=l.name,c=l.specified,h=l.value;c&&!Uc(i,u)&&(u==="style"&&i instanceof HTMLElement?a.style=qc(i.style.cssText||h):typeof h=="string"&&(a[u]=h))}return e.push(a),xm(i,e),e}else if(i instanceof Text)return String(n)}},jc=function d(i,e){if(!Array.isArray(i)||i.length<1)return null;for(var t=1;t<i.length;t++)if(t===1){var n=i[t];if(lt(n)==="object"&&e&&e(n))return{path:[],name:i[0],attributes:n,children:i.slice(t+1)}}else if(Array.isArray(i[t])){var r=d(i[t],e);if(r)return r.path.unshift(t),r}return null},Ke=function(){function d(i,e){var t=this;ve(this,d),this.editor=void 0,this.base=void 0,this.toRange=function(){return t.base},this.collapse=function(n){return t.base.collapse(n),t},this.cloneRange=function(){return d.from(t.editor,t.base.cloneRange())},this.select=function(n,r){return r?t.base.selectNodeContents(At(n)?n[0]:n):t.base.selectNode(At(n)?n[0]:n),t},this.getText=function(){var n=t.cloneContents();return n.textContent},this.getClientRect=function(){var n=t.getClientRects().item(0);return n||(n=t.getBoundingClientRect()),n},this.enlargeFromTextNode=function(){var n=function(a,o,l){var u;if(a.nodeType===Node.TEXT_NODE){if(o===0)switch(l){case"start":t.setStartBefore(a);break;case"end":t.setEndBefore(a);break}else if(o===((u=a.nodeValue)===null||u===void 0?void 0:u.length))switch(l){case"start":t.setStartAfter(a);break;case"end":t.setEndAfter(a);break}}};return n(t.startContainer,t.startOffset,"start"),n(t.endContainer,t.endOffset,"end"),t},this.shrinkToTextNode=function(){var n=function(a,o,l){if(a.nodeType===Node.ELEMENT_NODE){var u=a.childNodes;if(u.length!==0){var c,h,v;if(o>0&&(c=u[o-1]),o<u.length&&(h=u[o]),c&&c.nodeType===Node.TEXT_NODE){var g;v=c,o=((g=v.nodeValue)===null||g===void 0?void 0:g.length)||0}if(h&&h.nodeType===Node.TEXT_NODE&&(v=h,o=0),!!v)switch(l){case"start":t.setStart(v,o);break;case"end":t.setEnd(v,o);break}}}};return n(t.startContainer,t.startOffset,"start"),n(t.endContainer,t.endOffset,"end"),t},this.enlargeToElementNode=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=t.enlargeFromTextNode(),o=t.editor.node,l=function(c,h,v){var g,p=U(c);if(!(p.type===Node.TEXT_NODE||!n&&o.isBlock(p)||p.isEditable())){var b;if(h===0){for(;!p.prev()&&(b=p.parent(),!(!b||!n&&o.isBlock(b)||!b.inEditor()||b.isEditable()||!r&&(!n&&b.isElement()||n&&o.isBlock(b))));)p=b;v?a.setStartBefore(p[0]):a.setEndBefore(p[0])}else if(h===((g=p.get())===null||g===void 0?void 0:g.childNodes.length)){for(;!p.next()&&(b=p.parent(),!(!b||!n&&o.isBlock(b)||!b.inEditor()||b.isEditable()||!r&&(!n&&b.isElement()||n&&o.isBlock(b))));)p=b;v?a.setStartAfter(p[0]):a.setEndAfter(p[0])}}};return l(a.startContainer,a.startOffset,!0),l(a.endContainer,a.endOffset,!1),t},this.shrinkToElementNode=function(){for(var n=t.editor.node,r,a;t.startContainer.nodeType===Node.ELEMENT_NODE&&(r=t.startContainer.childNodes[t.startOffset])&&(a=U(r))&&r.nodeType===Node.ELEMENT_NODE&&!a.isCursor()&&!n.isVoid(r)&&(!a.isCard()||a.isEditableCard()||a.find(zt).length>0);)t.setStart(r,0);for(;t.endContainer.nodeType===Node.ELEMENT_NODE&&t.endOffset>0&&(r=t.endContainer.childNodes[t.endOffset-1])&&(a=U(r))&&r.nodeType===Node.ELEMENT_NODE&&!n.isVoid(r)&&!a.isCursor()&&(!a.isCard()||a.isEditableCard()||a.find(Ut).length>0);)t.setEnd(r,r.childNodes.length);return t},this.createSelection=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=new oo(t.editor,t,n);return r.create(),r},this.getSubRanges=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=[];return t.commonAncestorNode.traverse(function(o){if(o.isText()){var l,u=0,c=o.get(),h=((l=c.nodeValue)===null||l===void 0?void 0:l.length)||0,v=t.comparePoint(c,u),g=t.comparePoint(c,h),p=d.create(t.editor);if(v<0){if(g<0)return;g===0?p.setOffset(c,t.startOffset,h):p.setOffset(c,t.startOffset,t.endOffset)}else{if(v!==0||g<0)return;g===0?p.setOffset(c,u,h):p.setOffset(c,u,t.endOffset)}a.push(p)}else if(n&&o.isCard()&&!o.isEditableCard()){var b,y=t.editor.card.find(o);if(!y||r&&y.constructor.singleSelectable===!1)return;var k=y.getCenter(),E=(b=k.get())===null||b===void 0?void 0:b.parentNode;if(!E||!k.inEditor())return;var _=k.index(),A=o.get(),x=t.comparePoint(E,_),C=t.comparePoint(E,_+1),S=d.create(t.editor);if(x<0){if(C<0)return;C===0?S.setOffset(A,t.startOffset,_+1):S.setOffset(A,t.startOffset,t.endOffset)}else{if(x!==0||C<0)return;C===0?S.setOffset(E,_,_+1):S.setOffset(E,_,t.endOffset)}a.push(S)}}),a.length===0&&a.push(t),a},this.setOffset=function(n,r,a){return At(n)&&(n=n[0]),t.setStart(n,r),t.setEnd(n,a),t},this.findElements=function(){var n=t.startContainer,r=t.endContainer,a=t.startOffset,o=t.endOffset,l=t.collapsed,u=[];if(n!==r||l===!0||n.nodeType===Node.TEXT_NODE)return u;for(var c=n.childNodes,h=a;h<o;h++)u.push(c[h]);return u},this.inCard=function(){var n=t.startNode.closest(yt);return n&&n.length>0},this.getStartOffsetNode=function(){var n=t.startContainer,r=t.startOffset;return(n.nodeType===Node.ELEMENT_NODE||n.nodeType===Node.DOCUMENT_FRAGMENT_NODE)&&(n.childNodes[r]||n.childNodes[r-1])||n},this.getEndOffsetNode=function(){var n=t.endContainer,r=t.endOffset;return(n.nodeType===Node.ELEMENT_NODE||n.nodeType===Node.DOCUMENT_FRAGMENT_NODE)&&(n.childNodes[r]||n.childNodes[r-1])||n},this.scrollIntoView=function(){var n=t.endNode.get();aa&&n&&n.scrollIntoView&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},this.scrollRangeIntoView=function(){var n=t.getEndOffsetNode(),r=n.nodeType===Node.TEXT_NODE?n.parentNode:n,a=t.collapsed?r.getBoundingClientRect():t.getClientRect(),o=window.innerHeight;(a.bottom>=o||a.bottom<=0)&&r.scrollIntoView({block:"center"})},this.scrollIntoViewIfNeeded=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.editor.container,r=arguments.length>1?arguments[1]:void 0;if(t.collapsed)n.scrollIntoView(U(t.getEndOffsetNode()));else{var a=t.getStartOffsetNode(),o=t.getEndOffsetNode();U(a).scrollIntoView(r),U(o).scrollIntoView(r)}},this.containsCard=function(){var n=t.collapsed,r=t.commonAncestorNode;return!n&&(r.type!==3&&r.find(yt).length>0||r.closest(yt).length>0)},this.handleBr=function(n){var r,a=t.editor,o=a.list,l=a.block.closest(t.commonAncestorNode);l.find("br").each(function(v){var g,p=U(v),b=p.prev(),y=p.next(),k=p.parent();if((!b||(k==null?void 0:k.hasClass(o.CUSTOMZIE_LI_CLASS))&&(k==null||(g=k.first())===null||g===void 0?void 0:g.equal(b)))&&y&&y.name!=="br"&&!y.isCursor()||!y&&b&&b.name!=="br"){var E;if(n&&b&&!((k==null?void 0:k.hasClass(o.CUSTOMZIE_LI_CLASS))&&(k==null||(E=k.first())===null||E===void 0?void 0:E.equal(p.prev()))))return;p.remove()}});var u=l.first(),c=l.children();if(!u||c.length===1&&l.hasClass(o.CUSTOMZIE_LI_CLASS)&&(u==null?void 0:u.isCard()))return l.append(U("<br />")),t;if(c.length===1&&u.isText()&&u.text().replace(/\r\n|\n|\t|\u200b/g,"").length===0)return l.html("<br />"),t;if(c.length===2&&l.hasClass(o.CUSTOMZIE_LI_CLASS)&&(u==null?void 0:u.isCard())&&["cursor","anchor","focus"].includes(((r=l.last())===null||r===void 0?void 0:r.attributes(Ce))||"")){var h;(h=l.first())===null||h===void 0||h.after("<br />")}return t},this.getPrevNode=function(){t.enlargeFromTextNode();var n=t.startNode,r=t.startOffset;if(!n.isText()){var a=n.children();if(a.length!==0)return a.eq(r-1)}},this.getNextNode=function(){t.enlargeFromTextNode();var n=t.endNode,r=t.endOffset;if(!n.isText()){var a=n.children();if(a.length!==0)return a.eq(r)}},this.editor=i,this.base=e}return we(d,[{key:"collapsed",get:function(){return this.base.collapsed}},{key:"endOffset",get:function(){return this.base.endOffset}},{key:"startOffset",get:function(){return this.base.startOffset}},{key:"startContainer",get:function(){return this.base.startContainer}},{key:"endContainer",get:function(){return this.base.endContainer}},{key:"commonAncestorContainer",get:function(){return this.base.commonAncestorContainer}},{key:"cloneContents",value:function(){return this.base.cloneContents()}},{key:"deleteContents",value:function(){return this.base.deleteContents()}},{key:"extractContents",value:function(){return this.base.extractContents()}},{key:"getBoundingClientRect",value:function(){return this.base.getBoundingClientRect()}},{key:"getClientRects",value:function(){return this.base.getClientRects()}},{key:"insertNode",value:function(e){var t,n;At(e)&&(e=e[0]);var r=this.startNode;if(!U(e).isCursor()&&((t=r.get())===null||t===void 0?void 0:t.childNodes.length)===1&&((n=r.first())===null||n===void 0?void 0:n.name)==="br"){var a;(a=r.first())===null||a===void 0||a.remove()}else r.name==="br"&&r.remove();(e.nodeType===Node.TEXT_NODE||e.nodeName==="BR")&&r.isEditable()&&this.shrinkToElementNode().shrinkToTextNode(),(e instanceof Element||e instanceof DocumentFragment)&&this.editor.nodeId.generate(e),this.base.insertNode(e)}},{key:"isPointInRange",value:function(e,t){return At(e)&&(e=e[0]),this.base.isPointInRange(e,t)}},{key:"comparePoint",value:function(e,t){return At(e)&&(e=e[0]),this.base.comparePoint(e,t)}},{key:"setEnd",value:function(e,t){return At(e)&&(e=e[0]),this.base.setEnd(e,t)}},{key:"setEndAfter",value:function(e){if(At(e)&&(e=e[0]),!!e.parentNode)return this.base.setEndAfter(e)}},{key:"setEndBefore",value:function(e){if(At(e)&&(e=e[0]),!!e.parentNode)return this.base.setEndBefore(e)}},{key:"setStart",value:function(e,t){return At(e)&&(e=e[0]),this.base.setStart(e,t)}},{key:"setStartAfter",value:function(e){if(At(e)&&(e=e[0]),!!e.parentNode)return this.base.setStartAfter(e)}},{key:"setStartBefore",value:function(e){if(At(e)&&(e=e[0]),!!e.parentNode)return this.base.setStartBefore(e)}},{key:"toString",value:function(){return this.base.toString()}},{key:"startNode",get:function(){return U(this.base.startContainer)}},{key:"endNode",get:function(){return U(this.base.endContainer)}},{key:"commonAncestorNode",get:function(){return U(this.base.commonAncestorContainer)}},{key:"deepCut",value:function(){this.collapsed||this.extractContents();var e=this.startNode;if(!e.isEditable()){var t=e;if(t&&!t.isEditable()){for(var n=t.parent();n&&!n.isEditable();)t=n,n=n.parent();this.setEndAfter(t[0]);var r=this.extractContents();this.insertNode(r),this.collapse(!0)}}}},{key:"equal",value:function(e){return this.startContainer===e.startContainer&&this.startOffset===e.startOffset&&this.endContainer===e.endContainer&&this.endOffset===e.endOffset}},{key:"getRootBlock",value:function(){if(this.startNode.isEditable())return this.startNode.children().eq(this.startOffset);for(var e=this.startNode;((t=e)===null||t===void 0?void 0:t.parent())&&!e.parent().isEditable();){var t;e=e.parent()}return e}},{key:"filterPath",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=[];return function(r){var a=U(r);if(t&&["left","right","center","body"].includes(a.attributes(ut))){var o=e.editor.card.closest(a);return o&&(o==null?void 0:o.length)>0&&n.push(o),!0}return t&&a.isCard()&&n.includes(a)?!0:!Ir(a)}}},{key:"toPath",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.container,r=this.cloneRange(),a=r.commonAncestorNode;if(!(!a.isRoot()&&!a.inEditor())){r.shrinkToElementNode().shrinkToTextNode();var o=function(u,c){var h,v=u.attributes(Oe),g=v?0:-1,p=u.getPath(n,!((h=u.parent())===null||h===void 0)&&h.isRoot()?void 0:e.filterPath(t),function(b,y,k){if(b===-1)return v="",g=-1,[];v||(v=k.attributes(Oe),g=y.length),y.unshift(b)});return g=p.length-g,p.push(c),{path:p,id:v,bi:g}};return{start:o(r.startNode,r.startOffset),end:o(r.endNode,r.endOffset)}}}}]),d}();Ke.create=void 0,Ke.from=void 0,Ke.fromPath=void 0,Ke.create=function(d){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,e=arguments.length>2?arguments[2]:void 0,t;return e?t=i.caretRangeFromPoint(e.x,e.y):t=i.createRange(),Ke.from(d,t)},Ke.from=function(d){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;if(!_m(i)){var e=Cm(i)?i:i.getSelection();if(e&&e.rangeCount>0)i=e.getRangeAt(0);else return null}return new Ke(d,i)},Ke.fromPath=function(d,i){var e,t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:d.container,a=i.start.path.slice(),o=i.end.path.slice(),l=a.pop(),u=o.pop(),c=function(E){for(var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.container.get(),A=_,x=0;x<E.length;x++){var C=E[x];C<0&&(C=0);for(var S=void 0,O=A.firstChild,M=0;O;)if(!(O instanceof Element)||!O.getAttribute(no)&&O.getAttribute(Ce)!==ur||n&&["left","right"].includes(O.getAttribute(ut)||"")){if(M===C||!O.nextSibling){S=O;break}M++,O=O.nextSibling}else O=O.nextSibling;if(!S)break;A=S}return A},h=function(E,_,A,x){if(A!==null){var C;if(x<0&&(x=0),A.nodeType===Node.ELEMENT_NODE&&x>A.childNodes.length&&(x=A.childNodes.length),A.nodeType===Node.TEXT_NODE&&x>(((C=A.nodeValue)===null||C===void 0?void 0:C.length)||0)){var S;x=((S=A.nodeValue)===null||S===void 0?void 0:S.length)||0}_[E](A,x)}},v=i.start.id?(e=r.get())===null||e===void 0?void 0:e.querySelector("[".concat(Oe,'="').concat(i.start.id,'"]')):r.get(),g=c(i.start.bi>-1&&v instanceof Element?a.slice(i.start.bi):a,v instanceof Element?v:void 0),p=i.end.id?(t=r.get())===null||t===void 0?void 0:t.querySelector("[".concat(Oe,'="').concat(i.end.id,'"]')):r,b=c(i.end.bi>-1&&p instanceof Element?o.slice(i.end.bi):o,p instanceof Element?p:void 0),y=Ke.create(d,document);return h("setStart",y,g,l===void 0?0:l),h("setEnd",y,b,u===void 0?0:u),y};var Cm=function(i){return i.getRangeAt!==void 0},_m=function(i){return i.collapsed!==void 0},_i=function(i){return!!i&&i.base!==void 0};function hn(d,i){i===void 0&&(i={});var e=i.insertAt;if(!(!d||typeof document=="undefined")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=d:n.appendChild(document.createTextNode(d))}}var Am=`.data-drop-cursor {\r
	position: absolute;\r
	width: 2px;\r
	background-color: #347EFF;\r
}\r
\r
div.data-drag-image {\r
	background-color: #f9f9f9;\r
}`;hn(Am);var Tm=function(){function d(i,e){ve(this,d),this.x=0,this.y=0,this.doc=document,this.range=void 0,this.caretRange=void 0,this.targetCard=void 0,this.caretCard=void 0,this.isCardLeftRange=!1,this.engine=void 0,this.options={className:"data-drop-cursor"},this.engine=i,this.options=Pe(Pe({},this.options),e)}return we(d,[{key:"getRangeForPoint",value:function(){var e=this.doc,t=this.x,n=this.y;if(e.caretRangeFromPoint!==void 0){var r=Ke.create(this.engine,e,{x:t,y:n});if(r)return r}if(event&&event.rangeParent!==void 0){var a=Ke.create(this.engine,e);return a.setStart(event.rangeParent,event.rangeOffset),a.collapse(!0),a}}},{key:"getCard",value:function(){return this.targetCard||this.caretCard}},{key:"parseEvent",value:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="move");var t=this.engine.card;this.x=e.clientX,this.y=e.clientY;var n=U(e.target||[]);this.doc=n.document||document,this.targetCard=t.find(n),this.caretRange=this.getRangeForPoint(),this.caretCard=this.caretRange?t.find(this.caretRange.commonAncestorContainer):void 0}},{key:"getRange",value:function(){var e=this.caretRange,t=this.doc,n=this.x,r=this.getCard(),a;if(r&&r.root.length>0){a=Ke.create(this.engine,t);var o=r.root.getBoundingClientRect()||{left:0,right:0},l=o.left,u=o.right,c=(l+u)/2;a.select(r.root.get()),c<n?(a.collapse(!1),this.isCardLeftRange=!1):(a.collapse(!0),this.isCardLeftRange=!0)}return this.range=a||e,this.range}},{key:"getRect",value:function(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,r=this.isCardLeftRange,a=this.range,o=this.getCard();if(o&&o.root.length>0&&a){if(r){a.setEnd(a.commonAncestorContainer,a.endOffset+1);var l=a.getBoundingClientRect(),u=l.left,c=l.bottom,h=l.top;return a.setEnd(a.commonAncestorContainer,a.endOffset-1),{x:u-n,y:h,height:c-h}}a.setStart(a.commonAncestorContainer,a.startOffset-1);var v=a.getBoundingClientRect(),g=v.right,p=v.top,b=v.bottom;return a.setStart(a.commonAncestorContainer,a.startOffset+1),{x:g-n,y:p,height:b-p}}var y=(e=this.range)===null||e===void 0?void 0:e.getBoundingClientRect();if(((t=y)===null||t===void 0?void 0:t.height)===0){var k,E=(k=this.range)===null||k===void 0?void 0:k.startContainer;y=E.getBoundingClientRect()}var _=y||{},A=_.left,x=_.top,C=_.bottom;return{x:A,y:x,height:(C||0)-(x||0)}}},{key:"getCursor",value:function(){var e=this.options.className;return U("body > div.".concat(e))}},{key:"removeCursor",value:function(){this.getCursor().remove()}},{key:"setCursor",value:function(){this.removeCursor();var e=this.options.className,t=U('<div class="'.concat(e,'" />'));U(document.body).append(t)}}]),d}(),Sm=function(){function d(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ve(this,d),this.events={},this.globalEvents={},this.engine=void 0,this.isComposing=void 0,this.isSelecting=void 0,this.dragoverHelper=void 0,this.options=void 0,this.keydownRange=null,this.engine=i,this.isComposing=!1,this.isSelecting=!1,this.dragoverHelper=new Tm(i),this.options=e}return we(d,[{key:"isCardInput",value:function(e){for(var t=e.target?U(e.target):null;t;){if(t.isEditable())return!1;if(t.attributes(ut)==="center"||t.attributes(Ce)===ur)return!0;var n=t.parent();if(!n)break;t=n}return!1}},{key:"onInput",value:function(e){var t=this,n=this.options.bindInput;if(!(n&&!n())){var r=null;this.onContainer("compositionstart",function(o){if(!t.engine.readonly){t.isCardInput(o)||t.engine.ot.startMutationCache();var l=t.engine,u=l.change,c=l.node,h=l.block,v=l.list,g=u.range.get().cloneRange().shrinkToTextNode().enlargeToElementNode();if(!g.collapsed){var p=h.closest(g.startNode),b=h.closest(g.endNode);if((c.isCustomize(p)||c.isCustomize(b))&&!p.equal(b)){var y;(y=v.backspaceEvent)===null||y===void 0||y.trigger(new KeyboardEvent(""))}}t.isComposing=!0}}),this.onContainer("compositionend",function(){t.engine.readonly||(t.isComposing=!1)}),this.onContainer("beforeinput",function(o){if(!t.engine.readonly){var l=t.engine,u=l.change,c=l.card,h=l.node,v=l.block,g=l.list;if(o.data==="@"){var p=t.engine.trigger("keydown:at",o);p===!1&&(t.engine.ot.submitMutationCache(),o.preventDefault())}u.rangePathBeforeCommand||u.cacheRangeBeforeCommand();var b=u.range.get(),y=b.cloneRange().shrinkToTextNode().enlargeToElementNode(),k=y.startNode;if(zs&&k.name==="li"&&!h.isCustomize(k)){var E;((E=k.first())===null||E===void 0?void 0:E.name)!=="br"&&k.prepend("<br />")}if(Dc&&k.name==="li"&&y.startOffset===1&&h.isCustomize(k)&&t.isComposing){var _=k.first(),A=_==null?void 0:_.next(),x=function(){var D=U("\u200B",null);_==null||_.after(D),y.setOffset(D,1,1),u.range.select(y),r=k};if(A!=null&&A.isText()){var C=A.text();/^\u200b/.test(C)||x()}else(A==null?void 0:A.name)==="br"&&A.remove(),x()}if(y.collapsed||(y.commonAncestorNode.attributes(ut)==="body"?c.remove(y.commonAncestorNode):(y.startNode.attributes(ut)==="body"&&c.remove(y.startNode),y.endNode.attributes(ut)==="body"&&c.remove(y.endNode))),!y.collapsed&&!t.isComposing){var S=v.closest(y.startNode),O=v.closest(y.endNode);if((h.isCustomize(S)||h.isCustomize(O))&&!S.equal(O)){var M;(M=g.backspaceEvent)===null||M===void 0||M.trigger(new KeyboardEvent("")),h.insertText(o.data||"")}}var V=o.inputType;t.isComposing&&!V.includes("Composition")&&t.engine.ot.submitMutationCache();var j=["format","history"];j.forEach(function(P){if(V.indexOf(P)===0){o.preventDefault();var D=V.substring(P.length).toLowerCase();t.engine.command.queryEnabled(D)&&t.engine.command.execute(D)}})}});var a=null;this.onContainer("input",function(o){t.engine.readonly||t.isCardInput(o)||(t.engine.isEmpty()?t.engine.showPlaceholder():t.engine.hidePlaceholder(),a&&clearTimeout(a),a=setTimeout(function(){if(!t.isComposing){if(Dc&&r){var l=r.first(),u=l==null?void 0:l.next();if(u!=null&&u.isText()){var c=u.text();if(/^\u200b/.test(c)){var h=u.get();h==null||h.splitText(1),h==null||h.remove()}}var v=t.engine.change.range.get(),g=v.startNode,p=v.startOffset;if(v.collapsed&&(g==null?void 0:g.isText())){var b=g.text(),y=b.substring(p);/^\u200b/.test(y)&&(g.text(b.substring(0,p)+y.substring(1)),v.setOffset(g,p,p),t.engine.change.range.select(v))}r=null}e(o),t.engine.ot.submitMutationCache()}},10))})}}},{key:"onSelect",value:function(e){var t=this,n=this.options.bindSelect;n&&!n()||(this.onContainer(aa?"touchstart":"mousedown",function(r){t.isCardInput(r)||(t.isSelecting=!0)}),this.onDocument(aa?"touchend":"mouseup",function(r){!t.isSelecting||(t.isSelecting=!1,window.setTimeout(function(){return e(r)},10))}),this.onContainer("keydown",function(){var r=Ke.from(t.engine);t.keydownRange=r}),this.onContainer("keyup",function(r){if(!t.engine.readonly&&!t.isCardInput(r)&&(qe("left",r)||qe("right",r)||qe("up",r)||qe("down",r)||r.key==="Meta"||qe("shift+left",r)||qe("shift+right",r)||qe("shift+up",r)||qe("shift+down",r)||qe("ctrl+b",r)||qe("ctrl+f",r)||qe("ctrl+n",r)||qe("ctrl+p",r)||qe("ctrl+a",r)||qe("ctrl+e",r)||qe("home",r)||qe("end",r))){var a=Ke.from(t.engine);if(t.keydownRange&&a&&a.equal(t.keydownRange))return;t.isComposing||e(r)}}))}},{key:"onPaste",value:function(e){var t=this,n=this.options.bindPaste;if(!(n&&!n())){var r=!1;this.onContainer("keydown",function(a){t.engine.readonly||((!qe("mod",a)||!qe("shift",a)||!qe("v",a))&&(r=!1),(qe("mod+shift+v",a)||qe("mod+alt+shift+v",a))&&(r=!0))}),this.onDocument("paste",function(a){var o=t.engine.change.range.get();if(!!t.engine.container.contains(o.commonAncestorNode)&&!t.engine.readonly&&!t.isCardInput(a)){a.preventDefault();var l=t.engine.clipboard.getData(a),u=r;r=!1,e(Pe(Pe({},l),{},{isPasteText:u}))}})}}},{key:"onDrop",value:function(e){var t=this,n=this.options.bindDrop;if(!(n&&!n())){var r,a,o,l=function(c){if(!(!c.target||t.engine.readonly)){c.stopPropagation(),t.dragoverHelper.setCursor();var h=U(c.target),v=h.attributes("drag-card-trigger");if(r=t.engine.card.find(v||h),r){var g,p;if((g=r.toolbarModel)===null||g===void 0||g.hideCardToolbar(),a=r.find("img.data-drag-image"),a.length>0)a=t.engine.node.clone(a);else{a=U('<div class="data-drag-image" />');var b=r.root.get();b&&a.css({width:b.clientWidth+"px",height:b.clientHeight+"px"})}a.css({position:"absolute",top:"-99999px",right:"-99999px"}),U(document.body).append(a),(p=c.dataTransfer)===null||p===void 0||p.setDragImage(a[0],0,0)}}};this.onRoot("dragstart",l),this.onContainer("dragstart",l),this.onContainer("dragover",function(u){if(!t.engine.readonly){var c=t.dragoverHelper,h=c.getCursor();if(h.length!==0){c.parseEvent(u),o=c.getRange();var v=c.getRect();h.css({height:v.height+"px",top:Math.round(window.pageYOffset+(v.y||0))+"px",left:Math.round(window.pageXOffset+(v.x||0))+"px"})}else t.dragoverHelper.setCursor()}}),this.onContainer("dragleave",function(){t.dragoverHelper.removeCursor()}),this.onContainer("dragend",function(){t.dragoverHelper.removeCursor(),a&&(a.remove(),a=void 0)}),this.onContainer("drop",function(u){if(!t.engine.readonly){u.preventDefault(),t.dragoverHelper.removeCursor(),a&&(a.remove(),a=void 0);var c=u.dataTransfer,h=[];try{c&&c.items&&c.items.length>0?Array.from(c.items).forEach(function(g){if(g.kind==="file"){var p=g.getAsFile();p&&h.push(p)}}):c&&c.files&&c.files.length>0&&(h=Array.from(c.files))}catch{c&&c.files&&c.files.length>0&&(h=Array.from(c.files))}var v={event:u,range:o,card:r,files:h};e(v),r=void 0}})}}},{key:"onDocument",value:function(e,t,n){this.addEvent("document",e,t,n)}},{key:"onWindow",value:function(e,t,n){this.addEvent("window",e,t,n)}},{key:"onContainer",value:function(e,t,n){this.addEvent("container",e,t,n)}},{key:"onRoot",value:function(e,t,n){this.addEvent("root",e,t,n)}},{key:"addEvent",value:function(e,t,n,r){var a=this;if(this.globalEvents[e]||(this.globalEvents[e]=[]),!this.globalEvents[e].find(function(l){return l.type===t})){var o=function(){for(var u=a.events[e].filter(function(g){return g.type===t}),c,h=0;h<u.length;h++){var v;if(c=(v=u[h]).listener.apply(v,arguments),c===!1)break}return c};switch(e){case"container":this.engine.container.on(t,o);break;case"root":this.engine.root.on(t,o);break;case"document":document.addEventListener(t,o);break;case"window":window.addEventListener(t,o);break}this.globalEvents[e].push({type:t,listener:o})}this.events[e]||(this.events[e]=[]),r!==void 0?this.events[e].splice(r,0,{type:t,listener:n}):this.events[e].push({type:t,listener:n})}},{key:"destroy",value:function(){var e=this;Object.keys(this.globalEvents).forEach(function(t){var n=e.globalEvents[t];n.forEach(function(r){t==="window"?window.removeEventListener(r.type,r.listener):t==="document"?document.removeEventListener(r.type,r.listener):t==="container"?e.engine.container.off(r.type,r.listener):t==="root"&&e.engine.root.off(r.type,r.listener)})})}}]),d}(),Gc=function(){function d(i){ve(this,d),this.source=void 0,this.source=i}return we(d,[{key:"toHTML",value:function(){var e=Xr(this.source);return e=e.replace(/\n/g,"</p><p>").replace(/<p><\/p>/g,"<p><br /></p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),e.indexOf("</p><p>")>=0&&(e="<p>".concat(e,"</p>")),e}}]),d}(),Nm=function(i){var e="";for(var t in i)if(t!=="style"){var n=Xr(i[t]);e+=" ".concat(t,'="').concat(n,'"')}return e.trim()},Rm=function(i){var e="";for(var t in i){t=t.toLowerCase();var n=Xr(i[t]);/^(padding|margin|text-indent)/.test(t)&&io(n)===0||(t.endsWith("color")&&(n=ar(n).toHexString()),e+=" ".concat(t,": ").concat(n,";"))}return e.trim()},vr=function(){function d(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(ve(this,d),this.root=void 0,this.editor=void 0,this.isNormalize=!0,this.editor=e,this.isNormalize=n,typeof i=="string"){var r;i=i.replace(/<a\s{0,1000}\/>/gi,"<a></a>"),i=i.replace(/<a(\s[^>]+?)\/>/gi,function(l,u){return"<a".concat(u,"></a>")}),i=(r=i)===null||r===void 0?void 0:r.replace(/<img .*>/gi,function(l){return l.replace(/on[a-zA-Z]{0,20}=/g,"notallow=")}),i=i.replace(/<p(>|\s+[^>]*>)/gi,"<paragraph$1").replace(/<\/p>/gi,"</paragraph>"),i=js(i);var a=new DOMParser().parseFromString(i,"text/html"),o=a.body.innerHTML.replace(/<paragraph(>|\s+[^>]*>)/gi,"<p$1").replace(/<\/paragraph>/gi,"</p>");this.root=U("<div>".concat(o,"</div>"))}else At(i)?this.root=i:this.root=U(i);t&&t(this.root)}return we(d,[{key:"convert",value:function(e,t,n){for(var r=e.transform(t),a=[],o=this.editor.node,l=null;r;){var u,c=r,h=c.rule;a.push(h);var v=r.node,g=v.name,p=v.attributes,b=v.style;g!=="card"&&delete p[Oe],delete p.id;var y=U("<".concat(g," />"));if(o.setAttributes(y,Pe(Pe({},p),{},{style:b})),(u=y.get())===null||u===void 0||u.append.apply(u,gt(t.get().childNodes)),t.isCard())return t.replaceWith(y),y;if(r.replace?(t.replaceWith(y),t=y):y.each(function(k){var E=t.get();E&&E instanceof Element&&E.append(k)}),(!l||l.length===0)&&(l=y),o.isBlock(y,n)){r=e.transform(y,function(k){return a.indexOf(k)<0});continue}r=e.transform(t,function(k){return a.indexOf(k)<0})}return l}},{key:"normalize",value:function(e,t,n){var r=this,a=this.editor,o=a.node,l=a.inline;if(!this.isNormalize){if(!n)return;var u=e.find(yt);u.each(function(v,g){var p=u.eq(g);!p||r.convert(n,p,t)});var c=e.find("".concat(ro,",").concat(Ms,",").concat(Ps));c.each(function(v,g){var p=c.eq(g);!p||r.convert(n,p,t)});return}var h=function(g){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"mark",b=g.attributes(),y=xi(b.style||"");if(delete b.style,!(Object.keys(b).length===0&&Object.keys(y).length===0)){var k=Object.keys(b).length,E=Object.keys(y).length,_=g.clone();t.filter(g,b,y,!0),_.removeAttributes(Oe);var A=Object.keys(b),x=0;A.forEach(function(M){b[M]&&(x++,_.removeAttributes(M))});var C=0,S=Object.keys(y);if(S.forEach(function(M){y[M]&&(C++,_.css(M,""))}),(x===k&&C===E||x===0&&C===0)&&t.getType(_)===p){g.before(_);var O=g.children();_.append(O.length>0?O:p==="block"?"<br />":U("\u200B",null)),g.remove(),g=_;return}return _.attributes("style").trim()===""&&_.removeAttributes("style"),_}};e.traverse(function(v){if(!(v[0]===e[0]||["style","script","meta"].includes(v.name))&&v.isElement()){var g=v.isCard();if(n&&(!t.getType(v)||g)){var p=r.convert(n,v,t);if(p)return g?!0:p}if(g)return;if(o.isMark(v,t)){var b=function(){var y=[],k=t.getRule(v);if(k){var E=function(){var _;y.push(k),((_=v.get())===null||_===void 0?void 0:_.childNodes.length)===0&&a.mark.repairCursor(v);var A=h(v);if(!A)return{v:{v:void 0}};var x=t.getType(A,function(D){return D.name===A.name&&D.type==="mark"&&y.indexOf(D)<0});if(!x&&n){var C=r.convert(n,A,t);if(C&&C.length>0){var S=v.children();return C.append(S.length>0?S:U("\u200B",null)),v.append(A.length===0?C:A.children()),{v:{v:void 0}}}}for(var O=v;x==="mark";){for(var M=O.children(),V=A;;){var j=V.children();if(j.length>0)V=j;else break}if(V.append(M.length>0?M:U("\u200B",null)),O.append(A),O=A,A=h(A),!A)break;if(x=t.getType(A,function(D){return D.name===A.name&&D.type==="mark"&&y.indexOf(D)<0}),!x){if(n){var P=r.convert(n,A,t);if(P&&P.length>0){A=A.length>0?A.children():P,x="mark";continue}}break}if(k=t.getRule(A),!k)break;y.push(k)}}();if(lt(E)==="object")return E.v}}();if(lt(b)==="object")return b.v}else if(o.isInline(v))return l.flat(v,t)}})}},{key:"traverse",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=this.editor.node,l=e.first();l;){if(["style","script","meta"].includes(l.name)){l=l.next();continue}if(l.isElement()){var u=l.name,c=l.attributes(),h=xi(c.style||"");if(delete c.style,["left","right"].indexOf(c[ut])>=0){l=l.next();continue}var v=!0,g=void 0;if(t&&c[Ce]!==Yr)if(g=t.getType(l),g===void 0){var p,b;v=!1;var y=l.parent();if(y&&o.isBlock(y,t)&&((p=y.get())===null||p===void 0?void 0:p.childNodes.length)===1&&((b=l.get())===null||b===void 0?void 0:b.childNodes.length)===0){var k=U("<br />");l.before(k),l.remove(),l=k,u=k.name,c={},h={},v=!0}}else t.filter(l,c,h);if(c[ut]!=="center"&&r.onOpen&&v){var E=r.onOpen(l,u,c,h);if(E===!1){l=l.next();continue}}(u!=="card"||a)&&this.traverse(l,t,n,r,a),c[ut]!=="center"&&r.onClose&&v&&r.onClose(l,u,c,h)}else if(l.isText()){var _=l[0].nodeValue?Xr(l[0].nodeValue):"";_===""&&o.isBlock(l.parent(),t||void 0)&&(l.prev()||(_=_.replace(/^[ \n]+/,"")),l.next()||(_=_.replace(/[ \n]+$/,"")));var A=l.prev(),x=l.next();A&&o.isBlock(A,t||void 0)&&x&&o.isBlock(x,t||void 0)&&_.trim()===""&&(_=_.trim()),r.onText&&r.onText(l,_)}l=l.next()}}},{key:"toValue",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=[],o=this.editor,l=o.node,u=this.root.clone(!0);e&&this.normalize(u,e,t),o.trigger("parse:value-before",u),this.traverse(u,e,t,{onOpen:function(v,g,p,b){var y;if(o.trigger("parse:value",v,p,b,a)===!1)return!1;if(a.push("<"),a.push(g),Object.keys(p).length>0&&a.push(" "+Nm(p)),Object.keys(b).length>0){var k=Rm(b);k!==""&&(a.push(' style="'),a.push(k),a.push('"'))}l.isVoid(g,e||void 0)&&((y=v.get())===null||y===void 0?void 0:y.childNodes.length)===0?a.push(" />"):a.push(">")},onText:function(v,g){n&&g.length>1&&(g=g.replace(/[\u00a0 ]+/g,function(p){var b=[];p=p.replace(/\u00a0/g," ");for(var y=0;y<p.length;y++)b[y]=y%2==0?p[y]:"\xA0";return b.join("")})),a.push(g)},onClose:function(v,g){l.isVoid(g,e||void 0)||a.push("</".concat(g,">"))}}),o.trigger("parse:value-after",a),a.length>0&&/^\n+/g.test(a[0])&&(a[0]=a[0].replace(/^\n+/g,"")),a.length>0&&/\n+$/g.test(a[a.length-1])&&(a[a.length-1]=a[a.length-1].replace(/\n+$/g,""));var c=a.join("");return r?js(c):c}},{key:"toHTML",value:function(e,t){var n=U("<div />"),r=this.editor,a=r.container.css();return e&&t?(U(e).append(this.root).css(a),n.append(t)):n.append(this.root),r.trigger("parse:html-before",this.root),r.trigger("parse:html",n),r.trigger("parse:html-after",n),n.html()}},{key:"toDOM",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=this.toValue(e,t,!1,!0),r=new DOMParser().parseFromString(n,"text/html"),a=r.createDocumentFragment(),o=r.body.childNodes;o.length>0;){var l=o[0];a.appendChild(l)}return a}},{key:"toText",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=this.root.clone(!0),a=[],o=this.editor;return this.traverse(r,null,null,{onOpen:function(u,c){if(c==="br"&&a.push(`
`),n&&u.name==="li"){if(u.hasClass(o.list.CUSTOMZIE_LI_CLASS))return;var h=u.parent(),v=h==null?void 0:h.css("listStyleType");if((h==null?void 0:h.name)==="ol"){var g=h[0].start,p=g||1;a.push("".concat(Mc(v,p),". ")),h.attributes("start",p+1)}else(h==null?void 0:h.name)==="ul"&&a.push(Mc(v)+" ")}},onText:function(u,c){c=Vs(c),c=c.replace(/\u00a0/g," "),a.push(c)},onClose:function(u,c){if(c==="p"||o.node.isBlock(u,e||o.schema)){var h=Array.from(u.get().childNodes);if(h&&h.some(function(v){return v.nodeName==="BR"})||h.some(function(v){return o.node.isBlock(v,e||o.schema)}))return;a.push(`
`)}}},t),a.join("").trim()}}]),d}(),Dm=function(){function d(i,e){ve(this,d),this.source=void 0,this.engine=void 0,this.schema=void 0,this.source=i,this.engine=e,this.schema=this.engine.schema.clone()}return we(d,[{key:"parser",value:function(){var e=this,t=this.engine.conversion.clone();this.engine.trigger("paste:schema",this.schema);var n=new vr(this.source,this.engine,function(r){e.engine.trigger("paste:origin",r)});return n.toDOM(this.schema,t)}},{key:"getDefaultStyle",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine.container,t={color:ar(e.css("color")).toHexString(),"background-color":ar(e.css("background-color")).toHexString(),"font-size":e.css("font-size")};return t}},{key:"elementNormalize",value:function(e){var t=this,n=this.getDefaultStyle(),r=this.engine,a=r.inline,o=r.list,l=this.engine.node,u=this.engine.mark,c=this.engine.block,h=[];U(e).traverse(function(v){var g,p,b,y=v.parent();if(!(!y||v.isCard()||v.fragment===e)){if(v.isText()){var k=v.text();if(/\u200b/.test(k)){var E=!0,_=v.next(),A=v.prev(),x=v.parent();(x&&l.isMark(x,t.schema)||x&&l.isInline(x,t.schema)||_&&l.isInline(_,t.schema)||A&&l.isInline(A,t.schema))&&(E=!1),E&&(k=k.replace(/\u200b/g,""),v.text(k))}else if(/^\n$/.test(k)){if(l.isList(y)){v.remove();return}var C=v.next();C&&l.isBlock(C)&&v.remove()}if(l.isList(y)){var S=v.next(),O=v.prev(),M=function(Ve,Be){if(l.isCustomize(Ve)){var br=Ve.first();if(br&&br.isCard()){var rn=br.attributes(We)||br.attributes(bt);rn&&o.addCardToCustomize(Be,rn)}}},V=null;return(S==null?void 0:S.name)==="li"?(V=S.clone(),M(S,V)):(O==null?void 0:O.name)==="li"?(V=O.clone(),M(O,V)):V=U("<li></li>"),v.before(V),V.append(v),V}return}var j=v.css();for(var P in n){var D=j[P];!D||(P.endsWith("color")&&(D=ar(D).toHexString()),D.toLowerCase()===n[P].toLowerCase()&&v.css(P,""))}var T=t.schema.getType(v);if(!T){var q=v.first();return l.unwrap(v),q}l.removeMinusStyle(v,"text-indent"),l.isList(v)&&v.css("padding-left","");var Z=v.attributes();for(Z.style&&Z.style.trim()===""&&v.removeAttributes("style");v.name==="span"&&l.isEmpty(v);){var ie=v.children();if(ie.length>0)break;if(y=v.parent(),v.remove(),!y||(v=y,y=v.parent(),!y))return;T=void 0,Z=void 0}if(Z||(Z=v.attributes()),!Z[bt]){var N=T?T==="block":l.isBlock(v,t.schema),F=l.isVoid(v,t.schema),H=l.isBlock(y,t.schema);if(N&&Z["data-type"]!=="p"&&!F&&!H&&l.html(v)===""){v.remove();return}if(Z["data-type"]==="p"&&v.removeAttributes("data-type"),N&&((g=y)===null||g===void 0?void 0:g.name)==="p"){var W;l.unwrap(y),y=v.parent(),((W=y)===null||W===void 0?void 0:W.fragment)===e&&(y=void 0),H=y?l.isBlock(y,t.schema):!1}var Y=y?l.isList(y):!1;if(v.name==="li"&&y&&!Y){var Q=U("<ul />");v.before(Q),Q.append(v);return}if(l.isList(v)&&y&&l.isList(y)){var re=[],te=[],J=!0,ne=y.children().toArray(),ae=y.clone(),fe=function(){var Ve,Be;return((Ve=(Be=ae.get())===null||Be===void 0?void 0:Be.childNodes.length)!==null&&Ve!==void 0?Ve:0)>0?(J?re.push(ae):te.push(ae),ae=y.clone(),!0):!1};ne.forEach(function(Ye,Ve){if(!!Ye){if(J&&Ye.equal(v)){ne.length-1===Ve?(fe(),te.push(v)):(Ve===0||fe(),re.push(v)),J=!1;return}if(Ye.name==="li"){ae.append(Ye);return}else fe();J?re.push(Ye):te.push(Ye)}}),fe();var me=y.attributes(o.INDENT_KEY)||"0";v.attributes(o.INDENT_KEY,me),o.addIndent(v,1);var pe=y;return re.forEach(function(Ye){var Ve,Be=U(Ye);!Be||((Ve=Be.get())===null||Ve===void 0?void 0:Ve.childNodes.length)===0||(pe.after(Be),pe=Be)}),te.forEach(function(Ye){var Ve,Be=U(Ye);!Be||((Ve=Be.get())===null||Ve===void 0?void 0:Ve.childNodes.length)===0||(pe.after(Be),pe=Be)}),y.remove(),v||void 0}if(v.name!=="li"&&Y){if(v.name==="br"){v.remove();return}var ke=U("<li />");v.before(ke),ke.append(v);return}if(l.isList(v)&&((p=y)===null||p===void 0?void 0:p.name)==="li"){var L,K,z,le,he,ge,_e=(L=y)===null||L===void 0?void 0:L.parent();if(!_e){l.unwrap(y);return}var Se=_e.clone(),be=_e.clone(),Ae=!0,et=_e.children().toArray();et.forEach(function(Ye){if(!!Ye){if(Ae&&Ye.equal(y)){Ae=!1;return}Ae?Se.append(Ye):be.append(Ye)}});var at=(K=y)===null||K===void 0||(z=K.parent())===null||z===void 0?void 0:z.hasClass("data-list"),Dt=(le=y)===null||le===void 0?void 0:le.children(),It=null,tn=null;Dt.each(function(Ye,Ve){var Be=Dt.eq(Ve);if(!(!Be||l.isEmptyWithTrim(Be)&&!l.isVoid(Be))){var br=l.isList(Be),rn=Se[Se.length-1];if(br){var wa,ol=((wa=U(rn))===null||wa===void 0?void 0:wa.attributes(o.INDENT_KEY))||"0";Be.attributes(o.INDENT_KEY,ol),o.addIndent(Be,1),Se[Se.length]=Be[0],It=null;return}else if(l.isBlock(Ye,t.schema)){var yo=Se.length;Se[yo]=Be[0],Se[yo+1]=Se.clone()[0],It=null;return}if(!It){var Ii;It=U(at?'<li class="'.concat(o.CUSTOMZIE_LI_CLASS,'" />'):"<li />");var ri=(Ii=U(rn))===null||Ii===void 0?void 0:Ii.last();ri?ri==null||ri.after(It):U(rn).append(It)}It.append(Ye),tn||(tn=It)}}),(he=y)===null||he===void 0||he.remove();var Vt=_e;return Se.each(function(Ye){var Ve,Be=U(Ye);!Be||((Ve=Be.get())===null||Ve===void 0?void 0:Ve.childNodes.length)===0||(Vt.after(Be),Vt=Be)}),be.each(function(Ye){var Ve,Be=U(Ye);!Be||((Ve=Be.get())===null||Ve===void 0?void 0:Ve.childNodes.length)===0||(Vt.after(Be),Vt=Be)}),_e.remove(),((ge=tn)===null||ge===void 0?void 0:ge.next())||Se.next()||void 0}if(v.name==="p"&&Y){var Qn=U("<li />");return l.replace(v,Qn),Qn}if(N&&!F&&l.html(v).trim()===""&&(l.isRootBlock(v,t.schema)||v.name==="li")&&l.html(v,"<br />"),N&&((b=y)===null||b===void 0?void 0:b.name)==="li"){var On,qn,In=(On=(qn=v.get())===null||qn===void 0?void 0:qn.childNodes)!==null&&On!==void 0?On:[];if(v.name==="p"){var Ln=v.next();In.length===0&&!Ln&&v.append("<br />");var gn=v.first();return Ln&&Ln.name==="p"&&v.append("<br />"),l.unwrap(v),gn}else{var $t=y.parent();if(!$t)return;for(var Bn=$t.clone(),jt=$t.clone(),ni=y.prev();ni;)Bn.prepend(ni),ni=y.prev();for(var Mr=y.next();Mr;)jt.append(Mr),Mr=y.next();for(var mr=y.clone(),Mn=y.clone(),ft=v.prev();ft;)mr.prepend(ft),ft=v.prev();for(var nn=v.next();nn;)Mn.append(nn),nn=v.next();$t.after(v),mr.first()&&Bn.append(mr),Mn.first()&&jt.prepend(Mn),Bn.first()&&$t.before(Bn),jt.first()&&v.after(jt),$t.remove();return}}if(!N&&l.isInline(v)&&!v.isCard()&&!F){var Pn=v.allChildren().some(function(Ye){return l.isVoid(Ye,t.schema)});l.isEmptyWithTrim(v)&&!Pn?v.remove():a.repairCursor(v)}l.removeSide(v);var kt=y,al=function Ye(Ve){if(kt&&!kt.fragment&&l.isBlock(Ve,t.schema)&&l.isBlock(kt,t.schema)&&!t.schema.isAllowIn(kt.name,Ve.name)){var Be=Ve.children();l.unwrap(Ve),Be.each(function(br,rn){Ye(Be.eq(rn))})}};for(al(v);v.length>0&&kt&&!kt.fragment&&l.isBlock(v,t.schema)&&!l.isBlock(kt,t.schema);){var Ri=v.clone();l.unwrap(v),kt.before(Ri),Ri.append(kt),v=Ri,kt=v.parent()}var da=l.isMark(v,t.schema);if(v.length>0&&da){var co=c.closest(v);if(!co.equal(v)){var ha,Di=u.findPlugin(v),va=c.findPlugin(co);if(Di&&(va==null||(ha=va.disableMark)===null||ha===void 0?void 0:ha.includes(Di.name))){var ga=v.first();return l.unwrap(v),ga||void 0}}}if(da){var fo=u.findPlugin(v),ho=h.concat();if(ho.pop(),fo){var pa=ho.find(function(Ye){var Ve;return((Ve=Ye.plugin)===null||Ve===void 0?void 0:Ve.name)===fo.name&&Ye.node.length>0});if(pa){var ma;((ma=pa.node.get())===null||ma===void 0?void 0:ma.childNodes.length)===1?l.unwrap(pa.node):l.unwrap(v);return}}}if(kt=y,v.length>0&&kt&&l.isMark(kt,t.schema)&&da){var ba,vo=u.findPlugin(kt),go=(ba=h[h.length-1])===null||ba===void 0?void 0:ba.plugin;if(vo&&go&&go.mergeLeval>vo.mergeLeval){var Oi=kt.clone(!1),ya=kt.children().toArray(),po=Oi.clone(),mo=Oi.clone(),bo=!0,qi=-1;if(ya.forEach(function(Ye,Ve){if(Ye.equal(v)){var Be=v.children();Oi.append(Be),v.append(Oi),bo=!1,qi=Ve}else bo?po.append(Ye):mo.append(Ye)}),qi>0&&kt.before(po),qi<ya.length-1&&kt.after(mo),qi>-1)return kt.before(v),kt.remove(),h.splice(h.length-2,1),v}}}}},void 0,void 0,function(v){if(l.isMark(v)){var g=u.findPlugin(v);v.is_mark=!0,h.push({plugin:g,node:v})}},function(v){v.is_mark&&h.pop()})}},{key:"normalize",value:function(){var e=this,t=this.engine.node,n=this.parser();this.elementNormalize(n);var r=this.engine.change.range.get(),a=r.commonAncestorNode,o=this.engine.inline.closest(a);if(a.inEditor()&&!o.isCard()&&t.isInline(o,this.schema))return this.removeElementNodes(U(n)),n;if(a.inEditor()&&a.isText()&&r.startContainer===r.endContainer){var l=a[0].nodeValue,u=l==null?void 0:l.substr(0,r.startOffset),c=l==null?void 0:l.substr(r.endOffset);if(/\[.*?\]\($/.test(u||"")&&/^\)/.test(c||""))return this.removeElementNodes(U(n)),n}U(n).traverse(function(p){var b;if(p.fragment!==n){var y=(b=p.get())===null||b===void 0?void 0:b.firstChild;if(p.length>0&&p[0].parentNode&&e.engine.trigger("paste:each",p),p.isText()){var k=p.text();if(/^(\r|\n)+$/.test(k)){var E,_=p.prev(),A=p.next();(_&&!t.isBlock(_)||A&&!t.isBlock(A)||_&&t.isBlock(_)&&A&&t.isBlock(A)||((E=p.parent())===null||E===void 0?void 0:E.name)==="p")&&p.remove()}var x=/((\n)+)/.exec(k);if(x&&x.index>0&&x.index<k.length-1){var C=p.get().splitText(x.index),S=C.splitText(x[0].length);p.after(C),C.after(S),p.text()||p.remove()}}else p.name==="pre"&&p.find(Ei).length>0&&t.unwrap(p);if(p.length===0&&y)return U(y)}}),this.engine.trigger("paste:each-after",U(n));var h=t.normalize(U(n));h.fragment&&(n=h.fragment),n.normalize();var v=U(n),g=v.find("ul,ol");return g.each(function(p,b){var y=g.eq(b);y&&t.isList(y)&&e.engine.list.addStart(y)}),this.engine.nodeId.generateAll(U(n),!0),n}},{key:"removeElementNodes",value:function(e){var t=this,n=e.allChildren();n.forEach(function(r){r.isElement()&&t.engine.node.unwrap(r)})}}]),d}(),Rt;(function(d){d.INLINE="inline",d.BLOCK="block"})(Rt||(Rt={}));var Ai;(function(d){d.CARD_CHANGE="card_change",d.CLICK="click",d.MOUSE_DOWN="mouse_down"})(Ai||(Ai={}));var Wc;(function(d){d.NONE="none",d.BACKGROUND="background",d.BORDER="border"})(Wc||(Wc={}));var ei=ir("lastePasteRange"),Om=function(){function d(i){ve(this,d),this.engine=void 0,Object.defineProperty(this,ei,{writable:!0,value:void 0}),this.prevSelection=null,this.engine=i}return we(d,[{key:"repairInput",value:function(e,t){var n=t,r=n.commonAncestorNode,a=this.engine.card.find(r),o=this.engine,l=o.node,u=o.mark,c=o.change;if(a&&a.type===Rt.INLINE)if(a.isLeftCursor(r)){var h=r.closest(zt),v=h.text().replace(/\u200B/g,"");v&&(v=Xr(v),t.setStartBefore(a.root),t.collapse(!0),l.html(h,"&#8203;"),l.insertText(v,t),c.apply(t))}else if(a.isRightCursor(r)){var g=r.closest(Ut),p=g.text().replace(/\u200B/g,"");if(p){p=Xr(p);var b=a.root.next(),y=a.queryMarks?a.queryMarks(!0):[];if(y.length>0){var k=y[y.length-1];k.append(p);for(var E=y.length-2;E>=0;E--)k=y[E].append(k);a.root.after(k),t.select(k,!0).collapse(!1)}else b&&(b.isText()||l.isMark(b))?(t.select(b,!0).collapse(!0),l.insertText(p,t)):(t.setEndAfter(a.root),t.collapse(!1),l.insertText(p,t));l.html(g,"&#8203;"),c.apply(t)}}else c.range.toTrusty(t);var _=t.cloneRange().shrinkToTextNode(),A=_.startNode,x=_.startOffset,C=A.parent();if(A.isText()&&C&&l.isMark(C)){var S=A.get(),O=A.text();if(x===O.length&&e.data&&e.inputType.indexOf("insert")===0){for(var M=C,V=[];M&&l.isMark(M);){var j,P,D=u.findPlugin(M);D&&!D.followStyle&&V.push(M),M=M.parent();var T=(j=M)===null||j===void 0?void 0:j.parent();if(((P=M)===null||P===void 0?void 0:P.next())&&T&&l.isMark(T))break}var q=A.next();if(V.forEach(function(ne,ae){if(C.equal(ne)&&q){V.splice(ae,1);return}for(var fe=ne.next(),me=ne;!fe&&me;){var pe=me.parent();if(pe&&l.isBlock(pe))break;fe=(pe==null?void 0:pe.next())||null,me=pe}for(var ke=fe;ke&&!ke.isText();){if(l.isMark(ke)&&u.compare(ke,ne)){V.splice(ae,1);break}ke=ke.first()}}),V.length>0){var Z=S.splitText(O.length-e.data.length);Z.remove(),l.isEmpty(C)&&C.remove(),u.unwrap(V.map(function(ne){return ne.clone()})),l.insertText(O.substr(O.length-e.data.length)),u.merge(),t=c.range.get().cloneRange().shrinkToTextNode(),A=t.startNode,x=t.startOffset,S=A.get(),O=A.text()}}else if(e.data&&x===e.data.length&&e.inputType.indexOf("insert")===0){for(var ie=C,N=[];ie&&l.isMark(ie);){var F,H,W=u.findPlugin(ie);W&&!W.followStyle&&N.push(ie),ie=ie.parent();var Y=(F=ie)===null||F===void 0?void 0:F.parent();if(((H=ie)===null||H===void 0?void 0:H.prev())&&Y&&l.isMark(Y))break}var Q=A.prev();N.forEach(function(ne,ae){if(C.equal(ne)&&Q){N.splice(ae,1);return}for(var fe=ne.prev(),me=ne;!fe&&me;){var pe=me.parent();if(pe&&l.isBlock(pe))break;fe=(pe==null?void 0:pe.prev())||null,me=pe}for(var ke=fe;ke&&!ke.isText();){if(l.isMark(ke)&&u.compare(ke,ne)){N.splice(ae,1);break}ke=ke.last()}}),N.length>0&&(S.splitText(e.data.length),S.remove(),l.isEmpty(C)&&C.remove(),u.unwrap(N.map(function(ne){return ne.clone()})),l.insertText(e.data===""?"\xA0":e.data),u.merge(),t=c.range.get().cloneRange().shrinkToTextNode(),A=t.startNode,x=t.startOffset,S=A.get(),O=A.text())}O.length>0&&/^\u200B$/g.test(O.substr(0,1))&&(S.splitText(1),S.remove())}var re=A.prev();if(A.isText()&&re&&l.isMark(re)){var te=A.get(),J=A.text();J.length>0&&/^\u200B$/g.test(J.substr(0,1))&&(te.splitText(1),te.remove())}}},{key:"handleSelectionChange",value:function(){var e,t,n,r,a=this,o=this.engine,l=o.change,u=o.container,c=o.card;if(!l.isComposing()){var h=u.window,v=h==null?void 0:h.getSelection();if(!(((e=this.prevSelection)===null||e===void 0?void 0:e.anchorNode)===(v==null?void 0:v.anchorNode)&&((t=this.prevSelection)===null||t===void 0?void 0:t.anchorOffset)===(v==null?void 0:v.anchorOffset)&&((n=this.prevSelection)===null||n===void 0?void 0:n.focusNode)===(v==null?void 0:v.focusNode)&&((r=this.prevSelection)===null||r===void 0?void 0:r.focusOffset)===(v==null?void 0:v.focusOffset))&&(this.prevSelection=v?{anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}:null,v&&v.anchorNode)){var g=Ke.from(this.engine,v);if(!g.commonAncestorNode.inEditor(u))return;l.onSelect();var p=g.containsCard()||g.commonAncestorNode.closest(yt).length>0&&g.startNode.closest("".concat(zt,",").concat(Ut,",").concat(ki)).length===0,b=g.collapsed;if(!b){var y=g.startNode,k=g.endNode,E=g.startOffset,_=g.endOffset,A=y.isElement()&&!y.isCard()?y.children().eq(E):y,x=k.isElement()&&!k.isCard()?k.children().eq(_-1):k;A&&x&&A.isCard()&&A.equal(x)&&(b=!0)}c.each(function(C){var S=C.getCenter();if(S&&S.length>0){var O=v.containsNode?v.containsNode(S[0]):!1;if(!O&&p&&v.focusNode){var M=a.engine.card.find(v.focusNode);M&&(b=!v.anchorNode||M.root.contains(v.anchorNode),b&&C.root.equal(M.root)&&(O=!0)),O&&b&&(p=!1)}var V=C.constructor.autoSelected;C.select(O&&(!b||V!==!1))}})}}}},{key:"init",value:function(){var e=this,t=this.engine,n=t.change,r=t.card,a=t.clipboard;n.event.onInput(function(c){var h=n.range.get();e.repairInput(c,h),n.range.select(h),n.onSelect(h),n.change()}),n.event.onDocument("selectionchange",function(){e.handleSelectionChange()}),n.event.onSelect(function(c){var h=n.range.get();h.startNode.closest(Nr).length!==0&&(h.collapsed&&h.containsCard()&&n.range.toTrusty(h),n.range.select(h),!Pa("shift+left",c)&&!Pa("shift+right",c)&&!Pa("shift+up",c)&&!Pa("shift+down",c)&&r.activate(h.commonAncestorNode),n.onSelect(h))}),n.event.onDocument("mousedown",function(c){if(!!c.target){var h=U(c.target);if(h.closest("body").length!==0&&!(h.closest(".am-view").length>0)){for(var v=h;v;){var g=v.attributes(Ce);if(g&&[lr,Yr].indexOf(g)<0)return;v=v.parent()}r.activate(h,Ai.MOUSE_DOWN,c)}}}),n.event.onDocument("copy",function(c){var h=n.range.get();!e.engine.container.contains(h.commonAncestorNode)||a.write(c)}),n.event.onDocument("cut",function(c){var h=n.range.get();if(!(!e.engine.container.contains(h.commonAncestorNode)||e.engine.readonly)){var v=a.write(c,void 0);v&&(c.stopPropagation(),a.cut(),n.change())}});var o=function(h){n.cacheRangeBeforeCommand();var v=ao(e.engine,"zero");v.enable(["paragraph","html_inline","newline"]);var g=v.parse(h,{});if(g.length!==0)return console.log(g),Ws(e.engine,v,g)},l=function(){var c=_n(ht.mark(function h(v){var g,p,b;return ht.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(p=o(v),p!==null){k.next=3;break}return k.abrupt("return");case 3:if(b=function(){e.engine.history.saveOp(),n.cacheRangeBeforeCommand(),e.paste(p,Je(e,ei)[ei],void 0,!1)},((g=e.engine.options.markdown)===null||g===void 0?void 0:g.mode)==="confirm"){k.next=7;break}return b(),k.abrupt("return");case 7:e.engine.messageConfirm("markdown",e.engine.language.get("checkMarkdown","title")).then(function(){b()}).catch(function(E){E&&e.engine.messageError("markdown",E)});case 8:case"end":return k.stop()}},h)}));return function(v){return c.apply(this,arguments)}}();n.event.onPaste(function(c){var h=c.html,v=c.text,g=c.files,p=c.isPasteText,b="";if(g.length===0)if(p){var y="";v?y=v:h&&(y=new vr(h,e.engine).toText()),b=new Gc(y).toHTML()}else h&&h.indexOf('<meta name="source" content="aomao" />')>-1||h?b=h:v&&(b=new Gc(v).toHTML());if(e.engine.trigger("paste:event",c,b)!==!1&&g.length===0){n.cacheRangeBeforeCommand(),e.paste(b);var k=e.engine.options.markdown||{};if(k.mode!==!1)if(!k.check&&v&&!/^https?:\/\/\S+$/i.test(v.trim())){if(!v)return;if(!h){setTimeout(function(){l(v)},0);return}var E=v.split(/\r\n|\n/)||"",_=0,A=0,x=!1,C=new DOMParser().parseFromString(h,"text/html"),S=C.querySelectorAll("li"),O=[];S.forEach(function(j){var P,D,T=(P=j.textContent)!==null&&P!==void 0?P:"";(((D=j.parentElement)===null||D===void 0?void 0:D.nodeName)==="OL"||/\d\.\s+/.test(T))&&O.push(T)});for(var M=0;M<E.length;M++){var V=E[M];if(!!V.trim()){if(V.startsWith("```")){x?x=!1:(x=!0,A++,_++);continue}x||(_++,/^(#|\*|-|\+|\[ \]|\[x\]|>){1}\s+/.test(V)?A++:/^\d\.\s+/.test(V)?!O.includes(V)&&!O.includes(V.replace(/^\d\./,"").trim())&&A++:(/^(---|\*\*\*|\+\+\+)/.test(V)||/(\*|~|\^|_|\`|\]\(https?:\/\/)/.test(V))&&A++)}}A>0&&(_===0||A/_>.5)&&setTimeout(function(){l(v)},0)}else k.check&&k.check(v!=null?v:"",h!=null?h:"").then(function(j){j&&l(j)})}});var u=function(h){return!h||r.closest(h.commonAncestorContainer)};n.event.onDrop(function(c){var h=c.event,v=c.range,g=c.card,p=c.files;if(g){if(h.preventDefault(),u(v))return;var b=g.constructor,y=b.cardName,k=g.getValue();e.engine.card.remove(g.root),n.range.select(v),e.engine.card.insert(y,k)}if(p.length>0){if(h.preventDefault(),u(v))return;n.range.select(v),e.engine.trigger("drop:files",p)}})}},{key:"paste",value:function(e,t,n){var r=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4?arguments[4]:void 0,l=this.engine.change,u=new Dm(e,this.engine).normalize();this.engine.trigger("paste:before",u),o?o(u,t,void 0,a):l.insert(u,t,function(c){var h;r.engine.trigger("paste:insert",c);var v=c.cloneRange(),g=v.endNode,p="";g.isCard()&&((h=g.get())===null||h===void 0?void 0:h.childNodes.length)===0&&(v.setEndAfter(g),p=g.attributes(Oe)),Je(r,ei)[ei]=v,c.collapse(!1);var b=c.startNode.closest("".concat(yt,",").concat(Ei));if(b.length>0){var y=b.attributes();(y[dn]||y[bt])&&c.setStartAfter(b)}var k=c.createSelection();r.engine.card.render(void 0,function(E){if(k.move(),p){var _=r.engine.container.find('[data-id="'.concat(p,'"]'));_.length>0&&(v.setEndAfter(_),Je(r,ei)[ei]=v)}c.scrollRangeIntoView(),l.range.select(c),n&&n(E),r.engine.trigger("paste:after")})},a)}}]),d}(),ti=ir("lastBlurRange"),sa=ir("otpions"),qm=function(){function d(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ve(this,d),this.engine=void 0,Object.defineProperty(this,ti,{writable:!0,value:void 0}),Object.defineProperty(this,sa,{writable:!0,value:void 0}),this.engine=i,Je(this,sa)[sa]=e}return we(d,[{key:"setLastBlurRange",value:function(e){e!=null&&e.commonAncestorNode.inEditor()?Je(this,ti)[ti]=e:Je(this,ti)[ti]=void 0}},{key:"toTrusty",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.get(),t=e.commonAncestorNode;!t.isEditable()&&!t.inEditor()&&e.select(this.engine.container,!0).shrinkToElementNode().collapse(!1);var n=e.cloneRange();if(n.collapse(!0),this.setCardRang(n),(!e.startNode.equal(n.startNode)||e.startOffset!==n.startOffset)&&e.setStart(n.startContainer,n.startOffset),n=e.cloneRange(),n.collapse(!1),this.setCardRang(n),(!e.endNode.equal(n.endNode)||e.endOffset!==n.endOffset)&&e.setEnd(n.endContainer,n.endOffset),e.collapsed){n=e.cloneRange(),n.enlargeFromTextNode();var r=U(n.startContainer),a=n.startOffset;this.engine.node.isInline(r)&&a===0&&e.setStartBefore(r[0]),this.engine.node.isInline(r)&&a===r[0].childNodes.length&&e.setStartAfter(r[0]),e.collapse(!0)}return e}},{key:"setCardRang",value:function(e){var t=this,n=e.startNode,r=e.startOffset,a=this.engine.card,o=a.find(n);if(o){var l=o.getCenter().get();if(l&&(!n.isElement()||n[0].parentNode!==o.root[0]||n.attributes(ut))){var u=function(){var h=Ke.create(t.engine);return h.select(l,!0),h.comparePoint(n,r)<0};if(o.type==="inline"){e.select(o.root),e.collapse(u());return}u()?a.focusPrevBlock(o,e,!0):a.focusNextBlock(o,e,!0)}}}},{key:"get",value:function(){var e=this.engine.container,t=e.window,n=Ke.from(this.engine,t,!1);return n||(n=Ke.create(this.engine,t.document).select(e,!0).shrinkToElementNode().collapse(!1)),n}},{key:"select",value:function(e){var t,n,r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=this.engine,l=o.container,u=o.inline,c=o.node,h=o.change,v=l.window,g=v==null?void 0:v.getSelection();if(!h.isComposing()){if(e.collapsed){var p,b,y,k,E=e.startNode,_=e.startOffset;if((E.isElement()&&_===1&&((p=E.get())===null||p===void 0?void 0:p.childNodes.length)===1||_===2&&((b=E.get())===null||b===void 0?void 0:b.childNodes.length)===2&&((y=E.first())===null||y===void 0?void 0:y.isCard()))&&((k=E.last())===null||k===void 0?void 0:k.name)==="br"&&(e.setStart(E,_-1),e.collapse(!0)),E.isText()){var A=E.parent();(A==null?void 0:A.attributes(ut))==="right"&&_===0?(e.setStart(E,1),e.collapse(!0)):(A==null?void 0:A.attributes(ut))==="left"&&_===1&&(e.setStart(E,0),e.collapse(!0))}}var x=e.cloneRange().shrinkToTextNode(),C=x.startNode,S=x.endNode,O=x.startOffset,M=x.endOffset,V=C.prev(),j=S.next();if(V&&!V.isCard()&&!c.isVoid(V)&&c.isInline(V)){var P=C.text();/^\u200B/g.test(P)&&O===0&&(e.setStart(S,O+1),e.collapsed&&e.collapse(!0))}if(j&&!j.isCard()&&!c.isVoid(j)&&c.isInline(j)){var D=S.text();/\u200B$/g.test(D)&&M===D.length&&(e.setEnd(S,M-1),e.collapsed&&e.collapse(!1))}var T=u.closest(C);if(!T.isCard()&&c.isInline(T)&&!c.isVoid(T)){var q,Z;if(C.isText()&&!C.prev()&&((q=C.parent())===null||q===void 0?void 0:q.equal(T))&&O===0){var ie=C.text();/^\u200B/g.test(ie)&&(e.setStart(C,O+1),e.collapsed&&e.collapse(!0))}if(S.isText()&&!S.next()&&((Z=S.parent())===null||Z===void 0?void 0:Z.equal(T))){var N=S.text();M===N.length&&/\u200B$/g.test(N)&&(e.setEnd(S,M-1),e.collapsed&&e.collapse(!1))}}if(C=e.startNode,S=e.endNode,C.isText()||S.isText()){var F=e.cloneRange().enlargeFromTextNode();C=F.startNode,S=F.endNode}var H=C.children();c.isCustomize(C)&&O===0&&e.setStart(C,1),c.isCustomize(S)&&M===0&&e.setEnd(S,1);var W=this.engine.ot.isStopped();if(C.name==="p"&&!W){if(H.length===0)C.append("<br />");else if(!im&&H.length>1&&H[H.length-2].nodeName!=="BR"&&H[H.length-1].nodeName==="BR"){var Y=C.last();Y==null||Y.remove()}}!e.collapsed&&!W&&S.name==="p"&&((t=S.get())===null||t===void 0?void 0:t.childNodes.length)===0&&S.append("<br />");var Q=C.children();if(c.isList(C)&&!W&&(Q.length===0||Q[0].nodeName==="BR")){var re=U("<p><br /></p>");this.engine.nodeId.create(re),C.before(re),C.remove(),C=re}if(C.name==="li"&&!W){var te;if(c.isCustomize(C)&&!(!((te=C.first())===null||te===void 0)&&te.isCard())){var J,ne,ae=(J=C.parent())===null||J===void 0?void 0:J.children().toArray().find(function(le){var he;return(he=le.first())===null||he===void 0?void 0:he.isCard()}),fe=ae==null||(ne=ae.first())===null||ne===void 0?void 0:ne.attributes(We);fe?this.engine.list.addCardToCustomize(C,fe):this.engine.list.unwrapCustomize(C)}if(H.length===0)C.append("<br />");else if(!c.isCustomize(C)&&H.length>1&&H[H.length-2].nodeName!=="BR"&&H[H.length-1].nodeName==="BR"){var me;(me=C.last())===null||me===void 0||me.remove()}else if(c.isCustomize(C)&&H.length===1)C.append("<br />");else if(c.isCustomize(C)&&H.length>2&&H[H.length-2].nodeName!=="BR"&&H[H.length-1].nodeName==="BR"){var pe;(pe=C.last())===null||pe===void 0||pe.remove()}}if(!e.collapsed&&S.name==="li"&&!W){var ke=S.children();if(ke.length===0)S.append("<br />");else if(!c.isCustomize(S)&&ke.length>1&&ke[ke.length-2].nodeName!=="BR"&&ke[ke.length-1].nodeName==="BR"){var L;(L=C.last())===null||L===void 0||L.remove()}else if(c.isCustomize(S)&&ke.length===1)S.append("<br />");else if(c.isCustomize(S)&&ke.length>2&&ke[ke.length-2].nodeName!=="BR"&&ke[ke.length-1].nodeName==="BR"){var K;(K=C.last())===null||K===void 0||K.remove()}}C.isEditable()&&!W&&((n=C.get())===null||n===void 0?void 0:n.childNodes.length)===0&&!this.engine.ot.isStopped&&C.html("<p><br /></p>"),g&&(e.collapsed||g.rangeCount>0&&!e.equal(g.getRangeAt(0)))&&((r=e.startNode.get())===null||r===void 0?void 0:r.isConnected)&&(g.removeAllRanges(),g.addRange(e.toRange()));var z=Je(this,sa)[sa].onSelect;z&&a&&z(e)}}},{key:"focus",value:function(e){var t,n=this,r=Je(this,ti)[ti]||this.get();e!==void 0&&r.select(this.engine.container,!0).shrinkToElementNode().collapse(e),this.select(r);var a=r.commonAncestorNode.closest(xt);if(a==null||(t=a.get())===null||t===void 0||t.focus(),a.length>0&&!this.engine.container.equal(a)){var o,l=new MouseEvent("mousedown");(o=this.engine.container.get())===null||o===void 0||o.dispatchEvent(l),setTimeout(function(){var u,c=new MouseEvent("mouseup");(u=n.engine.container.get())===null||u===void 0||u.dispatchEvent(c)},0)}}},{key:"blur",value:function(){var e,t,n=this.get();(e=n.commonAncestorNode.closest(xt).get())===null||e===void 0||e.blur(),(t=this.engine.container.get())===null||t===void 0||t.blur(),this.engine.trigger("blur")}}]),d}(),Sn=ir("nativeEvent"),Im=function(){function d(i){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ve(this,d),this.engine=void 0,this.options=void 0,this.changeTimer=null,this.event=void 0,this.valueCached=null,this.onChange=void 0,this.onRealtimeChange=void 0,this.onSelect=void 0,this.onSetValue=void 0,this.rangePathBeforeCommand=void 0,this.marks=[],this.blocks=[],this.inlines=[],this.changeTrigger=[],this.range=void 0,Object.defineProperty(this,Sn,{writable:!0,value:void 0}),this.options=t,this.engine=i,this.event=new Sm(i,{}),this.onChange=this.options.onChange||function(){},this.onRealtimeChange=this.options.onRealtimeChange||function(){};var n=null;this.onSelect=function(r){var a,o,l,u,c=i.mark,h=i.block,v=i.inline;r=r||e.range.get(),!(((a=n)===null||a===void 0?void 0:a.startContainer)===r.startContainer&&((o=n)===null||o===void 0?void 0:o.startOffset)===r.startOffset&&((l=n)===null||l===void 0?void 0:l.endContainer)===r.endContainer&&((u=n)===null||u===void 0?void 0:u.endOffset)===r.endOffset)&&(n={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},e.marks=c.findMarks(r),e.blocks=h.findBlocks(r),e.inlines=v.findInlines(r),e.options.onSelect&&e.options.onSelect())},this.onSetValue=this.options.onSetValue||function(){},this.range=new qm(i,{onSelect:function(a){e.onSelect(a)}}),Je(this,Sn)[Sn]=new Om(i)}return we(d,[{key:"init",value:function(){Je(this,Sn)[Sn].init()}},{key:"_change",value:function(){if(!this.isComposing()){this.engine.card.gc();var e=this.changeTrigger.length===2?"both":this.changeTrigger[0]==="remote"?"remote":"local";this.onChange(e),this.changeTrigger=[]}}},{key:"change",value:function(e,t){var n=this,r=e?"remote":"local",a=void 0;if(e)t==null||t.forEach(function(g){if(a=g.closest(xt),a&&a.length>0){var p=n.engine.card.find(a,!0);p!=null&&p.onChange&&(p==null||p.onChange(r,a))}});else{var o=this.range.get(),l=o.startNode;if(l.inEditor())a=l.closest(xt);else{var u=l.closest(ki),c=u.attributes(Rc);if(c){var h;a=(h=this.engine.card.find(c))===null||h===void 0?void 0:h.root.closest(xt)}}if(a&&a.length>0){var v=this.engine.card.find(a,!0);v!=null&&v.onChange&&(v==null||v.onChange(r,a))}else t==null||t.forEach(function(g){if(a=g.closest(xt),a&&a.length>0){var p=n.engine.card.find(a,!0);p!=null&&p.onChange&&(p==null||p.onChange(r,a))}})}this.onRealtimeChange(r),this.changeTrigger.indexOf(r)<0&&this.changeTrigger.push(r),this.clearChangeTimer(),this.changeTimer=setTimeout(function(){n._change()},50)}},{key:"clearChangeTimer",value:function(){this.changeTimer&&clearTimeout(this.changeTimer)}},{key:"isComposing",value:function(){return this.event.isComposing}},{key:"isSelecting",value:function(){return this.event.isSelecting}},{key:"initValue",value:function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.engine.container,o=a.html(),l="<p><br /></p>";if(!(o===l||(((t=a.get())===null||t===void 0?void 0:t.childNodes.length)||0)>0)){var u=o||l,c=U(u);((n=c.get())===null||n===void 0?void 0:n.childNodes.length)===0&&c.html("<br />"),a.empty().append(c);var h=e||this.range.get();!e&&r&&(h.select(c,!0).collapse(!1),this.apply(h))}}},{key:"setValue",value:function(e,t,n){var r=this.range.get(),a=this.engine,o=a.schema,l=a.conversion,u=a.container,c=a.history,h=a.mark,v=a.card;if(e==="")this.engine.container.html(e),this.initValue(void 0,!1),n&&n(0);else{var g=new vr(e,this.engine,function(E){h.removeEmptyMarks(E),E.allChildren("editable").forEach(function(_){t&&t(_)})},!1);u.html(g.toValue(o,l,!1,!0)),v.render(void 0,function(E){n&&n(E)});var p=u.find(ro),b=new oo(this.engine,r);p.length>0&&(b.anchor=p,b.focus=p);var y=u.find(Ms),k=u.find(Ps);y.length>0&&k.length>0&&(b.anchor=y,b.focus=k),b.anchor&&b.focus&&(b.move(),this.range.select(r),this.onSelect()),this.onSetValue(),c.clear()}this.change()}},{key:"setHtml",value:function(e,t){var n=this,r=this.engine,a=r.card,o=r.container;Je(this,Sn)[Sn].paste(e,void 0,t,!0,function(l,u,c,h){o.empty().append(l),a.render(void 0,function(v){n.initValue(void 0,!1),n.engine.trigger("paste:after"),t&&t(v)}),n.change()})}},{key:"setMarkdown",value:function(e,t){var n=this,r=ao(this.engine,"zero");r.enable(["paragraph","html_inline","newline"]);var a=r.parse(e,{});if(a.length!==0){var o=Ws(this.engine,r,a);o||(o=e);var l=this.engine,u=l.card,c=l.container;Je(this,Sn)[Sn].paste(o,void 0,t,!0,function(h,v,g,p){c.empty().append(h),u.render(void 0,function(b){n.initValue(void 0,!1),n.engine.trigger("paste:after"),t&&t(b)}),n.change()})}}},{key:"getOriginValue",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine.container,n=this.engine,r=n.schema,a=n.conversion;return new vr(((e=t.get())===null||e===void 0?void 0:e.outerHTML)||"",this.engine,void 0,!1).toValue(r,a)}},{key:"getValue",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t;if(e.ignoreCursor||this.isComposing())t=this.getOriginValue();else{var n,r=this.range.get(),a,o=this.engine.container.clone(!0);if(!r.inCard()){var l=r.toPath(!0);if(!l)return this.getOriginValue();r=Ke.fromPath(this.engine,l,!0,o),a=r.createSelection()}t=this.getOriginValue(o),(n=a)===null||n===void 0||n.move()}return t}},{key:"cacheRangeBeforeCommand",value:function(){this.rangePathBeforeCommand=this.range.get().toPath()}},{key:"getRangePathBeforeCommand",value:function(){var e=this.rangePathBeforeCommand;return this.rangePathBeforeCommand=void 0,e}},{key:"isEmpty",value:function(){var e=this.engine,t=e.container,n=e.node,r=e.schema,a=r.getAllowInTags(),o=t.children();return o.length===0||o.length===1&&n.isEmpty(t)&&!t.allChildren().some(function(l){return a.includes(l.name)})}},{key:"combinText",value:function(){cm(this.engine.container)}},{key:"apply",value:function(e){this.combinText();var t=this.engine,n=t.inline,r=t.mark,a=t.nodeId;if(e){var o=e.createSelection("change-apply");n.findInlines(e).forEach(function(l){return n.repairCursor(l)}),r.findMarks(e).forEach(function(l){return r.repairCursor(l)}),o.move(),e.shrinkToTextNode(),this.range.select(e)}this.change(),a.generateAll(this.engine.container)}},{key:"insert",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=this.engine,l=o.block,u=o.list,c=o.card,h=o.schema,v=o.mark,g=o.inline,p=this.engine.node;t=t||this.range.toTrusty();var b=l.closest(t.startNode),y=l.closest(t.endNode),k=y[0]===b[0],E=l.isLastOffset(t,"end"),_=h.getCanMergeTags(),A=h.getAllowInTags(),x=b.closest(_.join(",")),C=t.collapsed,S=e.childNodes,O=U(e.firstChild||[]),M=function(){var be,Ae=U(e),et=Ae.first(),at=t.cloneRange().shrinkToElementNode().shrinkToTextNode(),Dt=at.startNode;if(Dt.inEditor()&&et&&et.name==="p"&&!(et.length===1&&((be=et.first())===null||be===void 0?void 0:be.name)==="br")){if(Dt.name==="p"&&p.isEmptyWidthChild(Dt)){var It=et.css();Dt.css(It)}p.unwrap(et)}};if(!C)this.delete(t,k||!E,a),p.isEmptyWidthChild(t.startNode)&&t.shrinkToElementNode().shrinkToTextNode(),M();else if(M(),t.startNode.isText()){var V=g.closest(t.startNode),j=t.startNode.text();V.length===0&&!V.equal(t.startNode)&&/^\u200B/.test(j)&&t.startNode.text(j.substr(1))}var P=void 0,D=function(be){P&&P.node[0].isConnected&&(be.shrinkToElementNode().setStart(P.node,P.offset),be.enlargeToElementNode()),l.merge(be),u.merge(void 0,be),v.merge(be),g.flat(be),r&&r(be),n.apply(be)};if(p.isList(t.startNode)||t.startNode.closest("li").length>0){var T=t.startNode.children();P={node:t.startNode,offset:T.length===1&&T[0].nodeName==="BR"?0:t.startOffset},u.insert(e,t),D(t);return}if(!O[0]){D(t);return}if(!p.isBlock(O)){if(t.shrinkToElementNode(),S.length>0){var q=t.startNode.children();P={node:t.startNode,offset:q.length===1&&q[0].nodeName==="BR"?0:t.startOffset}}var Z=O.next(),ie=O,N=p.insert(O,t);for(N&&(t=N);Z&&!p.isBlock(Z);){t.startContainer.nodeType===Node.TEXT_NODE&&t.enlargeToElementNode().collapse(!1);var F=Z.next();ie.after(Z),ie=Z,Z=F}if(ie!==O&&t.select(ie,!0).collapse(!1),S.length===0){D(t);return}}var H=t.cloneRange().enlargeToElementNode(!0).collapse(!1),W=H.startContainer.childNodes[t.startOffset===0?0:t.startOffset-1],Y=H.startContainer.childNodes[t.startOffset];if(S.length!==0){var Q=U(S[S.length-1]);if(Q.name==="br"&&(Q.remove(),Q=U(S[S.length-1])),!P){var re=t.startNode.children();P={node:t.startNode,offset:re.length===1&&re[0].nodeName==="BR"?0:t.startOffset}}for(var te=U(S[0]),J=null,ne=[];te&&te.length>0;){p.removeSide(te);var ae=te.next();if(ae||(Q=te),ne.push(te),J?J.after(te):p.insert(te,t,!0),!this.engine.node.isBlock(te)&&!(ae!=null&&ae.isText())?(J&&t.select(te,!0).collapse(!1),J=null):J=te,ae||t.select(te,!0).collapse(!1),P&&!P.node[0].isConnected){var fe=te.parent();fe&&(P={node:fe,offset:te.index()})}te=ae}x[0]&&ne.forEach(function(Se){_.indexOf(Se.name)<0&&Se.closest(x.name).length===0&&p.wrap(Se,p.clone(x,!1,!1))});var me=c.find(t.startNode);me&&me.focus(t,!1)}var pe=function(be){var Ae=be.first();if(!Ae||!p.isBlock(Ae))return be;for(;A.indexOf(Ae?Ae.name:"")>-1;)Ae=Ae.first();return Ae},ke=function(be){var Ae=be.last();if(!Ae||!p.isBlock(Ae))return be;for(;A.indexOf(Ae?Ae.name:"")>-1;)Ae=Ae.last();return Ae},L=function(be,Ae){if(!(be.isCard()||O.isCard())){var et=Ae.parent(),at=be.parent(),Dt=et&&!et.isEditable()&&at&&!at.isEditable()&&et.name===at.name;return Ae.name==="p"&&Dt||be.name===Ae.name&&Dt&&!(be.name==="li"&&!u.isSame(be.parent(),Ae.parent()))}},K=function(be){for(;!be.isEditable();){var Ae=be.parent();if(be.remove(),!Ae||!p.isEmpty(Ae))break;be=Ae}},z=function(be,Ae){if(be.name===Ae.name&&be.name==="p"){var et=Ae.attributes();et[Oe]&&delete et[Oe],be.attributes(et)}p.isEmptyWidthChild(be)&&!p.isEmptyWidthChild(Ae)&&(be.get().innerHTML=""),p.isCustomize(be)===p.isCustomize(Ae)&&u.unwrapCustomize(Ae)};if(W){var le=pe(U(W.nextSibling||[])),he=ke(U(W));he.name==="p"&&le.name!==he.name&&L(he,le)&&(z(he,le),p.merge(he,le,!1),K(le))}if(Y){var ge=ke(U(Y.previousSibling||[])),_e=pe(U(Y));ge&&L(ge,_e)&&(p.merge(ge,_e,!1),K(_e))}D(t)}},{key:"paste",value:function(e,t,n){Je(this,Sn)[Sn].paste(e,t,n,!0)}},{key:"delete",value:function(e,t){var n,r,a,o,l,u,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=e||this.range.toTrusty();if(h.collapsed){this.isEmpty()&&this.initValue(h),e||this.apply(h);return}var v=this.engine,g=v.mark,p=v.inline,b=v.card,y=this.engine.node,k=this.engine.block,E=h.cloneRange();E.collapse(!0);var _=c?g.findMarks(E):[];h.enlargeToElementNode();var A=k.closest(h.cloneRange().shrinkToElementNode().shrinkToTextNode().enlargeToElementNode().startNode);if(!A.inEditor()&&!A.isRoot()){this.isEmpty()&&this.initValue(h),e||this.apply(h);return}if(A.isRoot()){for(var x=A.children().eq(h.startOffset);!((C=x)===null||C===void 0)&&C.isCard();){var C,S=x.equal(h.endNode)||x.contains(h.endNode),O=x.next()||void 0,M=b.find(x);if(M?b.removeNode(M):x.remove(),S){x=void 0;break}x=O}if(!x){this.isEmpty()&&this.initValue(h),e||this.apply(h);return}A=x}var V=h.endNode,j=h.endOffset,P=!k.closest(h.startNode).equal(k.closest(V)),D=p.closest(V);if(D.length>0&&((n=V.parent())===null||n===void 0?void 0:n.equal(D))&&V.isText()){var T=V.text();j===T.length-1&&h.setEndAfter(D)}var q=h.cloneRange().shrinkToElementNode().shrinkToTextNode().getEndOffsetNode();h.extractContents();var Z=h.startNode;if(Z.isEditable()&&((r=Z.get())===null||r===void 0?void 0:r.childNodes.length)===0&&(Z.html("<p><br /></p>"),this.engine.nodeId.generate(Z)),h.collapse(!0),Z=h.shrinkToElementNode().shrinkToTextNode().enlargeToElementNode().startNode,Z.isText()||!A.inEditor()){this.isEmpty()&&this.initValue(h),e||this.apply(h);return}var ie=!1;if(P&&((a=Z.get())===null||a===void 0?void 0:a.childNodes.length)===0){var N,F,H,W,Y=h.createSelection();Z.remove(),((N=Y.anchor)===null||N===void 0||(F=N.get())===null||F===void 0?void 0:F.isConnected)&&((H=Y.focus)===null||H===void 0||(W=H.get())===null||W===void 0?void 0:W.isConnected)&&Y.move(),ie=!0,Z=h.startNode}var Q=A,re=q&&q.isConnected?Z:null,te=((o=Z.get())===null||o===void 0?void 0:o.childNodes.length)===0;if(!te&&Z.length>0&&Z.inEditor()){var J,ne;Z[0].childNodes.length===1&&((J=Z[0].firstChild)===null||J===void 0?void 0:J.nodeType)===Node.ELEMENT_NODE&&y.isCustomize(Z)&&((ne=Z.first())===null||ne===void 0?void 0:ne.isCard())&&(te=!0)}if(te&&y.isBlock(Z)&&Z.inEditor()){var ae=y.getBatchAppendHTML(_,"<br />");Z.isEditable()&&(ae="<p>".concat(ae,"</p>")),Z.append(U(ae));var fe=Z.find("br"),me=fe.parent();me&&y.isMark(me)&&y.replace(fe,U("\u200B",null)),h.select(Z,!0).shrinkToElementNode().shrinkToTextNode(),h.collapse(!1),this.isEmpty()&&this.initValue(h),e||this.apply(h);return}var pe=function K(z,le,he,ge){var _e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(y.isBlock(le)&&!y.isVoid(le)&&!le.isCard()){z.select(le,!0),z.collapse(!1);var Se=z.shrinkToElementNode().shrinkToTextNode().createSelection(),be=he.parent();for(y.merge(le,he);be&&y.isBlock(be)&&y.isEmpty(be);)be.remove(),be=be.parent();Se.move(),z.enlargeToElementNode(!0);var Ae=z.getPrevNode(),et=z.getNextNode(),at=z.startNode;!Ae&&!et&&y.isBlock(at)&&(at.append(U(y.getBatchAppendHTML(ge,"<br />"))),z.select(at.find("br"),!0),z.collapse(!1)),Ae&&et&&!Ae.isCard()&&!et.isCard()&&_e&&K(z,Ae,et,ge)}};if(Q&&re&&re.length>0&&y.isBlock(Q)&&y.isBlock(re)&&!Q.equal(re)&&!(!((l=Q.parent())===null||l===void 0)&&l.equal(re))&&re.inEditor()&&pe(h,Q,re,_,t),Z.children().each(function(K){var z=U(K);!y.isVoid(z)&&z.isElement()&&y.html(z)===""&&z.remove(),y.isInline(z)&&p.repairCursor(z)}),y.isList(Z)&&y.isEmpty(Z)&&Z.remove(),E=h.cloneRange().shrinkToTextNode(),E.startNode.isText()&&/^\u200B/g.test(E.startNode.text())&&E.startOffset===0){var ke=E.startNode.prev();ke&&this.engine.node.isInline(ke)&&(h.select(ke,!0),h.collapse(!1))}if(y.isBlock(Z)&&((u=Z.get())===null||u===void 0?void 0:u.childNodes.length)===0&&Z.html("<br />"),ie){var L;y.isBlock(Q)&&((L=Q.get())===null||L===void 0?void 0:L.childNodes.length)===0&&Q.html("<br />"),Q.inEditor()&&h.select(Q,!0).collapse(!1)}this.isEmpty()&&this.initValue(h),e||this.apply(h)}},{key:"unwrap",value:function(e){var t=this.engine.block,n=this.range.get();if(e=e||t.closest(n.startNode),!!e.inEditor()){var r=n.createSelection();this.engine.node.unwrap(e),r.move(),this.range.select(n)}}},{key:"mergeAfterDelete",value:function(e){var t,n,r=this.engine,a=r.block,o=r.card,l=r.list,u=r.mark,c=this.engine.node,h=this.range.get();e=e||a.closest(h.startNode);var v=e.children();if(v.length===0){e.append(U("<br />")),this.apply(h);return}var g=e.first();if(v.length>1&&(g==null?void 0:g.name)==="br"){g==null||g.remove();return}var p=e.prev();if(!p){var b=e.parent();(b==null?void 0:b.inEditor())&&!(b!=null&&b.isEditable())&&this.unwrap(e);return}if(p.isCard()){(v.length===1&&(g==null?void 0:g.name)==="br"||c.isEmpty(e))&&e.remove();var y=o.find(p);if(y){o.focus(y);return}}if(c.isVoid(p)){p.remove();return}if(c.isRootBlock(p)&&c.isEmpty(p)){p.remove();return}if(p.isText()){var k=U("<p />");p.before(k),k.append(p),p=k}if(c.isList(p)&&(p=p.last()),v.length===1&&(g==null?void 0:g.name)==="br")g==null||g.remove();else if(p&&((t=p.get())===null||t===void 0?void 0:t.childNodes.length)===1&&((n=p.first())===null||n===void 0?void 0:n.name)==="br"){var E;(E=p.first())===null||E===void 0||E.remove()}if(!p||p.isText())this.unwrap(e);else{var _=h.createSelection();c.merge(p,e),_.move(),this.range.select(h),u.merge(),l.merge()}}},{key:"destroy",value:function(){this.event.destroy(),this.clearChangeTimer()}}]),d}(),Lm=`.data-tooltip {\r
	font-size: 14px;\r
	font-variant: tabular-nums;\r
	line-height: 1.5;\r
	color: rgba(0, 0, 0, 0.65);\r
	-webkit-box-sizing: border-box;\r
	box-sizing: border-box;\r
	margin: 0;\r
	padding: 0;\r
	list-style: none;\r
	position: absolute;\r
	z-index: 1060;\r
	display: block;\r
	visibility: visible;\r
	max-width: 320px;\r
	word-wrap:break-word;\r
    top: 0;\r
}\r
\r
.data-tooltip-hidden {\r
	opacity: 0;\r
	visibility: hidden;\r
	transition: opacity 0.3s ease-in-out;\r
}\r
\r
.data-tooltip-active {\r
	opacity: 1;\r
	visibility: visible;\r
}\r
\r
.data-tooltip-placement-top,.data-tooltip-placement-topLeft,.data-tooltip-placement-topRight {\r
	padding-bottom: 8px;\r
}\r
\r
.data-tooltip-placement-right,.data-tooltip-placement-rightTop,.data-tooltip-placement-rightBottom {\r
	padding-left: 8px;\r
}\r
\r
.data-tooltip-placement-bottom,.data-tooltip-placement-bottomLeft,.data-tooltip-placement-bottomRight {\r
	padding-top: 8px;\r
}\r
\r
.data-tooltip-placement-left,.data-tooltip-placement-leftTop,.data-tooltip-placement-leftBottom {\r
	padding-right: 8px;\r
}\r
\r
.data-tooltip-inner {\r
	padding: 6px 8px;\r
	color: #fff;\r
	text-align: left;\r
	text-decoration: none;\r
	background-color: rgba(0, 0, 0, 0.75);\r
	border-radius: 4px;\r
	-webkit-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r
	word-wrap: break-word;\r
}\r
\r
.data-tooltip-arrow {\r
	position: absolute;\r
	width: 0;\r
	height: 0;\r
	border-color: transparent;\r
	border-style: solid;\r
}\r
\r
.data-tooltip-placement-top .data-tooltip-arrow,.data-tooltip-placement-topLeft .data-tooltip-arrow,.data-tooltip-placement-topRight .data-tooltip-arrow {\r
	bottom: 3px;\r
	border-width: 5px 5px 0;\r
	border-top-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-top .data-tooltip-arrow {\r
	left: 50%;\r
	margin-left: -5px;\r
}\r
\r
.data-tooltip-placement-topLeft .data-tooltip-arrow {\r
	left: 16px;\r
}\r
\r
.data-tooltip-placement-topRight .data-tooltip-arrow {\r
	right: 16px;\r
}\r
\r
.data-tooltip-placement-right .data-tooltip-arrow,.data-tooltip-placement-rightTop .data-tooltip-arrow,.data-tooltip-placement-rightBottom .data-tooltip-arrow {\r
	left: 3px;\r
	border-width: 5px 5px 5px 0;\r
	border-right-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-right .data-tooltip-arrow {\r
	top: 50%;\r
	margin-top: -5px;\r
}\r
\r
.data-tooltip-placement-rightTop .data-tooltip-arrow {\r
	top: 8px;\r
}\r
\r
.data-tooltip-placement-rightBottom .data-tooltip-arrow {\r
	bottom: 8px;\r
}\r
\r
.data-tooltip-placement-left .data-tooltip-arrow,.data-tooltip-placement-leftTop .data-tooltip-arrow,.data-tooltip-placement-leftBottom .data-tooltip-arrow {\r
	right: 3px;\r
	border-width: 5px 0 5px 5px;\r
	border-left-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-left .data-tooltip-arrow {\r
	top: 50%;\r
	margin-top: -5px;\r
}\r
\r
.data-tooltip-placement-leftTop .data-tooltip-arrow {\r
	top: 8px;\r
}\r
\r
.data-tooltip-placement-leftBottom .data-tooltip-arrow {\r
	bottom: 8px;\r
}\r
\r
.data-tooltip-placement-bottom .data-tooltip-arrow,.data-tooltip-placement-bottomLeft .data-tooltip-arrow,.data-tooltip-placement-bottomRight .data-tooltip-arrow {\r
	top: 3px;\r
	border-width: 0 5px 5px;\r
	border-bottom-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-bottom .data-tooltip-arrow {\r
	left: 50%;\r
	margin-left: -5px;\r
}\r
\r
.data-tooltip-placement-bottomLeft .data-tooltip-arrow {\r
	left: 16px;\r
}\r
\r
.data-tooltip-placement-bottomRight .data-tooltip-arrow {\r
	right: 16px;\r
}`;hn(Lm);var Bm=function(i){return`
    <div `.concat(Ce,'="tooltip" class="data-tooltip data-tooltip-placement-').concat(i.placement,` data-tooltip-hidden" style="transform-origin: 50% 45px 0px;">
        <div class="data-tooltip-content">
            <div class="data-tooltip-arrow"></div>
            <div class="data-tooltip-inner" data-role="tooltip"></div>
        </div>
    </div>`)},Jn=function(){function d(){ve(this,d)}return we(d,null,[{key:"show",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{placement:"top"};d.hide();var r=U(Bm(n));typeof t=="string"?r.find("[data-role=tooltip]").html(t):r.find("[data-role=tooltip]").append(t);var a=U(document.body);a.append(r);var o=r.get(),l=(o==null?void 0:o.clientWidth)||0,u=(o==null?void 0:o.clientHeight)||0,c=e.get(),h=c.clientWidth,v=c.getBoundingClientRect(),g=Math.round(window.pageXOffset+v.left+h/2-l/2),p=Math.round(window.pageYOffset+v.top-u-2);n.placement==="bottom"&&(p+=v.height+u+2),r.css({left:g+"px",top:p+"px"}),r.addClass("data-tooltip-active")}},{key:"hide",value:function(){U("div[".concat(Ce,"=tooltip]")).remove()}}]),d}(),Mm=`.data-toolbar {\r
	position: absolute;\r
	opacity: 0;\r
	visibility: hidden;\r
	width: auto;\r
	line-height: 26px;\r
	display: flex;\r
	flex-direction: row;\r
	font-size: 14px;\r
	font-weight: normal;\r
	text-indent: 0;\r
	-webkit-user-select: none;\r
	-moz-user-select: none;\r
	 -ms-user-select: none;\r
	     user-select: none;\r
    z-index: 127;\r
}\r
\r
.data-toolbar-active {\r
	opacity: 1;\r
	visibility: visible;\r
}\r
\r
.data-toolbar-block {\r
	top: auto;\r
	bottom: -46px;\r
	left: -1px;\r
	right: auto;\r
	height: 40px;\r
}\r
\r
.data-toolbar-btn {\r
	line-height: 26px;\r
	min-width: 28px;\r
	display: inline-block;\r
	text-align: center;\r
	color: #595959;\r
	transition: background-color 0.3s ease-in-out;\r
	cursor: pointer;\r
}\r
\r
.data-toolbar-btn-disabled,.data-toolbar-btn-disabled:hover {\r
	background-color: transparent;\r
	box-shadow: none;\r
	cursor: not-allowed;\r
}\r
\r
.data-toolbar-group {\r
	border: 1px solid rgba(226, 226, 226, 0.84);\r
    border-radius: 4px;\r
    box-shadow: 0px 2px 4px 0px rgb(225 225 225 / 50%);\r
    background: #fff;\r
    position: relative;\r
    display: inline-flex;\r
    padding: 5px;\r
    align-items: center;\r
}\r
\r
.data-toolbar-item {\r
	position: relative;\r
	display: inline-block;\r
	line-height: 26px;\r
	text-align: left;\r
	color: #595959;\r
	flex: 0 0 auto;\r
    font-size: 12px;\r
    cursor: pointer;\r
}\r
\r
.data-toolbar-item:not(.data-toolbar-item-input):hover, .data-toolbar-item.active:not(.data-toolbar-item-input){\r
    background-color: #f4f4f4;\r
    border-radius: 2px;\r
}\r
\r
.data-toolbar-item > * {\r
    font-size: 12px !important;\r
}\r
\r
.data-toolbar-item[disabled] {\r
	opacity: 0.5;\r
	cursor: not-allowed;\r
}\r
\r
.data-toolbar-item-split {\r
	width: 1px;\r
	height: 16px;\r
	line-height: 16px;\r
	margin: 6px 4px;\r
	border-left: 1px solid #e8e8e8;\r
	display: inline-block;\r
}\r
\r
.data-toolbar-item-dropdown-active {\r
	opacity: 1;\r
	visibility: visible;\r
	transform: translateY(0px);\r
}\r
\r
.data-toolbar-item-input {\r
	display: flex;\r
    margin: 0 4px;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input {\r
    width: 46px;\r
    line-height: 12px;\r
    font-size: 12px;\r
    outline: none;\r
    border: 1px solid #dadada;\r
    border-radius: 4px;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input::-moz-selection {\r
    color: inherit;\r
    background:transparent\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input::selection {\r
    color: inherit;\r
    background:transparent\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input:focus::-moz-selection\r
{\r
    color: #fff;\r
    background: #1890ff;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input:focus::selection\r
{\r
    color: #fff;\r
    background: #1890ff;\r
}\r
\r
.data-toolbar-item-dropdown .dropdown-container {\r
	display: none;\r
	position: absolute;\r
	padding: 8px 0;\r
	top: 100%;\r
	margin-top: 6px;\r
	border-radius: 2px;\r
	background-color: #fff;\r
	box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\r
    z-index: 99999;\r
}\r
\r
.data-toolbar-item-dropdown .dropdown-container.show {\r
	display: block;\r
}\r
\r
.data-toolbar-dropdown-item {\r
	padding: 2px 16px;\r
	margin: 0;\r
	white-space: nowrap;\r
	line-height: 26px;\r
	color: #404040;\r
	cursor: pointer;\r
    display: block;\r
}\r
\r
.data-toolbar-dropdown-item:hover {\r
	background-color: #f5f5f5;\r
}\r
\r
.data-toolbar-dropdown-switch {\r
	display: flex;\r
	align-items: center;\r
}\r
\r
.data-toolbar-dropdown-switch .data-toolbar-dropdown-item-content {\r
	flex: 1;\r
    margin-right: 4px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn {\r
    margin: 0;\r
    padding: 0;\r
    color: #595959;\r
    font-size: 14px;\r
    font-variant: tabular-nums;\r
    line-height: 1.5;\r
    list-style: none;\r
    -webkit-font-feature-settings: "tnum";\r
    font-feature-settings: "tnum";\r
    position: relative;\r
    display: inline-block;\r
    -webkit-box-sizing: border-box;\r
    box-sizing: border-box;\r
    vertical-align: middle;\r
    background-color: rgba(0,0,0,.25);\r
    border: 0;\r
    border-radius: 100px;\r
    cursor: pointer;\r
    -webkit-transition: all .2s;\r
    transition: all .2s;\r
    -webkit-user-select: none;\r
    -moz-user-select: none;\r
    -ms-user-select: none;\r
    user-select: none;\r
    min-width: 28px;\r
    height: 16px;\r
    line-height: 16px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked {\r
    background-color: #347EFF\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle {\r
    top: 2px;\r
    left: 2px;\r
    width: 12px;\r
    height: 12px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle, .data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\r
    position: absolute;\r
    -webkit-transition: all .2s ease-in-out;\r
    transition: all .2s ease-in-out;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-handle {\r
    left: calc(100% - 14px);\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\r
    top: 0;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    background-color: #fff;\r
    border-radius: 9px;\r
    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    content: "";\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-inner {\r
    display: block;\r
    margin: 0 5px 0 18px;\r
    font-size: 12px;\r
    color: #fff;\r
    -webkit-transition: margin .2s;\r
    transition: margin .2s;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-inner {\r
    margin: 0 18px 0 5px;\r
}\r
.data-toolbar-switch {\r
	display: flex;\r
	align-items: center;\r
    padding: 0 4px;\r
    cursor: pointer;\r
    width: -webkit-max-content;\r
    width: -moz-max-content;\r
    width: max-content;\r
}\r
\r
.data-toolbar-switch:hover {\r
    background-color: #f4f4f4;\r
    border-radius: 2px;\r
}\r
\r
.data-toolbar-switch .switch-content {\r
	flex: 1;\r
    margin-right: 4px;\r
}\r
\r
.data-toolbar-switch .switch-btn {\r
    margin: 0;\r
    padding: 0;\r
    color: #595959;\r
    font-size: 14px;\r
    font-variant: tabular-nums;\r
    line-height: 1.5;\r
    list-style: none;\r
    -webkit-font-feature-settings: "tnum";\r
    font-feature-settings: "tnum";\r
    position: relative;\r
    display: inline-block;\r
    -webkit-box-sizing: border-box;\r
    box-sizing: border-box;\r
    vertical-align: middle;\r
    background-color: rgba(0,0,0,.25);\r
    border: 0;\r
    border-radius: 100px;\r
    cursor: pointer;\r
    -webkit-transition: all .2s;\r
    transition: all .2s;\r
    -webkit-user-select: none;\r
    -moz-user-select: none;\r
    -ms-user-select: none;\r
    user-select: none;\r
    min-width: 28px;\r
    height: 16px;\r
    line-height: 16px;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked {\r
    background-color: #347EFF\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle {\r
    top: 2px;\r
    left: 2px;\r
    width: 12px;\r
    height: 12px;\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle, .data-toolbar-switch .switch-btn .switch-handle:before {\r
    position: absolute;\r
    -webkit-transition: all .2s ease-in-out;\r
    transition: all .2s ease-in-out;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked .switch-handle {\r
    left: calc(100% - 14px);\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle:before {\r
    top: 0;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    background-color: #fff;\r
    border-radius: 9px;\r
    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    content: "";\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-inner {\r
    display: block;\r
    margin: 0 5px 0 18px;\r
    font-size: 12px;\r
    color: #fff;\r
    -webkit-transition: margin .2s;\r
    transition: margin .2s;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked .switch-inner {\r
    margin: 0 18px 0 5px;\r
}`;hn(Mm);var so="ot-user-background",la="ot-user-cursor",Kc="ot-user-cursor-card",Ti="ot-card-mask",ua="ot-user-cursor-trigger",Zc="ot-user-cursor-trigger-active",Pm=function(){function d(i){ve(this,d),this.engine=void 0,this.root=void 0,this.hideCursorInfoTimeoutMap=void 0,this.engine=i,this.root=i.root,this.hideCursorInfoTimeoutMap={}}return we(d,[{key:"destroy",value:function(){var e,t=(e=this.engine.scrollNode)!==null&&e!==void 0?e:this.root;t.find(".".concat(so)).remove(),t.find(".".concat(la)).remove(),t.find(".".concat(Ti)).remove()}},{key:"getRectWithRange",value:function(e,t){var n,r=t.getClientRect(),a=(n=e.get())===null||n===void 0?void 0:n.getBoundingClientRect();return new DOMRect(r.left-((a==null?void 0:a.left)||0),r.top-((a==null?void 0:a.top)||0),r.right-r.left,r.bottom-r.top)}},{key:"isWrapByRange",value:function(e){var t=e.cloneRange().collapse(!0).getClientRect(),n=e.cloneRange().collapse(!1).getClientRect();return t.bottom!==n.bottom}},{key:"drawSubRang",value:function(e,t,n,r){for(var a=n.startOffset,o=n.startNode,l=n.endNode,u=n.startOffset,c=n.endOffset,h=n.getClientRect().top,v=a;u<c;){n.setStart(n.commonAncestorContainer,u),n.setEnd(n.commonAncestorContainer,u+1);var g=n.getClientRect();if(g.top>h||u===c-1){n.setStart(n.commonAncestorContainer,v),v=u,h=g.top;var p=this.getRectWithRange(e,n);t.clearRect(p),t.drawRect(Pe(Pe({},p.toJSON()),r))}u++}n.setStart(o,a),n.setEnd(l,c)}},{key:"drawBackground",value:function(e,t){var n,r,a,o,l=this,u=this.engine.card,c=t.uuid,h=t.color,v=ar(h);v.setAlpha(.3);var g,p=v.toRgbString(),b=((n=this.engine.scrollNode)!==null&&n!==void 0?n:this.root).find(".".concat(so,"[").concat(hr,'="').concat(c,'"]'));if(b&&b.length>0)b.attributes(Ks,h.toString()),g=b[0].__canvas,g.clear();else{var y;b=U('<div class="'.concat(so,'" ').concat(hr,'="').concat(c,'" ').concat(Ks,'="').concat(h,'" />')),((y=this.engine.scrollNode)!==null&&y!==void 0?y:this.root).append(b),g=new Jp({container:b.get()}),b[0].__canvas=g}b.css({position:"absolute",top:0,left:0,"pointer-events":"none"}),b[0].__range=e.cloneRange();var k=(r=this.engine.scrollNode)!==null&&r!==void 0?r:this.root,E=((a=k.get())===null||a===void 0?void 0:a.clientWidth)||k.width(),_=this.root.height();g.resize(E,_);var A=u.find(e.commonAncestorNode,!0);A&&!A.isCenter(e.commonAncestorNode)&&(A=void 0);var x={fill:p},C=e.getSubRanges();if(((o=A)===null||o===void 0?void 0:o.isEditable)&&A.drawBackground){var S=A.drawBackground(b,e,g);if(S===!1)return[e];if(S)if(Array.isArray(S))C=S;else return S.x<0&&(g.resize(E-S.x,_),b.css("left","".concat(S.x,"px")),S.x=0),g.clearRect(S),g.drawRect(Pe(Pe({},S.toJSON()),x)),[e]}else if(A)return[e];return C.forEach(function(O){if(l.isWrapByRange(O))l.drawSubRang(b,g,O,x);else{var M=l.getRectWithRange(b,O);g.clearRect(M),g.drawRect(Pe(Pe({},M.toJSON()),x))}}),C}},{key:"getNodeRect",value:function(e,t){var n,r=e.parent();if(e.isCard()&&(r==null?void 0:r.hasClass(this.engine.list.CUSTOMZIE_LI_CLASS))&&(r==null||(n=r.first())===null||n===void 0?void 0:n.equal(e))&&e.next()&&(e=e.next()),e.isElement()&&(t=e.get().getBoundingClientRect()),e.isText()){var a=Ke.create(this.engine).cloneRange();a.select(e,!0),t=a.getClientRect()}return t}},{key:"getCursorRect",value:function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,a=((t=this.root.get())===null||t===void 0?void 0:t.getBoundingClientRect())||{top:0,left:0};if(_i(e)){var o=e,l=o.startNode;o.shrinkToElementNode();var u=o.getClientRect();if(l.isElement()&&u.height===0){var c=U(l[0].childNodes[o.startOffset]);c&&c.length>0?u=this.getNodeRect(c,u):(c=l.first(),c&&c.length>0&&(u=this.getNodeRect(c,u)))}var h=u.top-(a.top||0),v=u.left-(a.left||0)-r,g=u.height;return{top:h+"px",left:v+"px",height:g>0?g+"px":-1,elementHeight:u.height||0}}var p=e,b=io(p.css("outline-width")),y=((n=p.get())===null||n===void 0?void 0:n.getBoundingClientRect())||{top:0,left:0,height:0},k=y.top-a.top-1,E=y.left-a.left;return b&&(k-=b+1,E-=2),{left:E+"px",top:k+"px",height:0,elementHeight:y.height||0}}},{key:"setCursorRect",value:function(e,t){if(t.height!==-1){if(t.height===0){e.css(t),e.addClass(Kc);return}e.css(t),e.removeClass(Kc)}else e.remove()}},{key:"showCursorInfo",value:function(e,t){var n=t.uuid,r=t.color;this.hideCursorInfoTimeoutMap[n]&&clearTimeout(this.hideCursorInfoTimeoutMap[n]);var a=e.find(".".concat(ua)),o=e.css("background-color");e.attributes("data-old-background-color",o),a.addClass("".concat(Zc)),e.css("background-color",r),a.css("background-color",r)}},{key:"hideCursorInfo",value:function(e){var t=e.find(".".concat(ua)),n=e.attributes("data-old-background-color");t.removeClass("".concat(Zc)),e.css("background-color",n),t.css("background-color",n)}},{key:"drawCursor",value:function(e,t,n){var r=this,a=t.uuid,o=t.name,l=t.color,u=this.getCursorRect(e),c=this.root.children(".".concat(la,"[").concat(hr,'="').concat(a,'"]'));if(c&&c.length>0)this.setCursorRect(c,u);else{var h=`
            <div class="`.concat(la,'" ').concat(hr,'="').concat(a,`">
                <div class="`).concat(ua,'">').concat(Xr(o||""),`</div>
            </div>`);c=U(h);var v=c.find(".".concat(ua));if(u.elementHeight===0){var g=0,p=function E(){g++,u=r.getCursorRect(e),u.elementHeight<20&&g<=50?setTimeout(function(){E()},20):r.setCursorRect(c,u)};p()}else this.setCursorRect(c,u);c.on("mouseenter",function(){return r.showCursorInfo(c,t)});var b=!0;c.on("transitionstart",function(){b=!1}),c.on("transitionend",function(){b=!0}),c.on("mouseleave",function(){b&&r.hideCursorInfo(c)}),c.css("background-color",l),v.css("background-color",l),this.root.append(c)}if(c&&c[0]){c.css("z-index","");var y=this.engine.card.components.find(function(E){return E.isMaximize});if(y){var k=this.engine.card.closest(_i(e)?e.startNode:e,!0);(!k||!y.root.equal(k))&&c.css("z-index",120)}return c[0].__target=_i(e)?e.toPath(!0):e,n===!1||(this.showCursorInfo(c,t),this.hideCursorInfoTimeoutMap[a]&&clearTimeout(this.hideCursorInfoTimeoutMap[a]),this.hideCursorInfoTimeoutMap[a]=setTimeout(function(){r.hideCursorInfo(c)},2e3)),c}}},{key:"drawCard",value:function(e,t,n){var r,a,o=this,l=this.engine.language,u=((r=this.root.get())===null||r===void 0?void 0:r.getBoundingClientRect())||{left:0,top:0,width:0,height:0},c=((a=e.get())===null||a===void 0?void 0:a.getBoundingClientRect())||{left:0,top:0,width:0,height:0},h=this.root.children(".".concat(Ti,"[").concat(hr,'="').concat(n.uuid,'"]'));if(h&&h.length>0){h[0].__node=e[0],h.css({left:c.left-u.left+"px",top:c.top-u.top+"px"});return}if(h=U('<div class="'.concat(Ti,'" ').concat(hr,'="').concat(n.uuid,'" />')),h[0].__node=e[0],c.height===0){var v=0,g=function p(){var b;v++,c=((b=e.get())===null||b===void 0?void 0:b.getBoundingClientRect())||{left:0,top:0,width:0,height:0},c.height<20&&v<=50?setTimeout(function(){p()},20):h.css({left:c.left-u.left+"px",top:c.top-u.top+"px",width:c.width+"px",height:c.height+"px"})};g()}else h.css({left:c.left-u.left+"px",top:c.top-u.top+"px",width:c.width+"px",height:c.height+"px"});h.on("mouseenter",function(){o.showCursorInfo(t,n),Jn.show(h,l.get("card","lockAlert").toString(),{placement:"bottomLeft"})}),h.on("mousemove",function(p){var b=U("div[".concat(Ce,"=tooltip]"));b.css({left:p.pageX-16+"px",top:p.pageY+32+"px"})}),h.on("mouseleave",function(){o.hideCursorInfo(t),Jn.hide()}),h.on("click",function(p){p.preventDefault(),p.stopPropagation()}),h.on("mousedown",function(p){p.preventDefault(),p.stopPropagation()}),this.root.append(h)}},{key:"setCardSelectedByOther",value:function(e,t){var n=t||{},r=n.uuid,a=n.color;if(a){var o=ar(a);o.setAlpha(.3);var l=o.toRgbString(),u;return e.selectedByOther||(u=e.onSelectByOther(!0,{color:a,rgb:l})),e.selectedByOther=r,u}e.selectedByOther&&e.onSelectByOther(!1),e.selectedByOther=!1}},{key:"setCardActivatedByOther",value:function(e,t){if(!e.isEditable){var n=t||{},r=n.uuid,a=n.color;if(a){var o=ar(a);o.setAlpha(.3);var l=o.toRgbString(),u;return e.activatedByOther||(u=e.onActivateByOther(!0,{color:a,rgb:l})),e.activatedByOther=r,u}e.activatedByOther&&e.onActivateByOther(!1),e.activatedByOther=!1}}},{key:"drawRange",value:function(e,t,n){var r=this,a=this.engine.card,o=t.uuid,l=e,u=l.commonAncestorNode,c=a.find(u);c&&!c.isCenter(u)&&(c=void 0);var h=[];if(a.each(function(x){x.isEditable||(!c||!x.root.equal(c.root))&&(x.activatedByOther===o&&r.setCardActivatedByOther(x),h.push(o))}),h.length>0){var v,g;(v=this.root.get())===null||v===void 0||(g=v.querySelectorAll(h.map(function(x){return".".concat(Ti,"[").concat(hr,'="').concat(x,'"]')}).join(",")))===null||g===void 0||g.forEach(function(x){var C;(C=x.parentNode)===null||C===void 0||C.removeChild(x),Jn.hide()})}if(c&&!c.isEditable){var p=this.setCardActivatedByOther(c,t)||c.root,b=c.constructor.collab;if(b===void 0||b===!0){var y=this.drawCursor(p,t,n);y&&this.drawCard(p,y,t),this.drawBackground(e,t)}}else{if(c){this.drawBackground(e,t);return}a.each(function(x){var C=x.getCenter();if(C&&C.length>0){if(x.isEditable&&C.contains(e.startNode)&&C.contains(e.endNode)&&(e.startNode.closest(xt).length>0||e.endNode.closest(xt).length>0)){r.setCardSelectedByOther(x);return}e.isPointInRange(C.get(),0)?r.setCardSelectedByOther(x,t):x.selectedByOther===o&&r.setCardSelectedByOther(x)}});var k=a.getSingleSelectedCard(e);if(k){if(k.isEditable){var E=k.getCenter();if(E.contains(e.startNode)&&E.contains(e.endNode)&&(e.startNode.closest(xt).length>0||e.endNode.closest(xt).length>0))return}var _=this.setCardSelectedByOther(k,t)||k.root;this.drawCursor(_,t,n)}else{e.shrinkToElementNode();var A=this.drawBackground(e,t);e.collapsed||(A.forEach(function(x){x.collapsed||(e=x)}),e.shrinkToElementNode(),e.collapse(!1)),this.drawCursor(e,t,n)}}}},{key:"updateBackgroundPosition",value:function(){var e,t,n,r=this;(e=(t=(n=this.engine.scrollNode)===null||n===void 0?void 0:n.get())!==null&&t!==void 0?t:this.root.get())===null||e===void 0||e.querySelectorAll(".".concat(so)).forEach(function(a){var o=U(a),l=a.__range,u=o.attributes(hr),c=o.attributes(Ks);r.drawBackground(l,{uuid:u,color:c})})}},{key:"updateCursorPosition",value:function(){var e,t=this;(e=this.root.get())===null||e===void 0||e.querySelectorAll(".".concat(la)).forEach(function(n){var r=U(n),a=n.__target;if(!a){r.remove();return}if(a.name||(a=Ke.fromPath(t.engine,a,!0)),a.startContainer||U(a).closest("body").length!==0){var o=t.getCursorRect(a);t.setCursorRect(r,o)}else r.remove()})}},{key:"updateCardPosition",value:function(){var e,t,n=((e=this.root.get())===null||e===void 0?void 0:e.getBoundingClientRect())||{left:0,top:0};(t=this.root.get())===null||t===void 0||t.querySelectorAll(".".concat(Ti)).forEach(function(r){var a,o=r.__node;if(o!=null&&o.isConnected){var l=o.getBoundingClientRect();r.style.left=l.left-n.left+"px",r.style.top=l.top-n.top+"px"}else(a=r.parentNode)===null||a===void 0||a.removeChild(r)})}},{key:"updatePosition",value:function(){this.updateBackgroundPosition(),this.updateCursorPosition(),this.updateCardPosition()}},{key:"updateBackgroundAlpha",value:function(e){var t,n=this.getCursorRect(e);(t=this.root.get())===null||t===void 0||t.querySelectorAll(".".concat(la)).forEach(function(r){var a=r.querySelector(".".concat(ua)),o=r.style.left,l=r.style.top,u=ar(r.style.backgroundColor);n.left===o&&n.top===l?u.setAlpha(.3):u.setAlpha(1);var c=u.toRgbString();r.style.backgroundColor=c,a&&(a.style.backgroundColor=c)})}},{key:"render",value:function(e,t,n){var r=e.path,a=e.uuid,o=e.active;if(r){var l=Ke.fromPath(this.engine,r,!0);this.drawRange(l,t,o||n)}else this.remove(a)}},{key:"remove",value:function(e){var t,n,r,a=this,o=(t=(n=(r=this.engine.scrollNode)===null||r===void 0?void 0:r.get())!==null&&n!==void 0?n:this.root.get())===null||t===void 0?void 0:t.querySelector("[".concat(hr,'="').concat(e,'"]'));if(o){var l;if(o.classList.contains(Ti)){var u=o.__node,c=u?this.engine.card.find(u):null;c&&!c.isEditable&&c.activatedByOther===e&&this.setCardActivatedByOther(c)}(l=o.parentNode)===null||l===void 0||l.removeChild(o)}this.engine.card.each(function(h){h.isEditable||h.selectedByOther!==e||a.setCardSelectedByOther(h)})}}]),d}(),Fm=function(d){Ue(e,d);var i=He(e);function e(t){var n;return ve(this,e),n=i.call(this),n.engine=void 0,n.prevRange=null,n.rangeColoring=void 0,n.currentRangePath=void 0,n.data=new Map,n.current=null,n.handleScroll=function(r){var a,o=(a=n.engine.container.get())===null||a===void 0?void 0:a.childNodes;if(!!o){var l=ta(n.data),u;try{for(l.s();!(u=l.n()).done;){var c,h,v=ea(u.value,2),g=v[0],p=v[1];if(g!==((c=n.current)===null||c===void 0?void 0:c.uuid)&&!((h=p.path)===null||h===void 0)&&h.start.id){var b=p.path.start.path[0],y=o.item(b);if(y&&r.equal(y)){n.rangeColoring.updatePosition();break}}}}catch(k){l.e(k)}finally{l.f()}}},n.handleMouseDown=function(){n.engine.container.on("mouseup",n.handleMouseUp),n.engine.container.on("mousemove",n.emitSelectChange)},n.handleMouseUp=function(){n.engine.container.off("mouseup",n.handleMouseUp),n.engine.container.off("mousemove",n.emitSelectChange),n.emitSelectChange()},n.observer=null,n.emitSelectChange=function(){var r,a,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!n.engine.change.isComposing()){var l=n.engine.change.range.get();(r=n.observer)===null||r===void 0||r.disconnect();var u=n.engine.card.find(l.commonAncestorContainer,!0);if(u!=null&&u.getSelectionNodes){var c=n.getCardResizeRange(u);c&&(l=c.cloneRange(),n.observer=new ResizeObserver(function(){if(c=n.getCardResizeRange(u),c)n.prevRange={startContainer:c.startContainer,endContainer:c.endContainer,startOffset:c.startOffset,endOffset:c.endOffset},n.onSelectionChange(c,!0,o);else{var h;(h=n.observer)===null||h===void 0||h.disconnect()}}),n.observer.observe(u.root.get()))}((a=n.prevRange)===null||a===void 0?void 0:a.startContainer)===l.startContainer&&n.prevRange.endContainer===l.endContainer&&n.prevRange.startOffset===l.startOffset&&n.prevRange.endOffset===l.endOffset||(!l.commonAncestorNode.isRoot()&&!l.commonAncestorNode.inEditor()?(n.current&&n.removeAttirbute(n.current.uuid),n.prevRange=null):(n.prevRange={startContainer:l.startContainer,endContainer:l.endContainer,startOffset:l.startOffset,endOffset:l.endOffset},n.onSelectionChange(l,!1,o)))}},n.engine=t,n.rangeColoring=new Pm(t),t.container.on("keyup",n.emitSelectChange),t.container.on("mousedown",n.handleMouseDown),t.on("scroll",n.handleScroll),n}return we(e,[{key:"getCardResizeRange",value:function(n){if(n!=null&&n.getSelectionNodes){var r=n.getSelectionNodes();if(r.length>0){var a,o=Ke.create(this.engine);o.setStart(r[0],0);var l=r[r.length-1];return o.setEnd(l,l.isText()?l.text().length:((a=l.get())===null||a===void 0?void 0:a.childNodes.length)||0),o}}return null}},{key:"setCurrent",value:function(n){this.current=n}},{key:"setAttribute",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=this.data.get(n.uuid);if(n.force||!Qe.exports.isEqual(o||{},n)){var l;this.data.set(n.uuid,Object.assign({},n,{active:!o})),n.uuid===((l=this.current)===null||l===void 0?void 0:l.uuid)?(a===!0&&this.rangeColoring.updatePosition(),this.emit("change",n)):this.rangeColoring.render(n,r)}}},{key:"removeAttirbute",value:function(n){var r;!this.data.has(n)||(this.data.delete(n),n===((r=this.current)===null||r===void 0?void 0:r.uuid)?this.emit("change",{uuid:n,remove:!0}):this.rangeColoring.remove(n))}},{key:"getAttribute",value:function(n){return this.data.get(n)}},{key:"onSelectionChange",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!!this.current){var o=this.engine.card;n=n.cloneRange();var l=o.active;if(l&&!l.isEditable){var u=l.getCenter();if(Ir(l.root)){var c=l.root.prev();c?n.select(c,!0).collapse(!1):(n.setStartBefore(l.root),n.collapse(!0))}else u&&u.length>0&&n.select(u.get(),!0)}if(!l&&!n.collapsed){var h=this.engine.card.find(n.startNode,!0);h&&h.type===Rt.BLOCK&&n.setStart(h.getCenter().parent(),1);var v=this.engine.card.find(n.endNode,!0);v&&v.type===Rt.BLOCK&&n.setEnd(v.getCenter().parent(),1)}var g=n.toPath(!0);this.currentRangePath=n.toPath();var p=this.getAttribute(this.current.uuid);this.setAttribute(Object.assign({},p,{path:g,uuid:this.current.uuid,force:r}),this.current,a),this.rangeColoring.updateBackgroundAlpha(n)}}},{key:"destory",value:function(){this.engine.container.off("keyup",this.emitSelectChange),this.engine.container.off("mousedown",this.handleMouseDown),this.engine.off("scroll",this.handleScroll)}}]),e}(yi.exports.EventEmitter2),$c=function(d){Ue(e,d);var i=He(e);function e(t){var n;return ve(this,e),n=i.call(this),n.engine=void 0,n.type=null,n.data=void 0,n.engine=t,n.create(),n}return we(e,[{key:"create",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine?Xn(this.engine.container):[];this.data=n}},{key:"apply",value:function(n,r){if(n.length>0)try{this.data=wi.type.apply(this.data,n),r&&r(void 0)}catch(o){var a;r?r(o):(a=this.engine)===null||a===void 0||a.messageError("ot",o)}}},{key:"submitOp",value:function(n,r,a){this.apply(n,a)}},{key:"destroy",value:function(){delete this.data}}]),e}(yi.exports.EventEmitter2),zm=function(){function d(i){var e=this;ve(this,d),this.engine=void 0,this.getElementFromPath=function(t,n){At(t)&&(t=t[0]);var r=n[0];if(r===$e.ATTRIBUTE)return{startNode:t,startOffset:r,endNode:t,endOffset:r};var a=r-$e.ELEMENT;if(t instanceof Element&&t.hasAttribute(dn)){var o=e.engine.card,l=o.find(t);l&&(l.getCenter().empty(),o.renderComponent(l))}var u=[];t.childNodes.forEach(function(v){Ir(v)||u.push(v)});var c=u[a],h=n[1];return n.length===1||h===$e.TAG_NAME||h===$e.ATTRIBUTE||c instanceof Text?{startNode:c,startOffset:a,endNode:t,endOffset:h||0}:e.getElementFromPath(c,n.slice(1))},this.engine=i}return we(d,[{key:"fromRemoteAttr",value:function(e){var t;if(!!e){var n=e.id,r=e.leftText,a=e.rightText,o=(t=this.engine.container.get())===null||t===void 0?void 0:t.querySelector("[".concat(Oe,'="').concat(n,'"]'));if(!!o){var l=o.textContent||"";if(l==="")return{container:o,offset:0};if(l!=null&&l.startsWith(r)){for(var u=o.firstChild,c=r.length;u&&(u.nodeType!==3||(((h=u.textContent)===null||h===void 0?void 0:h.length)||0)<c);){var h,v;if((((v=u.textContent)===null||v===void 0?void 0:v.length)||0)<c){var g;c-=((g=u.textContent)===null||g===void 0?void 0:g.length)||0,u=u.nextSibling}else u=u.firstChild}return{container:u,offset:c}}if(l!=null&&l.endsWith(a)){for(var p,b,y=a.length,k=o.lastChild;k&&(k.nodeType!==3||(((E=k.textContent)===null||E===void 0?void 0:E.length)||0)<y);){var E,_;if(((_=k.textContent)===null||_===void 0?void 0:_.length)||0<y){var A,x;y-=((A=k)===null||A===void 0||(x=A.textContent)===null||x===void 0?void 0:x.length)||0,k=k.previousSibling}else k=k.lastChild}return{container:k,offset:((p=k)===null||p===void 0||(b=p.textContent)===null||b===void 0?void 0:b.length)||0-y}}for(var C=0;l[C]===r[C];)C++;for(var S=o.firstChild;S&&(S.nodeType!==3||(((O=S.textContent)===null||O===void 0?void 0:O.length)||0)<C);){var O,M;if(((M=S.textContent)===null||M===void 0?void 0:M.length)||0<C){var V;C-=((V=S.textContent)===null||V===void 0?void 0:V.length)||0,S=S.nextSibling}else S=S.firstChild}return{container:S,offset:C}}}}},{key:"getSideText",value:function(e,t){var n=this.engine.block.closest(e);if(n.length>0){var r=n.attributes(Oe),a=Ke.create(this.engine),o=Ke.create(this.engine);return a.setStart(n[0],0),a.setEnd(e[0],t),o.setStart(e[0],t),o.setEnd(n[0],n[0].childNodes.length),{id:r,leftText:a.toString(),rightText:o.toString()}}}},{key:"setAttribute",value:function(e,t,n,r,a){var o=this.engine.card,l=this.getElementFromPath(e,t),u=l.startNode,c=U(u);if(c&&c.length>0&&!c.isRoot()){var h;if(n=Lc(n),r=Vs(r),(h=c.get())===null||h===void 0||h.setAttribute(n,r),c.isCard()){var v=o.find(c);if(!v)return;v.isEditable||o.reRender(v),v.isEditable&&v.onChange&&v.onChange(a?"remote":"local",c)}}return c}},{key:"removeAttribute",value:function(e,t,n){var r=this.getElementFromPath(e,t),a=r.startNode,o=U(a);if(o.length>0&&!o.isRoot()){var l;(l=o.get())===null||l===void 0||l.removeAttribute(n)}return o}},{key:"insertNode",value:function(e,t,n,r){var a=this.engine,o=this.getElementFromPath(e,t),l=o.startNode,u=o.endNode,c=U(l),h=U(u);if(h.length>0&&!c.isRoot()&&(!e.isCard()||e.isEditableCard()&&(c.length===0||c.closest(xt).isEditable()))){var v=typeof n=="string"?document.createTextNode(n):Vc(n);if(c&&c.parent()){var g;(g=h.get())===null||g===void 0||g.insertBefore(v,c.get())}else{var p;(p=h.get())===null||p===void 0||p.insertBefore(v,null)}var b=U(v);return b.isCard()&&b.attributes(dn,r?"remote":"true"),a.card.render(b),b}}},{key:"deleteNode",value:function(e,t,n){var r=this.engine.card,a=this.getElementFromPath(e,t),o=a.startNode,l=U(o);if(l.length>0&&!l.isRoot()){var u=l.parent();return l.isCard()?n?r.removeRemote(l):r.remove(l,!1):l.remove(),u!=null&&u.isRoot()?void 0:u}}},{key:"insertText",value:function(e,t,n,r){var a=this.getElementFromPath(e,t),o=a.startNode,l=a.endNode,u=U(o);if(!(o&&!u.isText())){var c=o&&o.nodeValue?o.nodeValue:"",h=c.substring(0,n)+r+c.substring(n);if(o&&o.parentNode===l)o.nodeValue=h;else if(h){var v,g=document.createTextNode(h);((v=l.firstChild)===null||v===void 0?void 0:v.nodeName)==="BR"&&l.firstChild.remove(),l.insertBefore(g,l.firstChild)}return u}}},{key:"deleteText",value:function(e,t,n,r){var a=this.getElementFromPath(e,t),o=a.startNode,l=U(o);if(!!l.isText()){var u=o&&o.nodeValue?o.nodeValue:"",c=u.substring(0,n)+u.substring(n+r.length);return o.nodeValue=c,l}}},{key:"handleOperation",value:function(e,t){var n=e.p,r,a;if(n.length!==0){var o=this.engine.container;if("id"in e&&e.id&&e.bi&&e.bi>-1){var l=this.engine.container.find("[".concat(Oe,'="').concat(e.id,'"]'));l.length>0&&l.inEditor()&&(o=l,n=n.slice(e.bi))}return("si"in e||"sd"in e)&&(a=n[n.length-1],n=n.slice(0,-1)),("oi"in e||"od"in e)&&(r=n[n.length-1].toString(),n=n.slice(0,-1)),"oi"in e?this.setAttribute(o,n,r,e.oi,t):"od"in e?this.removeAttribute(o,n,r):"sd"in e?this.deleteText(o,n,a,e.sd):"si"in e?this.insertText(o,n,a,e.si):"ld"in e?this.deleteNode(o,n,t):"li"in e?this.insertNode(o,n,e.li,t):void 0}}},{key:"handleRemoteOperations",value:function(e){var t=this;try{var n=this.getRangeRemotePath(),r=[];return e.forEach(function(a){var o=t.handleOperation(a,!0);o&&r.push(o)}),n&&this.engine.isFocus()&&this.setRangeByRemotePath(n),this.engine.change.change(!0,r),r}catch(a){return this.engine.messageError("ot",a),[]}}},{key:"handleSelfOperations",value:function(e){var t=this,n=[];return e.forEach(function(r){var a=t.handleOperation(r);a&&n.push(a)}),this.engine.change.change(!1,n),n}},{key:"setRangeAfterOp",value:function(e){var t=this.engine,n,r=e.p;("si"in e||"sd"in e)&&(n=r[r.length-1],r=r.slice(0,-1)),("oi"in e||"od"in e)&&(r=r.slice(0,-1));var a=this.engine.container;if("id"in e&&e.id&&e.bi&&e.bi>-1){var o=this.engine.container.find("[".concat(Oe,'="').concat(e.id,'"]'));o.inEditor()&&(a=o,r=r.slice(e.bi))}var l=this.getElementFromPath(a,r),u=l.startNode,c=l.endNode,h=Ke.create(this.engine);if("si"in e||"sd"in e){var v=u.data===""?c:u,g=e,p=n+(g.si?g.si.length:0);h.setOffset(v,p,p),t.change.range.select(h);return}h.select(u||c.lastChild||c,!0).shrinkToElementNode().collapse(!1),t.change.range.select(h)}},{key:"getRangeRemotePath",value:function(){try{var e;if(((e=window.getSelection())===null||e===void 0?void 0:e.rangeCount)===0)return;var t=Ke.from(this.engine);if(!t||t.inCard())return;t.startNode.isRoot()&&t.shrinkToElementNode();var n=t.startNode,r=t.startOffset,a=t.endNode,o=t.endOffset;return{start:this.getSideText(n,r),end:this.getSideText(a,o)}}catch(l){this.engine.messageError("ot",l);return}}},{key:"setRangeByRemotePath",value:function(e){try{var t,n=window.getSelection(),r=n?(t=Ke.from(this.engine,n))===null||t===void 0?void 0:t.cloneRange():void 0;if(!r)return;var a=e.start,o=e.end,l,u;a&&(l=this.fromRemoteAttr(a)),o&&(u=this.fromRemoteAttr(o)),l&&l.container&&r.setStart(l.container,l.offset),u&&u.container&&r.setEnd(u.container,u.offset),this.engine.change.range.select(r,!1)}catch(c){this.engine.messageError("ot",c)}}},{key:"setRangeByPath",value:function(e){if(e){var t=e.start,n=e.end;if(t&&n){var r=t.path[t.path.length-1],a=n.path[n.path.length-1],o=t.path.slice(),l=n.path.slice();o.pop(),l.pop();var u=this.engine,c=u.container,h=u.change,v=t.id?c.find("[".concat(Oe,'="').concat(t.id,'"]')).get():c.getChildByPath(o,function(A){return!Ir(U(A))});if(!v)return;var g=n.id?c.find("[".concat(Oe,'="').concat(n.id,'"]')).get():c.getChildByPath(l,function(A){return!Ir(U(A))});if(!g)return;var p=function(x,C){if(x.nodeType===wt().TEXT_NODE){var S=x.textContent||"";return S.length<C?S.length:C}else{var O=x.childNodes;return O.length<C?O.length:C}};try{var b=h.range.get();if(v.nodeName==="BR"||this.engine.node.isVoid(v)?b.select(v).collapse(!1):(b.setStart(v,p(v,r)),b.setEnd(g,p(g,a))),!b.collapsed){var y=this.engine.card.find(b.startNode,!0),k=this.engine.card.find(b.endNode,!0);if(y&&k&&(y==null?void 0:y.root.equal(k.root))){var E=b.startNode.closest(xt);E.length===0&&(E=b.startNode.find(xt));var _=b.endNode.closest(xt);_.length===0&&(_=b.endNode.find(xt)),E.length>0&&_.length>0&&!E.equal(_)&&b.collapse(!0)}}h.range.select(b),b.scrollRangeIntoView()}catch(A){this.engine.messageError("ot",A)}}}}}]),d}(),Um=function(d){Ue(e,d);var i=He(e);function e(t,n){var r;return ve(this,e),r=i.call(this),r.engine=void 0,r.doc=void 0,r.dmp=void 0,r.cacheNodes=[],r.cacheTransientElements=void 0,r.timer=null,r.lineStart=!1,r.handleFirstLineText=function(a,o,l,u,c){var h=[],v=c[0],g=typeof v=="string",p=a==="root"?"":a,b=a==="root"?-1:o;if(g&&u!==v)for(var y=r.textToOps(l,v,u),k=0;k<y.length;k++)h.push(Object.assign({},y[k],{id:p,bi:b}));for(var E=c.length-1;E>=(g?1:0);E--){var _=c[E],A=l.concat();A[A.length-1]=E+$e.ELEMENT,h.push({id:p,bi:b,p:A,ld:_})}return g||h.push({id:p,bi:b,p:l,li:u}),h},r.isLoadingCard=function(a){if(a.length>$e.ATTRIBUTE&&!Array.isArray(a[1])&&lt(a[1])==="object"){var o=a[$e.ATTRIBUTE],l=o[We],u=o[qt],c=o[Oe];if(l&&u&&c){var h,v=(h=r.engine.container.get())===null||h===void 0?void 0:h.querySelector("[".concat(Oe,'="').concat(c,'"]'));if(v!=null&&v.getAttribute(dn))return!0}}return!1},r.handleChildren=function(a,o,l,u,c){var h=[],v=a==="root"?"":a,g=a==="root"?-1:o;if(r.isLoadingCard(c))return[];if(u.length===0)for(var p=0;p<c.length;p++)h.push({id:a,bi:g,p:l.concat(p+$e.ELEMENT),li:c[p]});else if(c.length===0)for(var b=u.length-1;b>=0;b--)h.push({id:v,bi:g,p:l.concat(b+$e.ELEMENT),ld:u[b]});else if(c.length===1&&typeof c[0]=="string")h.push.apply(h,gt(r.handleFirstLineText(a,g,l.concat($e.ELEMENT),c[0],u)));else if(c.every(function(P){return Array.isArray(P)?P[$e.ATTRIBUTE][Oe]:!1})&&u.every(function(P){return Array.isArray(P)?P[$e.ATTRIBUTE][Oe]:!1})){for(var y=function(D){var T=u[D],q=c.find(function(Z){return Z[$e.ATTRIBUTE][Oe]===T[$e.ATTRIBUTE][Oe]});q||(h.push({id:v,bi:g,p:l.concat(D+$e.ELEMENT),ld:T}),u.splice(D,1))},k=u.length-1;k>=0;k--)y(k);for(var E=function(D){var T=c[D],q=u.find(function(F){return F[$e.ATTRIBUTE][Oe]===T[$e.ATTRIBUTE][Oe]});if(!q)h.push({id:a,bi:g,p:l.concat(D+$e.ELEMENT),li:T}),u.splice(D,0,T);else if(!Qe.exports.isEqual(T,q)){var Z=T[$e.ATTRIBUTE],ie=q[$e.ATTRIBUTE],N=l.concat(D+$e.ELEMENT);if(h.push.apply(h,gt(r.handleAttributes(a,g,N,ie,Z))),r.isLoadingCard(T))return"continue";h.push.apply(h,gt(r.handleChildren(a,g,N,q.slice($e.ELEMENT),T.slice($e.ELEMENT))))}},_=0;_<c.length;_++)var A=E(_)}else{if(u.length>c.length)for(var x=u.length-1;x>=c.length;x--)h.push({id:v,bi:g,p:l.concat(x+$e.ELEMENT),ld:u[x]});for(var C=0;C<c.length;C++){var S=c[C],O=u[C];if(!O)h.push({id:a,bi:g,p:l.concat(C+$e.ELEMENT),li:S});else if(!Qe.exports.isEqual(S,O))if(typeof S!="string"&&lt(S)===lt(O)&&S[$e.TAG_NAME]===O[$e.TAG_NAME]){var M=S[$e.ATTRIBUTE],V=O[$e.ATTRIBUTE],j=l.concat(C+$e.ELEMENT);if(h.push.apply(h,gt(r.handleAttributes(a,g,j,V,M))),r.isLoadingCard(S))continue;h.push.apply(h,gt(r.handleChildren(a,g,j,O.slice($e.ELEMENT),S.slice($e.ELEMENT))))}else h.push({id:v,bi:g,p:l.concat(C+$e.ELEMENT),ld:O}),h.push({id:a,bi:g,p:l.concat(C+$e.ELEMENT),li:S})}}return h},r.findCardForDoc=function(a,o,l){var u=jc(a,function(v){return v["data-card-key"]===o?l?l(v):!0:!1});if(u){var c=u.attributes,h=u.children;return{attributes:c,rendered:Array.isArray(h)&&Array.isArray(h[2])&&Array.isArray(h[2][2])}}},r.engine=t,r.doc=n.doc,r.dmp=new ia.exports.diff_match_patch,r}return we(e,[{key:"setDoc",value:function(n){this.doc=n}},{key:"textToOps",value:function(n,r,a){var o=[],l=this.dmp.patch_make(r,a);return Object.keys(l).forEach(function(u){var c=l[u],h=c.start1;c.diffs.forEach(function(v){var g=ea(v,2),p=g[0],b=g[1];if(p!==ia.exports.DIFF_DELETE)if(p!==ia.exports.DIFF_INSERT)p===ia.exports.DIFF_EQUAL&&(h+=b.length);else{var y=[];o.push({si:b,p:y.concat(gt(n),[h])})}else{var k=[];o.push({sd:b,p:k.concat(gt(n),[h])})}})}),o}},{key:"handleAttributes",value:function(n,r,a,o,l){var u=[],c=n==="root"?"":n,h=n==="root"?-1:r;return Object.keys(l).forEach(function(v){var g=l[v],p=[].concat(gt(a),[$e.ATTRIBUTE,v]);if(!o.hasOwnProperty(v)&&g!==o[v]){u.push({id:c,bi:h,p,oi:g});return}var b=o[v];g!==b&&u.push({id:c,bi:h,p,od:b,oi:g})}),Object.keys(o).forEach(function(v){l.hasOwnProperty(v)||u.push({id:c,bi:h,p:a.concat($e.ATTRIBUTE,v),od:o[v]})}),u}},{key:"handleMutations",value:function(n){var r,a=this,o=[],l=(r=this.doc)===null||r===void 0?void 0:r.data;if(!(!l||n.length===0)){for(var u=function(p){var b=n.at(p);if(!b)return"continue";var y=b.type,k=b.target;if(y==="attributes"&&(b.attributeName&&Uc(k,b.attributeName)||k instanceof Element&&Jr(k))||(k instanceof Text&&(k=k.parentElement),!k||!k.isConnected||!(k instanceof Element)||Ir(k)))return"continue";var E=k instanceof Element&&Jr(k);if(E)return o=[k],"break";if(o.length===0||!o.includes(k)&&o.every(function(x){return!x.contains(k)})){for(var _=o.length,A=0;A<_;A++)k.contains(o[A])&&(o.splice(A,1),_--,A--);o.push(k)}},c=0;c<n.length;c++){var h=u(c);if(h!=="continue"&&h==="break")break}if(o.length!==0){var v=[];o.forEach(function(g){v.push.apply(v,gt(a.diff(g,l)))}),v.length>0&&this.emit("ops",v)}}}},{key:"diff",value:function(n){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:((r=this.doc)===null||r===void 0?void 0:r.data)||[],o=[];if(!n.isConnected)return[];var l=Jr(n)?"root":n.getAttribute(Oe);if(!l){var u=this.engine.block.closest(U(n),function(E){return!!E.attributes(Oe)}).get();if(!(u instanceof Element))return[];n=u,l=n.getAttribute(Oe)}if(!l)return[];var c=Xn(n);if(!c)return[];var h=l==="root",v=jc(a,function(E){return h?!0:E[Oe]===l});if(!v)return[];var g=v.path;if(l!=="root"){var p=c[$e.ATTRIBUTE],b=v.attributes;o.push.apply(o,gt(this.handleAttributes(l,g.length,g,b,p)))}if(this.isLoadingCard(c))return o;var y=c.slice(2),k=v.children;return o.push.apply(o,gt(this.handleChildren(h?"":l,h?-1:g.length,g,k,y))),o}}]),e}(yi.exports.EventEmitter2),Hm={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},Vm=function(d){Ue(e,d);var i=He(e);function e(t,n){var r;return ve(this,e),r=i.call(this),r.node=void 0,r.engine=void 0,r.doc=void 0,r.isStopped=void 0,r.observer=void 0,r.producer=void 0,r.isCache=!1,r.cache=[],r.node=t,r.isStopped=!0,r.engine=n.engine,r.doc=n.doc,r.producer=new Um(r.engine,{doc:r.doc}),r.observer=new MutationObserver(function(a){if(r.isCache){var o;(o=r.cache).push.apply(o,gt(a))}!r.isStopped&&!r.isCache&&r.producer.handleMutations(a)}),r.producer.on("ops",function(a){r.onChange(a)}),r}return we(e,[{key:"setDoc",value:function(n){this.doc=n,this.producer.setDoc(n)}},{key:"start",value:function(){this.isStopped&&(this.observer.observe(this.node[0],Hm),this.isStopped=!1)}},{key:"stop",value:function(){this.isStopped||(this.observer.disconnect(),this.isStopped=!0)}},{key:"startCache",value:function(){this.isCache||(this.cache=[],this.isCache=!0)}},{key:"submitCache",value:function(){var n=this;this.isCache&&setTimeout(function(){n.engine.change.isComposing()||(n.isCache=!1,n.cache=n.cache.map(function(r){return r.type==="characterData"&&r.target.nodeType===document.TEXT_NODE&&(r["text-data"]=r.target.textContent),r}),n.cache.length>0&&n.producer.handleMutations(n.cache),n.cache=[])},20)}},{key:"destroyCache",value:function(){var n=this;this.isCache&&setTimeout(function(){n.isCache=!1,n.cache=[]},20)}},{key:"getCaches",value:function(){return this.cache}},{key:"onChange",value:function(n){this.isStopped||this.emit("onChange",n)}},{key:"diff",value:function(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine.container.get();return this.producer.diff(r,(n=this.doc)===null||n===void 0?void 0:n.data)}}]),e}(yi.exports.EventEmitter2),jm=`.ot-user-cursor {\r
	position: absolute;\r
	z-index: 125;\r
	width: 2px;\r
}\r
\r
.ot-user-cursor-trigger {\r
	position: absolute;\r
	top: -5px;\r
	left: -2px;\r
	border-radius: 100%;\r
	color: #ffffff;\r
	width: 6px;\r
	height: 6px;\r
	font-size: 0;\r
	overflow: hidden;\r
	transition: all 0.1s linear;\r
}\r
\r
.ot-user-cursor-trigger-active {\r
	top: -17px;\r
	border-radius: 2px;\r
	color: #ffffff;\r
	font-size: 10px;\r
	line-height: 18px;\r
	height: 18px;\r
	width: auto;\r
	padding: 0 3px;\r
	white-space: nowrap;\r
}\r
\r
.ot-card-mask {\r
	position: absolute;\r
	z-index: 10;\r
	background: transparent;\r
	cursor: not-allowed;\r
}\r
\r
.ot-user-background {\r
  z-index: 120;\r
}\r
\r
.ot-user-cursor-card {\r
	position: absolute;\r
}\r
\r
.ot-user-cursor-card .ot-user-cursor-trigger {\r
	display: none;\r
}\r
\r
.ot-user-cursor-card .ot-user-cursor-trigger-active {\r
	position: absolute;\r
	display: block;\r
	top: -19px;\r
	left: 0;\r
	border-radius: 2px;\r
	color: #ffffff;\r
	font-size: 10px;\r
	line-height: 18px;\r
	height: 18px;\r
	width: auto;\r
	padding: 0 3px;\r
	white-space: nowrap;\r
}`;hn(jm);var Gm=function(d){Ue(e,d);var i=He(e);function e(t){var n;return ve(this,e),n=i.call(this),n.engine=void 0,n.members=void 0,n.currentMember=void 0,n.clientId=void 0,n.selection=void 0,n.consumer=void 0,n.mutation=void 0,n.doc=null,n.isRemote=!1,n.colors=["#597EF7","#73D13D","#FF4D4F","#9254DE","#36CFC9","#FFA940","#F759AB","#40A9FF"],n.handleChange=function(r){var a=n.engine.trigger("opsChange",r);a&&(r=a),n.submitOps(r),n.engine.history.handleSelfOps(r.filter(function(o){return!o.nl&&!o.p.includes(bt)})),n.engine.trigger("ops",r),r.find(function(o){return("od"in o||"oi"in o)&&o.p.includes(cr)})&&n.engine.change.change(!1)},n.engine=t,n.members=[],n.selection=new Fm(t),n.consumer=new zm(t),n.mutation=new Vm(t.container,{engine:t}),n.mutation.on("onChange",n.handleChange),n.clientId=Oc(8),n}return we(e,[{key:"initLocal",value:function(){var n;this.doc||(this.stopMutation(),this.doc=new $c(this.engine),(n=this.mutation)===null||n===void 0||n.setDoc(this.doc),this.engine.readonly||this.startMutation())}},{key:"initRemote",value:function(n,r,a){var o,l=this,u=!this.doc||this.doc.type===null;this.stopMutation(),u||this.doc.destroy(),this.isRemote=!0,this.doc=n,(o=this.mutation)===null||o===void 0||o.setDoc(n),this.syncValue(r),n.on("op",function(c,h){if(l.clientId!==h.toString()){var v=Em(c);v.length>0&&(l.apply(v),l.engine.history.handleRemoteOps(v))}}),this.selection.removeAllListeners(),this.selection.on("change",function(c){a&&a(c)}),this.engine.readonly||this.startMutation(),u&&this.emit("load")}},{key:"submitOps",value:function(n){var r=this;if(!!this.doc){n.forEach(function(l){var u;l.uid=(u=r.currentMember)===null||u===void 0?void 0:u.uuid});var a=new $c,o=JSON.parse(JSON.stringify(this.doc.data));a.create(o),a.submitOp(n,null,function(l){if(a.destroy(),!!r.doc){if(l){r.engine.messageError("ot","If there is an error in the collaborative structure, the content of the server will be reset, and the current history will also be cleared.",l,n,o),r.engine.history.clear();for(var u=[],c=r.doc.data,h=c.length-1;h>1;h--){var v=c[h];u.push({bi:-1,id:"",ld:v,p:[h],nl:void 0})}for(var g=[],p=Xn(r.engine.container)||[],b=2;b<p.length;b++){var y=p[b];g.push({bi:-1,id:"",li:y,p:[b],nl:void 0})}r.doc.submitOp(u.concat(g),{source:r.clientId}),r.selection.emitSelectChange(!0);return}r.doc.submitOp(n,{source:r.clientId},function(k){if(k){var E,_;r.engine.messageError("ot","SubmitOps Error:",k,"OPS:",n,"DATA:",(E=r.doc)===null||E===void 0?void 0:E.data),(_=r.doc)===null||_===void 0||_.destroy()}r.selection.emitSelectChange(!0)})}})}}},{key:"diff",value:function(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine.container.get();return((n=this.mutation)===null||n===void 0?void 0:n.diff(r))||[]}},{key:"apply",value:function(n){this.stopMutation(),this.consumer.handleRemoteOperations(n),this.selection.emitSelectChange(),this.startMutation()}},{key:"syncValue",value:function(n){var r=this,a=this.doc,o=this.engine;if(!!a){if(a.type&&Array.isArray(a.data)&&a.data.length>2){this.engine.setJsonValue(a.data);return}n&&o.setValue(n),a.on("create",function(){var l=Xn(o.container);a.submitOp([{p:[],oi:l}],{source:r.clientId})})}}},{key:"startMutation",value:function(){this.mutation&&this.mutation.start()}},{key:"stopMutation",value:function(){this.mutation&&this.mutation.stop()}},{key:"isStopped",value:function(){var n,r;return(n=(r=this.mutation)===null||r===void 0?void 0:r.isStopped)!==null&&n!==void 0?n:!1}},{key:"startMutationCache",value:function(){this.mutation&&this.mutation.startCache()}},{key:"submitMutationCache",value:function(){this.mutation&&this.mutation.submitCache()}},{key:"destroyMutationCache",value:function(){this.mutation&&this.mutation.destroyCache()}},{key:"getCaches",value:function(){var n;return((n=this.mutation)===null||n===void 0?void 0:n.getCaches())||[]}},{key:"getColors",value:function(){return this.colors}},{key:"setColors",value:function(n){this.colors=n}},{key:"setMemberColor",value:function(n){var r=n.index||this.members.length+1;r=(r-1)%this.colors.length,n.color=this.colors[r]}},{key:"getMembers",value:function(){return Qe.exports.cloneDeep(this.members)}},{key:"setMembers",value:function(n){var r=this;n=Qe.exports.cloneDeep(n),n.forEach(function(a){r.setMemberColor(a)}),this.members=n}},{key:"addMember",value:function(n){n=Qe.exports.cloneDeep(n),this.setMemberColor(n),this.members.find(function(r){return r.uuid===n.uuid})||this.members.push(n)}},{key:"removeMember",value:function(n){n=Qe.exports.cloneDeep(n),n.uuid&&(this.members=this.members.filter(function(r){return r.uuid!==n.uuid}),this.selection.removeAttirbute(n.uuid))}},{key:"setCurrentMember",value:function(n){n=Qe.exports.cloneDeep(n),this.setMemberColor(n);var r=this.members.find(function(a){return a.uuid===n.uuid});!r||(this.currentMember=r,this.selection.setCurrent(r))}},{key:"getCurrentMember",value:function(){return this.currentMember}},{key:"renderSelection",value:function(n){var r=this;Array.isArray(n)||(n=[n]),n.forEach(function(a){if(!(r.currentMember&&a.uuid===r.currentMember.uuid)){var o=r.members.find(function(l){return l.uuid===a.uuid});"remove"in a||!o?r.selection.removeAttirbute(a.uuid):r.selection.setAttribute(a,o)}})}},{key:"destroy",value:function(){var n,r;this.doc&&this.doc.destroy(),this.selection.destory(),(n=this.mutation)===null||n===void 0||n.off("onChange",this.handleChange),(r=this.mutation)===null||r===void 0||r.destroyCache(),this.stopMutation(),this.mutation=null}}]),e}(yi.exports.EventEmitter2),gr=ir("selfWaiting"),Wm=function(){function d(i){var e=this;ve(this,d),this.actionOps=[],this.engine=void 0,this.currentAction={},this.currentActionIndex=0,this.filterEvents=[],this.selfEvents=[],Object.defineProperty(this,gr,{writable:!0,value:void 0}),this.lazySave=Qe.exports.debounce(function(){e.saveOp()},200),this.handlePath=function(t,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(h){return!Ir(U(h))},l=e.engine.container.find("[".concat(Oe,'="').concat(n,'"]'));if(l.length>0&&l.inEditor()){var u,c=l.getPath(e.engine.container,!((u=l.parent())===null||u===void 0)&&u.isRoot()?void 0:o);return(a?c.map(function(h){return h+2}):c).concat(t.slice(r))}return t},this.engine=i}return we(d,[{key:"reset",value:function(){this.actionOps=[],this.currentAction={},this.currentActionIndex=0}},{key:"onFilter",value:function(e){this.filterEvents.push(e)}},{key:"onSelf",value:function(e){this.selfEvents.push(e)}},{key:"hasUndo",value:function(){return!!this.getUndoOp()}},{key:"hasRedo",value:function(){return!!this.getRedoOp()}},{key:"undo",value:function(){this.saveOp();var e=this.getUndoOp();if(e){var t=!1;this.engine.ot.stopMutation();try{var n=this.engine.ot;n.submitOps(e.ops||[]),n.consumer.handleSelfOperations(e.ops),this.currentActionIndex--,t=!0}catch(r){this.reset(),this.engine.messageError("history-undo",r)}this.engine.isEmpty()&&this.engine.change.initValue(),t&&(this.engine.change.getRangePathBeforeCommand(),this.engine.ot.consumer.setRangeByPath(e.startRangePath),this.engine.change.change(),this.engine.trigger("undo")),this.engine.ot.startMutation()}}},{key:"redo",value:function(){this.saveOp();var e=this.getRedoOp();if(e){var t=!1;this.engine.ot.stopMutation();try{var n=this.engine.ot;n.submitOps(e.ops||[]),n.consumer.handleSelfOperations(e.ops),this.currentActionIndex++,t=!0}catch(r){this.reset(),this.engine.messageError("history-redo",r)}t&&(this.engine.change.getRangePathBeforeCommand(),this.engine.ot.consumer.setRangeByPath(e.rangePath),this.engine.change.change(),this.engine.trigger("redo")),this.engine.ot.startMutation()}}},{key:"clear",value:function(){var e=this;setTimeout(function(){e.reset()},10)}},{key:"saveOp",value:function(){this.currentAction&&this.currentAction.ops&&this.currentAction.ops.length>0&&(this.currentAction.self&&(this.currentAction.rangePath=this.getCurrentRangePath(),this.currentAction.id=Oc(8),this.actionOps.splice(this.currentActionIndex),this.actionOps.push(this.currentAction),this.currentActionIndex=this.actionOps.length,this.engine.trigger("historyChange")),this.currentAction={},this.engine.change.getRangePathBeforeCommand())}},{key:"handleSelfOps",value:function(e){var t,n=this;!((t=this.currentAction)===null||t===void 0)&&t.self||this.saveOp();var r=!1;if(e.forEach(function(o){if(r=!0,n.filterEvents.some(function(c){return c(o)})){var l;n.actionOps.length>0&&!o.nl&&((l=n.actionOps[n.actionOps.length-1].ops)===null||l===void 0||l.push(o))}else{n.currentAction.self=!0,n.currentAction.ops||(n.currentAction.ops=[]),n.currentAction.startRangePath||(n.currentAction.startRangePath=n.getRangePathBeforeCommand());var u=n.currentAction.ops[n.currentAction.ops.length-1];u&&Js(o,u)?n.currentAction.ops.pop():n.currentAction.ops.push(o)}}),r){var a=void 0;if(this.selfEvents.some(function(o){return a=o(e),a!==void 0}),Je(this,gr)[gr])return;typeof a=="boolean"?a?this.saveOp():this.currentAction={}:lt(a)==="object"?(Je(this,gr)[gr]=a,a.then(function(o){o?n.saveOp():n.currentAction={}}).finally(function(){return Je(n,gr)[gr]=void 0})):a===void 0&&this.lazySave()}}},{key:"handleRemoteOps",value:function(e){var t=this;this.currentAction.self&&!Je(this,gr)[gr]&&this.saveOp();var n=this.engine.change.range.get();this.actionOps.forEach(function(r){var a;if((a=r.ops)===null||a===void 0||a.forEach(function(g){g.id&&g.bi!==void 0&&(g.p=t.handlePath(g.p,g.id,g.bi))}),r.rangePath){var o=r.rangePath,l=o.start,u=o.end;l.id&&l.bi!==void 0&&(l.path=t.handlePath(l.path,l.id,l.bi,!1,n.filterPath(!0))),u.id&&u.bi!==void 0&&(u.path=t.handlePath(u.path,u.id,u.bi,!1,n.filterPath(!0)))}if(r.startRangePath){var c=r.startRangePath,h=c.start,v=c.end;h.id&&h.bi!==void 0&&(h.path=t.handlePath(h.path,h.id,h.bi,!1,n.filterPath(!0))),v.id&&v.bi!==void 0&&(v.path=t.handlePath(v.path,v.id,v.bi,!1,n.filterPath(!0)))}}),e.forEach(function(r){t.currentAction.ops||(t.currentAction.ops=[]);var a=t.currentAction.ops[t.currentAction.ops.length-1];a&&Js(r,a)?t.currentAction.ops.pop():t.currentAction.ops.push(r),t.actionOps.some(function(o,l){var u,c=(u=o.ops)===null||u===void 0?void 0:u.some(function(b){return wi.type.canOpAffectPath(r,b.p)});if(c){for(var h=[o],v=function(y){var k,E=t.actionOps[y],_=(k=E.ops)===null||k===void 0?void 0:k.some(function(S){var O;return(O=o.ops)===null||O===void 0?void 0:O.some(function(M){return wi.type.canOpAffectPath(S,M.p)})});if(_){var A;h.push(E);var x=y+1,C=t.actionOps[x];C&&((A=C.ops)===null||A===void 0?void 0:A.some(function(S){var O;return(O=E.ops)===null||O===void 0?void 0:O.some(function(M){return wi.type.canOpAffectPath(S,M.p)})}))&&h.push(C)}},g=l+1;g<t.actionOps.length;g++)v(g);var p=t.actionOps.filter(function(b){return h.find(function(y){return y.id===b.id})===void 0});return t.actionOps=p,t.currentActionIndex=t.actionOps.length,c}return!1})})}},{key:"getUndoOp",value:function(){var e=this.currentActionIndex-1;if(this.actionOps[e]){var t=Qe.exports.cloneDeep(this.actionOps[e]),n=Qe.exports.findLastIndex(this.actionOps,function(a){return a.id==t.id});n!==-1?t=this.actionOps[n]:n=e;var r=wi.type.invert(t.ops||[]);r.forEach(function(a,o){var l=(t.ops||[])[r.length-o-1];a.id=l.id,a.bi=l.bi});try{return{self:!0,ops:r,id:t.id,type:"undo",rangePath:t.rangePath,startRangePath:t.startRangePath}}catch(a){this.engine.messageError("history-undo-op",a)}}}},{key:"getRedoOp",value:function(){var e=this.currentActionIndex;if(this.actionOps[e]){var t=Qe.exports.cloneDeep(this.actionOps[e]),n=[];t.type==="undo"?(n=wi.type.invert(t.ops||[]),n.forEach(function(r,a){var o=(t.ops||[])[n.length-a-1];r.id=o.id,r.bi=o.bi})):n=t.ops;try{return{self:!0,ops:n,id:t.id,type:"redo",rangePath:t.rangePath,startRangePath:t.startRangePath}}catch(r){this.engine.messageError("history-redo-op",r)}}}},{key:"getCurrentRangePath",value:function(){var e=this.engine,t=e.ot,n=e.change,r=t.selection.currentRangePath;return r||n.range.get().toPath()}},{key:"getRangePathBeforeCommand",value:function(){return this.engine.change.getRangePathBeforeCommand()||this.getCurrentRangePath()}}]),d}(),Km=function(){function d(i){var e=this;ve(this,d),this.engine=void 0,this.disabled=!1,this.engine=i,this.engine.container.on("keydown",function(t){return e.trigger(t)})}return we(d,[{key:"match",value:function(e){var t=this;Object.keys(this.engine.plugin.components).every(function(n){var r=t.engine.plugin.components[n];if(r.hotkey){var a=r.hotkey(e),o=!1,l=[];if(typeof a=="string"&&qe(a,e)?o=!0:Array.isArray(a)?a.some(function(c){if(typeof c=="string"){if(qe(c,e))return o=!0,l=[],!0}else{var h=c.key,v=c.args;if(qe(h,e))return o=!0,l=Array.isArray(v)?v:[v],!0}return!1}):lt(a)==="object"&&qe(a.key,e)&&(o=!0,l=Array.isArray(a.args)?a.args:[a.args]),o){var u;return e.preventDefault(),(u=t.engine.command).execute.apply(u,[n].concat(gt(l))),!1}}return!0})}},{key:"trigger",value:function(e){this.disabled||this.match(e)}},{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"destroy",value:function(){this.engine.container.off("keydown",this.trigger)}}]),d}(),Ht=function(){function d(i){ve(this,d),this.type="keydown",this.hotkey="",this.listeners=[],this.engine=void 0,this.engine=i}return we(d,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"unshiftOn",value:function(e){this.listeners.unshift(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"trigger",value:function(e){for(var t=0;t<this.listeners.length;t++){var n=this.listeners[t],r=n(e);if(r===!1)break}}},{key:"destroy",value:function(){this.listeners=[]}}]),d}(),Zm=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey="backspace",t}return we(e,[{key:"trigger",value:function(n){var r=this.engine,a=r.change,o=r.container,l=a.range.get();if(a.cacheRangeBeforeCommand(),a.isEmpty()){n.preventDefault(),o.empty(),a.initValue();return}var u=l.commonAncestorNode,c=this.engine.card.find(u,!0),h=c!=null&&c.isEditable?c!=null&&c.getSelectionNodes?c.getSelectionNodes():[]:[];if(h.length>0){h.forEach(function(P){P.html("<p></br ></p>")}),a.apply(l.cloneRange().select(h[0],!0).collapse(!0));return}var v=l.startNode,g=l.startOffset;if(v.isEditable()){var p=v[0].childNodes[g-1],b=U(p);if(b.name==="br"){n.preventDefault(),b.remove(),a.apply(l);return}}for(var y=!0,k=0;k<this.listeners.length;k++){var E=this.listeners[k];if(y=E(n),y===!1)break}if(y===!1){this.engine.scrollNode&&l.scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode);return}if(l.collapsed){var x,C=void 0;if(this.engine.node.isBlock(v)){var S=v[0].childNodes[g-1];C=U(S)}else v.name==="br"&&(C=v);if(((x=C)===null||x===void 0?void 0:x.name)==="br"){var O=C.prev(),M=C.next(),V=M==null?void 0:M.next(),j=O==null?void 0:O.prev();(O==null?void 0:O.name)!=="br"&&(M==null?void 0:M.name)==="br"&&(V==null?void 0:V.name)!=="br"?(n.preventDefault(),C.remove(),M.remove(),a.apply(l.shrinkToTextNode())):(M==null?void 0:M.name)!=="br"&&(O==null?void 0:O.name)==="br"&&(j==null?void 0:j.name)!=="br"&&(n.preventDefault(),C.remove(),O.remove(),a.apply(l.shrinkToTextNode()))}}else{n.preventDefault();var _=v.prev();(_==null?void 0:_.name)==="br"&&_.remove(),a.delete(l);var A=l.startNode.prev();(A==null?void 0:A.isCard())&&A.find(nm).length===0&&A.remove(),a.apply(l),this.engine.scrollNode&&l.scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode);return}}}]),e}(Ht),$m=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey="delete",t}return we(e,[{key:"getNext",value:function(n){return U(n).isEditable()?null:n.nextSibling?n.nextSibling:n.parentNode===null?null:this.getNext(n.parentNode)}},{key:"getRange",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(U(n).isEditable())return null;if(!r){var a=this.getNext(n);if(!a)return null;n=a}for(;n;){var o=U(n);if(o.attributes(We)){if(!n.ownerDocument)return null;var l=Ke.create(this.engine,n.ownerDocument);return l.setStartAfter(n),l.collapse(!0),l}if(this.engine.node.isBlock(o)){if(!n.ownerDocument)return null;var u=Ke.create(this.engine,n.ownerDocument);return u.select(o,!0).collapse(!0),u}if(o.name==="br"){var c;if(((c=n.parentNode)===null||c===void 0?void 0:c.childNodes.length)===1||!n.ownerDocument)return null;var h=Ke.create(this.engine,n.ownerDocument);return h.setStartAfter(n),h.collapse(!0),h}if(n.nodeType===Node.TEXT_NODE){if(n.data.length===0)return this.getRange(n);if(!n.ownerDocument)return null;var v=Ke.create(this.engine,n.ownerDocument);return v.setStart(n,1),v.collapse(!0),v}if(n.childNodes.length===0)return this.getRange(n);n=n.childNodes[0]}return null}},{key:"trigger",value:function(n){var r=this.engine.change;r.cacheRangeBeforeCommand();var a=r.range.get();if(!a.collapsed){n.preventDefault(),r.delete();return}var o=this.engine.card.find(a.startNode),l=!1,u;if(o){if(o.isLeftCursor(a.startNode)){n.preventDefault(),this.engine.card.select(o),r.delete();return}if(!o.isRightCursor(a.startNode))return;u=o.root[0]}else if(a.endContainer.nodeType===Node.TEXT_NODE){if(a.endContainer.data.length>a.endOffset){n.preventDefault();var c=a.cloneRange();c.setEnd(a.endContainer,a.endOffset+1),r.range.select(c),r.delete(),r.range.select(r.range.get().shrinkToTextNode());return}u=a.endContainer}else{if(a.endContainer.nodeType!==Node.ELEMENT_NODE)return;if(a.endContainer.childNodes.length===0)u=a.endContainer;else if(a.endOffset===0){var h;(a.endContainer.childNodes.length!==1||((h=a.endContainer.firstChild)===null||h===void 0?void 0:h.nodeName)!=="BR")&&(l=!0),u=a.endContainer.childNodes[a.endOffset]}else u=a.endContainer.childNodes[a.endOffset-1]}var v=this.getRange(u,l);if(v){n.preventDefault();var g=a.startOffset;g===1&&a.startContainer.childNodes.length===1&&a.startContainer.childNodes[0].nodeName==="BR"&&(g=0),v.setStart(a.startContainer,g),r.range.select(v),r.delete()}for(var p=0;p<this.listeners.length;p++){var b=this.listeners[p],y=b(n);if(y===!1)break}}}]),e}(Ht),Ym=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey="enter",t}return we(e,[{key:"trigger",value:function(n){var r=this.engine.change;r.cacheRangeBeforeCommand();var a=r.range.get(),o=this.engine.block.closest(a.endNode);o.isEditable()&&this.engine.block.wrap("<p />");for(var l=0;l<this.listeners.length;l++){var u=this.listeners[l],c=u(n);if(c===!1)break}this.engine.scrollNode&&this.engine.change.range.get().scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode),this.engine.trigger("select")}}]),e}(Ht),Xm=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey="tab",t}return we(e,[{key:"trigger",value:function(n){var r=this.engine.node;n.preventDefault(),r.insertText("    ")}}]),e}(Ht),Jm=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey="shift+tab",t}return e}(Ht),Qm=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey="shift+enter",t}return we(e,[{key:"trigger",value:function(n){var r=this.engine,a=r.change,o=r.inline,l=r.block;n.preventDefault(),a.cacheRangeBeforeCommand();var u=a.range.get();if(u.startNode.closest("li").length===0){var c;(c=this.engine.typing.getHandleListener("enter","keydown"))===null||c===void 0||c.trigger(n);return}else{var h=U("<br />");if(o.insert(h,u),l.isLastOffset(u,"end")){var v,g;if((!h.next()||((v=h.next())===null||v===void 0?void 0:v.name)!=="br")&&(!h.prev()||((g=h.prev())===null||g===void 0?void 0:g.name)!=="br")){var p=h.clone();h.after(p),u.select(p).collapse(!1)}}}for(var b=0;b<this.listeners.length;b++){var y=this.listeners[b],k=y(n);if(k===!1)break}a.apply(u),this.engine.scrollNode&&this.engine.change.range.get().scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode)}}]),e}(Ht),e0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey=function(o){return o.key===" "},t}return e}(Ht),t0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey=function(o){return o.key==="/"||qe("/",o)||o.keyCode===229&&o.code==="Slash"},t}return e}(Ht),n0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey="mod+a",t}return e}(Ht),r0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey=function(o){return qe("left",o)||qe("shift+left",o)||qe("ctrl+a",o)||qe("ctrl+b",o)},t}return e}(Ht),i0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey=function(o){return qe("right",o)||qe("shift+right",o)||qe("ctrl+e",o)||qe("ctrl+f",o)},t}return e}(Ht),a0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey=function(o){return qe("up",o)||qe("ctrl+p",o)},t}return e}(Ht),o0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey=function(o){return qe("down",o)||qe("ctrl+n",o)},t}return e}(Ht),s0=[{name:"default",handle:Ht},{name:"enter",handle:Ym,triggerName:"keydown:enter"},{name:"backspace",handle:Zm,triggerName:"keydown:backspace"},{name:"delete",handle:$m,triggerName:"keydown:backspace"},{name:"tab",handle:Xm,triggerName:"keydown:tab"},{name:"shift-tab",handle:Jm,triggerName:"keydown:shift-tab"},{name:"shift-enter",handle:Qm,triggerName:"keydown:shift-enter"},{name:"space",handle:e0,triggerName:"keydown:space"},{name:"slash",handle:t0,triggerName:"keydown:slash"},{name:"all",handle:n0,triggerName:"keydown:all"},{name:"left",handle:r0,triggerName:"keydown:left"},{name:"right",handle:i0,triggerName:"keydown:right"},{name:"up",handle:a0,triggerName:"keydown:up"},{name:"down",handle:o0,triggerName:"keydown:down"}],ca=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keyup",t}return e}(Ht),l0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey="enter",t}return e}(ca),u0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keyup",t.hotkey="backspace",t}return we(e,[{key:"trigger",value:function(n){var r=this.engine.change;if(r.isEmpty()){n.preventDefault();return}for(var a=!0,o=0;o<this.listeners.length;o++){var l=this.listeners[o];if(a=l(n),a===!1)break}}}]),e}(ca),c0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey="tab",t}return e}(ca),f0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey=function(o){return o.key===" "},t}return e}(ca),d0=[{name:"default",handle:ca},{name:"enter",handle:l0,triggerName:"keyup:enter"},{name:"backspace",handle:u0,triggerName:"keyup:backspace"},{name:"tab",handle:c0,triggerName:"keyup:tab"},{name:"space",handle:f0,triggerName:"keyup:space"}],h0=function(){function d(i){var e=this;ve(this,d),this.engine=void 0,this.handleListeners=[],this.bindKeydown=function(n){var r=e.engine,a=r.readonly,o=r.card;if(a){qe("mod+a",n)&&n.preventDefault();return}n.target&&o.find(U(n.target))||e.trigger("keydown",n)},this.bindKeyup=function(n){var r=e.engine,a=r.readonly,o=r.card;a||n.target&&o.find(U(n.target))||e.trigger("keyup",n)},this.engine=i,s0.concat(d0).forEach(function(n){e.addHandleListener(n.name,n.handle,n.triggerName)});var t=i.container;t.on("keydown",this.bindKeydown),t.on("keyup",this.bindKeyup)}return we(d,[{key:"addHandleListener",value:function(e,t,n,r){this.handleListeners.push({name:e,handle:new t(this.engine),triggerName:n,triggerParams:r})}},{key:"getHandleListener",value:function(e,t){var n;return(n=this.handleListeners.find(function(r){return r.name===e&&r.handle.type===t}))===null||n===void 0?void 0:n.handle}},{key:"removeHandleListener",value:function(e,t){for(var n=0;n<this.handleListeners.length;n++)if(this.handleListeners[n].name===e&&this.handleListeners[n].handle.type===t){this.handleListeners[n].handle.destroy(),this.handleListeners.splice(n,1);break}}},{key:"trigger",value:function(e,t){var n=this,r=this.handleListeners.filter(function(o){var l=o.handle;return l.type===e}).some(function(o){var l=o.name,u=o.handle,c=o.triggerName,h=o.triggerParams;if(l==="default"||!u.hotkey)return!1;if(typeof u.hotkey=="function"?u.hotkey(t):qe(u.hotkey,t)){var v,g=[t];return typeof h=="function"&&(g=h(n.engine,t)),(!c||(v=n.engine).trigger.apply(v,[c].concat(gt(g)))!==!1)&&u.trigger(t),!0}return!1});if(r===!1&&this.engine.trigger(e+":default",t)!==!1){var a;(a=this.getHandleListener("default",e))===null||a===void 0||a.trigger(t)}}},{key:"destroy",value:function(){var e=this.engine.container;this.handleListeners=[],e.off("keydown",this.bindKeydown),e.off("keyup",this.bindKeyup)}}]),d}(),Qs="data-placeholder",Yc="am-engine-placeholder",v0=function(){function d(i,e){var t=this;ve(this,d),this.options=void 0,this.node=void 0,this._focused=!1,this._setFocus=function(){t._focused=!0},this._setBlur=function(){t._focused=!1},this.handleClick=function(r){var a=t.options,o=a.engine,l=a.autoAppend,u=a.autoPrepend;if(r.target&&!o.readonly&&ye(o)){var c,h,v,g=U(r.target);if(!g.isEditable())return;var p=U("<p><br /></p>"),b=g.closest("".concat(xt,",").concat(Nr)),y=b.first();y||o.change.initValue(void 0,!0,g);var k=b.last(),E=!1;if(u!==!1&&y&&r.offsetY<(((c=y.get())===null||c===void 0?void 0:c.offsetTop)||0)&&!o.node.isEmptyWidthChild(y)?(b.prepend(p),E=!0):l!==!1&&k&&r.offsetY>(((h=k.get())===null||h===void 0?void 0:h.offsetTop)||0)+(((v=k.get())===null||v===void 0?void 0:v.clientHeight)||0)&&!o.node.isEmptyWidthChild(k)&&(b.append(p),E=!0),E){var _=o.change.range.get();_.select(p,!0).collapse(!1),o.change.apply(_)}}},this.handleFocus=function(){var r=t.options.engine;t.triggerFoucs(),!r.ot.isStopped()&&r.isEmpty()&&r.change.initValue()},this.focusTimeout=null,this.triggerFoucs=function(){var r=t.options.engine;t.focusTimeout&&clearTimeout(t.focusTimeout),t.focusTimeout=setTimeout(function(){if(!t._focused){var a=r.change.range.get();(a.commonAncestorNode.isRoot(r.container)||a.commonAncestorNode.inEditor(r.container))&&(r.change.range.setLastBlurRange(),r.trigger("focus"))}},0)},this.onInput=function(r){var a=t.options.engine;if(!a.readonly&&!(r.target&&a.card.find(U(r.target)))){var o=a.change.range.get();o.handleBr(!0)}},this.onRealtimeChange=function(){var r=t.options.engine;r.isEmpty()?r.showPlaceholder():r.hidePlaceholder()},this.blurTimeout=null,this.docMouseDown=function(r){if(!!r.target){var a=U(r.target),o=t.options.engine;if(t._focused&&a.closest(ki).length===0&&!a.inEditor(o.container)){t.blurTimeout&&clearTimeout(t.blurTimeout);var l=o.change.range.get();t.blurTimeout=setTimeout(function(){var u=o.change.range.get();u.commonAncestorNode.inEditor(o.container)||(o.change.range.setLastBlurRange(l),o.trigger("blur"))},0)}}},this.node=U(i),this.options=e,this._init(),this._focused=document.activeElement!==null&&this.node.equal(document.activeElement);var n=e.engine;n.on("blur",this._setBlur),n.on("focus",this._setFocus)}return we(d,[{key:"_init",value:function(){var e,t=this,n=this.options,r=n.lang,a=n.tabIndex,o=n.className;this.node.attributes((e={},Ge(e,Yn,"true"),Ge(e,"role","textbox"),Ge(e,"autocorrect",r==="en-US"?"on":"off"),Ge(e,"autocomplete","off"),Ge(e,"spellcheck",r==="en-US"?"true":"false"),Ge(e,"data-gramm","false"),e)),a!==void 0&&this.node.attributes("tabindex",a),this.node.hasClass(Bs)||this.node.addClass(Bs),aa&&this.node.addClass(Qp),o!==void 0&&(Array.isArray(o)?o:o.split(/\s+/)).forEach(function(l){l.trim()!==""&&t.node.addClass(l)})}},{key:"init",value:function(){var e=this.options,t=e.engine,n=e.autoAppend,r=e.autoPrepend;this.node.on("input",this.onInput),t.on("realtimeChange",this.onRealtimeChange),n!==!1&&r!==!1&&this.node.on("click",this.handleClick),document.addEventListener("mousedown",this.docMouseDown),this.node.on(aa?"touchstart":"mousedown",this.triggerFoucs),this.node.on("focus",this.handleFocus)}},{key:"isFocus",value:function(){return this._focused}},{key:"getNode",value:function(){return this.node}},{key:"setReadonly",value:function(e){this.node.attributes(Yn,e?"false":"true")}},{key:"showPlaceholder",value:function(){var e=this.options.placeholder;e&&(this.node.attributes(Ge({},Qs,e)),this.node.addClass(Yc))}},{key:"hidePlaceholder",value:function(){this.node.removeAttributes(Qs),this.node.removeClass(Yc)}},{key:"destroy",value:function(){var e=this,t=this.options,n=t.className,r=t.engine;r.on("blur",this._setBlur),r.on("focus",this._setFocus),r.off("realtimeChange",this.onRealtimeChange),document.removeEventListener("mousedown",this.docMouseDown),this.node.removeAttributes(Yn),this.node.removeAttributes("role"),this.node.removeAttributes("autocorrect"),this.node.removeAttributes("autocomplete"),this.node.removeAttributes("spellcheck"),this.node.removeAttributes("data-gramm"),this.node.removeAttributes("tabindex"),this.node.removeAttributes(Qs),this.options.className&&(Array.isArray(n)?n:(n||"").split(/\s+/)).forEach(function(a){a.trim()!==""&&e.node.removeClass(a)}),r.card.closest(this.node)&&this.node.removeClass(Bs),this.node.removeAllEvents()}}]),d}(),g0=function(){function d(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ve(this,d),this.data={},this.locale="zh-CN",this.locale=i,this.data=e}return we(d,[{key:"add",value:function(e){this.data=Qe.exports.merge(this.data,e)}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function a(){for(var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0,u=o;u<t.length;u++){var c=l[t[u]];return lt(c)==="object"?a(u+1,c):c||""}return l};return r(0,this.data[this.locale])}}]),d}(),p0={dnd:{title:"Drag to reposition"},copy:{title:"Copy",success:"Copied successfully",error:"Copy error"},delete:{title:"Delete"},copyAnchor:{title:"Copy anchor link"},link:{placeholder:"Please enter a link or anchor and press Enter to confirm",save:"Apply",edit:"Change",delete:"Remove link",open:"Open link",text:"link"},copyContent:{title:"copy content"},maximize:{title:"Maximize",back:"Back to document"},expand:{title:"Embedded preview"},collapse:{title:"Compact display"},card:{lockAlert:"Please wait for the other user to finish editing"},preferences:{title:"Preferences"},download:{title:"Download"},more:{title:"More"},checkMarkdown:{title:"It is detected that the paste content conforms to the Markdown syntax. Do you need to do style conversion?"},searchEmtpy:{title:"No matching card"}},m0={dnd:{title:"\u62D6\u52A8\u8C03\u6574\u4F4D\u7F6E"},copy:{title:"\u590D\u5236",success:"\u590D\u5236\u6210\u529F",error:"\u590D\u5236\u5931\u8D25"},delete:{title:"\u5220\u9664"},copyAnchor:{title:"\u590D\u5236\u951A\u70B9\u94FE\u63A5"},link:{placeholder:"\u8BF7\u8F93\u5165\u94FE\u63A5\u6216\u951A\u70B9\uFF0C\u56DE\u8F66\u786E\u8BA4",save:"\u4FDD\u5B58",edit:"\u7F16\u8F91",delete:"\u53D6\u6D88\u94FE\u63A5",open:"\u6253\u5F00\u94FE\u63A5",text:"\u94FE\u63A5"},copyContent:{title:"\u590D\u5236\u5185\u5BB9"},maximize:{title:"\u6700\u5927\u5316",back:"\u8FD4\u56DE\u6587\u6863"},expand:{title:"\u5D4C\u5165\u9884\u89C8"},collapse:{title:"\u7D27\u51D1\u5C55\u793A"},card:{lockAlert:"\u8BF7\u7B49\u5F85\u5BF9\u65B9\u7F16\u8F91\u5B8C\u6BD5\u540E\uFF0C\u518D\u8FDB\u5165\u7F16\u8F91"},preferences:{title:"\u8BBE\u7F6E"},download:{title:"\u4E0B\u8F7D"},more:{title:"\u66F4\u591A"},checkMarkdown:{title:"\u68C0\u6D4B\u5230\u7C98\u8D34\u5185\u5BB9\u7B26\u5408 Markdown \u8BED\u6CD5\uFF0C\u662F\u5426\u9700\u8981\u8F6C\u6362\uFF1F"},searchEmtpy:{title:"\u65E0\u5339\u914D\u5361\u7247"}},b0={"en-US":p0,"zh-CN":m0},Si=function d(i,e){ve(this,d),this.editor=void 0,this.options=void 0,this.kind="plugin",this.name=this.constructor.pluginName,this.disabled=void 0,this.editor=i,this.options=e||{};var t=this.options.disabled;this.disabled=t};Si.pluginName=void 0;var Xc=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.kind="element",t.sechamCache=void 0,t.tagName=void 0,t.style=void 0,t.attributes=void 0,t.variable=void 0,t}return we(e,[{key:"init",value:function(){var n=this.editor,r=n.schema,a=n.conversion;r.add(this.schema()),this.conversion&&this.conversion().forEach(function(o){var l=o.from,u=o.to;a.add(l,u)})}},{key:"setStyle",value:function(n){for(var r=this,a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];Le(n)&&(n=U(n)),this.style&&Object.keys(this.style).forEach(function(u){var c,h=r.style[u];lt(h)==="object"&&(h=h.value),(c=h.match(/@var\d/g))===null||c===void 0||c.forEach(function(v){var g=parseInt(v.replace("@var",""),10);h=h.replace(new RegExp(v,"gm"),o[g]||"")}),n.css(u,h)})}},{key:"setAttributes",value:function(n){for(var r=this,a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];Le(n)&&(n=U(n)),this.attributes&&Object.keys(this.attributes).forEach(function(u){var c,h=r.attributes[u];lt(h)==="object"&&(h=h.value),(c=h.match(/@var\d/g))===null||c===void 0||c.forEach(function(v){var g=parseInt(v.replace("@var",""),10);h=h.replace(new RegExp(v,"gm"),o[g]||"")}),n.attributes(u,h)})}},{key:"getStyle",value:function(n){var r=this;Le(n)&&(n=U(n));var a={};return this.style&&this.isSelf(n)&&Object.keys(this.style).forEach(function(o){n=n;var l=o.toLowerCase().indexOf("color")>-1?ar(n.css(o)||"").toHexString():n.css(o),u=r.style[o];lt(u)==="object"&&(l=u.format(l)),l&&(a[o]=l)}),a}},{key:"getAttributes",value:function(n){var r=this;Le(n)&&(n=U(n));var a={};return this.attributes&&this.isSelf(n)&&Object.keys(this.attributes).forEach(function(o){var l=n.attributes(o),u=r.attributes[o];lt(u)==="object"&&(l=u.format(l)),l&&(a[o]=l)}),a}},{key:"isSelf",value:function(n){Le(n)&&(n=U(n));var r=this.schema();return Array.isArray(r)&&(r=r.find(function(a){var o=a.name;return o===n.name})),r?(Array.isArray(this.tagName)?this.tagName.indexOf(n.name)>-1:n.name===this.tagName)&&this.editor.schema.checkNode(n,r.attributes):!1}},{key:"schema",value:function(){var n=this;if(this.sechamCache)return this.sechamCache;var r={};if(this.attributes&&Object.keys(this.attributes).forEach(function(l){var u,c=n.attributes[l];lt(c)==="object"&&(c=c.value),r[l]=c,(u=c.match(/@var\d/g))===null||u===void 0||u.forEach(function(h){if(!n.variable)throw"Please specify the variable type";r[l]=n.variable[h]})}),this.style){var a={};Object.keys(this.style).forEach(function(l){var u,c=n.style[l];lt(c)==="object"&&(c=c.value),(u=c.match(/@var\d/g))===null||u===void 0||u.forEach(function(h){if(!n.variable)throw"Please specify the variable type";a[l]=n.variable[h]})}),r=Pe(Pe({},r),{},{style:a})}if(this.sechamCache={type:this.kind,attributes:r},typeof this.tagName=="string")this.sechamCache.name=this.tagName.toLowerCase();else if(Array.isArray(this.tagName)){var o=[];this.tagName.forEach(function(l){o.push(Pe(Pe({},n.sechamCache),{},{name:l}))}),this.sechamCache=o}return this.sechamCache}},{key:"createElement",value:function(){for(var n=U("<".concat(this.tagName," />")),r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return this.setStyle.apply(this,[n].concat(a)),this.setAttributes.apply(this,[n].concat(a)),n}}]),e}(Si),y0=function(i){return i.kind==="element"},w0=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.kind="block",t.allowIn=void 0,t.disableMark=void 0,t.canMerge=void 0,t}return we(e,[{key:"schema",value:function(){var n=this,r=Zt(Mt(e.prototype),"schema",this).call(this);return Array.isArray(r)?r.map(function(a){return Pe(Pe({},a),{},{allowIn:n.allowIn})}):Pe(Pe({},r),{},{allowIn:this.allowIn,canMerge:this.canMerge})}}]),e}(Xc),Jc=function(i){return i.kind==="block"},k0=function(i){return i.kind==="inline"},E0=`.am-engine ol, .am-engine-view ol, .am-engine ul, .am-engine-view ul {\r
    margin: 0 0 0 3px;\r
    padding: 0;\r
    list-style: none;\r
}\r
\r
.am-engine ol ul,.am-engine-view ol ul,.am-engine ul ul,.am-engine-view ul ul,.am-engine ol ol,.am-engine-view ol ol,.am-engine ul ol,.am-engine-view ul ol {\r
	margin-left: 0;\r
}\r
\r
.am-engine ol ul li,.am-engine-view ol ul li,.am-engine ul ul li,.am-engine-view ul ul li,.am-engine ol ol li,.am-engine-view ol ol li,.am-engine ul ol li,.am-engine-view ul ol li {\r
	margin-left: 2em;\r
}\r
\r
.am-engine ol ol[data-indent-new="0"],.am-engine-view ol ol[data-indent-new="0"],.am-engine ul ol[data-indent-new="0"],.am-engine-view ul ol[data-indent-new="0"],.am-engine ol ol[data-indent-new="3"],.am-engine-view ol ol[data-indent-new="3"],.am-engine ul ol[data-indent-new="3"],.am-engine-view ul ol[data-indent-new="3"],.am-engine ol ol[data-indent-new="6"],.am-engine-view ol ol[data-indent-new="6"],.am-engine ul ol[data-indent-new="6"],.am-engine-view ul ol[data-indent-new="6"] {\r
	list-style-type: decimal;\r
}\r
\r
.am-engine ol ol[data-indent-new="1"],.am-engine-view ol ol[data-indent-new="1"],.am-engine ul ol[data-indent-new="1"],.am-engine-view ul ol[data-indent-new="1"],.am-engine ol ol[data-indent-new="4"],.am-engine-view ol ol[data-indent-new="4"],.am-engine ul ol[data-indent-new="4"],.am-engine-view ul ol[data-indent-new="4"],.am-engine ol ol[data-indent-new="7"],.am-engine-view ol ol[data-indent-new="7"],.am-engine ul ol[data-indent-new="7"],.am-engine-view ul ol[data-indent-new="7"] {\r
	list-style-type: lower-alpha;\r
}\r
\r
.am-engine ol ol[data-indent-new="2"],.am-engine-view ol ol[data-indent-new="2"],.am-engine ul ol[data-indent-new="2"],.am-engine-view ul ol[data-indent-new="2"],.am-engine ol ol[data-indent-new="5"],.am-engine-view ol ol[data-indent-new="5"],.am-engine ul ol[data-indent-new="5"],.am-engine-view ul ol[data-indent-new="5"],.am-engine ol ol[data-indent-new="8"],.am-engine-view ol ol[data-indent-new="8"],.am-engine ul ol[data-indent-new="8"],.am-engine-view ul ol[data-indent-new="8"] {\r
	list-style-type: lower-roman;\r
}\r
\r
.am-engine ol ul[data-indent-new="3"],.am-engine-view ol ul[data-indent-new="3"],.am-engine ul ul[data-indent-new="3"],.am-engine-view ul ul[data-indent-new="3"],.am-engine ol ul[data-indent-new="6"],.am-engine-view ol ul[data-indent-new="6"],.am-engine ul ul[data-indent-new="6"],.am-engine-view ul ul[data-indent-new="6"] {\r
	list-style-type: disc;\r
}\r
\r
.am-engine ol ul[data-indent-new="1"],.am-engine-view ol ul[data-indent-new="1"],.am-engine ul ul[data-indent-new="1"],.am-engine-view ul ul[data-indent-new="1"],.am-engine ol ul[data-indent-new="4"],.am-engine-view ol ul[data-indent-new="4"],.am-engine ul ul[data-indent-new="4"],.am-engine-view ul ul[data-indent-new="4"],.am-engine ol ul[data-indent-new="7"],.am-engine-view ol ul[data-indent-new="7"],.am-engine ul ul[data-indent-new="7"],.am-engine-view ul ul[data-indent-new="7"] {\r
	list-style-type: circle;\r
}\r
\r
.am-engine ol ul[data-indent-new="2"],.am-engine-view ol ul[data-indent-new="2"],.am-engine ul ul[data-indent-new="2"],.am-engine-view ul ul[data-indent-new="2"],.am-engine ol ul[data-indent-new="5"],.am-engine-view ol ul[data-indent-new="5"],.am-engine ul ul[data-indent-new="5"],.am-engine-view ul ul[data-indent-new="5"],.am-engine ol ul[data-indent-new="8"],.am-engine-view ol ul[data-indent-new="8"],.am-engine ul ul[data-indent-new="8"],.am-engine-view ul ul[data-indent-new="8"] {\r
	list-style-type: square;\r
}\r
\r
.am-engine li,.am-engine-view li {\r
	margin-left: 23px;\r
    position: relative;\r
}\r
\r
.am-engine ol,.am-engine-view ol,.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"] {\r
	list-style-type: decimal;\r
}\r
\r
.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"] {\r
	list-style-type: lower-alpha;\r
}\r
\r
.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"] {\r
	list-style-type: lower-roman;\r
}\r
\r
.am-engine ul,.am-engine-view ul,.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\r
	list-style-type: disc;\r
}\r
\r
.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\r
	list-style-type: circle;\r
}\r
\r
.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\r
	list-style-type: square;\r
}\r
\r
.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"] {\r
	padding-left: 2em;\r
}\r
\r
.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"] {\r
	padding-left: 4em;\r
}\r
\r
.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"] {\r
	padding-left: 6em;\r
}\r
\r
.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"] {\r
	padding-left: 8em;\r
}\r
\r
.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"] {\r
	padding-left: 10em;\r
}\r
\r
.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\r
	padding-left: 12em;\r
}\r
\r
.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\r
	padding-left: 14em;\r
}\r
\r
.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\r
	padding-left: 16em;\r
}\r
\r
.am-engine .data-list,.am-engine-view .data-list {\r
	color: #262626;\r
	text-indent: 0;\r
}\r
\r
.am-engine .data-list-item,.am-engine-view .data-list-item {\r
    line-height: inherit;\r
    position: relative;\r
    list-style: none;\r
    text-indent: 0;\r
}`;hn(E0);var Lr=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.kind="mark",t.copyOnEnter=void 0,t.followStyle=!0,t.combineValueByWrap=!1,t.mergeLeval=1,t}return we(e,[{key:"execute",value:function(){var n=this.editor;if(!!ye(n)){var r=n.change,a=n.mark,o=this.createElement.apply(this,arguments),l=this.isTrigger?this.isTrigger.apply(this,arguments):!this.queryState();if(l){if(!this.followStyle&&r.range.get().collapsed)return;a.wrap(o)}else a.unwrap(o)}}},{key:"queryState",value:function(){var n=this,r=this.editor;if(!!ye(r)){var a=r.change;if(!this.style&&!this.attributes)return a.marks.some(function(l){return l.name===n.tagName});var o=[];return a.marks.forEach(function(l){o.push.apply(o,gt(Object.values(n.getStyle(l)))),o.push.apply(o,gt(Object.values(n.getAttributes(l))))}),o.length===0?void 0:o}}},{key:"schema",value:function(){var n=Zt(Mt(e.prototype),"schema",this).call(this);return Array.isArray(n)?n.map(function(r){return Pe({},r)}):Pe({},n)}}]),e}(Xc),el=function(i){return i.kind==="mark"},x0=function(){function d(i){ve(this,d),this.data={},this.components={},this.editor=void 0,this.editor=i}return we(d,[{key:"init",value:function(e,t){var n=this;e.forEach(function(r){n.data[r.pluginName]=r;var a=new r(n.editor,t[r.pluginName]);n.components[r.pluginName]=a,a.init&&a.init()})}},{key:"add",value:function(e,t){this.data[e.pluginName]=e,t=Pe({},t);var n=this.editor;if(ye(n)){var r=new e(n,t);r.init&&r.init(),this.components[e.pluginName]=r}}},{key:"findPlugin",value:function(e){var t=this.components[e];if(!!t)return t}},{key:"findElementPlugin",value:function(e){var t=this.findPlugin(e);if(!!t&&y0(t))return t}},{key:"findMarkPlugin",value:function(e){var t=this.findPlugin(e);if(!!t&&el(t))return t}},{key:"findInlinePlugin",value:function(e){var t=this.findPlugin(e);if(!!t&&k0(t))return t}},{key:"findBlockPlugin",value:function(e){var t=this.findPlugin(e);if(!!t&&Jc(t))return t}},{key:"each",value:function(e){var t=this;Object.keys(this.data).forEach(function(n,r){e&&e(n,t.data[n],r)})}},{key:"destroy",value:function(){var e=this;Object.keys(this.components).forEach(function(t){var n=e.components[t];n.destroy&&n.destroy()})}}]),d}(),C0=function(){function d(i){ve(this,d),this.editor=void 0,this.editor=i}return we(d,[{key:"queryEnabled",value:function(e){var t=this.editor,n=t.plugin.components[e];if(!n||n.disabled||(!ye(t)||t.readonly||!t.isFocus())&&n.disabled!==!1)return!1;var r=t.card;return r.active?!!((el(n)||n.kind==="plugin")&&r.active.executeMark||r.active.isEditable):!0}},{key:"queryState",value:function(e){var t=this.editor,n=t.plugin.components[e];if(n&&n.queryState)try{for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return n.queryState(a)}catch(l){t.messageError("command-query",l)}}},{key:"handleExecuteBefore",value:function(){var e,t=this.editor;if(ye(t)){e=t.change;var n=e.range.get();if(!n.commonAncestorNode.isRoot()&&!n.commonAncestorNode.inEditor()){var r=n.commonAncestorNode.closest(ki),a=void 0;if(r.length>0){var o=r.attributes(Rc);if(o){var l=t.card;a=l.find(o),a&&l.select(a)}}a||t.focus()}e.cacheRangeBeforeCommand()}return e}},{key:"execute",value:function(e){var t=this.editor,n=t.plugin.components[e];if(n&&n.execute){for(var r=this.handleExecuteBefore(),a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];t.trigger.apply(t,["beforeCommandExecute",e].concat(o));try{var u=n.execute.apply(n,o);return r==null||r.combinText(),r==null||r.onSelect(),t.trigger.apply(t,["afterCommandExecute",e].concat(o)),u}catch(c){t.messageError("command-execute",c)}}}},{key:"executeMethod",value:function(e,t){var n=this.editor,r=n.plugin.components[e];if(r&&r[t])try{for(var a=ye(n)?n.change:null,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];var c=r[t].apply(r,l);return a==null||a.combinText(),c}catch(h){n.messageError("command-excute-method",h)}}}]),d}(),_0=["blocks","inlines","marks","globals"],A0=function(){function d(){ve(this,d),this._all=[],this._typeMap={},this._invalidKeys=[],this._tagMap={blocks:[],inlines:[],marks:[]},this.data={blocks:[],inlines:[],marks:[],globals:{}}}return we(d,[{key:"add",value:function(e){var t=this;e=Qe.exports.cloneDeep(e),Array.isArray(e)||(e=[e]),e.forEach(function(u){T0(u)?(u.attributes&&Object.keys(u.attributes).forEach(function(c){!t.data.globals[u.type]||(c==="style"?Object.keys(u.attributes.style).forEach(function(h){t.data.globals[u.type][c]&&t.data.globals[u.type][c][h]===u.attributes.style[h]&&delete u.attributes.style[h]}):t.data.globals[u.type][c]===u.attributes[c]&&delete u.attributes[c])}),u.type==="block"?t.data.blocks.push(u):u.type==="inline"?t.data.inlines.push(u):u.type==="mark"&&t.data.marks.push(u)):t.data["".concat(u.type,"s")]&&(t.data.globals[u.type]=Qe.exports.merge(Object.assign({},t.data.globals[u.type]),u.attributes))}),this.updateTagMap();var n=function(c){var h=c.attributes||{},v=h.style||{},g=0,p=0;return Object.keys(h).forEach(function(b){var y=h[b];tl(y)&&y.required&&g++}),Object.keys(v).forEach(function(b){var y=v[b];tl(y)&&y.required&&p++}),[g,p]},r=this.data,a=r.blocks,o=r.marks,l=r.inlines;this._all=[].concat(gt(a),gt(o),gt(l)).sort(function(u,c){var h=n(u),v=ea(h,2),g=v[0],p=v[1],b=n(c),y=ea(b,2),k=y[0],E=y[1];return g>k?-1:g===k?p===E?0:p>E?-1:1:1})}},{key:"updateTagMap",value:function(){var e=this;this._tagMap.marks=[],this.data.marks.forEach(function(t){e._tagMap.marks.includes(t.name)||e._tagMap.marks.push(t.name)}),this._tagMap.blocks=[],this.data.blocks.forEach(function(t){e._tagMap.blocks.includes(t.name)||e._tagMap.blocks.push(t.name)}),this._tagMap.inlines=[],this.data.inlines.forEach(function(t){e._tagMap.inlines.includes(t.name)||e._tagMap.inlines.push(t.name)})}},{key:"getTags",value:function(e){return this._tagMap[e]}},{key:"remove",value:function(e){var t=this._all.findIndex(function(r){return Qe.exports.isEqual(r,e)});t>-1&&this._all.splice(t,1);var n=this.data["".concat(e.type,"s")];n&&(t=n.findIndex(function(r){return Qe.exports.isEqual(r,e)}),t>-1&&n.splice(t,1)),this._typeMap={},this.updateTagMap()}},{key:"clone",value:function(){var e=new d;return e._all=Qe.exports.cloneDeep(this._all),e._typeMap=Qe.exports.cloneDeep(this._typeMap),e._tagMap=Qe.exports.cloneDeep(this._tagMap),e.data=Qe.exports.cloneDeep(this.data),e}},{key:"find",value:function(e){var t=this,n=[];return _0.forEach(function(r){if(r!=="globals"){var a=t.data[r].filter(e);n.push.apply(n,gt(a))}}),n}},{key:"getType",value:function(e,t){var n=Le(e)?e:e[0];if(!(!n||n.nodeType!==Node.ELEMENT_NODE)){var r=n.getAttribute(Oe);if(r?r=r.split("-")[0]:r=Xs(n,!1),!this._invalidKeys.includes(r)){if(!!this._typeMap[r]&&(!t||t(this._typeMap[r])))return this._typeMap[r].type;var a=this.getRule(n,t);return a?this._typeMap[r]=a:this._invalidKeys.push(r),a==null?void 0:a.type}}}},{key:"getRule",value:function(e,t){var n=this,r=Le(e)?e:e[0];return t=t||function(a){return a.name===r.localName},this._all.find(function(a){return t(a)&&n.checkNode(r,a.attributes)})}},{key:"checkNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Le(e)?e:e[0];for(var r in t){var a;if(r!=="style"){var o=t;if(!o[r]||!this.checkValue(o,r,(a=n.getAttribute(r))!==null&&a!==void 0?a:void 0))return!1}}var l=xi(n.getAttribute("style")||""),u=t.style||{};for(var c in u)if(!u[c]||!this.checkValue(u,c,l[c]))return!1;return!0}},{key:"checkValue",value:function(e,t,n,r){if(!e[t])return!1;var a=e[t];if(tl(a)){if(n===void 0)return!a.required;a=a.value}else if(!r||n===void 0)return!0;if(typeof a=="string"&&a.charAt(0)==="@")switch(a){case"@number":a=/^-?\d+(\.\d+)?$/;break;case"@length":a=/^-?\d+(\.\d+)?(\w*|%)$/;break;case"@color":a=/^(rgb(.+?)|#\w{3,6}|\w+)$/i;break;case"@url":a=um;break}return typeof a=="string"?a==="*"?!0:t==="class"?(n||"").split(/\s+/).some(function(o){return o.trim()===a}):a===n:Array.isArray(a)?t==="class"?(n||"").split(/\s+/).every(function(o){return o.trim()===""?!0:a.indexOf(o.trim())>-1}):a.indexOf(n)>-1:lt(a)==="object"&&typeof a.test=="function"?t==="class"?(n||"").split(/\s+/).every(function(o){return o.trim()===""?!0:a.test(o.trim())}):a.test(n||""):typeof a=="function"?a(n):!0}},{key:"filterStyles",value:function(e,t,n){var r=this;Object.keys(e).forEach(function(a){var o;(!(!((o=t.attributes)===null||o===void 0)&&o.style)||!r.checkValue(t.attributes.style,a,e[a],!0))&&(n&&n(a,e[a]),delete e[a])})}},{key:"filterAttributes",value:function(e,t,n){var r=this;Object.keys(e).forEach(function(a){(!t.attributes||!r.checkValue(t.attributes,a,e[a],!0))&&(n&&n(a,e[a]),delete e[a])})}},{key:"filter",value:function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=this.getRule(e);if(!!a){var o=this.data.globals,l=o[a.type]?a.type:void 0,u=Object.assign({},a,{attributes:Qe.exports.merge({},a.attributes,l?o[l]:{})});this.filterAttributes(t,u,r?function(c){return e.removeAttributes(c)}:void 0),this.filterStyles(n,u,r?function(c){return e.css(c,"")}:void 0)}}},{key:"closest",value:function(e){var t=this,n=e;return this.data.blocks.forEach(function(r){if(r.name===e){var a=r;a.allowIn&&(a.allowIn.forEach(function(o){t.isAllowIn(o,n)&&(n=o)}),n=t.closest(n))}}),n}},{key:"isAllowIn",value:function(e,t){return e==="p"?!1:this.data.blocks.some(function(n){if(n.name===t){var r=n;if(r.allowIn&&r.allowIn.indexOf(e)>-1)return!0}})}},{key:"addAllowIn",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"p",n=this.data.blocks.find(function(r){return r.name===t});n.allowIn||(n.allowIn=[]),n.allowIn.includes(e)||n.allowIn.push(e)}},{key:"getAllowInTags",value:function(){var e=[];return this.data.blocks.forEach(function(t){var n=t;n.allowIn&&n.allowIn.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),e}},{key:"getCanMergeTags",value:function(){var e=[];return this.data.blocks.forEach(function(t){var n=t;n.canMerge===!0&&e.indexOf(n.name)<0&&e.push(n.name)}),e}}]),d}(),tl=function(i){return i.required!==void 0},T0=function(i){return!!i.name},S0=function(){function d(i){ve(this,d),this.editor=void 0,this.data=[],this.editor=i}return we(d,[{key:"getData",value:function(){return this.data}},{key:"clone",value:function(){var e=Qe.exports.cloneDeep(this.data),t=new d(this.editor);return t.data=e,t}},{key:"add",value:function(e,t){this.data.push({from:e,to:t})}},{key:"transform",value:function(e,t){var n=e.name,r=e.attributes(),a=xi(r.style||""),o=!1;delete r.style,e.isCursor()&&(n=r[Ce].toLowerCase(),r={},a={});var l=this.data.find(function(u){if(!(t&&!t(u))){var c=u.from,h=u.to,v=!1;if(typeof c=="string")v=c===n;else if(typeof c=="function")v=c(n,a,r);else{var g=Object.keys(c);v=g.indexOf(n)>=0&&g.some(function(k){var E=c[k];return Object.keys(E.style||{}).every(function(_){var A=E.style[_];return!!a[_]&&Array.isArray(A)?A.indexOf(a[_])>-1:A===a[_]})&&Object.keys(E.attributes||{}).every(function(_){var A=E.attributes[_];return!!a[_]&&Array.isArray(A)?A.indexOf(a[_])>-1:A===a[_]})})}if(v)if(typeof h=="string")n=h,a={},r={};else{var p=typeof h=="function"?h(n,a,r):h,b=p;if(p.hasOwnProperty("replace")){var y=p;b=y.node,o=y.replace}n=b.name,a=b.css(),r=b.attributes()}return v}});return l?{rule:l,node:{name:n,style:a,attributes:r},replace:o}:void 0}}]),d}(),N0=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"insertNewline",value:function(e,t,n){var r=this.engine.change,a=U("<p><br /></p>");this.engine.nodeId.generate(a),n?t.root.before(a):t.root.after(a),e.select(a,!0),e.collapse(!1),r.range.select(e)}},{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.card,a=n.range.get(),o=r.find(a.startNode);if(!o)return!0;if(o.type===Rt.INLINE){var l=a.startNode.closest(zt);l.length>0&&(a.select(o.root),a.collapse(!0),n.range.select(a));var u=a.startNode.closest(Ut);u.length>0&&(a.select(o.root),a.collapse(!1),n.range.select(a))}else{var c=a.startNode.closest(zt);if(c.length>0){e.preventDefault();var h=o.root.prev();return!h||h.isCard()?(r.focusPrevBlock(o,a,!0),n.range.select(a)):this.insertNewline(a,o,!0),!1}var v=a.startNode.closest(Ut);if(v.length>0){e.preventDefault();var g=o.root.next();return!g||g.isCard()?(r.focusNextBlock(o,a,!0),n.range.select(a)):this.insertNewline(a,o,!1),!1}}return!0}}]),d}(),R0=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"focusPrevBlock",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=this.engine.change,r=n.range.get();e=e||this.engine.block.closest(r.startNode);var a=e.prev();if(!!a){if(a.isCard()){var o=this.engine.card.find(a);o&&o.focus(r);return}if(this.engine.node.isList(a)&&(a=a.last()),!!a){if(t&&this.engine.node.isEmptyWithTrim(a)){a.remove();return}r.select(a,!0),r.collapse(!1),n.range.select(r.shrinkToTextNode())}}}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get().cloneRange().shrinkToElementNode().shrinkToTextNode();if(!!n.collapsed){var r=this.engine.card.find(n.startNode);if(!r){var a=n.getPrevNode(),o=a==null?void 0:a.parent();if(!e.isDelete&&a&&a.isCard()&&(!o||!this.engine.node.isCustomize(o))){e.preventDefault();var l=n.cloneRange();return l.setStartBefore(a),l.collapse(!0),this.engine.card.remove(a),t.range.select(l.shrinkToTextNode()),l.handleBr(),!1}return!0}if(e.isDelete)return!0;if(r.type===Rt.INLINE){var u=n.startNode.closest(zt);if(u.length>0){var c=r.root.prev();if(c){var h=this.engine.card.find(c);if(h)return this.engine.card.remove(h.id),n.handleBr(),!1;n.select(r.root).collapse(!0)}else return e.preventDefault(),t.mergeAfterDelete(),!1;t.range.select(n)}var v=n.startNode.closest(Ut);if(v.length>0){e.preventDefault();var g=n.cloneRange();return g.setStartBefore(r.root),g.collapse(!0),this.engine.card.remove(r.id),t.range.select(g.shrinkToTextNode()),g.handleBr(),!1}}else{var p=n.startNode.closest(zt);if(p.length>0){var b;return e.preventDefault(),!((b=r.root.parent())===null||b===void 0)&&b.inEditor()?t.unwrap(r.root.parent()):this.focusPrevBlock(r.root,!0),!1}var y=n.startNode.closest(Ut);if(y.length>0)return e.preventDefault(),this.focusPrevBlock(r.root),this.engine.card.remove(r.id,!1),t.isEmpty()&&t.initValue(),!1}return this.engine.trigger("keydown:backspace",e)!==!1}}}]),d}(),D0=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"inline",value:function(e,t){var n=this.engine.change,r=n.range.get().cloneRange(),a=e.constructor.singleSelectable,o=r.commonAncestorNode.closest(zt);if(o.length>0){var l=e.root.prev();return l?(r.setStartBefore(e.root[0]),r.collapse(!0)):e.focus(r,!0),n.range.select(r),!0}var u=r.commonAncestorNode.closest(Ut),c=o.length===0&&u.length===0;if(u.length>0||c){if(t.preventDefault(),c){var h;e.select(!1),(h=e.toolbarModel)===null||h===void 0||h.hide(),e.activate(!1)}else if(r.collapsed){var v=this.engine.card.find(r.startNode);if(v&&v.onSelectLeft)return v.onSelectLeft(t)}if(!c&&a!==!1)this.engine.card.select(e,t);else{var g;e.focus(r,!0),e.select(!1),(g=e.toolbarModel)===null||g===void 0||g.hide(),n.range.select(r)}return!1}return!0}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=o.commonAncestorNode.closest(zt);if(l.length>0){var u=e.root.prev();return u?(t.preventDefault(),a.focusPrevBlock(e,o,!1),r.range.select(o),!1):void 0}var c=o.commonAncestorNode.closest(Ut),h=l.length===0&&c.length===0;if(h){var v;e.select(!1),(v=e.toolbarModel)===null||v===void 0||v.hide(),e.activate(!1)}if(c.length>0){if(o.collapsed){var g=a.find(o.startNode);if(g&&g.onSelectLeft)return g.onSelectLeft(t)}return t.preventDefault(),a.select(e,t),!1}if(a.getSingleSelectedCard(o)){var p;return t.preventDefault(),e.focus(o,!0),e.select(!1),(p=e.toolbarModel)===null||p===void 0||p.hide(),r.range.select(o),!1}return!0}},{key:"fincPrevCard",value:function(e){if(!e.collapsed)return null;var t=e.startNode,n=e.startOffset;if(t.isText()&&n===0){var r=t.prevElement();if(r&&r.isCard())return this.engine.card.find(r)}return null}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get(),r=this.engine.card.getSingleCard(n);if(!r){var a=this.fincPrevCard(n);return a?(e.preventDefault(),a.focus(n,!1),t.range.select(n),!1):!0}return qe("shift+left",e)?!1:r.type===Rt.INLINE?this.inline(r,e):this.block(r,e)}}]),d}(),O0=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"inline",value:function(e,t){var n=this.engine.change,r=n.range.get(),a=e.constructor.singleSelectable,o=r.commonAncestorNode.closest(zt),l=r.commonAncestorNode.closest(Ut),u=o.length===0&&l.length===0;if(o.length>0||u){if(t.preventDefault(),u){var c;e.select(!1),e.activate(!1),(c=e.toolbarModel)===null||c===void 0||c.hide()}else if(r.collapsed){var h=this.engine.card.find(r.startNode);if(h&&h.onSelectRight)return h.onSelectRight(t)}if(!u&&a!==!1)this.engine.card.select(e,t);else{var v;e.focus(r,!1),e.select(!1),(v=e.toolbarModel)===null||v===void 0||v.hide(),n.range.select(r)}return!1}if(l.length>0){var g=e.root.next();g?(r.setEndAfter(e.root[0]),r.collapse(!1)):e.focus(r,!1),n.range.select(r)}return!0}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=o.commonAncestorNode.closest(zt);if(l.length>0){if(o.collapsed){var u=this.engine.card.find(o.startNode);if(u&&u.onSelectRight)return u.onSelectRight(t)}return t.preventDefault(),a.select(e,t),!1}var c=o.commonAncestorNode.closest(Ut),h=l.length===0&&c.length===0;if(h){var v;e.select(!1),(v=e.toolbarModel)===null||v===void 0||v.hide(),e.activate(!1)}if(c.length>0){var g=e.root.next();return g?(t.preventDefault(),a.focusNextBlock(e,o,!1),r.range.select(o),!1):void 0}if(this.engine.card.getSingleSelectedCard(o)){var p;return t.preventDefault(),e.focus(o,!1),e.select(!1),(p=e.toolbarModel)===null||p===void 0||p.hide(),r.range.select(o),!1}return!0}},{key:"fincNextCard",value:function(e){if(!e.collapsed)return null;var t=e.startNode,n=e.startOffset;if(t.isText()){var r=t.text();if(r.length===n){var a=t.nextElement();if(a&&a.isCard())return this.engine.card.find(a)}}return null}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get(),r=this.engine.card.getSingleCard(n);if(!r){var a=this.fincNextCard(n);return a?(e.preventDefault(),a.focus(n,!0),t.range.select(n),!1):!0}if(!qe("shift+right",e))return r.type===Rt.INLINE?this.inline(r,e):this.block(r,e)}}]),d}(),q0=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"inline",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=e.root.prev();if(l)return t.preventDefault(),a.focusPrevBlock(e,o,!1),r.range.select(o),!1}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=e.root.prev();if(l)return t.preventDefault(),a.focusPrevBlock(e,o,!1),r.range.select(o),!1}},{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.card,a=t.block,o=n.range.get();if(o.collapsed){var l=a.closest(o.startNode),u=l.prev();if(u!=null&&u.isCard()){var c=r.find(u);if(c&&c.onSelectUp)return c.onSelectUp(e)}}var h=r.getSingleCard(o);if(!h)return!0;if(!qe("shift+up",e))return h.type===Rt.INLINE?this.inline(h,e):this.block(h,e)}}]),d}(),I0=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"inline",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=e.root.next();if(l)return t.preventDefault(),a.focusNextBlock(e,o,!1),r.range.select(o),!1}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=e.root.next();if(l)return t.preventDefault(),a.focusNextBlock(e,o,!1),r.range.select(o),!1}},{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.block,a=t.card,o=n.range.get(),l=a.getSingleCard(o);if(o.collapsed){var u=r.closest(o.startNode),c=u.next();if(c!=null&&c.isCard()){var h=a.find(c);if(h&&h.onSelectDown)return h.onSelectDown(e)}}return!l||qe("shift+down",e)?!0:l.type===Rt.INLINE?this.inline(l,e):this.block(l,e)}}]),d}(),L0=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"block",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=o.commonAncestorNode.closest(zt);if(l.length>0)return!t.metaKey&&!t.ctrlKey&&(a.focusPrevBlock(e,o,!0),r.range.select(o)),!0;var u=o.commonAncestorNode.closest(Ut);return u.length>0&&!t.metaKey&&!t.ctrlKey&&(a.focusNextBlock(e,o,!0),r.range.select(o)),!0}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get(),r=this.engine.card.getSingleCard(n);return r&&r.type===Rt.BLOCK?this.block(r,e):!0}}]),d}(),B0=`.am-engine .card-selected [data-card-element="center"].data-card-background-selected {\r
    background: rgba(27, 162, 227, 0.2);\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected {\r
    outline: 2px solid #1890FF;\r
    border-radius: 2px;\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected::-moz-selection {\r
    background: transparent;\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected::selection {\r
    background: transparent;\r
}\r
\r
.am-engine-view [data-card-element="center"] .data-card-loading,.am-engine [data-card-element="center"] .data-card-loading {\r
    display: inline-block;\r
    font-style: normal;\r
    vertical-align: -0.125em;\r
    text-align: center;\r
    text-transform: none;\r
    line-height: 0;\r
    text-rendering: optimizeLegibility;\r
    -webkit-font-smoothing: antialiased;\r
    margin-right: 5px;\r
    padding: 16px;\r
    width: 100%;\r
}\r
\r
.am-engine-view [data-card-element="center"] .data-card-loading .data-card-spin,.am-engine [data-card-element="center"] .data-card-loading .data-card-spin {\r
    display: inline-block;\r
    -webkit-animation: loadingCircle 1s infinite linear;\r
    animation: loadingCircle 1s infinite linear;\r
}`;hn(B0);var M0=function(){function d(i){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;ve(this,d),this.classes=void 0,this.components=void 0,this.lazyRender=void 0,this.asyncComponents=[],this.editor=void 0,this.renderTimeout=void 0,this.renderAsyncComponents=_n(ht.mark(function n(){var r;return ht.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e.renderTimeout&&clearTimeout(e.renderTimeout),r=e.editor,e.renderTimeout=setTimeout(function(){var l=e.asyncComponents.concat();l.forEach(function(){var u=_n(ht.mark(function c(h){var v,g;return ht.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:(h.root.length===0||r.root.inViewport(h.root,!0)&&r.trigger("card:async-render-component",h)!==!1)&&(e.asyncComponents.splice(e.asyncComponents.findIndex(function(y){return y===h}),1),h.root.length>0&&h.loading&&(h.destroy&&h.destroy(),h.getCenter().empty(),e.renderComponent(h),ye(r)&&r.readonly&&!r.ot.isRemote&&(!((v=r.ot.doc)===null||v===void 0)&&v.type?r.ot.doc.data=Xn(r.container):(g=r.ot.doc)===null||g===void 0||g.create(Xn(r.container)))));case 1:case"end":return b.stop()}},c)}));return function(c){return u.apply(this,arguments)}}())},50);case 3:case"end":return o.stop()}},n)})),this.classes={},this.components=[],this.editor=i,this.lazyRender=t}return we(d,[{key:"active",get:function(){return this.components.find(function(e){return e.activated})}},{key:"length",get:function(){return this.components.length}},{key:"init",value:function(e){var t=this,n,r,a=this.editor;if(ye(a)){var o,l,u,c,h,v,g,p=a.typing,b=new N0(a);(o=p.getHandleListener("enter","keydown"))===null||o===void 0||o.on(function(C){return b.trigger(C)});var y=new R0(a);(l=p.getHandleListener("backspace","keydown"))===null||l===void 0||l.on(function(C){return y.trigger(C)});var k=new D0(a);(u=p.getHandleListener("left","keydown"))===null||u===void 0||u.on(function(C){return k.trigger(C)});var E=new O0(a);(c=p.getHandleListener("right","keydown"))===null||c===void 0||c.on(function(C){return E.trigger(C)});var _=new q0(a);(h=p.getHandleListener("up","keydown"))===null||h===void 0||h.on(function(C){return _.trigger(C)});var A=new I0(a);(v=p.getHandleListener("down","keydown"))===null||v===void 0||v.on(function(C){return A.trigger(C)});var x=new L0(a);(g=p.getHandleListener("default","keydown"))===null||g===void 0||g.on(function(C){return x.trigger(C)})}e.forEach(function(C){t.classes[C.cardName]=C}),this.lazyRender&&(window.addEventListener("resize",this.renderAsyncComponents),(n=a.scrollNode)===null||n===void 0||(r=n.get())===null||r===void 0||r.addEventListener("scroll",this.renderAsyncComponents),window.addEventListener("scroll",this.renderAsyncComponents),a.on("card:async-render",this.renderAsyncComponents))}},{key:"add",value:function(e){this.classes[e.cardName]=e}},{key:"each",value:function(e){this.components.every(function(t,n){return!(e&&e(t,n)===!1)})}},{key:"closest",value:function(e,t){if(Le(e)&&(e=U(e)),!e.isCard()){var n=e.closest(yt,function(r){if(!(r&&t?U(r).isRoot():U(r).isEditable()))return r.parentNode||void 0});if(!n||n.length===0)return;e=n}return e}},{key:"find",value:function(e,t){if(typeof e!="string"){var n=this.closest(e,t);if(!n)return;e=n}var r=function(l){Le(l)&&(l=U(l));var u=l.attributes(cr);return Bc(u)},a=this.components.filter(function(o){return typeof e=="string"?o.id===e:o.root.name!==(Le(e)?e.nodeName.toString().toLowerCase():e.name)?!1:o.root.equal(e)||o.id===r(e).id});if(a.length!==0)return a[0]}},{key:"findBlock",value:function(e){if(Le(e)&&(e=U(e)),!!e.get()){var t=e.parent();if(!!t){var n=this.find(t);if(!!n)return n.type===Rt.BLOCK?n:this.findBlock(n.root)}}}},{key:"getSingleCard",value:function(e){var t=this.find(e.commonAncestorNode);return t||(t=this.getSingleSelectedCard(e)),t}},{key:"getSingleSelectedCard",value:function(e){var t=e.findElements(),n=t[0];if(t.length===1&&n){var r=U(n);if(r.isCard())return this.find(r)}}},{key:"insertNode",value:function(e,t){var n=t.type==="inline",r=this.editor;!e.collapsed&&ye(r)&&r.change.delete(e),this.gc();var a=r.inline,o=r.block,l=r.node,u=[];if(n){if(ye(r)&&t.executeMark){u=r.change.marks.map(function(y){return y.clone()});var c=r.card.find(e.startNode);if(c!=null&&c.queryMarks){var h;(h=u).push.apply(h,gt(c.queryMarks()))}}a.insert(t.root,e)}else o.insert(t.root,e,function(y){for(var k=y.parent();k&&!k.isEditable();){y=k;var E=k.parent();if(E&&l.isBlock(E))k=E;else break}return y},!0);this.components.push(t),t.focus(e);var v=t.root.parent();!n&&v&&v.inEditor()&&l.isBlock(v)&&o.unwrap(v,e);for(var g=arguments.length,p=new Array(g>2?g-2:0),b=2;b<g;b++)p[b-2]=arguments[b];return this.renderComponent.apply(this,[t].concat(p)),t.didInsert&&t.didInsert(),u.forEach(function(y){t.executeMark(y,!0)}),t}},{key:"removeNode",value:function(e){e.destroy&&e.destroy(),this.removeComponent(e),e.root.remove()}},{key:"updateNode",value:function(e,t){e.destroy&&e.destroy();var n=e.getCenter();n==null||n.empty(),e.setValue(t);for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];this.renderComponent.apply(this,[e].concat(a)),e.didUpdate&&e.didUpdate()}},{key:"replaceNode",value:function(e,t,n){var r=this.classes[t];if(!r)throw"".concat(t,": This card does not exist");var a=(n==null?void 0:n.type)||r.cardType,o=e.attributes(Oe),l=js("<card ".concat(o!=null?o:"".concat(Oe,'="').concat(o,'"'),' type="').concat(a,'" name="').concat(t,'" value="').concat(lm(n),'"></card>')),u=U(l);return e.before(u),u.append(e),u}},{key:"activate",value:function(e,t,n){var r=this.editor;if(!(!ye(r)||r.readonly)){var a=e.getRoot(),o=this.active;if(!a.get()||r.container.equal(a)){var l=this.find(e),u=e.closest(xt);if(!l&&u.length>0){var c=u.parent();l=c?this.find(c):void 0}var h=l?this.findBlock(l.root):void 0;if(h&&(l=h),l&&l.isCursor(e))if(u.length>0){var v=u.parent();l=v?this.find(v):void 0}else l=void 0;var g=l&&o&&o.root.equal(l.root);if(o&&!g){var p;(p=o.toolbarModel)===null||p===void 0||p.hide(),o.select(!1),o.activate(!1)}if(l){if(l.activatedByOther)return;if(g)l.isEditable?l.select(!1):t===Ai.MOUSE_DOWN&&e.name!=="input"&&l.root.find(".data-drag-image").length===0&&(n==null||n.preventDefault());else{var b;l.constructor.singleSelectable!==!1&&(t!==Ai.CLICK||ye(r))&&this.select(l,n),!l.isEditable&&l.constructor.autoSelected!==!1&&l.select(!l.isEditable),l.activate(!0),(b=l.toolbarModel)===null||b===void 0||b.show(n)}r.change.onSelect()}}else if(o){var y;(y=o.toolbarModel)===null||y===void 0||y.hide(),o.select(!1),o.activate(!1)}}}},{key:"select",value:function(e,t){var n=this.editor;if(!!ye(n)&&e.constructor.singleSelectable!==!1&&(e.type!==Rt.BLOCK||!e.activated)){var r=n.change.range.get().cloneRange();if(r.startNode.closest(xt).length>0&&(!t||t instanceof MouseEvent&&(!t.target||!this.closest(t.target,!1)))||e.isEditable||e.isMaximize)return;t==null||t.preventDefault();var a=e.root,o=a.parent(),l=o.children().toArray().findIndex(function(u){return u.equal(a)});r.setStart(o,l),r.setEnd(o,l+1),n.change.range.select(r)}}},{key:"focus",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=this.editor;if(!!ye(n)){var r=n.change,a=n.container,o=n.scrollNode,l=r.range.get();e.focus(l,t),r.range.select(l),this.activate(l.startNode,Ai.MOUSE_DOWN),r.onSelect(),o&&l.scrollIntoViewIfNeeded(a,o)}}},{key:"insert",value:function(e,t){var n=this.editor;if(!ye(n))throw"Engine not found";for(var r=this.create(e,{value:t}),a=n.change,o=a.range.toTrusty(),l=arguments.length,u=new Array(l>2?l-2:0),c=2;c<l;c++)u[c-2]=arguments[c];var h=this.insertNode.apply(this,[o,r].concat(u));return a.change(),h}},{key:"update",value:function(e,t){var n=this.editor;if(!!ye(n)){var r=n.change,a=this.find(e);if(a){for(var o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];this.updateNode.apply(this,[a,t].concat(l));var c=r.range.get();a.focus(c,!1),r.change()}}}},{key:"replace",value:function(e,t,n){this.remove(e.root);for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return this.insert.apply(this,[t,n].concat(a))}},{key:"remove",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this.editor;if(!!ye(n)){var r=n.change,a=n.list,o=n.node,l=r.range.get(),u=this.find(e);if(!!u){u.type===Rt.INLINE?(l.setEndAfter(u.root[0]),l.collapse(!1)):this.focusPrevBlock(u,l,t);var c=u.root.parent();this.removeNode(u),a.addBr(l.startNode),c&&o.isEmpty(c)&&!n.ot.isStopped&&(c.isEditable()?(o.html(c,"<p><br /></p>"),l.select(c,!0),l.shrinkToElementNode(),l.collapse(!1)):(o.html(c,"<br />"),l.select(c,!0),l.collapse(!1))),t?r.apply(l):(r.range.select(l),r.change())}}}},{key:"removeRemote",value:function(e){var t=this.editor;if(!!ye(t)){var n=t.node,r=this.find(e);if(!!r){var a=r.root.parent();this.removeNode(r),a&&n.isEmpty(a)&&!t.ot.isStopped&&(a.isEditable()?n.html(a,"<p><br /></p>"):n.html(a,"<br />"))}}}},{key:"create",value:function(e,t){var n,r=this.classes[e];if(!r)throw"".concat(e,": This card does not exist");var a=(t==null||(n=t.value)===null||n===void 0?void 0:n.type)||r.cardType;if(["inline","block"].indexOf(a)<0)throw"".concat(e,': the type of card must be "inline", "block"');t!=null&&t.root&&t.root.empty();var o=this.editor,l=new r({editor:o,value:t==null?void 0:t.value,root:t==null?void 0:t.root}),u=l.root;u.attributes(qt,a),u.attributes(We,e),u.attributes(dn,"true");var c=a===Rt.INLINE?"span":"div",h=U("<".concat(c," ").concat(l.isEditable?Nc+"='*'":"","/>"));h.attributes(ut,"center");var v=U("<".concat(c," ").concat(ut,'="body" />'));return v.append(h),u.append(v),this.createCursor(l),a===Rt.BLOCK&&o.nodeId.generate(l.root),l.init(),l}},{key:"createCursor",value:function(e){var t=this.editor,n=e.constructor,r=n.focus!==void 0?n.focus:ye(t)&&!t.readonly,a=e.getCenter();a.removeAttributes(Yn);var o=e.root;o.removeAttributes(Yn);var l=e.findByKey("left"),u=e.findByKey("right");r?(a.attributes(Yn,"false"),l||a.before(U("<span ".concat(ut,'="left" ').concat(no,'="true">&#8203;</span>'))),u||a.after(U("<span ".concat(ut,'="right" ').concat(no,'="true">&#8203;</span>')))):(l==null||l.remove(),u==null||u.remove(),o.attributes(Yn,"false"))}},{key:"reRender",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.length===0&&(n=this.components),n.forEach(function(a){a.destroy&&a.destroy(),e.createCursor(a),a.init(),e.renderComponent(a)})}},{key:"render",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.lazyRender,a=e?e.isCard()?e:e.find("".concat(Ei)):this.editor.container.find(Ei);this.gc();var o=[],l=[],u=a.toArray();u.forEach(function(h){l.find(function(g){return g.equal(h)})||l.push(h);var v=h.find("".concat(yt,",").concat(Ei)).toArray();v.forEach(function(g){if(!g.equal(h)){var p=l.findIndex(function(b){return b.equal(g)});p>-1&&l.splice(p,1)}})}),l.forEach(function(h){var v=h.attributes(),g=v[bt],p=v[We],b=g||p;if(n.classes[b]){var y=v[cr],k;p&&(k=n.find(h),k&&k.root.equal(h)&&(k.destroy&&k.destroy(),n.removeComponent(k)),h.attributes(dn,"true"),v[dn]="true",h.empty()),k=n.create(b,{value:Bc(y),root:p?h:void 0}),Object.keys(v).forEach(function(E){(E.indexOf("data-")===0&&E.indexOf("data-card")!==0||E===dn)&&k.root.attributes(E,v[E])}),g&&(h.replaceWith(k.root),h.remove()),n.components.push(k),o.push(k),g&&k.root.removeAttributes(bt)}});var c=!1;o.forEach(function(h){if(r&&h.constructor.lazyRender){if(h.beforeRender){var v=h.beforeRender(),g=h.getCenter();v!==void 0&&g.append(typeof v=="string"?U(v):v)}c=!0,n.asyncComponents.push(h)}else n.renderComponent(h)}),t&&t(o.length),c&&this.renderAsyncComponents()}},{key:"renderComponent",value:function(e){for(var t=this.editor,n=e.getCenter(),r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var l=e.render.apply(e,a);l!==void 0&&n.append(typeof l=="string"?U(l):l),e.contenteditable.length>0&&(n.find(e.contenteditable.join(",")).each(function(u){var c=U(u);c.attributes(Yn)!==void 0&&c.attributes(Yn,!ye(t)||t.readonly?"false":"true"),c.attributes(Ce,Yr),ye(t)&&t.normalize(c)}),this.render(n)),e.didRender()}},{key:"removeComponent",value:function(e){var t=this;this.each(function(n,r){if(n.root.equal(e.root))return t.components.splice(r,1),!1})}},{key:"gc",value:function(){for(var e=0;e<this.components.length;e++){var t=this.components[e];(!t.root[0]||t.root.closest("body").length===0)&&(t.destroy&&t.destroy(),this.components.splice(e,1),e--)}}},{key:"destroy",value:function(){var e,t;this.gc();var n=this.editor;window.removeEventListener("resize",this.renderAsyncComponents),(e=n.scrollNode)===null||e===void 0||(t=e.get())===null||t===void 0||t.removeEventListener("scroll",this.renderAsyncComponents),window.removeEventListener("scroll",this.renderAsyncComponents),n.off("card:async-render",this.renderAsyncComponents)}},{key:"focusPrevBlock",value:function(e,t,n){var r=this.editor;if(!ye(r))throw"Engine not initialized";var a;if(e.type==="inline"){var o=r.block.closest(e.root);o.isEditable()?a=e.root.prevElement():a=o.prevElement()}else a=e.root.prevElement();if(n){if(!a||a.attributes(We)){var l=U("<p><br /></p>");e.root.before(l),t.select(l,!0),t.collapse(!1),r.nodeId.generate(l);return}}else{if(!a)return;if(a.attributes(We)){var u;(u=r.card.find(a))===null||u===void 0||u.focus(t,!1);return}}t.select(a,!0).shrinkToElementNode().shrinkToTextNode().collapse(!1)}},{key:"focusNextBlock",value:function(e,t,n){var r=this.editor;if(!ye(r))throw"Engine not initialized";var a;if(e.type==="inline"){var o=r.block.closest(e.root);o.isEditable()?a=e.root.nextElement():a=o.nextElement()}else a=e.root.nextElement();if(n){if(!a||a.attributes(We)){var l=U("<p><br /></p>");e.root.after(l),t.select(l,!0),t.collapse(!1),r.nodeId.generate(l);return}}else{if(!a)return;if(a.attributes(We)){var u;(u=r.card.find(a))===null||u===void 0||u.focus(t,!0);return}}t.select(a,!0).shrinkToElementNode().shrinkToTextNode().collapse(!0)}}]),d}(),pr=ir("rules"),P0=function(){function d(i){ve(this,d),this.schema=void 0,Object.defineProperty(this,pr,{writable:!0,value:{}}),this.schema=i}return we(d,[{key:"init",value:function(){Je(this,pr)[pr]=this.getRules()}},{key:"getRules",value:function(){var e={};return this.schema.data.blocks.forEach(function(t){e[t.name]||(e[t.name]=[]),e[t.name].push(t)}),e}},{key:"create",value:function(e){Le(e)&&(e=U(e));var t=Xs(e);return e.attributes(Oe,t),t}},{key:"generateAll",value:function(e){var t,n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=Je(this,pr)[pr],o=Object.keys(a).join(",");At(e)&&e.fragment&&(e=e.fragment);var l=Le(e)?e:e.get();if(!(!l||l.nodeType===Node.TEXT_NODE)){var u=(t=Le(e)?U(e):e)===null||t===void 0?void 0:t.find(o);u.each(function(c,h){var v=u.eq(h);!v||!r&&v.attributes(Oe)||n.generate(v,r)})}}},{key:"generate",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Le(e)&&(e=U(e)),!e.isText()){var r=Je(this,pr)[pr],a=r[e.name];if(!(!a||a.length===0||!a.some(function(u){return t.schema.checkNode(e,u.attributes)}))){var o=e.closest("".concat(yt,",").concat(ki),Gs);if(!(o.length>0&&o.attributes(Ce)===ur)&&!(!e.isCard()&&o.length>0&&o.isCard()&&!o.isEditableCard())){if(!n){var l=e.attributes(Oe);if(l)return l}return this.create(e)}}}}},{key:"isNeed",value:function(e){var t=this,n=Je(this,pr)[pr],r=n[e.name];return!(!r||r.length===0||!r.some(function(a){return t.schema.checkNode(e,a.attributes)}))}}]),d}(),F0=function(i){return!!i.dataTransfer},z0=function(){function d(i){ve(this,d),this.editor=void 0,this.editor=i}return we(d,[{key:"getData",value:function(e){var t,n=F0(e)?e.dataTransfer:e.clipboardData,r=n==null?void 0:n.getData("text/html"),a=n==null?void 0:n.getData("text"),o=[];try{(n==null?void 0:n.items)&&n.items.length>0?Array.from(n.items).forEach(function(l){var u=l.kind==="file"?l.getAsFile():null;if(u!==null){var c;u.type&&u.type.indexOf("image/png")>-1&&!u.lastModified&&(u=new File([u],"image.png",{type:u.type})),u.ext=(c=a)===null||c===void 0?void 0:c.split(".").pop()}u&&o.push(u)}):(n==null?void 0:n.files)&&n.files.length>0&&(o=Array.from(n.files))}catch{(n==null?void 0:n.files)&&n.files.length>0&&(o=Array.from(n.files))}return r===""&&a&&/^.+\.\w+$/.test(a)&&o.length>0?a="":a===""&&r&&/^(<meta.+?>)?<img.+?>$/.test(r)&&o.length>0?r="":(r||a)&&o.length>0&&!(!((t=r)===null||t===void 0)&&t.startsWith("<img"))&&(r||!/^https(s)?:/.test(a||""))&&(o=[]),{html:r,text:a,files:o}}},{key:"write",value:function(e,t){var n,r,a=this.editor.getSelectionData(t);if(!!a){var o=a.html,l=a.text;return e==null||e.preventDefault(),e==null||(n=e.clipboardData)===null||n===void 0||n.setData("text/html",'<meta name="source" content="aomao" />'+o),e==null||(r=e.clipboardData)===null||r===void 0||r.setData("text",l),a}}},{key:"copy",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(typeof e=="string")return Yp(e,{format:/<[^>]+>/g.test(e)?"text/html":"text/plain"});var r=this.editor,a=window.getSelection(),o=a&&Ke.from(r,a)||Ke.create(r),l=o.cloneRange(),u=U('<div class="'.concat(em,'" ').concat(Ce,'="').concat(lr,'">&#8203;</div>'));u.css({position:"fixed",top:0,clip:"rect(0, 0, 0, 0)"});var c=function(){u.remove(),a==null||a.removeAllRanges(),a==null||a.addRange(l.toRange())};u.on("copy",function(p){p.stopPropagation(),t.write(p,o),c()}),U(document.body).append(u),u.append(r.node.clone(U(e),!0)),n&&u.traverse(function(p){p.equal(u)||r.trigger("copy",p)}),u.append(U("&#8203;",null));var h=u.first(),v=u.last();o.select(u,!0),o.setStartAfter(h),o.setEndBefore(v),a==null||a.removeAllRanges(),a==null||a.addRange(o.toRange());var g=!1;try{if(g=document.execCommand("copy"),!g)throw"Copy failed"}catch(p){r.messageError("copy","The copy command was not executed successfully ",p),c()}return g}},{key:"cut",value:function(){var e=this.editor,t=Ke.from(e);if(!(!t||!ye(e))){var n=t.commonAncestorNode,r=e.change;r.cacheRangeBeforeCommand(),r.delete(t);for(var a=e.node.isList(n)?n:n.find("ul,ol"),o=0;o<a.length;o++){var l,u=U(a[o]),c=u.find("li");c.each(function(h){if(h.innerText===""||zs&&h.innerText===`
`){var v;(v=h.parentNode)===null||v===void 0||v.removeChild(h)}}),((l=u.get())===null||l===void 0?void 0:l.childNodes.length)===0&&u.remove()}r.range.select(t)}}}]),d}(),U0=function d(i,e,t,n){var r=void 0,a=void 0,o=/\[\]$/;if(Array.isArray(e))for(a=0;a<e.length;a++){var l=e[a];t||o.test(i)?n(i,l):d(i+"["+((typeof l=="undefined"?"undefined":lt(l))==="object"?a:"")+"]",l,t,n)}else if(e.toString()==="[object Object]")for(r in e)e.hasOwnProperty(r)&&d(i+"["+r+"]",e[r],t,n);else n(i,e)},Qc=function(i,e){return i+(/\?/.test(i)?"&":"?")+e},H0=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=void 0,n=[],r=function(l,u){typeof u=="function"?u=u():u==null&&(u=""),n[n.length]=encodeURIComponent(l)+"="+encodeURIComponent(u)};if(Array.isArray(i))for(var a=0;a<i.length;a++)r(i[a].name,i[a].value);else for(t in i)i.hasOwnProperty(t)&&U0(t,i[t],e,r);return n.join("&").replace(/%20/g,"+")},ef=function(i){return typeof FormData!="undefined"&&i instanceof FormData},V0=/^http/,j0=/(^\w+):\/\//,G0=/^(20\d|1223)$/,lo="readyState",tf="Content-Type",nf="X-Requested-With",fa="XMLHttpRequest",uo="XDomainRequest",Br={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:fa,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:function(i){return i}},nl=function(){function d(i){var e;ve(this,d),this.options=void 0,this.headNode=void 0,this.request=void 0,this.isAborted=!1,this.isTimeout=!1,this.timeout=void 0,this.callbackData=void 0,this.callbackPrefix="request_"+new Date,this.uuid=0,this.promise=void 0,this.__resolve=void 0,this.__reject=void 0,typeof i=="string"&&(i={url:i});var t=i,n=t.url;Qe.exports.startsWith(n,"//")&&(n=window.location.protocol+n),this.options=Pe(Pe(Pe({},Br),i),{},{url:n,context:i.context||window,doc:i.doc||wt(),jsonpCallback:i.jsonpCallback||"callback",method:i.method||"GET"}),this.headNode=(e=this.options.doc)===null||e===void 0?void 0:e.getElementsByTagName("head")[0],this.initPromise(),this.init()}return we(d,[{key:"initPromise",value:function(){var e=this;this.promise=new Promise(function(t,n){e.__resolve=t,e.__reject=n}).catch(function(){})}},{key:"init",value:function(){var e=this,t=function(){var o;e.isTimeout=!0,(o=e.request)===null||o===void 0||o.abort()};this.timeout&&clearTimeout(this.timeout),this.timeout=void 0,this.options.timeout&&(this.timeout=setTimeout(t,this.options.timeout));var n=function(o,l){e.triggerError(o,l)},r=function(o){e.triggerSuccess(o)};this.getRequest(r,n).then(function(a){e.request=a})}},{key:"abort",value:function(){var e;(e=this.request)===null||e===void 0||e.abort()}},{key:"defaultXHR",value:function(){var e=this.options,t=e.context,n=e.crossOrigin;if(!!t)if(n===!0){var r=t[fa]?new t[fa]:null;if(r&&"withCredentials"in r)return r;if(t[uo])return new t[uo];throw new Error("Browser does not support cross-origin requests")}else return t[fa]?new t[fa]:new t.ActiveXObject("Microsoft.XMLHTTP")}},{key:"succeed",value:function(){var e,t,n,r=this.options,a=r.url,o=r.context,l=j0.exec(a),u=l?l[1]:"";return u||(u=(o==null?void 0:o.location.protocol)||""),V0.test(u)?G0.test(((e=this.request)===null||e===void 0||(t=e.status)===null||t===void 0?void 0:t.toString())||""):!!(!((n=this.request)===null||n===void 0)&&n.response)}},{key:"noop",value:function(){}},{key:"handleReadyState",value:function(e,t){if(this.isAborted)return t("Request is aborted",this.request);if(this.isTimeout)return t("Request is aborted: timeout",this.request);this.request&&this.request[lo]===4&&(this.request.onreadystatechange=this.noop,this.succeed()?e(this.request):t(this.request.statusText,this.request))}},{key:"setHeaders",value:function(e,t){t.Accept=t.Accept||Br.accept[this.options.type||"*"],!this.options.crossOrigin&&!t[nf]&&(t[nf]=Br.requestedWith),!t[tf]&&!ef(this.options.data)&&(t[tf]=this.options.contentType||Br.contentType),Object.keys(t).forEach(function(n){e.setRequestHeader(n,t[n])})}},{key:"setCredentials",value:function(e){typeof this.options.withCredentials!="undefined"&&typeof e.withCredentials!="undefined"&&(e.withCredentials=!!this.options.withCredentials)}},{key:"generalCallback",value:function(e){this.callbackData=e}},{key:"getCallbackPrefix",value:function(e){return this.callbackPrefix+"_"+e}},{key:"handleJsonp",value:function(e,t,n){var r=this,a,o=this.options,l=o.jsonpCallback,u=o.jsonpCallbackName,c=o.doc,h=o.context;if(!(!c||!h)){var v=this.uuid++,g=l||"callback",p=u||this.getCallbackPrefix(v),b=new RegExp("((^|\\?|&)"+g+")=([^&]+)"),y=e.match(b),k=c.createElement("script"),E=0,_=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return y?y[3]==="?"?e=e.replace(b,"$1="+p):p=y[3]:e=Qc(e,g+"="+p),h[p]=this.generalCallback,k.type="text/javascript",k.src=e,k.async=!0,typeof k.onreadystatechange!="undefined"&&!_&&(k.htmlFor=k.id="_request_"+v),k.onload=k.onreadystatechange=function(){var A;return k[lo]&&k[lo]!=="complete"&&k[lo]!=="loaded"||E?!1:(k.onload=k.onreadystatechange=null,k.onclick&&k.onclick(),t(r.callbackData),r.callbackData=void 0,(A=r.headNode)===null||A===void 0||A.removeChild(k),E=1,!0)},(a=this.headNode)===null||a===void 0||a.appendChild(k),{abort:function(){var x;k.onload=k.onreadystatechange=null,n("Request is aborted: timeout"),r.callbackData=void 0,(x=r.headNode)===null||x===void 0||x.removeChild(k),E=1}}}}},{key:"getRequest",value:function(){var i=_n(ht.mark(function t(n,r){var a,o,l=this,u,c,h,v,g,p,b,y,k,E,_,A,x,C;return ht.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(u=((a=this.options.method)===null||a===void 0?void 0:a.toUpperCase())||"GET",c=this.options,h=c.processData,v=c.traditional,g=c.type,p=c.context,b=c.xhr,y=c.async,k=c.before,p){O.next=4;break}return O.abrupt("return",Promise.resolve(void 0));case 4:if(E=this.options.url,_=this.options.data,typeof _!="function"){O.next=10;break}return O.next=9,_();case 9:_=O.sent;case 10:if((((o=this.options.contentType)===null||o===void 0?void 0:o.indexOf("json"))||-1)>-1&&lt(_)==="object"&&(_=JSON.stringify(_)),_=h!==!1&&_&&typeof _!="string"&&!ef(_)?H0(_,v||Br.traditional):_||null,A=void 0,x=!1,(g==="jsonp"||u==="GET")&&_&&(E=Qc(E,_),_=null),g!=="jsonp"){O.next=17;break}return O.abrupt("return",Promise.resolve(this.handleJsonp(E,n,r)));case 17:if(C=this.options.headers||{},typeof C!="function"){O.next=22;break}return O.next=21,C();case 21:C=O.sent;case 22:if(A=(typeof b=="function"?b(this.options):b)||this.defaultXHR(),A){O.next=25;break}return O.abrupt("return");case 25:return A.open(u,E,y!==!1),this.setHeaders(A,C),this.setCredentials(A),p[uo]&&A instanceof p[uo]?(A.onload=n,A.onerror=function(){r("http error",A)},A.onprogress=this.noop,x=!0):A.onreadystatechange=function(){l.handleReadyState(n,r)},k&&k(A),x?setTimeout(function(){var M;(M=A)===null||M===void 0||M.send(_)},200):A.send(_),O.abrupt("return",Promise.resolve(A));case 32:case"end":return O.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"getType",value:function(e){if(!!e){if(e.match("json"))return"json";if(e.match("javascript"))return"js";if(e.match("text"))return"html";if(e.match("xml"))return"xml"}}},{key:"triggerSuccess",value:function(e){var t=this.options,n=t.dataFilter,r=t.context,a=t.success;if(!!r){var o=this.options.type,l=(n||Br.dataFilter)(e.responseText,o);o||(o=e&&this.getType(e.getResponseHeader("Content-Type")));var u=o!=="jsonp"?this.request:e;try{u.responseText=l}catch{}if(l)switch(o){case"json":try{u=r.JSON.parse(l)}catch{return this.triggerError("Could not parse JSON in response",u)}break;case"html":u=l;break;case"xml":u=u.responseXML&&u.responseXML.parseError&&u.responseXML.parseError.errorCode&&u.responseXML.parseError.reason?null:u.responseXML;break}a&&a(u),this.triggerComplete(u),this.__resolve&&this.__resolve(u)}}},{key:"triggerError",value:function(e,t){var n=this.options.error,r=new Error(e);r.xhr=t,n&&n(r),this.triggerComplete(r),this.__reject&&this.__reject(r)}},{key:"triggerComplete",value:function(e){var t=this.options.complete;this.timeout&&clearTimeout(this.timeout),this.timeout=void 0,t&&t(e)}},{key:"retry",value:function(){this.initPromise(),this.init()}},{key:"then",value:function(e,t){var n;return(n=this.promise)===null||n===void 0?void 0:n.then(e,t)}},{key:"always",value:function(e){var t;return(t=this.promise)===null||t===void 0?void 0:t.then(e,e)}},{key:"fail",value:function(e){var t;return(t=this.promise)===null||t===void 0?void 0:t.then(void 0,e)}},{key:"catch",value:function(e){return this.fail(e)}}]),d}();nl.setup=function(d){Object.keys(d).forEach(function(i){Br[i]&&(Br[i]=d[i])})};var rf={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["cvs"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]},W0=function(i){if(typeof i=="string"){var e;return(e=i.split(".").pop())!==null&&e!==void 0?e:""}var t=rf[i.type]?rf[i.type][0]:"";if(!t&&"name"in i){var n;t=(n=i.name.split(".").pop())!==null&&n!==void 0?n:""}return t},K0=function(){function d(i){ve(this,d),this.options=void 0,this.uploadingFiles=[],this.options=i}return we(d,[{key:"createUid",value:function(e){return Date.now()+"-"+e}},{key:"request",value:function(){var i=_n(ht.mark(function t(n,r){var a,o;return ht.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:a=0;case 1:if(!(a<n.length)){u.next=12;break}return o=n[a],o.uid||(o.uid=this.createUid(a)),u.next=6,this.handleBefore(o,n);case 6:if(u.t0=u.sent,u.t0!==!1){u.next=9;break}n.splice(a,1);case 9:a++,u.next=1;break;case 12:this.upload(n,r);case 13:case"end":return u.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"upload",value:function(){var i=_n(ht.mark(function t(n){var r=this,a,o=arguments;return ht.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:a=o.length>1&&o[1]!==void 0?o[1]:"file",n.forEach(function(){var c=_n(ht.mark(function h(v){var g,p,b,y,k,E,_,A,x,C;return ht.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(g=new FormData,g.append(a,v,v.name),v.data&&Object.keys(v.data).forEach(function(M){g.append(M,v.data[M])}),p=r.options,b=p.url,y=p.onUploading,k=p.onSuccess,E=p.onError,_=p.withCredentials,A=p.crossOrigin,x=p.headers,C=r.options.data,typeof C!="function"){O.next=9;break}return O.next=8,C();case 8:C=O.sent;case 9:return C&&Object.keys(C).forEach(function(M){g.append(M,C[M])}),O.next=12,new nl({xhr:function(){var V=new window.XMLHttpRequest;return V.upload.addEventListener("progress",function(j){j.lengthComputable&&y&&y(v,{percent:parseInt((j.loaded/j.total*100).toString(),10)})},!1),V},url:b,data:g,contentType:r.options.contentType,type:r.options.type||"json",withCredentials:_,crossOrigin:A,headers:x,success:function(V){k&&k(V,v)},error:function(V){E&&E(V,v)},method:"POST",processData:!0});case 12:case"end":return O.stop()}},h)}));return function(h){return c.apply(this,arguments)}}());case 2:case"end":return u.stop()}},t)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"handleBefore",value:function(){var i=_n(ht.mark(function t(n,r){var a=this,o,l,u,c,h,v;return ht.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=n.type,l=n.uid,u=n.name,c=n.size,h=W0(n),v=this.options.onBefore,p.t0=v,!p.t0){p.next=9;break}return p.next=7,v(n);case 7:p.t1=p.sent,p.t0=p.t1===!1;case 9:if(!p.t0){p.next=11;break}return p.abrupt("return",!1);case 11:return p.abrupt("return",new Promise(function(b,y){var k=new FileReader;k.addEventListener("load",function(){a.uploadingFiles[l]={uid:l,src:k.result,name:u,size:c,type:o,ext:h},r.every(function(E){return!!a.uploadingFiles[E.uid]})?Promise.all(gt(r.map(function(E){return new Promise(function(){var _=_n(ht.mark(function A(x){return ht.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!a.options.onReady){S.next=3;break}return S.next=3,a.options.onReady(a.uploadingFiles[E.uid],E);case 3:x(!0);case 4:case"end":return S.stop()}},A)}));return function(A){return _.apply(this,arguments)}}())}))).then(function(){b(!0)}):b(!0)},!1),k.addEventListener("error",function(){y(!1)}),k.readAsDataURL(n)}));case 12:case"end":return p.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()}]),d}(),Z0=function(){function d(){ve(this,d)}return we(d,[{key:"ajax",value:function(e){return new nl(e)}},{key:"upload",value:function(e,t,n){return new K0(e).request(t,n)}},{key:"getFiles",value:function(e){var t=e||{},n=t.event,r=t.accept,a=t.multiple;r=r||"*",a=lt(a)===void 0?100:a;var o=document.createElement("input");o.type="file",o.accept=r,o.style.display="none",o.multiple=a!==!1;var l=function u(){o.remove(),document.removeEventListener("mousedown",u)};return new Promise(function(u){var c=function h(){for(var v=[],g=0;g<(((p=o.files)===null||p===void 0?void 0:p.length)||0);g++){var p;if(typeof a=="number"&&g>a)break;v.push(o.files[g])}o.removeEventListener("change",h),l(),u(v)};o.addEventListener("change",c),document.body.appendChild(o),n||(n=document.createEvent("MouseEvents"),n.initEvent("click",!0,!0));try{if(o.dispatchEvent)o.dispatchEvent(n);else if(o.fireEvent)o.fireEvent(n);else throw"";document.addEventListener("mousedown",l)}catch{o.removeEventListener("change",c),l(),u([])}})}}]),d}(),af=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"trigger",value:function(e,t){var n=this.engine,r=n.change,a=n.command,o=n.list,l=n.node,u=r.range.get(),c=this.engine.block;if(u.collapsed){var h=c.closest(u.startNode);if(h.name==="li"&&o.isFirst(u))return e.isDelete||(e.preventDefault(),a.execute(o.getPluginNameByNode(h))),!1}else{var v=u.startNode,g=u.endNode,p=c.closest(v),b=c.closest(g);if(p.name==="li"||b.name==="li"){e.preventDefault();var y=u.cloneRange(),k=v.first(),E=v.isCard()?v:k;if(E!=null&&E.isCard()&&o.isEmptyItem(p)){var _,A=p.parent();p.remove(),A&&l.isCustomize(A)&&((_=A.get())===null||_===void 0?void 0:_.childNodes.length)===0&&A.remove()}var x=p.name==="li"?p.parent():null,C=b.name==="li"?b.parent():null;if(p.name==="li"&&o.isFirst(u)&&y.setStartBefore(p),b.name==="li"&&c.isLastOffset(u,"end")&&y.setEndAfter(b),r.delete(y,t),p.inEditor()&&!p.equal(b)&&b.inEditor()&&b.name==="li"){y.shrinkToElementNode().shrinkToTextNode();var S=y.createSelection();p.append(b.children()),b.remove(),S.move()}if(p.name==="li"){var O;l.isCustomize(p)&&((O=p.get())===null||O===void 0?void 0:O.childNodes.length)===0&&p.remove()}var M=function(q){if(l.isList(q)){var Z,ie=((Z=q.get())===null||Z===void 0?void 0:Z.childNodes)||[];if(ie.length==0)q.remove();else if(ie.length===1){var N=q.first();N!=null&&N.isCursor()&&(q.after(N),q.remove())}}};return x&&x.length>0&&l.isList(x)&&M(x),C&&C.length>0&&l.isList(C)&&M(C),o.addBr(p),p.equal(b)||o.addBr(b),u.setStart(y.startContainer,y.startOffset),u.collapse(!0),o.merge(),r.isEmpty()&&r.initValue(u),r.apply(u),!1}}if(!!c.isFirstOffset(u,"start")){var V=c.closest(u.startNode);if(l.isList(V)){var j=V.first();if(!j||j.isText())return e.preventDefault(),r.mergeAfterDelete(V),!1;V=j,u.setStart(V[0],0),u.collapse(!0),r.range.select(u)}if(V.name==="li"){var P;if(l.isCustomize(V))return;e.preventDefault();var D=V.closest("ul");return!((P=V.parent())===null||P===void 0)&&P.isEditable()?(r.mergeAfterDelete(V),!1):(D.length>0?a.execute(o.getPluginNameByNode(D)):r.unwrap(V),!1)}return!0}}}]),d}(),$0=function(){function d(i){ve(this,d),this.engine=void 0,this.backspace=void 0,this.engine=i,this.backspace=new af(i)}return we(d,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.command,a=t.list,o=n.range.get();o.shrinkToElementNode();var l=this.engine.block.closest(o.startNode),u=this.engine.block.closest(o.endNode);if(l.name==="li"||u.name==="li"){o.collapsed||(this.backspace.trigger(e,l.name!==u.name),o=n.range.get()),e.preventDefault();var c=a.getPluginNameByNode(l);if(a.isLast(o)&&a.isFirst(o))r.execute(c);else{this.engine.block.split(),o=n.range.get();var h=this.engine.block.closest(o.endNode),v=a.getPlugins().find(function(b){return c===b.constructor.pluginName});if(!v)return;if(v.cardName){var g=h.prev();g&&(a.addCardToCustomize(g,v.cardName),a.addBr(g)),a.addCardToCustomize(h,v.cardName),a.addBr(h);var p=h.next();p&&(a.addCardToCustomize(p,v.cardName),a.addBr(p))}a.merge(void 0,o),a.addBr(o.startNode.closest("ul")),o.setStart(h,this.engine.node.isCustomize(h)?1:0),o.collapse(!0).shrinkToTextNode(),n.apply(o)}return o.scrollIntoView(),!1}return!0}}]),d}(),Y0=function(){function d(i){ve(this,d),this.editor=void 0,this.CUSTOMZIE_UL_CLASS="data-list",this.CUSTOMZIE_LI_CLASS="data-list-item",this.INDENT_KEY="data-indent",this.STYLE_POSITION_NAME="list-style-position",this.STYLE_POSITION_VALUE="inside",this.backspaceEvent=void 0,this.editor=i}return we(d,[{key:"init",value:function(){var e=this,t=this.editor;if(ye(t)){var n,r,a=new $0(t);(n=t.typing.getHandleListener("enter","keydown"))===null||n===void 0||n.on(function(o){return a.trigger(o)}),this.backspaceEvent=new af(t),(r=t.typing.getHandleListener("backspace","keydown"))===null||r===void 0||r.on(function(o){var l;return(l=e.backspaceEvent)===null||l===void 0?void 0:l.trigger(o)})}}},{key:"isEmptyItem",value:function(e){var t=e.children().toArray().filter(function(r){return!r.isCursor()}),n=this.editor.node;return e.name==="li"&&(n.isEmpty(e)||(t.length===1?n.isCustomize(e)&&t[0].isCard()||t[0].name==="br":t.length===2&&n.isCustomize(e)&&!!t[0].isCard()&&t[1].name==="br"))}},{key:"isSame",value:function(e,t){if(e.name!==t.name)return!1;var n=this.editor.node;if(n.isCustomize(e)!==n.isCustomize(t))return!1;var r=parseInt(e.attributes(this.INDENT_KEY),10)||0,a=parseInt(t.attributes(this.INDENT_KEY),10)||0;return r===a}},{key:"isSpecifiedType",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ul",n=arguments.length>2?arguments[2]:void 0,r=this.editor.node,a=!0;return e.forEach(function(o){var l;if(!(["li","p"].indexOf(o.name)===-1&&(o.name===t||o.find(t).length>0)))switch(o.name){case"li":if(n){var u,c,h=o.first();!((u=h)===null||u===void 0)&&u.isCursor()&&(h=h.next()),a=a&&r.isCustomize(o)&&(((c=h)===null||c===void 0?void 0:c.attributes(We))||"")===n}else a=a&&!r.isCustomize(o);break;case"p":o.parent()&&((l=o.parent())===null||l===void 0?void 0:l.name)!=="li"&&(a=!1);break;default:a=!1;break}}),a}},{key:"getPlugins",value:function(){var e=[],t=this.editor.plugin;return Object.keys(t.components).forEach(function(n){var r=t.components[n];r.isCurrent&&e.push(r)}),e}},{key:"getPluginNameByNode",value:function(e){var t=this,n=e.name,r=function(o){var l="";return t.getPlugins().some(function(u){if(u.isCurrent(o))return l=u.constructor.pluginName,!0}),l};return this.editor.node.isCustomize(e)?r(e):n==="li"&&e.parent()?r(e.parent()):""}},{key:"getPluginNameByNodes",value:function(e){for(var t="",n=0;n<e.length;n++){var r=e[n],a=r.parent(),o="";switch(r.name){case"li":case"ul":case"ol":o=this.getPluginNameByNode(e[n]);break;case"p":if(a&&a.name==="li")o=this.getPluginNameByNode(a);else return"";break;default:if(this.editor.node.isBlock(r)&&r.find("ul,ol").length>0)break;return""}if(t&&o&&t!==o)return"";t=o}return t}},{key:"unwrapCustomize",value:function(e){var t=this.editor.node;if(t.isCustomize(e))switch(e.name){case"li":if(t.isCustomize(e)){var n=e.first();n!=null&&n.isCard()&&n.remove()}return e.removeAttributes("class"),e;case"ul":return e.removeAttributes("class"),e;default:return e}return e}},{key:"unwrap",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U("<p />"),r=0,a=this.editor,o=a.node,l=a.schema,u=l.data.globals.block||{},c=u.style||{};e.forEach(function(h){if(t.unwrapCustomize(h),o.isList(h)&&(r=parseInt(h.attributes(t.INDENT_KEY),10)||0,o.unwrap(h)),h.name==="li"){var v=o.clone(n,!1,!1);r!==0&&v.css("text-indent",r*2+"em"),h.removeAttributes(t.INDENT_KEY);var g=h.attributes();Object.keys(g).forEach(function(b){b!==Oe&&b!=="id"&&u[b]&&v.attributes(b,g[b])});var p=h.css();p["text-align"]&&t.addAlign(v,p["text-align"]),delete p["text-align"],p[t.STYLE_POSITION_NAME]="",Object.keys(p).forEach(function(b){c[b]||(p[b]="")}),v.css(p),o.replace(h,v)}})}},{key:"normalize",value:function(e){var t=this.editor;if(!ye(t))return[];var n=t.change,r=t.block,a=t.node;e=e||n.range.get();var o=r.getBlocks(e),l=[];o.forEach(function(c,h){var v=c.parent();if(c.name==="p"){if((v==null?void 0:v.name)==="li"){h===0&&l.push(v),a.unwrap(c);return}if(v&&["ul","ol"].indexOf(v.name)>-1){c=a.replace(c,U("<li />")),l.push(c);return}}if(c.name==="li"&&(v==null?void 0:v.name)==="li"){h===0&&l.push(v),a.unwrap(c);return}if(["ul","ol"].indexOf(c.name)>-1&&(v==null?void 0:v.name)==="li"){a.unwrap(c);return}l.push(c)});var u=e.endNode.closest("li");return l.some(function(c){return c[0]===u[0]})||l.push(u),l}},{key:"split",value:function(e){var t=this.editor;if(!!ye(t)){var n=t.change,r=t.node,a=e||n.range.toTrusty(),o=this.normalize(e);if(o.length>0&&(o[0].name==="li"||o[o.length-1].name==="li")){var l=a.createSelection(),u=o[0],c=o[o.length-1],h=[],v=[],g,p;if(u.prev()){g=u.parent();for(var b=0;o[b]&&o[b].name==="li";)h.push(o[b]),b+=1}if(c.next()){p=c.parent();for(var y=c.next();y&&y.name==="li";)v.push(y),y=y.next()}var k;v.length>0&&p&&(k=r.clone(p,!1,!1),v.forEach(function(A){var x;(x=k)===null||x===void 0||x.append(A[0])}),p.after(k));var E;if(h.length>0&&g&&(E=r.clone(g,!1,!1),h.forEach(function(A){var x;(x=E)===null||x===void 0||x.append(A[0])}),g.after(E)),g&&p&&p.equal(g)&&g.name==="ol"){var _=(parseInt(g.attributes("start"),10)||1)+g.find("li").length;k.attributes("start",_)}l.move()}e||n.apply(a)}}},{key:"merge",value:function(e,t){var n=this,r=this.editor;if(!!ye(r)){var a=r.change,o=r.block,l=r.node,u=t||a.range.toTrusty(),c=u.cloneRange(),h=e?void 0:c.shrinkToElementNode().createSelection();if(e=e||o.getBlocks(u),e.forEach(function(g){if(g=g.closest("ul,ol"),!!l.isList(g)){var p=g.prev(),b=g.next();p&&n.isSame(p,g)&&(l.merge(p,g),g=p),b&&n.isSame(b,g)&&l.merge(g,b)}}),e=o.getBlocks(u),e.length>0){var v=e[0].closest("ul,ol");this.addStart(v)}h==null||h.move(),!t&&h!==void 0&&a.apply(c)}}},{key:"addStart",value:function(e){var t=this.editor;if(!!ye(t)){var n=t.change,r=t.node;if(!e){var a=t.block.getBlocks(n.range.get());if(a.length===0)return;e=a[0].closest("ul,ol")}if(!(!e||!r.isList(e))){for(var o=parseInt(e.attributes(this.INDENT_KEY),10)||0,l=[],u=o,c=e.prev();c&&r.isList(c);){if(c.name==="ol"){var h=parseInt(c.attributes(this.INDENT_KEY),10)||0,v=parseInt(c.attributes("start"),10)||1,g=c.find("li").length;if(h===0){l[h]=v+g;break}h<=u&&(u=h,l[h]=l[h]||v+g)}else u=parseInt(c.attributes(this.INDENT_KEY),10)||0;c=c.prev()}for(var p=e;p;){if(r.isList(p)){var b=parseInt(p.attributes(this.INDENT_KEY),10)||0,y=parseInt(p.attributes("start"),10),k=p.find("li").length;if(p.name==="ol"){var E=l[b];b>0?(E=E||1,E>1?p.attributes("start",E):p.removeAttributes("start"),l[b]=E+k):E&&E!==y?(E>1?p.attributes("start",E):p.removeAttributes("start"),l[b]=E+k):(l[b]=(y||1)+k,l=l.slice(0,b+1))}}else l=[];var _=p.next();if(!_)break;p=_}}}}},{key:"addIndent",value:function(e,t,n){if(this.editor.node.isList(e)){var r=this.getIndent(e);t=r+(t<0?-1:1),n&&t>n&&(t=n),t<1?e.removeAttributes(this.INDENT_KEY):e.attributes(this.INDENT_KEY,t)}}},{key:"getIndent",value:function(e){return this.editor.node.isList(e)&&parseInt(e.attributes(this.INDENT_KEY),10)||0}},{key:"addAlign",value:function(e,t){if(e.name==="li")if(t&&t!=="left")["center","right"].indexOf(t)>-1&&e.css(Ge({},this.STYLE_POSITION_NAME,this.STYLE_POSITION_VALUE)),e.css({"text-align":t});else{var n;e.css((n={},Ge(n,this.STYLE_POSITION_NAME,""),Ge(n,"text-align",""),n))}}},{key:"addCardToCustomize",value:function(e,t,n){var r,a;if(Le(e)&&(e=U(e)),e.name==="li"){var o=e.first();if(!((o==null?void 0:o.isBlockCard())||(o==null?void 0:o.isCard())&&o.attributes(We)===t)){var l=this.editor,u=l.card,c=u.create(t,{value:n}),h=Ke.create(l),v=U("<br />");if(((r=(a=e.get())===null||a===void 0?void 0:a.childNodes.length)!==null&&r!==void 0?r:0)>0){var g;(g=e.first())===null||g===void 0||g.before(v)}else e.append(v);h.select(v,!0),u.insertNode(h,c);var p=e.last();return(p==null?void 0:p.name)==="br"&&p.remove(),c}}}},{key:"addReadyCardToCustomize",value:function(e,t,n){if(Le(e)&&(e=U(e)),e.name==="li"){var r=e.first();if(!((r==null?void 0:r.isBlockCard())||(r==null?void 0:r.isCard())&&r.attributes(We)===t)){var a=U("<span />");return e.prepend(a),this.editor.card.replaceNode(a,t,n),a}}}},{key:"addBr",value:function(e){var t=this,n=this.editor.node;if(n.isList(e))e.find("li").each(function(u){t.addBr(U(u))});else if(n.isCustomize(e)){for(var r=e.last();!((a=r)===null||a===void 0)&&a.isCursor();){var a;r=r.prev()}if(r){var o=e.children();if(o.length===1&&r.isCard()){e.append(U("<br />"));return}if(o.length>2&&r.name==="br"){var l;((l=r.prev())===null||l===void 0?void 0:l.name)!=="br"&&r.remove();return}for(;r;){if(r.equal(e.first())&&(r.isCard()||r.text()==="")){e.append(U("<br />"));return}if(r.type===Node.TEXT_NODE){if(r.text()!=="")return;r=r.prev()}else if(r.type===Node.ELEMENT_NODE){if(!n.isMark(r)||r.text()!=="")return;r=e.prev()}else r=r.prev()}}else e.append(U("<br />"))}}},{key:"insert",value:function(e,t){var n,r,a,o=this,l=this.editor;if(!(!ye(l)||e.childNodes.length===0)){var u=l.change,c=l.node,h=l.block,v=t||u.range.toTrusty();v.collapsed||u.delete(v,!0,!0);var g=v.cloneRange().shrinkToElementNode(),p=g.startNode,b=g.startOffset,y=p;if(c.isList(p)&&(y=p.children().eq(b)),y=(n=y)===null||n===void 0?void 0:n.closest("li",function(ft){return c.isBlock(ft)&&ft.nodeName!=="LI"?void 0:ft.parentElement||void 0}),!(((r=y)===null||r===void 0?void 0:r.length)===0||((a=y)===null||a===void 0?void 0:a.name)!=="li")){v.shrinkToElementNode().shrinkToTextNode(),h.split(v);var k=v.createSelection("list-insert");this.split(v);var E=function(nn){h.merge(nn),o.merge(void 0,nn),k==null||k.move(),t||u.apply(nn)},_=U(e).toArray().some(function(ft){return c.isBlock(ft)})?U(e.childNodes[0]):U("<p></p>").append(U(e)),A=v.startNode.closest("ul,ol");if(!A||!c.isList(A)){E(v);return}var x=v.startNode.closest("li");if(c.isCustomize(A)){var C,S,O=(C=A.prev())===null||C===void 0||(S=C.first())===null||S===void 0?void 0:S.first();if(O){var M=l.card.find(O);M&&this.addCardToCustomize(x,M.name,M.getValue())}}var V=!c.isList(_)||this.isSame(A,_);if(V){for(var j,P;c.isBlock(_);){var D=_.first();if(D&&c.isBlock(D)){_=D;continue}break}var T=(j=x.parent())===null||j===void 0||(P=j.prev())===null||P===void 0?void 0:P.last();if((T==null?void 0:T.name)==="li"){var q=T==null?void 0:T.children();if(q==null||q.each(function(ft,nn){var Pn;ft.nodeName==="BR"&&((Pn=q.eq(nn))===null||Pn===void 0||Pn.remove())}),c.isCustomize(_)){var Z;(Z=_.first())===null||Z===void 0||Z.remove()}if(_.isBlockCard()){var ie;(ie=T.parent())===null||ie===void 0||ie.after(_)}else T==null||T.append(c.isBlock(_)?_.children():_),T&&this.addBr(T),c.isBlock(_)&&_.remove()}}else{var N,F,H=(N=x.parent())===null||N===void 0||(F=N.prev())===null||F===void 0?void 0:F.last();if(H&&(c.isEmpty(H)||this.isEmptyItem(H))){var W,Y,Q;H.remove(),((W=H.parent())===null||W===void 0||(Y=W.get())===null||Y===void 0?void 0:Y.childNodes.length)===0&&((Q=H.parent())===null||Q===void 0||Q.remove())}}if(e.childNodes.length===0){var re=x.parent();if(_.isBlockCard()){if(re){var ae;this.isEmptyItem(x)&&((ae=re.get())===null||ae===void 0?void 0:ae.childNodes.length)===1&&re.remove();var fe=[re],me=_.prev();me&&c.isList(me)&&fe.push(me),this.merge(fe)}}else{var te,J;if(c.isCustomize(x)){var ne;(ne=x.first())===null||ne===void 0||ne.remove()}x.find("br").remove(),re==null||(te=re.prev())===null||te===void 0||(J=te.last())===null||J===void 0||J.append(x.children()),re==null||re.remove()}E(v);return}var pe=v.startNode.closest("li").parent();if(!pe){E(v);return}for(var ke=e.childNodes.length,L=U(e.childNodes[ke-1]),K=(!c.isList(L)||this.isSame(A,L))&&!L.isBlockCard(),z=!1,le=0;le<e.childNodes.length;le++){var he=U(e.childNodes[le]);if(c.isList(e.childNodes[le])&&!this.isSame(A,he)||he.isBlockCard()){z=!0;break}}for(var ge=pe.prev(),_e=ge?[ge]:[],Se=0;Se<(K&&!z?ke-1:ke);Se++){var be=U(e.childNodes[0]);if(c.isList(be)){var Ae;if(((Ae=be.get())===null||Ae===void 0?void 0:Ae.childNodes.length)===0){be.remove();continue}pe.before(be),_e.push(be)}else{if(z){pe==null||pe.before(be);continue}if(c.isBlock(be)&&be.allChildren().forEach(function(ft){ft.type!==wt().TEXT_NODE&&c.isBlock(ft)&&c.unwrap(ft)}),c.isCustomize(pe)){var et,at=(et=pe.first())===null||et===void 0?void 0:et.first();if(at&&at.isCard()){var Dt=at.attributes(We)||at.attributes("name"),It=this.toCustomize(be,Dt);It&&(Array.isArray(It)?It:[It]).forEach(function(ft){pe==null||pe.before(ft)})}}else{var tn=this.toNormal(be,pe.name);(Array.isArray(tn)?tn:[tn]).forEach(function(ft){l.node.isList(ft)&&(pe==null||pe.before(ft))})}}}if(_e.length>0&&this.merge(_e),!V&&c.isEmptyWidthChild(pe)&&pe.remove(),e.childNodes.length===0){if(c.isEmpty(x)||this.isEmptyItem(x)){var Vt,Qn,On,qn,In=(Vt=x.parent())===null||Vt===void 0?void 0:Vt.prev();x.find("br").remove(),c.isCustomize(x)&&((Qn=x.first())===null||Qn===void 0||Qn.remove()),In&&c.isList(In)?(On=In.last())===null||On===void 0||On.append(x.children()):In&&In.append(x.children()),(qn=x.parent())===null||qn===void 0||qn.remove()}E(v);return}for(;c.isBlock(L);){var Ln=L.last();if(Ln&&c.isBlock(Ln)){L=Ln;continue}break}var gn=x;if(gn){var $t;if(!(!(($t=L.parent())===null||$t===void 0)&&$t.fragment))for(var Bn=gn,jt=L.prev();jt&&jt.length>0;){var ni=jt.prev();Bn.before(jt),Bn=jt,jt=ni}if(L.name==="br")L.remove();else{var Mr=L.children();if(Mr.each(function(ft,nn){var Pn;ft.nodeName==="BR"&&((Pn=Mr.eq(nn))===null||Pn===void 0||Pn.remove())}),c.isCustomize(gn)){var mr;if(c.isCustomize(L)){var Mn=L.first();Mn!=null&&Mn.isCard()&&Mn.remove()}(mr=gn.first())===null||mr===void 0||mr.after(c.isBlock(L)?L.children():L)}else gn.prepend(c.isBlock(L)?L.children():L);this.addBr(gn),c.isBlock(L)&&L.remove()}}E(v)}}}},{key:"blockToItem",value:function(e,t,n,r){var a=U("<li></li>"),o=this.editor,l=o.node,u=o.schema;if(!l.isList(t))return t;var c=io(e.css("text-indent"))/2,h=u.data.globals.block||{},v=e.attributes();Object.keys(v).forEach(function(b){b!==Oe&&b!=="id"&&h.name&&a.attributes(b,v[b])});var g=h.style||{},p=e.css();return p["text-align"]&&this.addAlign(a,p["text-align"]),delete p["text-align"],delete p[this.STYLE_POSITION_NAME],Object.keys(p).forEach(function(b){g[b]||delete p[b]}),a.css(p),e=l.replace(e,a),n&&(e.addClass(this.CUSTOMZIE_LI_CLASS),this.addCardToCustomize(e,n,r)),c&&t.attributes(this.INDENT_KEY,c),l.wrap(e,t)}},{key:"toCustomize",value:function(e,t,n){var r=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"ul",o=this.editor.node;if(Array.isArray(e)){var l=[];return e.forEach(function(h){o.isCustomize(h)&&r.unwrapCustomize(h),l=l.concat(r.toCustomize(h,t,n,a))}),l}else{var u=U("<".concat(a,' class="').concat(this.CUSTOMZIE_UL_CLASS,'"/>'));switch(e.name){case"li":return e.addClass(this.CUSTOMZIE_LI_CLASS),this.addCardToCustomize(e,t,n),e;case"ul":case"ol":return u.attributes(e.attributes()),e=o.replace(e,u),e;default:if(e.name==="p"||o.isNestedBlock(e)&&!e.isBlockCard()){var c;if(((c=e.parent())===null||c===void 0?void 0:c.name)==="li")return o.unwrap(e),e;e=this.blockToItem(e,u,t,n)}return e}}}},{key:"toNormal",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ul",r=arguments.length>2?arguments[2]:void 0,a=this.editor.node;if(Array.isArray(e)){var o=[];return e.forEach(function(c){var h=t.toNormal(c,n,r);o=o.concat(h)}),o}else{this.unwrapCustomize(e);var l=U("<".concat(n," />"));switch(e.name){case"li":case n:return e;case"ol":case"ul":return l.attributes(e.attributes()),l.name==="ul"&&l.removeAttributes("start"),e=a.replace(e,l),e;default:if(e.name==="p"||a.isNestedBlock(e)&&!e.isBlockCard()){var u;if(((u=e.parent())===null||u===void 0?void 0:u.name)==="li")return a.unwrap(e),e;e=this.blockToItem(e,l),r&&e.attributes("start",r)}return e}}}},{key:"isFirst",value:function(e){var t=e.startNode,n=e.startOffset,r=e.cloneRange(),a=t.name==="li"?t:t.closest("li");if(!a[0])return!1;r.select(a,!0),r.setEnd(t[0],n);var o=r.cloneContents();if(!o.firstChild)return!0;var l=U(o.firstChild),u=U(o.lastChild||[]);if(o.childNodes.length===1&&l.name==="br"||o.childNodes.length===1&&a.hasClass(this.CUSTOMZIE_LI_CLASS)&&l.isCard())return!0;var c=this.editor.node;if(o.childNodes.length===2&&a.hasClass(this.CUSTOMZIE_LI_CLASS)&&l.isCard()&&c.isEmpty(u))return!0;var h=U("<div />");return h.append(o),c.isEmpty(h)}},{key:"isLast",value:function(e){var t=e.endNode,n=e.endOffset,r=e.cloneRange(),a=t.name==="li"?t:t.closest("li");if(!a[0])return!1;r.select(a,!0),r.setStart(t,n);var o=r.cloneContents();if(!o.firstChild)return!0;var l=U(o.firstChild),u=U(o.lastChild||[]);if(o.childNodes.length===1&&l.name==="br"||o.childNodes.length===1&&a.hasClass(this.CUSTOMZIE_LI_CLASS)&&l.isCard())return!0;var c=this.editor.node;if(o.childNodes.length===2&&a.hasClass(this.CUSTOMZIE_LI_CLASS)&&l.isCard()&&c.isEmpty(u))return!0;var h=U("<div />");return h.append(o),c.isEmpty(h)}}]),d}(),X0=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.node,a=t.block,o=n.range.get(),l=o.cloneRange().shrinkToTextNode(),u=l.collapsed,c=l.endNode,h=l.startNode,v=l.startOffset,g=l.endOffset;if(u){var p=a.closest(h);if(p.length>0&&r.isEmpty(p))return}if(c.type===Node.TEXT_NODE||h.type===Node.TEXT_NODE){if(!u){var b=c.parent();if(b&&c.type===Node.TEXT_NODE&&r.isMark(b)){var y=c.text(),k=y.substr(g);if(!/^\u200b$/.test(k))return!0;o.setEnd(c,g+1)}return!0}var E=h.parent();if(E&&h.type===Node.TEXT_NODE&&r.isMark(E)){if(v<1)return!0;var _=h.text(),A=_.substr(v-1,1);if(!/^\u200b$/.test(A))return!0;if(v===1){var x=E.prev();if(x&&!r.isEmpty(x)){var C=o.cloneRange().select(x,!0).shrinkToTextNode().collapse(!1),S=C.startNode,O=C.startOffset;o.setStart(S,O-1)}else if(!x&&r.isEmpty(E)){var M=E.parent(),V=E.getIndex();E.remove(),M&&o.setStart(M,V<=0?0:V-1)}}else o.setStart(h,v-1);return!0}if(E=h.prev()||void 0,E&&h.type===Node.TEXT_NODE&&r.isMark(E)){var j=h.text(),P=j.substr(v-1,1);if(!/^\u200b$/.test(P))return!0;if(v===1){var D=o.cloneRange().select(E,!0).shrinkToTextNode().collapse(!1),T=D.startNode,q=D.startOffset;o.setStart(T,q-1)}else o.setStart(h,v>0?v-1:0)}}return!0}}]),d}(),J0=function(){function d(i){var e=this;ve(this,d),this.editor=void 0,this.pluginCaches=new Map,this.findSameParent=function(t,n){var r=e.editor.node;if(r.isMark(t)){var a=void 0;if(e.compare(t,n,!0))return!0;if(a=t.parent())return e.findSameParent(a,n)}return!1},this.editor=i}return we(d,[{key:"init",value:function(){var e=this,t=this.editor;if(ye(t)){var n,r=new X0(t);(n=t.typing.getHandleListener("backspace","keydown"))===null||n===void 0||n.on(function(a){return r.trigger(a)}),t.on("keydown:space",function(a){return e.triggerMarkdown(a)})}}},{key:"triggerMarkdown",value:function(e){var t,n=this.editor;if(!(!ye(n)||((t=n.options.markdown)===null||t===void 0?void 0:t.mode)===!1)){var r=n.change,a=r.range.get();if(!(!a.collapsed||r.isComposing())){var o=a.cloneRange().shrinkToTextNode(),l=o.startNode,u=o.startOffset,c=l.type===Node.TEXT_NODE?l:l.children().eq(u-1);if(!!c){var h=a.toPath(),v=c.type===Node.TEXT_NODE?c.text().substr(0,u):c.text(),g=ao(n,"zero"),p=g.renderer,b=g.options,y=g.parseInline(v,{});if(y.length!==0){var k=!1,E="";if(y.forEach(function(S){var O="",M=S.children||[];M.forEach(function(V,j){var P=V.type,D=n.trigger("markdown-it-token",{token:S,markdown:g,callback:function(q){O+=q}});if(D===!1){k=!0;return}!k&&P!=="text"&&(k=!0),typeof p.rules[P]!="undefined"?O+=p.rules[P](M,j,b,{},p):O+=p.renderToken(M,j,b)}),E+=O}),k){var _=n.node;e.preventDefault(),a.setStart(c[0],0),a.setEnd(c[0],u),r.paste(E,a),r.rangePathBeforeCommand=h,a.collapse(!1),a.enlargeToElementNode();var A=U(E),x=A.last(),C=A.eq(A.length-1);(_.isMark(A)||x&&_.isMark(x)||C&&_.isMark(C))&&_.insertText("\xA0",a),r.range.select(a)}return!k}}}}}},{key:"findPlugin",value:function(e){var t=this.editor,n=t.node,r=t.plugin,a=t.schema;if(!(e.length===0||!n.isMark(e))){var o=e.get().cloneNode(),l=o.outerHTML,u=this.pluginCaches.get(l);if(u)return u;for(var c in r.components){var h=r.components[c];if(el(h)&&e.name===h.tagName){var v=h.schema();if(Array.isArray(v)?v.find(function(g){return a.checkNode(e,g.attributes)}):a.checkNode(e,v.attributes))return this.pluginCaches.set(l,h),h}}return u}}},{key:"closest",value:function(e){for(var t=this.editor.node,n=e.parent();n&&!n.isEditable()&&!t.isBlock(n);){if(t.isMark(n))return n;var r=n.parent();if(!r)break;n=r}return e}},{key:"closestNotMark",value:function(e){for(;(this.editor.node.isMark(e)||e.isText())&&!e.isEditable();){var t=e.parent();if(!t)break;e=t}return e}},{key:"compare",value:function(e,t,n){if(e.name!==t.name)return!1;var r=e.attributes();delete r.style,delete r[Oe];var a=t.attributes();delete a.style,delete a[Oe];var o=e.css(),l=t.css();delete r.class,delete a.class;var u=e.get().className.trim(),c=t.get().className.trim(),h=u!==""?u.split(/\s+/):[],v=c!==""?c.split(/\s+/):[],g=this.editor.schema,p=g.find(function(y){return y.name===e.name}),b=function(k){for(var E=0;E<p.length;E++){var _=p[E];if(_.attributes&&g.checkValue(_.attributes,"class",k.join(" ").trim()))return _.attributes.class.toString()}return k.join(" ").trim()};return n||(h=h.length>0?[b(h)]:[],v=v.length>0?[b(v)]:[]),!(Object.keys(r).length!==Object.keys(a).length||!Object.keys(r).every(function(y){return n?r[y]===a[y]:!!a[y]})||Object.keys(o).length!==Object.keys(l).length||!Object.keys(o).every(function(y){return n?o[y]===l[y]:!!l[y]})||h.length!==v.length||!h.every(function(y){return v.indexOf(y)!==-1}))}},{key:"contain",value:function(e,t){var n=t.attributes(),r=n.style||{};delete n.style;var a=e.attributes(),o=a.style||{};return delete a.style,Object.keys(n).every(function(l){return!!a[l]})&&Object.keys(r).every(function(l){return!o[l]})}},{key:"unwrapEmptyMarks",value:function(e,t){var n=this.editor.node,r=e.allChildren();r.forEach(function(a){if(n.isEmpty(a)&&n.isMark(a)&&(!t||t(a))){var o=a.children();o.length===1&&o.isText()?a.remove():n.unwrap(a)}})}},{key:"splitOnCollapsed",value:function(e,t,n){var r=this;if(!!e.collapsed){e.enlargeFromTextNode(),e.shrinkToElementNode();var a=e.startNode,o=a.parent(),l=a.isCard()?a:a.closest(yt),u=this.editor.node;if((l.length===0||l.attributes(qt)!=="inline")&&(u.isMark(a)||o&&u.isMark(o))){var c,h=this.closestNotMark(a),v=e.createSelection(),g=v.getNode(h,"left"),p=void 0,b=void 0,y=[];if(n){Le(n)&&(n=U(n));var k=n.getPath(h.get()),E=h.clone(!0);y=k.slice(1),b=U(E.getChildByPath(k.slice(0,1))),p=v.getNode(E,"right",!1)}else p=v.getNode(h,"right");this.unwrapEmptyMarks(g,function(te){return!te.isCursor()}),this.unwrapEmptyMarks(p,function(te){t&&!Array.isArray(t)&&(t=[t]);var J=!t||t.length===0||!te.isCard()&&t.some(function(ne){return r.compare(te,ne)});return J});var _=h.children();_.each(function(te,J){var ne=_.eq(J);ne!=null&&ne.isCard()||ne==null||ne.remove()});var A=void 0,x=function(J){J.each(function(ne,ae){var fe=J.eq(ae);if(fe!=null&&fe.isCard()){A=A?A.next():h.first(),A&&(J[ae]=A[0]);return}A?(A.after(ne),A=fe):(A=fe,h.prepend(ne))})},C=g.children(),S=C.toArray();x(C);var O=p.children(),M=O.toArray();b&&(n=(c=M.find(function(te){return te.equal(b)}))===null||c===void 0?void 0:c.getChildByPath(y)),x(O),M=O.toArray();var V=U("\u200B",null);if(S.length===1&&S[0].name==="br"&&(S[0].remove(),S.splice(0,1)),M.length===1&&M[0].name==="br"&&(M[0].remove(),M.splice(0,1)),M.filter(function(te){return!te.isCursor()}).length>0){for(var j=M[0],P=0;P<M.length-1&&(j=M[P],!!j.isCursor());P++);if(u.isEmpty(j)){for(var D=j.first();D&&!D.isText();)j=D,D=D.first();j.isText()?j.before(V):j.prepend(V)}else{var T=u.isMark(a)?a:a.parent(),q=V;t&&!Array.isArray(t)&&(t=[t]);for(var Z=function(){var J=T.clone();if(!t.some(function(ae){return r.compare(J,ae)})){var ne=V.equal(q);q=u.wrap(q,J),ne&&(V=q.first())}T=T.parent()};t&&t.length>0&&T&&u.isMark(T);)Z();j.before(q)}e.select(V).collapse(!1)}else if(S.filter(function(te){return!te.isCursor()}).length>0){var ie=S[S.length-1];ie.after(V),e.select(V).collapse(!1)}else e.select(h,!0).collapse(!0);var N=!1;h.children().each(function(te){var J=U(te);if(J.isText()){var ne=te.textContent,ae=(ne==null?void 0:ne.replace(/\u200b+/g,"\u200B"))||"";if(ne!==ae&&(te.textContent=ae),N){var fe=J.next(),me=J.parent();(!fe&&me&&!u.isInline(me)||fe&&!u.isInline(fe))&&ae.startsWith("\u200B")?(ae=ae.substring(1),ae?te.textContent=ae:J.remove()):N=!1}ae.endsWith("\u200B")&&(N=!0)}else N=!1});var F=u;if(V[0].parentNode){var H=V[0],W=null,Y=0,Q=function(J,ne){for(var ae=function(le){return ne?le.previousSibling:le.nextSibling};J;){if(J.nodeType!==H.nodeType)return;var fe=ae(J);if(J.textContent===W){var me;if(fe&&F.isInline(fe)||!fe&&J.parentNode&&F.isInline(J.parentNode))break;(me=J.parentNode)===null||me===void 0||me.removeChild(J),J=fe}else{var pe,ke;if(ne)for(;W&&((L=J.textContent)===null||L===void 0?void 0:L.endsWith(W));){var L;if(fe&&F.isInline(fe)||!fe&&J.parentNode&&F.isInline(J.parentNode))break;J.textContent=J.textContent.substring(0,J.textContent.length-Y)}else for(;W&&((K=J.textContent)===null||K===void 0?void 0:K.startsWith(W));){var K;if(fe&&F.isInline(fe)||!fe&&J.parentNode&&F.isInline(J.parentNode))break;J.textContent=J.textContent.substring(W.length)}if(((pe=J.textContent)===null||pe===void 0?void 0:pe.length)!==0)return;(ke=J.parentNode)===null||ke===void 0||ke.removeChild(J),J=fe}}};if(H.nodeType===Node.TEXT_NODE){var re=H.textContent;W=re,Y=W.length,Q(H.previousSibling,!0),Q(H.nextSibling,!1)}}}return n}}},{key:"splitOnExpanded",value:function(e,t){if(!e.collapsed){e.enlargeToElementNode(),e.shrinkToElementNode();var n=e.startNode,r=e.endNode,a=n.isCard()?n:n.closest(yt),o=r.isCard()?r:r.closest(yt);if(!(a.length>0&&a.attributes(qt)==="inline"||o.length>0&&o.attributes(qt)==="inline")){var l=this.closestNotMark(n),u=this.closestNotMark(r);if(!l.equal(u)){var c=e.cloneRange();c.collapse(!0);var h=e.cloneRange();h.collapse(!1);var v=void 0,g=c.startOffset,p=h.endOffset;l.contains(u)?(v=this.splitOnCollapsed(c,t,h.endNode),e.setStart(c.startContainer,c.startOffset),v&&h.setOffset(v,p,p),this.splitOnCollapsed(h,t),e.setEnd(h.startContainer,h.startOffset)):(v=this.splitOnCollapsed(h,t,c.startNode),e.setEnd(h.startContainer,h.startOffset),v&&c.setOffset(v,g,g),this.splitOnCollapsed(c,t),e.setStart(c.startContainer,c.startOffset));return}var b=this.editor.node,y=n.parent(),k=b.isMark(n)||y&&b.isMark(y),E=r.parent(),_=b.isMark(r)||E&&b.isMark(E);if(!k&&!_)return;var A=e.commonAncestorNode;A.isText()&&(A=A.parent());var x=this.closestNotMark(A),C=e.createSelection(),S=C.getNode(x,"left"),O=C.getNode(x),M=C.getNode(x,"right");this.unwrapEmptyMarks(S),this.unwrapEmptyMarks(M);var V=x.children();V.each(function(ie,N){var F=V.eq(N);F!=null&&F.isCard()||F==null||F.remove()});var j=void 0,P=function(N){N.each(function(F,H){var W=N.eq(H);if(W!=null&&W.isCard()){j=j?j.next():x.first(),j&&(N[H]=j[0]);return}j?(j.after(F),j=W):(j=W,x.prepend(F))})},D=S.children();P(D);var T=O.children(),q=T.toArray();P(T);var Z=M.children();P(Z),e.setStartBefore(q[0][0]),e.setEndAfter(q[q.length-1][0])}}}},{key:"split",value:function(e,t){var n=this.editor;if(!!ye(n)){var r=n.change,a=e||r.range.toTrusty(),o=wt(a.startContainer),l=a.collapsed;if((typeof t=="string"||!Array.isArray(t)&&t&&Le(t))&&(t=U(t,o)),l)this.splitOnCollapsed(a,t);else{var u=a.createSelection("mark-split");this.splitOnExpanded(a,t),u.move()}e||r.apply(a)}}},{key:"wrapByNode",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.findPlugin(t),a=this.editor.node;if(a.isMark(e)){var o;((o=e.get())===null||o===void 0?void 0:o.childNodes.length)===0&&e.html("&#8203;");for(var l=e,u=l.children().toArray(),c=this.findPlugin(l),h=!1;a.isMark(l)&&u.filter(function(T){return!T.isCursor()}).length===1&&r&&c&&r.mergeLeval<=c.mergeLeval;){var v=u.find(function(T){return!T.isCursor()});if(a.isMark(v))l=v,u=l.children().toArray();else if(v.isText())l=v;else break;if(r.name===c.name){h=!0;break}c=this.findPlugin(l)}a.removeZeroWidthSpace(l);var g=l.parent();if(l.isText()||h){for(var p=!1;g&&a.isMark(g);){if(this.compare(g.clone(),t,!0)){p=!0;break}else if(g.children().toArray().filter(function(T){return!T.isCursor()}).length===1){var b=this.findPlugin(g);if(r&&r===b&&r.combineValueByWrap===!0){a.wrap(g,t,!0),p=!0;break}else if(r&&r===b){a.unwrap(g),p=!1;break}}g=g.parent()}if(p)return!1}var y=l.allChildren();return y.forEach(function(T){if(T.type!==wt().TEXT_NODE&&a.isMark(T)){var q=n.findPlugin(T);q===r&&!(r!=null&&r.combineValueByWrap)&&a.unwrap(T)}}),a.wrap(l,t)}else if(e.name==="br"){var k=e.parent();if(k&&a.isBlock(k)){var E=t.clone(!0);return E.html("&#8203;"),a.replace(e,E),E}}else if(e.isCard()){var _=this.editor.card.find(e);if(_&&_.executeMark)return _.executeMark(t,!0)}else if(e.isText()&&!a.isEmpty(e)){a.removeZeroWidthSpace(e);for(var A=e.parent(),x=!1;A&&a.isMark(A);){if(this.compare(A.clone(),t,!0)){x=!0;break}else if(A.children().toArray().filter(function(T){return!T.isCursor()}).length===1){var C=this.findPlugin(A);if(r&&r===C&&r.combineValueByWrap===!0){a.wrap(A,t,!0),x=!0;break}else if(r&&r===C){var S=a.unwrap(A),O=S.find(function(T){return!T.isCursor()&&a.isMark(T)});O?A=O:S.length>0&&(A=S[0].parent()),x=!1;break}}var M=A.parent();if(M&&a.isMark(A))A=M;else break}if(x)return!1;for(var V=e.parent(),j=V?this.findPlugin(V):void 0,P=!1,D=function(){P=!0;var q=V.children().toArray(),Z=V.clone();q.forEach(function(ie){ie.isCursor()||ie.type===3&&/^\u200b$/.test(ie.text()||"")||(e.equal(ie)||ie.contains(e)?e=a.wrap(a.replace(e,Z),t):(ie=a.wrap(ie,Z),a.wrap(ie,t)))}),a.unwrap(V),V=n.closest(e)};V&&a.isMark(V)&&r&&j&&r.mergeLeval>j.mergeLeval;)D();return P||a.wrap(e,t),e}}},{key:"wrap",value:function(e,t){var n=this,r=this.editor,a=ye(r)?r.change:void 0;if(!(!t&&!a)){var o=r.node,l=t||a.range.toTrusty(),u=wt(l.startContainer);if(typeof e=="string"||Le(e)?e=U(e,u):e=e,!!o.isMark(e)){var c=l.commonAncestorNode;c.type===Node.TEXT_NODE&&(c=c.parent());var h=r.card.find(c,!0),v=h==null?void 0:h.isEditable,g=v?h!=null&&h.getSelectionNodes?h.getSelectionNodes():[]:[c];g.length===0&&(v=!1,g.push(c));var p=o,b=this.findPlugin(e);if(l.collapsed&&(!v||!(h!=null&&h.getSelectionNodes)||g.length===1)){e.children().toArray().filter(function(T){return!T.isCursor()}).length===0&&e.append(u.createTextNode("\u200B"));var y=l.shrinkToTextNode(),k=y.startNode,E=k.parent(),_=[],A=!1;if(k.isText()){for(var x=!1;E&&p.isMark(E);){var C;if(this.compare(E.clone(),e,!0)){x=!0;break}var S=this.findPlugin(E);if(((C=E.get())===null||C===void 0?void 0:C.childNodes.length)===1){if(b&&b===S&&b.combineValueByWrap===!0){p.wrap(E,e,!0),x=!0;break}else if(b&&b===S){if(this.split(l),l.collapsed)for(var O=E.parent();O&&p.isMark(O);)e=p.wrap(e,O),O=O.parent();x=!1;break}}b&&(!S||b.mergeLeval>S.mergeLeval)?_.push(E.clone(!1)):!A&&_.length>0&&(_.push(e.clone(!1)),A=!0),E=E.parent()}if(x)return}if(_.length>0){var M=_[0];M.append(e.children());for(var V=1;V<_.length;V++)M=p.wrap(M,_[V]);e=A?M:p.wrap(M,e),this.split(l)}p.insert(e,l),this.merge(l),l.handleBr(),t||a==null||a.apply(l);return}v||(this.split(l),c=l.commonAncestorNode,c.type===Node.TEXT_NODE&&(c=c.parent()),g[0]=c);var j=v?void 0:l.createSelection();if(j&&!j.anchor&&!j.focus){t||a==null||a.apply(l);return}var P=!!v;if(g.forEach(function(T){T.traverse(function(q){if(e=e,v||!q.equal(j==null?void 0:j.anchor)){if(P){if(!v&&q.equal(j==null?void 0:j.focus))return P=!1,!1;var Z=p.isMark(q),ie=n.wrapByNode(q,e,b);if(ie&&typeof ie!="boolean"&&Z){var N;if(!v&&(j==null?void 0:j.focus)&&ie.find('[data-element="'.concat(j.focus.attributes(Ce),'"]')).equal(j.focus))return P=!1,!1;if((j==null?void 0:j.focus)&&((N=ie.next())===null||N===void 0?void 0:N.equal(j.focus)))return P=!1,!1}if(typeof ie!="undefined")return!0}}else P=!0},!0,"editable")}),j==null||j.move(),v){var D=[];g.forEach(function(T){T.allChildren().forEach(function(q){q.isElement()&&o.isMark(q)&&D.push(q)})}),this.mergeMarks(D)}else this.merge(l);t||a==null||a.apply(l)}}}},{key:"mergeMarks",value:function(e){var t=this,n=this.editor.node;e.forEach(function(r){var a=r.prev(),o=r.next(),l=r.parent();if(l&&t.findSameParent(l,r)){n.unwrap(r);return}a&&t.compare(a,r,!0)&&(n.merge(a,r),r=a),o&&t.compare(o,r,!0)&&n.merge(r,o);var u=[],c=r.children();c.each(function(h,v){var g=c.eq(v);g&&!g.isCursor()&&n.isMark(g)&&u.push(g)}),u.length>0&&t.mergeMarks(u)})}},{key:"merge",value:function(e){var t=this.editor;if(!!ye(t)){var n=t.change,r=e||n.range.toTrusty(),a=this.findMarks(r);if(a.length!==0){var o=r.shrinkToElementNode().createSelection();this.mergeMarks(a),o.move(),r.handleBr(),e||n.apply(r)}}}},{key:"unwrapByNodes",value:function(e,t){var n=this,r=this.editor,a=r.node;e.forEach(function(o){t=t,!t||!o.isCard()&&(Array.isArray(t)?t:[t]).some(function(l){return n.compare(o,l)})?a.unwrap(o):t?(Array.isArray(t)?t:[t]).forEach(function(l){var u,c=l.css();Object.keys(c).forEach(function(v){o.css(v,"")});var h=(u=l.get())===null||u===void 0?void 0:u.className.split(/\s+/);h&&function(){for(var v=r.schema,g=v.find(function(y){return y.name===o.name}),p=function(k){var E=g[k];h.forEach(function(_){_=_.trim(),_!==""&&E.attributes&&v.checkValue(E.attributes,"class",_)&&o.removeClass(_)})},b=0;b<g.length;b++)p(b)}()}):(o.removeAttributes("class"),o.removeAttributes("style"))})}},{key:"unwrap",value:function(e,t){var n=this.editor;if(!!ye(n)){var r=n.change,a=n.node,o=t||r.range.toTrusty(),l=wt(o.startContainer)||document;e!==void 0&&!Array.isArray(e)&&(typeof e=="string"||Le(e))&&(e=U(e,l));var u=o.commonAncestorNode;u.type===Node.TEXT_NODE&&(u=u.parent());var c=n.card.find(u,!0),h=c==null?void 0:c.isEditable,v=h?c!=null&&c.getSelectionNodes?c.getSelectionNodes():[]:[u];if(v.length===0&&(h=!1,v.push(u)),h||(this.split(o,o.collapsed?e:void 0),u=o.commonAncestorNode,u.type===Node.TEXT_NODE&&(u=u.parent()),v[0]=u),o.collapsed&&(!h||!(c!=null&&c.getSelectionNodes)||v.length===1)){t||r.apply(o);return}var g=h?void 0:o.createSelection("mark-unwrap");if(g&&!g.has()){this.merge(o),t||r.apply(o);return}var p=[],b=!!h;if(v.forEach(function(k){k.traverse(function(E){if(!(!h&&(E.isText()||!(g!=null&&g.anchor)))){if(h||(g==null?void 0:g.anchor)&&!E.equal(g.anchor)){if(b&&(h||!E.equal(g==null?void 0:g.focus))){if(a.isMark(E)&&!E.isCard()&&(h||o.isPointInRange(E,0)))p.push(E);else if(E.isCard()){var _=n.card.find(E);_&&_.executeMark&&(Array.isArray(e)?e:[e]).forEach(function(S){_.executeMark(S,!1)})}}}else if(!h&&(b=!0,(g==null?void 0:g.anchor)&&E.equal(g.anchor)&&!g.anchor.prev()))for(var A=g.anchor.parent();A&&!A.isCard()&&a.isMark(A);){var x,C;if(p.push(A),A=A.parent(),A&&((x=(C=A.get())===null||C===void 0?void 0:C.childNodes.length)!==null&&x!==void 0?x:0)>1)break}}},!0,"editable")}),this.unwrapByNodes(p,e),g==null||g.move(),h){var y=[];v.forEach(function(k){k.allChildren().forEach(function(E){E.isElement()&&a.isMark(E)&&y.push(E)})}),this.mergeMarks(y)}else this.merge(o);t||r.apply(o)}}},{key:"insert",value:function(e,t){var n,r=this.editor;if(!!ye(r)){var a=r.change,o=r.node,l=t||a.range.toTrusty();if(typeof e=="string"||Le(e)){var u=wt(l.startContainer);e=U(e,u)}l.collapsed||a.delete(l),(n=o.insert(e,l))===null||n===void 0||n.handleBr().select(e).collapse(!1),t||a.apply(l)}}},{key:"findMarks",value:function(e){var t=this.editor,n=e.cloneRange();if(n.startNode.isRoot()&&n.shrinkToElementNode(),!n.startNode.inEditor()||t.card.find(n.startNode))return[];var r=t.node,a=function(P,D){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!!D.collapsed){var q=D.startNode,Z=D.startOffset,ie=q.findParent();if(!!ie){var N=D.cloneRange();if(N.select(ie,!0),T){N.setEnd(q,Z),N.enlargeFromTextNode(),N.enlargeToElementNode(!0);var F=q.get().childNodes,H=N.endNode,W=N.endOffset,Y=H.get().childNodes,Q=Y.item(W),re=F.item(Z)||F.item(Z-1);if(!P&&H.type===Node.ELEMENT_NODE&&Q&&r.isBlock(Q)&&(q.type!==Node.ELEMENT_NODE||!!re&&!r.isBlock(re)))return;N.select(ie,!0),N.setStart(H,W),N.shrinkToElementNode(),N.shrinkToTextNode(),D.setStart(N.startContainer,N.startOffset),D.collapse(!0)}else{N.setStart(q,Z),N.enlargeFromTextNode(),N.enlargeToElementNode(!0);var te=q.get().childNodes,J=N.startNode,ne=N.startOffset,ae=J.get().childNodes,fe=ae.item(ne),me=te.item(Z)||te.item(Z-1);if(!P&&J.type===Node.ELEMENT_NODE&&fe&&r.isBlock(fe)&&(q.type!==Node.ELEMENT_NODE||me&&!r.isBlock(me)))return;N.select(ie,!0),N.setEnd(J,ne),N.shrinkToElementNode(),N.shrinkToTextNode(),D.setEnd(N.endContainer,N.endOffset),D.collapse(!1)}}}};if(!n.collapsed){var o=n.cloneRange(),l=n.cloneRange();o.collapse(!0),l.collapse(!1),a(!0,o,!0),a(!0,l),n.setStart(o.startContainer,o.startOffset),n.setEnd(l.startContainer,l.startOffset)}a(!1,n);var u=n.startContainer,c=n.startOffset,h=n.endContainer,v=n.endOffset,g=u,p=h;u.nodeType===Node.ELEMENT_NODE&&u.childNodes[c]&&(g=u.childNodes[c]||u),h.nodeType===Node.ELEMENT_NODE&&v>0&&h.childNodes[v-1]&&(p=h.childNodes[v-1]||u),n.collapsed&&(g=p);var b=function(P,D){P.push(D)},y=r,k=function(P){for(var D=[];P&&!(P.type===Node.ELEMENT_NODE&&P.isEditable());){if(y.isMark(P)&&!P.attributes(We)&&!P.attributes(ut))D.push(P);else if(P.isCard()){var T=t.card.find(P);T!=null&&T.queryMarks&&D.push.apply(D,gt(T.queryMarks()))}var q=P.parent();if(!q)break;P=q}return D},E=k(U(g)),_=n.commonAncestorNode,A=t.card.find(_,!0),x=A==null?void 0:A.isEditable,C=x?A!=null&&A.getSelectionNodes?A.getSelectionNodes():[]:[_];if(C.length===0&&(x=!1,C.push(_)),(!n.collapsed||x)&&(k(U(p)).forEach(function(j){return b(E,j)}),u!==h||x)){var S=!1,O=!1;C.forEach(function(j){j.traverse(function(P){if(O)return!1;if(P[0]!==u){if(S){if(P[0]===h)return O=!0,!1;if(y.isMark(P)&&!P.attributes(We)&&!P.attributes(ut))b(E,P);else if(P.isCard()){var D=t.card.find(P);D!=null&&D.queryMarks&&D.queryMarks().forEach(function(T){b(E,T)})}}}else S=!0},!0,"editable")})}for(var M=0;M<E.length;M++)for(var V=M+1;V<E.length;V++)E[M][0]==E[V][0]&&(E.splice(V,1),V--);return E}},{key:"removeEmptyMarks",value:function(e,t){if(!(e.length===0||e.isEditable()||e.isCard()||e.attributes(Ce))){var n=this.editor.node;if(!e.attributes(Ce)){var r,a,o=e.parent();if(((r=e.get())===null||r===void 0?void 0:r.childNodes.length)===1&&((a=e.first())===null||a===void 0?void 0:a.attributes(Ce))){n.isMark(e)?(e.before(e.first()),e.remove(),o&&this.removeEmptyMarks(o,!0)):t&&n.isBlock(e)&&e.prepend("<br />");return}var l=n.html(e);(l===""||l==="\u200B")&&(n.isMark(e)?(e.remove(),o&&this.removeEmptyMarks(o,!0)):t&&n.isBlock(e)&&n.html(e,"<br />"))}}}},{key:"repairCursor",value:function(e){var t=this.editor.node;e=Le(e)?U(e):e;var n=t.isMark(e);if(n&&!e.isCursor()){var r=e.children();r.each(function(h,v){var g,p=r.eq(v);if((p==null?void 0:p.isText())&&!(!((g=p.next())===null||g===void 0)&&g.isCursor())){var b=p.text();if(b.length===1&&/\u200b/.test(b)){p.remove();return}p.text(b.replace(/\u200b/g,""))}});var a=e.children().toArray().filter(function(h){return!h.isCursor()});a.length<2&&(a.length===0||a.length===1&&a[0].isText()&&a[0].text().length===0)&&(a.length>0&&a[0].remove(),e.prepend(U("\u200B",null)));var o=e.next(),l=o==null?void 0:o.next();o&&l&&o.isText()&&/^\u200b$/g.test(o.text())&&!t.isInline(l)&&o.remove();var u=e.prev(),c=u==null?void 0:u.prev();u&&c&&u.isText()&&/^\u200b$/g.test(u.text())&&!t.isInline(c)&&u.remove()}}}]),d}(),Q0=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"trigger",value:function(e){var t=this.engine,n=t.change;t.mark;var r=t.inline,a=t.node,o=n.range.get(),l=o.cloneRange().shrinkToTextNode(),u=l.collapsed,c=l.endNode,h=l.startNode,v=l.startOffset;if(c.type===Node.TEXT_NODE||h.type===Node.TEXT_NODE){if(!u){var g=r.closest(c);if(a.isInline(g)&&!g.isCard()&&a.isEmpty(g)){if(v>1)return!0;var p=c.prev(),b=c.parent();if(b&&a.isInline(b)){if(p)return!0;var y=c.text(),k=y.substr(0,v);if(!/^\u200b$/.test(k))return!0;var E=g.next(),_=E==null?void 0:E.text();if(E&&E.isText()&&_&&/^\u200b/.test(_))return o.setEnd(E,1),!1}}return a.isInline(g)&&!g.isCard()&&setTimeout(function(){r.repairCursor(g)},100),!0}var A=r.closest(h);if(a.isInline(A)){if(A.isCard()||v>1)return!0;var x=h.prev(),C=h.parent();if(C&&a.isInline(C)){if(x)return!0;var S=h.text(),O=S.substr(0,v);if(!/\u200b$/.test(O))return!0}else if(v===0){for(;!x&&C&&!a.isInline(C);){var M;x=C.prev(),C=(M=C)===null||M===void 0?void 0:M.parent()}if(x&&!x.isText()||x&&!/\u200b$/.test(x.text()))return!0}else return!0;var V=A.prev(),j=V==null?void 0:V.text();if(V&&V.isText()&&j&&/\u200b$/.test(j)){if(o.setStart(V,j.length-1),a.isEmpty(A)){var P=A.next(),D=P==null?void 0:P.text();P&&P.isText()&&D&&/^\u200b/.test(D)&&o.setEnd(P,1)}else o.collapse(!0);return n.range.select(o),!1}return!0}else{var T=h.prev(),q=h.parent(),Z=void 0;if(T){if(a.isInline(T)&&!T.isCard()){var ie=h.text(),N=ie.substr(0,v);if(!/^\u200b$/.test(N))return!0;Z=T}}else if(v===0){for(;!T&&q&&!a.isBlock(q);){var F;T=q.prev(),q=(F=q)===null||F===void 0?void 0:F.parent()}if(T&&!T.isText())return!0;if(T){if(!/^\u200b$/.test(T.text()))return!0;if(T=T.prev(),T&&a.isInline(T))Z=T;else return!0}}else return!0;if(Z){var H=Z.last(),W=H==null?void 0:H.text();if(H&&H.isText()&&W&&/\u200b$/.test(W))return e.preventDefault(),o.setStart(H,W.length-1),o.collapse(!0),n.range.select(o),!1}}}return!0}}]),d}(),eb=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.inline,a=t.node,o=n.range.get().cloneRange().shrinkToTextNode(),l=o.startNode,u=o.startOffset,c=this.engine.card.getSingleCard(o);if(!c&&l.type===Node.TEXT_NODE){var h=r.closest(l);if(a.isInline(h)){if(h.isCard())return;if(u>1)return!0;var v=l.prev(),g=l.parent();if(g&&a.isInline(g)){if(v)return!0;var p=l.text(),b=p.substr(0,u);if(!/^\u200b$/.test(b))return!0}else if(u===0){for(;!v&&g&&!a.isInline(g);){var y;v=g.prev(),g=(y=g)===null||y===void 0?void 0:y.parent()}if(v&&!v.isText()||v&&!/^\u200b$/.test(v.text()))return!0}else return!0;var k=h.prev(),E=k==null?void 0:k.text();if(k&&k.isText()&&E&&/\u200b$/.test(E)){e.preventDefault();var _=o.cloneRange(),A=_.collapsed;return o.setStart(k,E.length-1),A&&o.collapse(!0),n.range.select(o),!1}return!0}else{var x=l.prev(),C=l.parent(),S=void 0;if(x){if(a.isInline(x)&&!x.isCard()){var O=l.text(),M=O.substr(0,u);if(!/^\u200b$/.test(M))return!0;S=x}}else if(u===0){for(;!x&&C&&!a.isBlock(C);){var V;x=C.prev(),C=(V=C)===null||V===void 0?void 0:V.parent()}if(x&&!x.isText())return!0;if(x){if(!/^\u200b$/.test(x.text()))return!0;if(x=x.prev(),x&&a.isInline(x))S=x;else return!0}}else return!0;if(S){e.preventDefault();var j=S.last(),P=j==null?void 0:j.text();if(j&&j.isText()&&P&&/\u200b$/.test(P)){var D=o.cloneRange(),T=D.collapsed;return o.setStart(j,P.length-1),T&&!qe("shift+left",e)&&o.collapse(!0),n.range.select(o),!1}}}}return!0}}]),d}(),tb=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.inline,a=t.node,o=n.range.get().cloneRange().shrinkToTextNode(),l=o.endNode,u=o.endOffset,c=this.engine.card.getSingleCard(o);if(!c&&l.type===Node.TEXT_NODE){var h=r.closest(l),v=l.text();if(a.isInline(h)){if(h.isCard())return;if(u<v.length-1)return!0;var g=l.next(),p=l.parent();if(p&&a.isInline(p)){if(g)return!0;var b=v.substr(u);if(!/^\u200b$/.test(b))return!0}else if(u===v.length||u===v.length-1){for(;!g&&p&&!a.isInline(p);){var y;g=p.next(),p=(y=p)===null||y===void 0?void 0:y.parent()}if(g&&!g.isText())return!0;if(g){if(!/^\u200b$/.test(g.text()))return!0;if(u===v.length-1){e.preventDefault();var k=o.cloneRange(),E=k.collapsed;return o.setEnd(g,0),E&&o.collapse(!1),n.range.select(o),!1}}}else return!0;var _=h.next(),A=_==null?void 0:_.text();if(_&&_.isText()&&A&&/^\u200b/.test(A)){e.preventDefault();var x=o.cloneRange(),C=x.collapsed;return o.setEnd(_,1),C&&o.collapse(!1),n.range.select(o),!1}return!0}else{var S=l.next(),O=l.parent(),M=void 0;if(S){if(a.isInline(S)&&!S.isCard()){var V=v.substr(u);if(!/^\u200b$/.test(V))return!0;M=S}}else if(u===v.length){for(;!S&&O&&!a.isBlock(O);){var j;S=O.next(),O=(j=O)===null||j===void 0?void 0:j.parent()}if(S&&!S.isText())return!0;if(S){if(!/^\u200b$/.test(S.text()))return!0;if(S=S.next(),S&&a.isInline(S))M=S;else return!0}}else return!0;if(M){e.preventDefault();var P=M.first(),D=P==null?void 0:P.text();if(P&&P.isText()&&D&&/^\u200b/.test(D)){var T=o.cloneRange(),q=T.collapsed;return o.setEnd(P,1),q&&!qe("shift+right",e)&&o.collapse(!1),n.range.select(o),!1}}}}return!0}}]),d}(),nb=function(){function d(i){ve(this,d),this.editor=void 0,this.editor=i}return we(d,[{key:"init",value:function(){var e=this.editor;if(ye(e)){var t,n,r,a=e.typing;e.event;var o=new Q0(e);(t=a.getHandleListener("backspace","keydown"))===null||t===void 0||t.on(function(c){return o.trigger(c)});var l=new eb(e);(n=a.getHandleListener("left","keydown"))===null||n===void 0||n.on(function(c){return l.trigger(c)});var u=new tb(e);(r=a.getHandleListener("right","keydown"))===null||r===void 0||r.on(function(c){return u.trigger(c)})}}},{key:"repairRange",value:function(e){var t=this.editor,n=t.change,r=t.node;e=e||n.range.get();var a=e,o=a.startNode,l=a.startOffset,u=a.endNode,c=a.endOffset,h=a.collapsed;if(h)return e;var v=this.closest(o);if(v&&r.isInline(v)&&l<=1){for(var g=!0,p=o;p&&!p.equal(v);){if(p.prev()){g=!1;break}p=p.parent()}if(g){var b=v.prev(),y=(b==null?void 0:b.text())||"";b&&b.isText()&&/\u200B$/g.test(y)&&e.setStart(b,y.length-1)}}var k=this.closest(u),E=k.last();if(k&&r.isInline(k)&&E&&u.equal(E)&&c>=E.text().length-1){for(var _=!0,A=o;A&&!A.equal(k);){if(A.next()){_=!1;break}A=A.parent()}if(_){var x=k.next(),C=(x==null?void 0:x.text())||"";x&&x.isText()&&/^\u200B/g.test(C)&&e.setEnd(x,1)}}return e}},{key:"closest",value:function(e){for(var t=this.editor.node,n=e.parent();n&&!n.isEditable()&&!t.isBlock(n);){if(t.isInline(n))return n;var r=n.parent();if(!r)break;n=r}return e}},{key:"closestNotInline",value:function(e){for(var t=this.editor.node;(t.isInline(e)||t.isMark(e)||e.isText())&&!e.isEditable();){var n=e.parent();if(!n)break;e=n}return e}},{key:"wrap",value:function(e,t){var n=this,r=this.editor;if(!!ye(r)){var a=r.change,o=r.mark,l=r.node,u=t||a.range.toTrusty(),c=wt(u.startContainer);if(typeof e=="string"||Le(e)?e=U(e,c):e=e,!!l.isInline(e)){if(u.collapsed){this.insert(e,u),t||a.apply(u);return}o.split(u),this.split(u);var h=u.commonAncestorNode;if(h.type===Node.TEXT_NODE||l.isMark(h))for(h=h.parent();l.isMark(h);)h=h.parent();var v=u.enlargeToElementNode().createSelection();if(!v.has()){t||a.apply(u);return}var g=!1,p=l.clone(e,!1),b=[];h.traverse(function(O){if(O.equal(v.anchor)){g=!0;return}else{if(g){if(O.equal(v.focus))return g=!1,!1;if(l.isInline(O))if(O.isCard())b.push(O);else{var M=O.children();l.unwrap(O),O=M}if(l.isMark(O)&&!O.isCard()||O.isText())return l.isEmpty(O)?(O.remove(),!0):(p.parent()||O.before(p),p.append(O),n.repairCursor(p),b.push(p),!0);p[0].childNodes.length!==0&&!!p.parent()&&(p=l.clone(p,!1,!1))}return}});var y=v.anchor,k=v.focus,E=y==null?void 0:y.parent();if(E&&l.isRootBlock(E)&&!y.prev()&&!y.next()&&y.after("<br />"),!y.equal(k)){var _=k==null?void 0:k.parent();_&&l.isRootBlock(_)&&!k.prev()&&!k.next()&&k.before("<br />")}if(v.move(),b.length>0){var A=b[0];if(!A.isCard()){var x=A.first();u.setStart(x,1)}var C=b[b.length-1];if(!C.isCard()){var S=C.last();u.setEnd(S,S.text().length-1)}}t||a.apply(u)}}}},{key:"unwrap",value:function(e){var t=this.editor;if(!!ye(t)){var n=t.change,r=t.mark,a=!e||!_i(e)?n.range.toTrusty():e;this.repairRange(a),r.split(a);var o=e&&!_i(e)?[e]:this.findInlines(a),l=a.createSelection();o.forEach(function(u){var c,h,v,g,p=u.prev();p&&p.isCursor()&&(p=p.prev());var b=u.next();b&&b.isCursor()&&(b=b.prev());var y=u.first();y&&y.isCursor()&&(y=y.next());var k=((c=p)===null||c===void 0?void 0:c.text())||"",E=((h=b)===null||h===void 0?void 0:h.text())||"",_=((v=y)===null||v===void 0?void 0:v.text())||"";p&&p.isText()&&/\u200B$/g.test(k)&&(/^\u200B$/g.test(k)?p.remove():p.text(k.substr(0,k.length-1))),b&&b.isText()&&/^\u200B/g.test(E)&&(/^\u200B$/g.test(E)?b.remove():b.text(E.substr(1))),y&&y.isText()&&/^\u200B/g.test(_)&&(/^\u200B$/g.test(_)||y.get().splitText(1),y.remove());var A=u.last();A&&A.isCursor()&&(A=A.prev());var x=((g=A)===null||g===void 0?void 0:g.text())||"";A&&A.isText()&&/\u200B$/g.test(x)&&(/^\u200B$/g.test(x)?A.remove():A.get().splitText(x.length-1).remove()),t.node.unwrap(u)}),l.move(),r.merge(a),e||n.apply(a)}}},{key:"insert",value:function(e,t){var n,r,a=this.editor;if(!!ye(a)){var o=a.change,l=a.node,u=a.mark,c=t||o.range.toTrusty(),h=wt(c.startContainer);if((typeof e=="string"||Le(e))&&(e=U(e,h)),!!l.isInline(e)){c.collapsed||o.delete(c),u.split(c),this.split(c),(n=l.insert(e,c))===null||n===void 0||n.select(e).collapse(!1),e.name!=="br"&&c.handleBr();var v=((r=e.get())===null||r===void 0?void 0:r.childNodes.length)!==0;if(this.repairCursor(e),!e.isCard()&&!l.isVoid(e))if(v){var g=e.next();c.setStart(g,1),c.setEnd(g,1)}else{var p=e.last(),b=p.text();c.setStart(p,b.length-1),c.setEnd(p,b.length-1)}t||o.apply(c)}}}},{key:"unwrapEmptyInlines",value:function(e,t){var n=this.editor.node,r=e.allChildren();r.forEach(function(a){n.isEmpty(a)&&n.isInline(a)&&(!t||t(a))&&n.unwrap(a)})}},{key:"splitOnCollapsed",value:function(e,t){var n=this;if(!!e.collapsed){e.enlargeFromTextNode(),e.shrinkToElementNode();var r=e.startNode,a=r.parent(),o=this.editor.node,l=r.isCard()?r:r.closest(yt);if((l.length===0||l.attributes(qt)!=="inline")&&(o.isInline(r)||a&&o.isInline(a))){var u,c=this.closestNotInline(r),h=e.createSelection(),v=h.getNode(c,"left"),g=void 0,p=void 0,b=[];if(t){Le(t)&&(t=U(t));var y=t.getPath(c.get()),k=c.clone(!0);b=y.slice(1),p=U(k.getChildByPath(y.slice(0,1))),g=h.getNode(k,"right",!1)}else g=h.getNode(c,"right");this.unwrapEmptyInlines(v),this.unwrapEmptyInlines(g);var E=c.children();E.each(function(D,T){var q;if(!(!((q=E.eq(T))===null||q===void 0)&&q.isCard())){var Z;(Z=E.eq(T))===null||Z===void 0||Z.remove()}});var _=void 0,A=function(T){T.each(function(q,Z){var ie=T.eq(Z);if(ie!=null&&ie.isCard()){_=_?_.next():c.first(),_&&(T[Z]=_[0]);return}_?(_.after(q),_=ie):(_=ie,c.prepend(q))})},x=v.children(),C=x.toArray();A(x);var S=g.children(),O=S.toArray();if(p&&(t=(u=O.find(function(D){return D.equal(p)}))===null||u===void 0?void 0:u.getChildByPath(b)),A(S),O=S.toArray(),C.length===1&&C[0].name==="br"&&(C[0].remove(),C.splice(0,1)),O.length===1&&O[0].name==="br"&&(O[0].remove(),O.splice(0,1)),O.filter(function(D){return!D.isCursor()}).length>0){for(var M=O[0],V=0;V<O.length-1&&(M=O[V],!!M.isCursor());V++);e.setStartBefore(M),e.collapse(!0)}else if(C.filter(function(D){return!D.isCursor()}).length>0){for(var j=C[C.length-1],P=C.length-1;P>=0&&(j=C[P],!!j.isCursor());P--);e.setStartAfter(j),e.collapse(!0)}else e.select(c,!0).collapse(!0);c.traverse(function(D){o.isInline(D)&&n.repairCursor(D)})}return e.enlargeToElementNode(!o.isBlock(e.startNode),!1),t}}},{key:"splitOnExpanded",value:function(e){var t=this;if(!e.collapsed){e.enlargeToElementNode(),e.shrinkToElementNode();var n=e.startNode,r=e.endNode,a=n.isCard()?n:n.closest(yt),o=r.isCard()?r:r.closest(yt);if(!(a.length>0&&a.attributes(qt)==="inline"||o.length>0&&o.attributes(qt)==="inline")){var l=this.closestNotInline(n),u=this.closestNotInline(r);if(!l.equal(u)){var c=e.cloneRange();c.collapse(!0);var h=e.cloneRange();h.collapse(!1);var v=void 0,g=c.startOffset,p=h.endOffset;l.contains(u)?(v=this.splitOnCollapsed(c,h.endNode),e.setStart(c.startContainer,c.startOffset),v&&h.setOffset(v,p,p),this.splitOnCollapsed(h),e.setEnd(h.startContainer,h.startOffset)):(v=this.splitOnCollapsed(h,c.startNode),e.setEnd(h.startContainer,h.startOffset),v&&c.setOffset(v,g,g),this.splitOnCollapsed(c),e.setStart(c.startContainer,c.startOffset));return}var b=this.editor.node,y=n.parent(),k=b.isInline(n)||y&&b.isInline(y),E=r.parent(),_=b.isInline(r)||E&&b.isInline(E);if(!k&&!_)return;var A=e.commonAncestorNode;A.isText()&&(A=A.parent());var x=this.closestNotInline(A),C=e.createSelection(),S=C.getNode(x,"left"),O=C.getNode(x),M=C.getNode(x,"right");this.unwrapEmptyInlines(S),this.unwrapEmptyInlines(M);var V=x.children();V.each(function(q,Z){var ie;if(!(!((ie=V.eq(Z))===null||ie===void 0)&&ie.isCard())){var N;(N=V.eq(Z))===null||N===void 0||N.remove()}});var j=void 0,P=function(Z){Z.each(function(ie,N){var F;if(!((F=Z.eq(N))===null||F===void 0)&&F.isCard()){j=j?j.next():x.first(),j&&(Z[N]=j[0]);return}j?(j.after(ie),j=Z.eq(N)):(j=Z.eq(N),x.prepend(ie))})};P(S.children());var D=O.children(),T=D.toArray();P(D),P(M.children()),x.traverse(function(q){b.isInline(q)&&t.repairCursor(q)}),e.setStartBefore(T[0][0]),e.setEndAfter(T[T.length-1][0])}}}},{key:"split",value:function(e){var t=this.editor;if(!!ye(t)){var n=t.change,r=e||n.range.toTrusty();r.collapsed?this.splitOnCollapsed(r):this.splitOnExpanded(r),e||n.apply(r)}}},{key:"findInlines",value:function(e){var t=this.editor,n=e.cloneRange();if(n.startNode.isRoot()&&n.shrinkToElementNode(),!n.startNode.inEditor()||t.card.find(n.startNode))return[];var r=t.node,a=function(M,V){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!!V.collapsed){var P=V.startNode,D=V.startOffset,T=P.findParent();if(!!T){var q=V.cloneRange();if(q.select(T,!0),j){q.setEnd(P,D),q.enlargeFromTextNode(),q.enlargeToElementNode(!0);var Z=P.children(),ie=q.endNode,N=q.endOffset,F=ie.children(),H=F.eq(N),W=Z.eq(D)||Z.eq(D-1);if(!M&&ie.type===Node.ELEMENT_NODE&&H&&r.isBlock(H)&&(P.type!==Node.ELEMENT_NODE||!!W&&!r.isBlock(W)))return;q.select(T,!0),q.setStart(ie,N),q.shrinkToElementNode(),q.shrinkToTextNode(),V.setStart(q.startContainer,q.startOffset),V.collapse(!0)}else{q.setStart(P,D),q.enlargeFromTextNode(),q.enlargeToElementNode(!0);var Y=P.children(),Q=q.startNode,re=q.startOffset,te=Q.children(),J=te.eq(re),ne=Y.eq(D)||Y.eq(D-1);if(!M&&Q.type===Node.ELEMENT_NODE&&J&&r.isBlock(J)&&(P.type!==Node.ELEMENT_NODE||ne&&!r.isBlock(ne)))return;q.select(T,!0),q.setEnd(Q,re),q.shrinkToElementNode(),q.shrinkToTextNode(),V.setEnd(q.endContainer,q.endOffset),V.collapse(!1)}}}};if(!n.collapsed){var o=n.cloneRange(),l=n.cloneRange();o.collapse(!0),l.collapse(!1),a(!0,o,!0),a(!0,l),n.setStart(o.startContainer,o.startOffset),n.setEnd(l.startContainer,l.startOffset)}a(!1,n);var u=n.startContainer,c=n.startOffset,h=n.endContainer,v=n.endOffset,g=u,p=h;u.nodeType===Node.ELEMENT_NODE&&u.childNodes[c]&&(g=u.childNodes[c]||u),h.nodeType===Node.ELEMENT_NODE&&v>0&&h.childNodes[v-1]&&(p=h.childNodes[v-1]||u),n.collapsed&&(g=p);var b=function(M,V){M.some(function(j){return j[0]===V[0]})||M.push(V)},y=function(M){for(var V=[];M&&!M.isEditable();){r.isInline(M)&&V.push(M);var j=M.parent();if(!j)break;M=j}return V},k=y(U(g)),E=n.commonAncestorNode,_=t.card.find(E,!0),A=_==null?void 0:_.isEditable,x=A?_!=null&&_.getSelectionNodes?_.getSelectionNodes():[]:[E];if(x.length===0&&(A=!1,x.push(E)),(!n.collapsed||A)&&(y(U(p)).forEach(function(O){return b(k,O)}),u!==h||A)){var C=!1,S=!1;x.forEach(function(O){O.traverse(function(M){if(S)return!1;if(M.equal(u))C=!0;else if(C){if(M.equal(h))return S=!0,!1;r.isInline(M)&&!M.attributes(We)&&!M.attributes(ut)&&b(k,M)}})})}return k}},{key:"repairCursor",value:function(e){var t,n,r=this.editor.node;if(Le(e)&&(e=U(e)),!r.isInline(e)||e.closest(yt).attributes(fr)==="false"||r.isVoid(e)||e.isCard()){var a=e.prev(),o=a!=null&&a.isText()?a.text():void 0;if(o&&/\u200b$/.test(o)){var l=a==null?void 0:a.prev();(!l||!r.isInline(l))&&(o.length===1?a==null||a.remove():a==null||a.text(o.slice(0,-1)))}var u=e.next(),c=u!=null&&u.isText()?u.text():void 0;if(c&&/^\u200b/.test(c)){var h=u==null?void 0:u.next();(!h||!r.isInline(h))&&(c.length===1?u==null||u.remove():u==null||u.text(c.slice(1)))}return}var v=e.children();v.each(function(b,y){var k=v.eq(y);if(k!=null&&k.isText()){var E=k.text();if(E.length===1&&/\u200b/.test(E)){k.remove();return}k.text(E.replace(/\u200b/g,""))}}),this.repairBoth(e);var g=e.first();!((t=g)===null||t===void 0)&&t.isCursor()&&(g=g.next()),(!g||g.type!==Node.TEXT_NODE||!/^\u200B/g.test(g.text()))&&(g?g.isText()?g.text("\u200B"+g.text()):g.before(U("\u200B",null)):e.append(U("\u200B",null)));var p=e.last();!((n=p)===null||n===void 0)&&n.isCursor()&&(p=p.prev()),p&&(/^\u200B$/g.test(e.text())||p.type!==Node.TEXT_NODE||!/\u200B$/g.test(p.text()))&&(p.isText()?p.text(p.text()+"\u200B"):p.after(U("\u200B",null)))}},{key:"repairBoth",value:function(e){var t,n=this.editor.node;if(Le(e)&&(e=U(e)),((t=e.get())===null||t===void 0?void 0:t.parentNode)&&!n.isVoid(e)){var r=U("\u200B",null),a=e.prev(),o=a==null?void 0:a.prev(),l=(a==null?void 0:a.text())||"";!a||!a.isText()||!/\u200B$/g.test(l)||o&&n.isInline(o)&&!/\u200B.*\u200B$/g.test(l)?a&&a.isText()?a.text(l+"\u200B"):e.before(n.clone(r,!0,!1)):a&&a.isText()&&/\u200B\u200B$/g.test(l)&&o&&!n.isInline(o)&&a.text(l.substr(0,l.length-1));var u=e.next(),c=(u==null?void 0:u.text())||"",h=u==null?void 0:u.next();!u||!u.isText()||!/^\u200B/g.test(c)||h&&n.isInline(h)&&!/^\u200B\u200B/g.test(c)?u&&u.isText()?u.text("\u200B"+u.text()):(e.after(n.clone(r,!0,!1)),(u==null?void 0:u.name)==="br"&&u.remove()):u&&u.isText()&&/\u200B\u200B$/g.test(c)&&h&&!n.isInline(h)&&u.text(c.substr(0,c.length-1))}}},{key:"flat",value:function(e,t){var n=this,r=this.editor;if(_i(e)){var a=e.cloneRange().shrinkToElementNode().createSelection(),o=this.findInlines(e),l=[];o.forEach(function(p){if(!p.isCard()){var b=n.flat(p);b&&l.push(b)}}),a.move();var u=r.node;l.forEach(function(p){var b,y,k=(b=p.prev())===null||b===void 0?void 0:b.prev(),E=(y=p.next())===null||y===void 0?void 0:y.next();k&&u.isMark(k)&&k.get().childNodes.length===0&&k.remove(),E&&u.isMark(E)&&E.get().childNodes.length===0&&E.remove()});return}if(!e.isCard()){var c=r.node,h=r.mark;if(c.isInline(e,t)&&e.name!=="br"){var v=this.closest(e);if(!v.equal(e)&&c.isInline(v,t))c.unwrap(e);else{var g=function(){for(var p=h.closest(e),b=e,y=function(){var E=p.clone(),_=e.clone(),A=p.children();A.each(function(x){if(!(x.nodeType===3&&/^\u200b$/.test(x.textContent||""))){var C=U(x);b.equal(C)||C.contains(b)?(b=c.wrap(c.replace(b,E),_),n.repairBoth(b)):c.wrap(C,E)}}),c.unwrap(p),p=h.closest(b)};p&&!p.equal(e)&&c.isMark(p,t);)y();return{v:b}}();if(lt(g)==="object")return g.v}}}}}]),d}(),rb=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.node;t.list;var a=n.range.get().shrinkToElementNode().shrinkToTextNode(),o=this.engine.block,l=o.closest(a.endNode),u=l.parent();if(u&&u.inEditor()&&r.isBlock(u)){var c;if(u.name==="li"&&l.name==="p"){var h,v;((h=l.get())===null||h===void 0?void 0:h.childNodes.length)===1&&((v=l.first())===null||v===void 0?void 0:v.name)==="br"&&l.first().remove();var g=a.createSelection();n.unwrap(l),g.move(),l=o.closest(a.endNode)}if(a.collapsed&&(a.startContainer.childNodes.length===1&&((c=a.startContainer.firstChild)===null||c===void 0?void 0:c.nodeName)==="BR"||o.isLastOffset(a,"end")&&o.isFirstOffset(a,"end")))return e.preventDefault(),["li"].indexOf(u.name)>=0?(o.unwrap("<".concat(u.name," />")),o.setBlocks("<".concat(u.name," />"))):(o.unwrap("<".concat(u.name," />")),o.setBlocks("<p />")),!1}if(r.isBlock(l)&&(!u||!r.isList(u))&&!l.isCard())return e.preventDefault(),o.insertOrSplit(a,l),!1;if(l.name!=="li")return!0}}]),d}(),ib=function(){function d(i){ve(this,d),this.engine=void 0,this.engine=i}return we(d,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.node,a=t.block,o=t.card,l=n.range.get();if(!!l.collapsed){var u=l.getPrevNode();if(u&&r.isBlock(u)&&r.isEmptyWithTrim(u)){e.preventDefault();var c=u.parent();return u.remove(),c&&this.engine.node.isEmpty(c)&&(c.isEditable()?(this.engine.node.html(c,"<p><br /></p>"),l.select(c,!0).shrinkToElementNode().collapse(!1)):(this.engine.node.html(c,"<br />"),l.select(c,!0).collapse(!1)),n.apply(l)),!1}var h=!!o.closest(l.startNode);if(!h&&!a.isFirstOffset(l,"start")){var v=l.cloneRange().shrinkToElementNode().shrinkToTextNode();v.startContainer.nodeType===Node.TEXT_NODE&&function(p){var b=p,y=b.commonAncestorContainer,k=b.commonAncestorNode,E=k.parent(),_=E==null?void 0:E.attributes();if(p.collapsed&&p.startOffset===1&&p.startContainer===y&&y.nodeType===Node.TEXT_NODE&&(!_||!["left","right"].includes(_[ut]))){var A,x,C;if(p=p.cloneRange(),(((A=y.parentNode)===null||A===void 0||(x=A.childNodes)===null||x===void 0?void 0:x.length)||0)<=1&&((C=y.textContent)===null||C===void 0?void 0:C.length)===1){var S=p,O=S.startNode,M=S.startOffset,V=O.parent();if(V&&r.isMark(V)&&M>0){var j=O.text(),P=j.substr(M-1,1);if(/^\u200b$/.test(P))if(M===1){var D=V.prev();if(D&&!r.isEmpty(D)){var T=p.cloneRange().select(D,!0).shrinkToTextNode().collapse(!1),q=T.startNode,Z=T.startOffset;p.setStart(q,Z-1)}}else p.setStart(O,M-1)}return p.collapsed&&p.select(y,!0),n.delete(p,!0),n.apply(p),!0}}return!1}(v)&&(e.preventDefault(),e.isDelete=!0,n.change());return}var g=a.closest(l.startNode);return!h&&r.isRootBlock(g)?(e.preventDefault(),r.isEmpty(g)&&g.html("<br />"),n.mergeAfterDelete(g),n.change(!1),!1):!0}}}]),d}(),ab=function(){function d(i){ve(this,d),this.editor=void 0,this.pluginCaches=new Map,this.editor=i}return we(d,[{key:"init",value:function(){var e=this,t=this.editor;if(ye(t)){var n,r,a=t.typing,o=t.event,l=new rb(t);(n=a.getHandleListener("enter","keydown"))===null||n===void 0||n.on(function(c){return l.trigger(c)});var u=new ib(t);(r=a.getHandleListener("backspace","keydown"))===null||r===void 0||r.on(function(c){return u.trigger(c)}),o.on("keyup:space",function(c){return e.triggerMarkdown(c)})}}},{key:"triggerMarkdown",value:function(e){var t,n=this.editor;if(!(!ye(n)||((t=n.options.markdown)===null||t===void 0?void 0:t.mode)===!1)){var r=n.change,a=r.range.get();if(!(!a.collapsed||r.isComposing())){var o=a.startNode,l=a.startOffset,u=o.type===Node.TEXT_NODE?o:o.children().eq(l-1);if(!!u){var c=this.closest(u);if(!!n.node.isRootBlock(c)){var h=u.text().trimEnd(),v=a.toPath(),g=ao(n,"zero"),p=g.parse(h,{});if(p.length!==0){var b=Ws(n,g,p,!1);return b?(e.preventDefault(),a.select(c,!0),r.paste(b,a),r.rangePathBeforeCommand=v,r.range.select(a),!1):!0}}}}}}},{key:"findPlugin",value:function(e){var t=this.editor,n=t.node,r=t.schema,a=t.plugin;if(!(e.length===0||!n.isBlock(e))){var o=e.get().cloneNode(),l=o.outerHTML,u=this.pluginCaches.get(l);if(u)return u;for(var c in a.components){var h=a.components[c];if(Jc(h)&&(!h.tagName||typeof h.tagName=="string"?e.name===h.tagName:h.tagName.indexOf(e.name)>-1)){var v=h.schema();if(Array.isArray(v)?v.find(function(g){return r.checkNode(e,g.attributes)}):r.checkNode(e,v.attributes))return this.pluginCaches.set(l,h),h}}return u}}},{key:"findTop",value:function(e,t){var n=this.editor,r=n.schema,a=n.node,o=n.list,l=r.closest(e.name),u=r.closest(t.name);if(l===parent.name||u===t.name)return t;if(r.isAllowIn(e.name,t.name))return e;if(a.isList(e)&&a.isList(t)){var c=parseInt(t.attributes(o.INDENT_KEY),10)||0,h=parseInt(e.attributes(o.INDENT_KEY),10)||0;t.attributes(o.INDENT_KEY,h?h+1:c+1)}return t}},{key:"closest",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},n=e;e;){if((e.isEditable()||this.editor.node.isBlock(e))&&t(e))return e;var r=e.parent();if(!r)break;e=r}return n}},{key:"wrap",value:function(e,t){var n=this,r,a=this.editor;if(!!ye(a)){var o=a.change,l=a.node,u=a.schema,c=a.list,h=a.mark,v=t||o.range.toTrusty(),g=wt(v.startContainer);if(typeof e=="string"||Le(e)?e=U(e,g):e=e,!!l.isBlock(e)){var p=this.getBlocks(v),b=this.findPlugin(e);if(p=p.map(function(_){var A;if(!_||_.isCard())return null;for(var x=e,C=(A=_)===null||A===void 0?void 0:A.parent();C&&!C.isEditable();){_=C;var S=C.parent();if(S&&l.isBlock(S))C=S;else break}return u.isAllowIn(x.name,_.name)?_:n.findPlugin(_)===b?_.children():null}).filter(function(_){return _!==null}),p.length===0){var y=this.closest(v.startNode);if(y.isCard()||y.isEditable()||!u.isAllowIn(e.name,y.name))return;var k=v.createSelection();y.children().each(function(_){e.append(_)}),y.append(e),k.move();return}var E=v.createSelection();(r=p[0])===null||r===void 0||r.before(e),p.forEach(function(_){_&&(b&&_.allChildren().forEach(function(A){if(l.isMark(A)){var x,C=h.findPlugin(A);if(!C)return;!((x=b.disableMark)===null||x===void 0)&&x.indexOf(C.constructor.pluginName)&&l.unwrap(A)}}),e.append(_))}),E.move(),this.merge(v),c.merge(void 0,v),t||o.apply(v)}}}},{key:"unwrap",value:function(e,t){var n=this.editor;if(!!ye(n)){var r=n.change,a=n.node,o=t||r.range.toTrusty(),l=wt(o.startContainer);if(typeof e=="string"||Le(e)?e=U(e,l):e=e,!!a.isBlock(e)){var u=this.getSiblings(o,e);if(u.length!==0){var c=u[0].node.parent();if(!!(c!=null&&c.inEditor())){var h=u.some(function(_){return _.position==="left"}),v=u.some(function(_){return _.position==="right"}),g=void 0;if(h){var p=c;g=a.clone(p,!1,!1),p.before(g)}var b=void 0;if(v){var y=u[u.length-1].node.parent();y&&(b=a.clone(y,!1,!1),y==null||y.after(b))}var k=o.createSelection(),E=a;u.forEach(function(_){var A=_.position,x=_.node,C=x.parent();if(A==="left"){var S;(S=g)===null||S===void 0||S.append(x)}if(A==="center"){var O;(C==null?void 0:C.name)===((O=e)===null||O===void 0?void 0:O.name)&&(C==null?void 0:C.inEditor())&&E.unwrap(C)}if(A==="right"){var M;(M=b)===null||M===void 0||M.append(x)}}),g&&g.name==="ol"&&b&&b.name==="ol"&&b.attributes("start",(parseInt(g.attributes("start"),10)||1)+g.find("li").length),k.move(),t||r.apply(o)}}}}}},{key:"getSiblings",value:function(e,t){var n=this,r=[],a=this.editor.node;if(!a.isBlock(t))return r;for(var o=function(p,b){for(var y=n.closest(p);y;){var k=y.parent();if(!k||!y.inEditor()||y.text().trim()!==k.text().trim()||k.name===b)break;y=k}return y},l=o(e.startNode,t.name),u=o(e.endNode,t.name),c=l.parent(),h="left",v=c==null?void 0:c.first();v;){if(v=U(v),!a.isBlock(v)||!v.inEditor())return r;v[0]===l[0]&&(h="center"),r.push({position:h,node:v}),v[0]===u[0]&&(h="right"),v=v.next()}return r}},{key:"split",value:function(e){var t,n,r=this.editor;if(!!ye(r)){var a=r.change,o=r.mark,l=r.nodeId,u=e||a.range.toTrusty();u.collapsed||a.delete(u);var c=this.closest(u.startNode);if(!(!c.isEditable()&&!c.inEditor())){if(c.isEditable()){var h=u.getStartOffsetNode();h&&u.select(h,!0).shrinkToElementNode().collapse(!1),e||a.apply(u);return}var v=u.cloneRange();v.shrinkToElementNode().shrinkToTextNode().collapse(!0);var g=o.findMarks(v).filter(function(k){var E=r.mark.findPlugin(k);return(E==null?void 0:E.copyOnEnter)!==!1&&(E==null?void 0:E.followStyle)!==!1}),p=this.getBlockByRange({block:c[0],range:u,isLeft:!1,keepDataId:!0}),b=r.node;p.traverse(function(k){!b.isVoid(k)&&(b.isInline(k)||b.isMark(k))&&b.isEmpty(k)&&k.remove()},!0);var y=function(E){return b.isBlock(E)&&(E.childNodes.length===0||E.innerText==="")};return y(c[0])&&!y(p[0])?l.generate(c,!0):l.generate(p,!0),c.after(p),b.isEmpty(c)&&b.html(c,b.getBatchAppendHTML(g,g.length>0?"&#8203;":"<br />")),b.isEmpty(p)&&b.html(p,b.getBatchAppendHTML(g,g.length>0?"&#8203;":"<br />")),c.children().each(function(k){b.isInline(k)&&r.inline.repairCursor(k)}),p.children().each(function(k){b.isInline(k)&&r.inline.repairCursor(k)}),u.select(p,!0).shrinkToElementNode(),((t=p.get())===null||t===void 0?void 0:t.childNodes.length)===1&&((n=p.first())===null||n===void 0?void 0:n.name)==="br"?u.collapse(!1):u.collapse(!0),e||a.apply(u),p}}}},{key:"insert",value:function(e,t,n){var r,a,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=this.editor;if(!!ye(l)){var u=l.change,c=l.node,h=l.list,v=l.inline,g=t||u.range.toTrusty(),p=wt(g.startContainer);if(typeof e=="string"||Le(e)?e=U(e,p):e=e,!!c.isBlock(e)){g.collapsed||u.delete(g);var b=this.closest(g.startNode);if(!b.isEditable()&&!b.inEditor()){t||u.apply(g);return}if(b.isEditable()){c.insert(e,g,o),g.collapse(!1),t||u.apply(g);return}if(c.isList(g.startNode)||g.startNode.closest("li").length>0){var y=p.createDocumentFragment();y.appendChild(e[0]),h.insert(y,g),t||u.apply(g);return}((r=b.get())===null||r===void 0?void 0:r.childNodes.length)===1&&((a=b.first())===null||a===void 0?void 0:a.name)==="br"&&g.select(b,!0).collapse(!1);var k=g.enlargeToElementNode().createSelection();if(!k.has()){t||u.apply(g);return}b=n?n(b):b;var E=k.getNode(b,"left");E.traverse(function(M){M.equal(E)||c.isBlock(M)&&(c.isEmpty(M)||h.isEmptyItem(M))&&M.remove()});var _=k.getNode(b,"right",!0,function(M){if(M.isCard()){var V=M.parent();if(V&&c.isCustomize(V))return!1}return!0}),A=b.children();if(c.isEmpty(b)||A.each(function(M,V){var j=A.eq(V);if(!(j!=null&&j.isCard())){var P;(P=A.eq(V))===null||P===void 0||P.remove()}}),_.traverse(function(M){!M.equal(_)||(c.isBlock(M)&&(c.isEmpty(M)||h.isEmptyItem(M))?M.remove():c.isList(M)&&h.addBr(M))}),_.length>0&&!c.isEmpty(_)&&!h.isEmptyItem(_)){var x=_.clone(!1);l.nodeId.generate(x,!0);var C=_.children();C.each(function(M,V){var j;if(!((j=C.eq(V))===null||j===void 0)&&j.isCard()){var P=l.card.find(M);P&&x.append(P.root)}else x.append(M)}),_=x,b.after(x)}if(E.length>0&&!c.isEmpty(E)&&!h.isEmptyItem(E)){var S=void 0,O=function(V){V.each(function(j,P){var D=V.eq(P);if(D&&c.isInline(D)&&v.repairCursor(D),D!=null&&D.isCard()){S=S?S.next():b.first(),S&&(V[P]=S[0]);return}S?(S.after(j),S=D):(S=D,b.prepend(j))})};O(E.children())}b&&b.length>0&&(g.select(b,!0),g.collapse(!1)),k.focus&&k.focus.remove(),k.anchor&&k.anchor.remove(),c.insert(e,g,o),t||u.apply(g)}}}},{key:"setBlocks",value:function(e,t){var n=this,r=this.editor;if(!!ye(r)){var a=r.node,o=r.schema,l=r.mark,u=r.change,c=t||u.range.toTrusty(),h=wt(c.startContainer),v=null,g={};typeof e=="string"?(v=U(e,h),g=v.attributes(),g.style=v.css()):g=e;var p=this.getBlocks(c),b=c.startNode;if(b.isEditable()&&p.length===0){if(b.isCard()||b.isEditable())return;var y=v||U("<p></p>");if(!o.isAllowIn(y.name,b.name))return;a.setAttributes(y,g);var k=c.createSelection();b.children().each(function(O){y.append(O)});var E=o.data.globals.block||{},_=b.attributes();Object.keys(_).forEach(function(O){O!==Oe&&O!=="id"&&E.name&&y.attributes(O,_[O])});var A=E.style||{},x=b.css();Object.keys(x).forEach(function(O){A[O]||delete x[O]}),y.css(x),b.append(y),k.move(),t||u.apply(c);return}var C=v?this.findPlugin(v):void 0,S=c.createSelection();p.forEach(function(O){if(!O.attributes(We)){if(v){var M=o.data.globals.block||{},V=O.attributes();Object.keys(V).forEach(function(q){if(q!==Oe&&q!=="id"&&M.name){var Z;(Z=v)===null||Z===void 0||Z.attributes(q,V[q])}});var j=M.style||{},P=O.css();Object.keys(P).forEach(function(q){j[q]||delete P[q]}),v.css(P)}if(!v||n.findPlugin(O)===C&&O.name===v.name){v&&(g=v.attributes()),a.setAttributes(O,g);return}if(!(v.name!=="p"&&o.isAllowIn(O.name,v.name))){C&&O.allChildren().forEach(function(q){if(a.isMark(q)){var Z=l.findPlugin(q);if(!Z)return;C.disableMark&&C.disableMark.indexOf(Z.constructor.pluginName)>-1&&a.unwrap(q)}});var D=a.replace(O,v),T=D.parent();T&&!T.isEditable()&&!o.isAllowIn(T.name,D.name)&&a.unwrap(T)}}}),S.move(),t||u.apply(c)}}},{key:"merge",value:function(e){var t=this.editor;if(!!ye(t)){var n=t.change,r=t.schema,a=e||n.range.toTrusty(),o=this.getBlocks(a);if(o.length!==0){var l=o[0].closest(Nr),u=r.getCanMergeTags();if(u.length!==0){var c=l.find(u.join(","));if(c.length>0){for(var h=a.createSelection(),v=c.next();v&&u.indexOf(v.name)>0;){var g=v.prev(),p=v.attributes(),b=g==null?void 0:g.attributes();v.name===(g==null?void 0:g.name)&&p.class===(b?b.class:void 0)&&Object.keys(p).join(",")===Object.keys(b||{}).join(",")&&t.node.merge(g,v),v=v.next()}h.move()}e||n.apply(a)}}}}},{key:"findBlocks",value:function(e){var t,n=this.editor;if(e=e.cloneRange(),e.startNode.isRoot()&&e.shrinkToElementNode(),!e.startNode.inEditor()||((t=n.card.find(e.startNode))===null||t===void 0?void 0:t.type)===Rt.BLOCK)return[];var r=e.startContainer,a=e.startOffset,o=e.endContainer,l=e.endOffset,u=r,c=o;r.nodeType===Node.ELEMENT_NODE&&r.childNodes[a]&&(u=r.childNodes[a]||r),o.nodeType===Node.ELEMENT_NODE&&l>0&&o.childNodes[l-1]&&(c=o.childNodes[l-1]||r),e.collapsed&&(u=c);var h=function(A,x,C){A.some(function(S){return S[0]===x[0]})||(C?A.unshift(x):A.push(x))},v=function(A){for(var x=[];A&&!A.isEditable();){n.node.isBlock(A)&&x.push(A);var C=A.parent();if(!C)break;A=C}return x},g=this.getBlocks(e);v(U(u)).forEach(function(_){return h(g,_,!0)});var p=e,b=p.commonAncestorNode,y=n.card.find(b,!0),k=y==null?void 0:y.isEditable,E=k?y!=null&&y.getSelectionNodes?y.getSelectionNodes():[]:[];return E.length===0&&(k=!1),(!e.collapsed||k)&&(v(U(c)).forEach(function(_){return h(g,_)}),E.forEach(function(_){_.traverse(function(A){A.isElement()&&!A.isCard()&&n.node.isBlock(A)&&h(g,A)},!0,"editable")})),g}},{key:"isFirstOffset",value:function(e,t){var n=e,r=n.startNode,a=n.endNode,o=n.startOffset,l=n.endOffset,u=t==="start"?r:a,c=t==="start"?o:l;e=e.cloneRange();var h=this.closest(u);e.select(h,!0),e.setEnd(u[0],c);var v=this.editor;v.node.isBlock(u)||e.enlargeToElementNode();var g=e.cloneContents();if(!g.firstChild)return!0;var p=v.node;if(g.childNodes.length===1&&U(g.firstChild).name==="br")return!0;var b=U("<div />");return b.append(g),p.isEmpty(b)}},{key:"isLastOffset",value:function(e,t){var n=e,r=n.startNode,a=n.endNode,o=n.startOffset,l=n.endOffset,u=t==="start"?r:a,c=t==="start"?o:l;e=e.cloneRange();var h=this.closest(u);e.select(h,!0),e.setStart(u,c);var v=this.editor.node;v.isBlock(u)||e.enlargeToElementNode();var g=e.cloneContents();if(!g.firstChild)return!0;var p=U("<div />");return p.append(g),0>=p.find("br").length&&v.isEmpty(p)}},{key:"getBlocks",value:function(e){e=e.cloneRange(),e.shrinkToElementNode(),e.shrinkToTextNode();var t=this.editor,n=t.node,r=this.closest(e.startNode);e.startNode.isRoot()&&(r=U(e.getStartOffsetNode()));var a=this.closest(e.endNode);e.endNode.isRoot()&&(a=U(e.getEndOffsetNode()));var o=this.closest(e.commonAncestorNode),l=[],u=!1,c=e,h=c.commonAncestorNode,v=t.card.find(h,!0),g=v==null?void 0:v.isEditable,p=g?v!=null&&v.getSelectionNodes?v.getSelectionNodes():[]:[o];return p.length===0&&(g=!1,p.push(o)),p.forEach(function(b){b.traverse(function(y){var k=U(y);if(k.equal(r)&&(u=!0),(u||g)&&t.node.isBlock(k)&&!k.isCard()&&k.inEditor()&&l.push(k),k.equal(a))return u=!1,!1},!0,"editable")}),l.length>1&&this.isFirstOffset(e,"end")&&!n.isEmpty(a)&&l.pop(),l}},{key:"getBlockByRange",value:function(e){var t=e.block,n=e.range,r=e.isLeft,a=e.clone,o=a===void 0?!1:a,l=e.keepDataId,u=l===void 0?!1:l;Le(t)&&(t=U(t));var c=this.editor,h=Ke.create(c,t.document);r?(h.select(t,!0),h.setEnd(n.startContainer,n.startOffset)):(h.select(t,!0),h.setStart(n.endContainer,n.endOffset));var v=o?h.cloneContents():h.extractContents(),g=u?t.clone(!1):c.node.clone(t,!1,!1);return g.append(v),o&&g.find(yt).each(function(p){var b=U(p),y=b.attributes(We);b.attributes(bt,y),b.removeAttributes(We)}),g}},{key:"getLeftText",value:function(e,t){var n=this.editor;if(!ye(n))return"";t=t||n.change.range.get();var r=this.getBlockByRange({block:e,range:t,isLeft:!0,clone:!0});return r.text().replace(/\u200B/g,"")}},{key:"removeLeftText",value:function(e,t){var n=this.editor;if(!!ye(n)){t=t||n.change.range.get(),Le(e)&&(e=U(e)),t.createSelection();var r=e.find(ro),a=!1;e.traverse(function(o){var l=U(o);if(l.equal(r)){r.remove(),a=!0;return}a&&l.isText()&&l.remove()},!1)}}},{key:"flat",value:function(e,t){var n=this.editor;if(!!ye(n))for(var r=n.schema,a=n.node,o=r.getCanMergeTags(),l=e.parent(),u=t.fragment?t[0].parentNode:t.get();l&&u&&l.get()!==u&&l.inEditor();){if(e.isCard())l.before(e);else if(a.isList(l)&&e.name==="li"||o.indexOf(l.name)>-1&&a.isBlock(e)&&l.name!==e.name){var c=a.clone(l,!1,!1);c.append(e),e=c,l.before(e)}else e=a.replace(e,a.clone(this.findTop(l,e),!1,!1)),l.before(e);l.first()||l.remove(),l=e.parent()}}},{key:"insertEmptyBlock",value:function(e,t){var n=this.editor;if(!!ye(n)){var r=n.change,a=r.blocks,o=r.marks,l=n.node;if(this.insert(t),a[0]){var u=a[0].css();t.css(u)}var c=t.find("br");o.forEach(function(v){var g=n.mark.findPlugin(v);v=l.clone(v,!1,!1),(g==null?void 0:g.copyOnEnter)!==!1&&(g==null?void 0:g.followStyle)!==!1&&(v=l.clone(v,!1,!1),c.before(v),v.append(c),c=v)}),c=t.find("br");var h=c.parent();h&&l.isMark(h)&&(c=l.replace(c,U("\u200B",null))),e.select(c).shrinkToTextNode(),e.collapse(!1),e.scrollIntoView(),r.range.select(e)}}},{key:"insertOrSplit",value:function(e,t){var n,r,a,o=e.cloneRange();if(o.enlargeFromTextNode(),this.isLastOffset(e,"end")||o.endNode.type===Node.ELEMENT_NODE&&(((n=t.get())===null||n===void 0?void 0:n.childNodes.length)||0)>0&&o.endContainer.childNodes[o.endOffset]===((r=t.last())===null||r===void 0?void 0:r.get())&&((a=t.first())===null||a===void 0?void 0:a.name)==="br"){var l=U("<p><br /></p>");if(t.name==="p"){var u=t.attributes();Object.keys(u).forEach(function(c){c!==Oe&&l.attributes(c,u[c])})}this.insertEmptyBlock(e,l)}else this.split()}}]),d}(),Nn=ir("_scrollNode"),ob=function(){function d(i,e){var t=this;ve(this,d),this.kind="editor",this.options={lang:"zh-CN",locale:{},plugins:[],cards:[],config:{},iconFonts:"url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.woff2?t=1638071536645') format('woff2'), url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.woff?t=1638071536645') format('woff'), url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.ttf?t=1638071536645') format('truetype')"},this.container=void 0,this.language=void 0,this.root=void 0,this.card=void 0,this.plugin=void 0,this.node=void 0,this.nodeId=void 0,this.list=void 0,this.mark=void 0,this.inline=void 0,this.block=void 0,this.event=void 0,this.schema=void 0,this.conversion=void 0,this.command=void 0,this.clipboard=void 0,this.request=void 0,Object.defineProperty(this,Nn,{writable:!0,value:null}),this.options=Pe(Pe({},this.options),e);var n=this.options.iconFonts,r=document.querySelector("#am-iconfont");if(!r&&n!==!1){r=document.createElement("style"),r.setAttribute("type","text/css"),r.setAttribute("id","am-iconfont");var a='@font-face { font-family: "data-icon";';Array.isArray(n)&&(n=n.map(function(l){return"url('".concat(l.url,"') format('").concat(l.format,"')")}).join(",")),a+="src: ".concat(n,";}"),r.innerHTML=a,document.head.appendChild(r)}this.container=U(i),this.container.attributes(Ce,lr),this.language=new g0(this.options.lang||"zh-CN",Qe.exports.merge(b0,e==null?void 0:e.locale)),this.event=new Pc,this.command=new C0(this),this.schema=new A0,this.schema.add(ym),this.conversion=new S0(this),bm.forEach(function(l){return t.conversion.add(l.from,l.to)}),this.card=new M0(this,this.options.lazyRender),this.clipboard=new z0(this),this.request=new Z0,this.plugin=new x0(this),this.node=new km(this),this.nodeId=new P0(this.schema),this.list=new Y0(this),this.mark=new J0(this),this.inline=new nb(this),this.block=new ab(this),this.root=U(this.options.root||this.container.parent()||document.body);var o=this.root.css("position");(!o||o==="static")&&this.root.css("position","relative")}return we(d,[{key:"scrollNode",get:function(){if(Je(this,Nn)[Nn])return Je(this,Nn)[Nn];for(var e=this.options.scrollNode,t=e?typeof e=="function"?e():e:null,n=["auto","scroll"],r=this.container.parent();!t&&r&&r.length>0&&r.name!=="body";)if(n.includes(r.css("overflow"))||n.includes(r.css("overflow-y"))){t=r.get();break}else r=r.parent();return t===null&&(t=document.documentElement),Je(this,Nn)[Nn]=t?U(t):null,Je(this,Nn)[Nn]}},{key:"init",value:function(){this.mark.init(),this.inline.init(),this.block.init(),this.list.init(),this.card.init(this.options.cards||[]),this.plugin.init(this.options.plugins||[],this.options.config||{}),this.nodeId.init()}},{key:"setScrollNode",value:function(e){Je(this,Nn)[Nn]=e?U(e):null}},{key:"on",value:function(e,t,n){return this.event.on(e,t,n),this}},{key:"off",value:function(e,t){return this.event.off(e,t),this}},{key:"trigger",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=this.event).trigger.apply(t,[e].concat(r))}},{key:"messageSuccess",value:function(e,t){for(var n,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];(n=console).log.apply(n,[e,"success:".concat(t)].concat(a))}},{key:"messageError",value:function(e,t){for(var n,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];(n=console).error.apply(n,[e,"error:".concat(t)].concat(a))}},{key:"messageConfirm",value:function(e,t){for(var n,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return(n=console).log.apply(n,[e,"confirm:".concat(t)].concat(a)),Promise.reject(!1)}},{key:"getSelectionData",value:function(e){var t,n,r=this;if(e||(e=(t=Ke.from(this))!==null&&t!==void 0?t:void 0),!!e){e=e.cloneRange();var a=e.startNode.closest("[".concat(We,"]"),function(ae){return U(ae).isEditable()?void 0:ae.parentNode||void 0});if(a.length>0&&!e.collapsed&&e.endOffset===0&&(e.endContainer.previousSibling&&e.setEndAfter(e.endContainer.previousSibling),!e.collapsed&&e.endOffset>0&&e.endContainer.childNodes[e.endOffset-1]===a[0])){var o=e.startNode.closest("[".concat(ut,'="center"]'),function(ae){return U(ae).isEditable()?void 0:ae.parentNode||void 0});o.length>0?e.setEnd(o[0],o[0].childNodes.length):e.setEnd(a[0],a[0].childNodes.length)}var l=e.commonAncestorNode;if(a=l.closest("[".concat(We,"]"),function(ae){return U(ae).isEditable()?void 0:ae.parentNode||void 0}),a.length>0){var u=l.closest("[".concat(ut,'="center"]'),function(ae){return U(ae).isEditable()?void 0:ae.parentNode||void 0});u.length===0&&(e.select(a),l=e.commonAncestorNode)}if(!(!l.inEditor()&&!l.isRoot())&&!e.collapsed){var c=function(fe){if(fe.length===0)return{};for(var me=fe.length-1;me>0;me--){var pe=fe[me];pe.appendChild(fe[me-1])}return{inner:fe[0],outter:fe[fe.length-1]}};if(a=l.closest("[".concat(We,"]"),function(ae){return ae.parentNode||void 0}),a.length>0){var h=this.card.find(a);if(h&&h.getSelectionNodes){var v=h.getSelectionNodes();if(v.length>0){var g=c(v.map(function(ae){return ae[0]})),p=g.inner,b=g.outter,y=v.map(function(ae){return ae.html()}).join(""),k=new vr("<div>".concat(y,"</div>"),this);y=k.toHTML(p,b);var E=new vr(y,this).toText(this.schema,!0);return{html:y,text:E}}}else if(!(h!=null&&h.isEditable))return}var _=this.node,A=this.list,x,C=e.startNode.closest("li");if(C&&_.isCustomize(C)){var S=e.endNode.closest("li");if(!C.equal(S)||A.isLast(e)&&A.isFirst(e))if(A.isFirst(e)){var O=C.parent(),M=C.getIndex();O&&e.setStart(O,M<0?0:M)}else{var V,j,P=C.parent(),D=e.createSelection(),T=D.getNode(C,"center",!0);if((V=D.anchor)===null||V===void 0||V.remove(),(j=D.focus)===null||j===void 0||j.remove(),ye(this)&&this.change.combinText(),T.length>0){var q=!1;T.each(function(ae,fe){var me=T.eq(fe);if(!q&&(me==null?void 0:me.name)==="li"){q=!0;return}q&&(me==null||me.remove())});var Z=C.first(),ie=Z?this.card.find(Z):void 0;ie&&(x=T,this.list.addCardToCustomize(x,ie.name,ie.getValue()),P&&_.wrap(x,P==null?void 0:P.clone()))}}}var N=e.enlargeToElementNode(!0).cloneContents(),F=[];if(l.isText()&&N.childNodes.length===1&&((n=N.firstChild)===null||n===void 0?void 0:n.nodeType)===Node.TEXT_NODE)for(var H=l.parent();H&&(_.isMark(H)||_.isInline(H));)F.push(H.clone(!1).get()),H=H.parent();N.querySelectorAll("li").forEach(function(ae){var fe,me,pe=U(ae),ke=pe.attributes(Oe);if(!!ke){var L=(fe=r.container.get())===null||fe===void 0?void 0:fe.querySelector("[".concat(Oe,"=").concat(ke,"]"));_.isCustomize(pe)&&!(!((me=pe.first())===null||me===void 0)&&me.isCard())&&(L==null?void 0:L.firstChild)&&pe.prepend(_.clone(U(L.firstChild),!0,!1));var K=L==null?void 0:L.parentElement;K=K?U(K.cloneNode(!1)):null;var z=ae.parentElement;L&&K&&_.isList(K)&&(!z||!_.isList(z))&&(K.name==="ol"&&K.removeAttributes("start"),_.wrap(ae,K))}});var W=c(F),Y=W.inner,Q=W.outter,re=[];N.childNodes.forEach(function(ae){var fe=U(ae);(_.isList(fe)||fe.name==="li")&&re.push(fe)}),this.nodeId.generateAll(U(N),!0),this.list.merge(re);var te=new vr(N,this),J=te.toHTML(Y,Q),ne=new vr(J,this).toText(this.schema,!0);return{html:J,text:ne}}}}},{key:"destroy",value:function(){this.container.removeAttributes(Ce),this.event.destroy(),this.plugin.destroy(),this.card.destroy(),this.container.empty()}}]),d}(),sb=`  .data-icon {\r
    font-family: "data-icon" !important;\r
    font-size: 16px;\r
    font-style: normal;\r
    -webkit-font-smoothing: antialiased;\r
    -moz-osx-font-smoothing: grayscale;\r
  }\r
  \r
  .data-icon-block-image:before {\r
    content: "\\ea20";\r
  }\r
  \r
  .data-icon-inline-image:before {\r
    content: "\\e601";\r
  }\r
  \r
  .data-icon-no-border:before {\r
    content: "\\e608";\r
  }\r
  \r
  .data-icon-line-height:before {\r
    content: "\\e697";\r
  }\r
  \r
  .data-icon-text:before {\r
    content: "\\e600";\r
  }\r
  \r
  .data-icon-comment:before {\r
    content: "\\e73e";\r
  }\r
  \r
  .data-icon-huanyuan:before {\r
    content: "\\e60a";\r
  }\r
  \r
  .data-icon-label:before {\r
    content: "\\e714";\r
  }\r
  \r
  .data-icon-video:before {\r
    content: "\\e741";\r
  }\r
  \r
  .data-icon-table:before {\r
    content: "\\e6a8";\r
  }\r
  \r
  .data-icon-h:before {\r
    content: "\\e7a0";\r
  }\r
  \r
  .data-icon-collapse-subtree:before {\r
    content: "\\e754";\r
  }\r
  \r
  .data-icon-expand-subtree:before {\r
    content: "\\e792";\r
  }\r
  \r
  .data-icon-sub-node:before {\r
    content: "\\e78e";\r
  }\r
  \r
  .data-icon-sister-node:before {\r
    content: "\\e784";\r
  }\r
  \r
  .data-icon-sup:before {\r
    content: "\\e790";\r
  }\r
  \r
  .data-icon-sub:before {\r
    content: "\\e75a";\r
  }\r
  \r
  .data-icon-maximize:before {\r
    content: "\\e752";\r
  }\r
  \r
  .data-icon-codeblock:before {\r
    content: "\\e709";\r
  }\r
  \r
  .data-icon-emoji:before {\r
    content: "\\e73a";\r
  }\r
  \r
  .data-icon-h4:before {\r
    content: "\\e759";\r
  }\r
  \r
  .data-icon-h1:before {\r
    content: "\\e75b";\r
  }\r
  \r
  .data-icon-h5:before {\r
    content: "\\e75c";\r
  }\r
  \r
  .data-icon-h2:before {\r
    content: "\\e75d";\r
  }\r
  \r
  .data-icon-h3:before {\r
    content: "\\e760";\r
  }\r
  \r
  .data-icon-h6:before {\r
    content: "\\e761";\r
  }\r
  \r
  .data-icon-liuchengtu:before {\r
    content: "\\e61c";\r
  }\r
  \r
  .data-icon-website:before {\r
    content: "\\e694";\r
  }\r
  \r
  .data-icon-preferences:before {\r
    content: "\\e788";\r
  }\r
  \r
  .data-icon-hr:before {\r
    content: "\\e76a";\r
  }\r
  \r
  .data-icon-task-list:before {\r
    content: "\\e79f";\r
  }\r
  \r
  .data-icon-unordered-list:before {\r
    content: "\\e777";\r
  }\r
  \r
  .data-icon-ordered-list:before {\r
    content: "\\e795";\r
  }\r
  \r
  .data-icon-arrow-left:before {\r
    content: "\\e748";\r
  }\r
  \r
  .data-icon-arrow-up:before {\r
    content: "\\e769";\r
  }\r
  \r
  .data-icon-arrow-right:before {\r
    content: "\\e779";\r
  }\r
  \r
  .data-icon-arrow-down:before {\r
    content: "\\e79a";\r
  }\r
  \r
  .data-icon-moremark:before {\r
    content: "\\e772";\r
  }\r
  \r
  .data-icon-clean:before {\r
    content: "\\e74d";\r
  }\r
  \r
  .data-icon-paintformat:before {\r
    content: "\\e756";\r
  }\r
  \r
  .data-icon-lock:before {\r
    content: "\\e768";\r
  }\r
  \r
  .data-icon-loading:before {\r
    content: "\\e76b";\r
  }\r
  \r
  .data-icon-unlock:before {\r
    content: "\\e796";\r
  }\r
  \r
  .data-icon-collapse:before {\r
    content: "\\e79e";\r
  }\r
  \r
  .data-icon-align-bottom:before {\r
    content: "\\e72b";\r
  }\r
  \r
  .data-icon-attachment:before {\r
    content: "\\e72c";\r
  }\r
  \r
  .data-icon-bold:before {\r
    content: "\\e72d";\r
  }\r
  \r
  .data-icon-border-color:before {\r
    content: "\\e72e";\r
  }\r
  \r
  .data-icon-border-all:before {\r
    content: "\\e72f";\r
  }\r
  \r
  .data-icon-border-inner:before {\r
    content: "\\e730";\r
  }\r
  \r
  .data-icon-border-left:before {\r
    content: "\\e731";\r
  }\r
  \r
  .data-icon-border-bottom:before {\r
    content: "\\e732";\r
  }\r
  \r
  .data-icon-border-none:before {\r
    content: "\\e733";\r
  }\r
  \r
  .data-icon-box:before {\r
    content: "\\e734";\r
  }\r
  \r
  .data-icon-border-outer:before {\r
    content: "\\e735";\r
  }\r
  \r
  .data-icon-border-right:before {\r
    content: "\\e736";\r
  }\r
  \r
  .data-icon-clear:before {\r
    content: "\\e737";\r
  }\r
  \r
  .data-icon-close:before {\r
    content: "\\e738";\r
  }\r
  \r
  .data-icon-code-example:before {\r
    content: "\\e739";\r
  }\r
  \r
  .data-icon-clip:before {\r
    content: "\\e73b";\r
  }\r
  \r
  .data-icon-border-up:before {\r
    content: "\\e73c";\r
  }\r
  \r
  .data-icon-code:before {\r
    content: "\\e73d";\r
  }\r
  \r
  .data-icon-command:before {\r
    content: "\\e73f";\r
  }\r
  \r
  .data-icon-compact-display:before {\r
    content: "\\e740";\r
  }\r
  \r
  .data-icon-copy:before {\r
    content: "\\e742";\r
  }\r
  \r
  .data-icon-download:before {\r
    content: "\\e743";\r
  }\r
  \r
  .data-icon-deletecolumn:before {\r
    content: "\\e744";\r
  }\r
  \r
  .data-icon-cut:before {\r
    content: "\\e745";\r
  }\r
  \r
  .data-icon-decreasedecimalplace:before {\r
    content: "\\e746";\r
  }\r
  \r
  .data-icon-drag:before {\r
    content: "\\e747";\r
  }\r
  \r
  .data-icon-delete:before {\r
    content: "\\e749";\r
  }\r
  \r
  .data-icon-drag-circle:before {\r
    content: "\\e74a";\r
  }\r
  \r
  .data-icon-deleterow:before {\r
    content: "\\e74b";\r
  }\r
  \r
  .data-icon-edit:before {\r
    content: "\\e74c";\r
  }\r
  \r
  .data-icon-filter:before {\r
    content: "\\e74e";\r
  }\r
  \r
  .data-icon-expand:before {\r
    content: "\\e74f";\r
  }\r
  \r
  .data-icon-error:before {\r
    content: "\\e750";\r
  }\r
  \r
  .data-icon-freezerowcoloum:before {\r
    content: "\\e751";\r
  }\r
  \r
  .data-icon-freezefirstrow:before {\r
    content: "\\e753";\r
  }\r
  \r
  .data-icon-freezzecolumn:before {\r
    content: "\\e755";\r
  }\r
  \r
  .data-icon-border-style:before {\r
    content: "\\e757";\r
  }\r
  \r
  .data-icon-gotolink:before {\r
    content: "\\e758";\r
  }\r
  \r
  .data-icon-increasedecimalplace:before {\r
    content: "\\e75e";\r
  }\r
  \r
  .data-icon-insertrowbelow:before {\r
    content: "\\e75f";\r
  }\r
  \r
  .data-icon-image:before {\r
    content: "\\e762";\r
  }\r
  \r
  .data-icon-italic:before {\r
    content: "\\e763";\r
  }\r
  \r
  .data-icon-indent:before {\r
    content: "\\e764";\r
  }\r
  \r
  .data-icon-insertrowabove:before {\r
    content: "\\e765";\r
  }\r
  \r
  .data-icon-insertrowright:before {\r
    content: "\\e766";\r
  }\r
  \r
  .data-icon-left-circle-fill:before {\r
    content: "\\e767";\r
  }\r
  \r
  .data-icon-link:before {\r
    content: "\\e76c";\r
  }\r
  \r
  .data-icon-keyboard:before {\r
    content: "\\e76d";\r
  }\r
  \r
  .data-icon-more:before {\r
    content: "\\e76e";\r
  }\r
  \r
  .data-icon-merge-cells:before {\r
    content: "\\e76f";\r
  }\r
  \r
  .data-icon-outdent:before {\r
    content: "\\e770";\r
  }\r
  \r
  .data-icon-mention:before {\r
    content: "\\e771";\r
  }\r
  \r
  .data-icon-plus:before {\r
    content: "\\e773";\r
  }\r
  \r
  .data-icon-minus-circle-o:before {\r
    content: "\\e774";\r
  }\r
  \r
  .data-icon-highlight:before {\r
    content: "\\e775";\r
  }\r
  \r
  .data-icon-paste:before {\r
    content: "\\e776";\r
  }\r
  \r
  .data-icon-insertrowleft:before {\r
    content: "\\e778";\r
  }\r
  \r
  .data-icon-quote:before {\r
    content: "\\e77a";\r
  }\r
  \r
  .data-icon-plus-circle-o:before {\r
    content: "\\e77b";\r
  }\r
  \r
  .data-icon-right-circle-fill:before {\r
    content: "\\e77c";\r
  }\r
  \r
  .data-icon-question-circle-o:before {\r
    content: "\\e77d";\r
  }\r
  \r
  .data-icon-preview:before {\r
    content: "\\e77e";\r
  }\r
  \r
  .data-icon-reload:before {\r
    content: "\\e77f";\r
  }\r
  \r
  .data-icon-rotate-left:before {\r
    content: "\\e780";\r
  }\r
  \r
  .data-icon-math:before {\r
    content: "\\e781";\r
  }\r
  \r
  .data-icon-overflow:before {\r
    content: "\\e782";\r
  }\r
  \r
  .data-icon-redo:before {\r
    content: "\\e783";\r
  }\r
  \r
  .data-icon-searchreplace:before {\r
    content: "\\e785";\r
  }\r
  \r
  .data-icon-save:before {\r
    content: "\\e786";\r
  }\r
  \r
  .data-icon-singleselect:before {\r
    content: "\\e787";\r
  }\r
  \r
  .data-icon-rotate-right:before {\r
    content: "\\e789";\r
  }\r
  \r
  .data-icon-sort-ascending:before {\r
    content: "\\e78a";\r
  }\r
  \r
  .data-icon-sort-descending:before {\r
    content: "\\e78b";\r
  }\r
  \r
  .data-icon-toc:before {\r
    content: "\\e78c";\r
  }\r
  \r
  .data-icon-solit-cells:before {\r
    content: "\\e78d";\r
  }\r
  \r
  .data-icon-translate:before {\r
    content: "\\e78f";\r
  }\r
  \r
  .data-icon-successful:before {\r
    content: "\\e791";\r
  }\r
  \r
  .data-icon-strikethrough:before {\r
    content: "\\e793";\r
  }\r
  \r
  .data-icon-undo:before {\r
    content: "\\e794";\r
  }\r
  \r
  .data-icon-underline:before {\r
    content: "\\e797";\r
  }\r
  \r
  .data-icon-unlink:before {\r
    content: "\\e798";\r
  }\r
  \r
  .data-icon-wrap:before {\r
    content: "\\e799";\r
  }\r
  \r
  .data-icon-upload:before {\r
    content: "\\e79b";\r
  }\r
  \r
  .data-icon-zoom-out:before {\r
    content: "\\e79c";\r
  }\r
  \r
  .data-icon-zoom-in:before {\r
    content: "\\e79d";\r
  }\r
  \r
  .data-icon-align-center:before {\r
    content: "\\e725";\r
  }\r
  \r
  .data-icon-align-justify:before {\r
    content: "\\e726";\r
  }\r
  \r
  .data-icon-align-left:before {\r
    content: "\\e727";\r
  }\r
  \r
  .data-icon-align-top:before {\r
    content: "\\e728";\r
  }\r
  \r
  .data-icon-align-right:before {\r
    content: "\\e729";\r
  }\r
  \r
  .data-icon-align-middle:before {\r
    content: "\\e72a";\r
  }\r
\r
.data-anticon {\r
    display: inline-block;\r
    font-style: normal;\r
    vertical-align: -0.125em;\r
    text-align: center;\r
    text-transform: none;\r
    line-height: 0;\r
    text-rendering: optimizeLegibility;\r
    -webkit-font-smoothing: antialiased;\r
}\r
\r
.data-anticon svg {\r
    display: inline-block;\r
}\r
\r
@-webkit-keyframes loadingCircle {\r
    100% {\r
      transform: rotate(360deg);\r
    }\r
}\r
@keyframes loadingCircle {\r
    100% {\r
      transform: rotate(360deg);\r
    }\r
}\r
\r
.data-anticon .data-anticon-spin {\r
    display: inline-block;\r
    -webkit-animation: loadingCircle 1s infinite linear;\r
    animation: loadingCircle 1s infinite linear;\r
}\r
\r
.data-anticon > * {\r
    line-height: 1;\r
}\r
\r
.am-engine {\r
    position: relative;\r
    background-color: #FFFFFF;\r
}\r
\r
.am-engine.am-engine-placeholder:before {\r
  content: attr(data-placeholder);\r
  pointer-events: none;\r
  position: absolute;\r
  color: #bbbfc4;\r
  height: 0;\r
}\r
\r
.am-engine ::-moz-selection {\r
    background: rgba(180, 213, 254, 0.5) !important;\r
    color: inherit!important;\r
}\r
\r
.am-engine ::selection {\r
    background: rgba(180, 213, 254, 0.5) !important;\r
    color: inherit!important;\r
}\r
\r
.am-engine , .am-engine-view {\r
    font-family: 'Chinese Quote', 'Segoe UI', Roboto, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji';\r
	word-wrap: break-word;\r
	outline-style: none;\r
	white-space: pre-wrap;\r
    -webkit-user-select: auto;\r
       -moz-user-select: auto;\r
        -ms-user-select: auto;\r
            user-select: auto;\r
    font-size: 14px;\r
    line-height: 1.74;\r
    color: #262626;\r
    letter-spacing: .05em;\r
    /* pt / px \u6362\u7B97\u8868\uFF1Ahttps://websemantics.uk/articles/font-size-conversion/ */\r
}\r
\r
.am-engine > *:first-child,.am-engine-view > *:first-child {\r
	margin-top: 0 !important;\r
}\r
\r
.am-engine p , .am-engine-view p {\r
    white-space: normal;\r
    margin: 0;\r
    line-height: 1.74;\r
}\r
\r
.am-engine [contenteditable="true"],.am-engine-view [contenteditable="true"] {\r
	outline-style: none;\r
}\r
\r
.am-engine .selection-transparent::-moz-selection,.am-engine-view .selection-transparent::-moz-selection {\r
	background: transparent;\r
}\r
\r
.am-engine .selection-transparent::selection,.am-engine-view .selection-transparent::selection {\r
	background: transparent;\r
}\r
/*---------------------------\u5361\u7247 begin-----------------------*/\r
\r
.am-engine [data-card-type], .am-engine-view [data-card-type] {\r
    white-space: normal;\r
}\r
.am-engine span[data-card-type="inline"],.am-engine-view span[data-card-type="inline"] {\r
	display: inline-block;\r
	text-indent: 0;\r
	vertical-align: baseline;\r
	white-space: initial;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element],.am-engine-view span[data-card-type="inline"] span[data-card-element] {\r
	display: inline-block;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="center"],.am-engine-view span[data-card-type="inline"] span[data-card-element="center"] {\r
	vertical-align: bottom;\r
  border-radius: 2px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\r
	text-align: left;\r
	-webkit-user-select: text;\r
	   -moz-user-select: text;\r
	    -ms-user-select: text;\r
	        user-select: text;\r
  min-width: 1px;\r
  background: transparent;\r
  bottom: 0;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"] {\r
  left: -1px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\r
  right: -1px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"]::-moz-selection,\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"]::-moz-selection,.am-engine-view span[data-card-type="inline"] span[data-card-element="right"]::-moz-selection {\r
  background: transparent !important;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"]::selection,\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"]::selection,\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"]::selection,.am-engine-view span[data-card-type="inline"] span[data-card-element="right"]::selection {\r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"],.am-engine-view div[data-card-type="block"],.am-engine span[data-card-type="inline"].data-card-block,.am-engine-view span[data-card-type="inline"].data-card-block {\r
	display: block;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\r
	bottom: 0;\r
	position: absolute;\r
	width: 2px;\r
	overflow: hidden;\r
	outline: none;\r
	text-align: left;\r
	text-indent: 0;\r
	-webkit-box-flex: 0;\r
	flex: 0 0 auto;\r
	-webkit-user-select: text;\r
	-moz-user-select: text;\r
	 -ms-user-select: text;\r
	     user-select: text;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"] {\r
	left: -2px;\r
	text-align: left;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\r
	right: -2px;\r
	text-align: right;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection { \r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::selection { \r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection {\r
	background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::selection {\r
	background: transparent !important;\r
}\r
	\r
\r
.am-engine span[data-card-element="body"],.am-engine-view span[data-card-element="body"],.am-engine div[data-card-element="body"],.am-engine-view div[data-card-element="body"] {\r
	position: relative;\r
}\r
\r
.am-engine span[data-card-element="body"] [data-card-element="center"],.am-engine-view span[data-card-element="body"] [data-card-element="center"],.am-engine div[data-card-element="body"] [data-card-element="center"],.am-engine-view div[data-card-element="body"] [data-card-element="center"] {\r
	-webkit-user-select: text;\r
	-moz-user-select: text;\r
	 -ms-user-select: text;\r
	     user-select: text;\r
}\r
.am-engine span[data-card-element="body"] [data-element="editable"],.am-engine div[data-card-element="body"] [data-element="editable"]\r
{\r
    cursor: text;\r
}\r
/*---------------------------\u5361\u7247 end-----------------------*/`;hn(sb);var lb=function(d){Ue(e,d);var i=He(e);function e(t,n){var r;ve(this,e),r=i.call(this,t,n),r._readonly=!1,r._container=void 0,r.kind="engine",r.typing=void 0,r.ot=void 0,r.change=void 0,r.history=void 0,r.hotkey=void 0,r.options=Pe(Pe({},r.options),n),r.history=new Wm(Tt(r)),r._container=new v0(r.container,{engine:Tt(r),lang:r.options.lang,className:r.options.className,tabIndex:r.options.tabIndex,placeholder:r.options.placeholder,autoPrepend:r.options.autoPrepend,autoAppend:r.options.autoAppend}),r.root=U(r.options.root||r.container.parent()||wt().body);var a=r.root.css("position");return(!a||a==="static")&&r.root.css("position","relative"),r._container.init(),r.change=new Im(Tt(r),{onChange:function(l){return r.trigger("change",l)},onSelect:function(){return r.trigger("select")},onRealtimeChange:function(l){r.trigger("realtimeChange",l)},onSetValue:function(){return r.trigger("afterSetValue")}}),r.change.init(),r.typing=new h0(Tt(r)),r._readonly=r.options.readonly===void 0?!1:r.options.readonly,r._container.setReadonly(r._readonly),r.hotkey=new Km(Tt(r)),r.init(),r.ot=new Gm(Tt(r)),r.isEmpty()&&r._container.showPlaceholder(),r.ot.initLocal(),r}return we(e,[{key:"readonly",get:function(){return this._readonly},set:function(n){this.readonly!==n&&(n?(this.hotkey.disable(),this._container.setReadonly(!0),this.ot.stopMutation()):(this.hotkey.enable(),this._container.setReadonly(!1),this.ot.startMutation()),this._readonly=n,this.card.reRender(),this.trigger("readonly",n))}},{key:"isFocus",value:function(){return this._container.isFocus()}},{key:"isEmpty",value:function(){return this.change.isEmpty()}},{key:"focus",value:function(n){this.change.range.focus(n)}},{key:"blur",value:function(){this.change.range.blur()}},{key:"getValue",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.change.getValue({ignoreCursor:n});return n?oo.removeTags(r):r}},{key:"getValueAsync",value:function(){var t=_n(ht.mark(function r(){var a=this,o,l,u=arguments;return ht.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=u.length>0&&u[0]!==void 0?u[0]:!1,l=u.length>1?u[1]:void 0,h.abrupt("return",new Promise(function(){var v=_n(ht.mark(function g(p,b){var y,k,E;return ht.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:y=ht.mark(function x(C){var S,O;return ht.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return S=a.plugin.components[C],V.next=3,new Promise(function(j){S.waiting?S.waiting(l).then(function(){return j(!0)}).catch(j):j(!0)});case 3:if(O=V.sent,lt(O)!=="object"){V.next=7;break}return b(O),V.abrupt("return",{v:void 0});case 7:case"end":return V.stop()}},x)}),A.t0=ht.keys(a.plugin.components);case 2:if((A.t1=A.t0()).done){A.next=10;break}return k=A.t1.value,A.delegateYield(y(k),"t2",5);case 5:if(E=A.t2,lt(E)!=="object"){A.next=8;break}return A.abrupt("return",E.v);case 8:A.next=2;break;case 10:p(a.getValue(o));case 11:case"end":return A.stop()}},g)}));return function(g,p){return v.apply(this,arguments)}}()));case 3:case"end":return h.stop()}},r)}));function n(){return t.apply(this,arguments)}return n}()},{key:"getHtml",value:function(){var n=U(this.container[0].cloneNode(!0));return n.removeAttributes(Yn),n.removeAttributes("tabindex"),n.removeAttributes("autocorrect"),n.removeAttributes("autocomplete"),n.removeAttributes("spellcheck"),n.removeAttributes("data-gramm"),n.removeAttributes("role"),new vr(n,this).toHTML()}},{key:"initDocOnReadonly",value:function(){if(this.readonly&&!this.ot.isRemote){var n;if(!((n=this.ot.doc)===null||n===void 0)&&n.type)this.ot.doc.data=Xn(this.container);else{var r;(r=this.ot.doc)===null||r===void 0||r.create(Xn(this.container))}}}},{key:"setValue",value:function(n,r){return n=this.trigger("beforeSetValue",n)||n,this.change.setValue(n,void 0,r),this.normalize(),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"setHtml",value:function(n,r){var a=this;return this.change.setHtml(n,function(o){a.normalize(),a.container.allChildren("editable").forEach(function(l){a.node.isInline(l)?a.inline.repairCursor(l):a.node.isMark(l)&&a.mark.repairCursor(l)}),r&&r(o)}),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"setMarkdown",value:function(n,r){var a=this;return this.change.setMarkdown(n,function(o){a.normalize(),a.container.allChildren("editable").forEach(function(l){a.node.isInline(l)?a.inline.repairCursor(l):a.node.isMark(l)&&a.mark.repairCursor(l)}),r&&r(o)}),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"setJsonValue",value:function(n,r){var a=U(Vc(n)),o=this.node.html(a);return this.change.setValue(o,void 0,r),this.normalize(),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"getJsonValue",value:function(){return Xn(this.container)}},{key:"normalize",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container,a=U("<p />"),o=r.children();o.each(function(l,u){var c=o.eq(u);!c||(n.node.isBlock(c)?(a.get().childNodes.length>0&&c.before(a),a=U("<p />")):c.isCursor()||a.append(c))}),a.get().childNodes.length>0&&r.append(a),o=r.children(),o.each(function(l,u){var c=o.eq(u);if(!!c&&(n.node.removeMinusStyle(c,"text-indent"),n.node.isRootBlock(c))){var h=c.get().childNodes.length;if(h===0)c.append(U("<br />"));else{var v=c.first();h===1&&(v==null?void 0:v.name)==="span"&&[$n,Kn,Zn].indexOf(v.attributes(Ce))>=0&&c.prepend(U("<br />"))}}})}},{key:"showPlaceholder",value:function(){this._container.showPlaceholder()}},{key:"hidePlaceholder",value:function(){this._container.hidePlaceholder()}},{key:"destroy",value:function(){this._container.destroy(),this.change.destroy(),this.hotkey.destroy(),this.typing.destroy(),this.ot&&this.ot.destroy(),Zt(Mt(e.prototype),"destroy",this).call(this)}}]),e}(ob),ub=`.card-maximize-header {\r
    position: fixed !important;\r
    top: 0;\r
    right: 0;\r
    left: 0;\r
    z-index: 9999;\r
    height: 56px;\r
    background: #fff;\r
    border-bottom: 1px solid #e8e8e8;\r
    width: 100%;\r
}\r
\r
.card-maximize-header .header-crumb {\r
    float: left;\r
    line-height: 32px;\r
    display: flex;\r
    height: 100%;\r
    align-items: center;\r
    -webkit-box-align: center;\r
    -ms-flex-align: center;\r
}\r
\r
.card-maximize-header .header-crumb a\r
{\r
    color: #595959 !important;\r
    font-size: 14px;\r
    cursor: pointer;\r
}\r
\r
.card-maximize-header .header-crumb .split {\r
    display: inline-block;\r
    vertical-align: middle;\r
    padding: 0 15px;\r
    font-size: 20px;\r
    padding-right: 8px;\r
    font-weight: 200;\r
    margin: 0 8px;\r
}\r
\r
.card-maximize-header .header-crumb .split + a {\r
    display: inline-block;\r
    vertical-align: middle;\r
}\r
\r
.card-maximize-header .header-crumb .split + a:hover {\r
	color: #8C8C8C;\r
}\r
\r
.data-card-block-max > [data-card-element="body"] > [data-card-element="center"], .data-card-block-max > [data-card-element="body"] > [data-card-element="center"].data-card-background-selected {\r
    top: 96px;\r
    background: #fafafa !important;\r
    position: fixed!important;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    z-index: 124;\r
    overflow: auto;\r
    padding: 20px;\r
}\r
\r
.am-engine-mobile .data-card-block-max > [data-card-element="body"] > [data-card-element="center"],.am-engine-view .data-card-block-max > [data-card-element="body"] > [data-card-element="center"] {\r
    top:56px;\r
}`;hn(ub);var cb=`.data-card-resize {\r
    position: absolute;\r
    bottom: -3px;\r
    right: 0px;\r
    left: 0px;\r
    margin: 0 auto;\r
    z-index: 2;\r
    display: flex;\r
    align-items: center;\r
    justify-content: center;\r
}\r
\r
.data-card-resize-btn{\r
    background: #d9dbdd;\r
    border-radius: 3px;\r
    height: 6px;\r
    padding: 0 50px;\r
    display: block;\r
}\r
\r
.data-card-resize-btn svg {\r
    display: block;\r
    color: #999;\r
}\r
\r
.data-card-resize-btn:hover {\r
    cursor: row-resize;\r
}`;hn(cb);var fb=`.data-card-dnd {\r
    position: absolute;\r
    top: 0;\r
    left: -21px;\r
    right: auto;\r
    bottom: auto;\r
    width: 18px;\r
    height: 24px;\r
    line-height: 24px;\r
    font-size: 14px;\r
    font-weight: normal;\r
    display: none;\r
    opacity: 0;\r
    z-index: 125;\r
    transition: all 0.3s ease-in-out;\r
    background: rgba(255, 255, 255, 0.9);\r
}\r
\r
.data-card-dnd-active {\r
    display: block;\r
    opacity: 1;\r
    cursor: pointer;\r
}\r
\r
.data-card-dnd:hover {\r
	background: #f4f4f4;\r
	color: #595959;\r
}\r
\r
.data-card-dnd-trigger {\r
    width: 18px;\r
    height: 24px;\r
    text-align: center;\r
    color: #BFBFBF;\r
    font-size: 16px;\r
    border-radius: 2px 2px;\r
    cursor: move;\r
    cursor: grab;\r
    cursor: -moz-grab;\r
    cursor: -webkit-grab;\r
}\r
\r
.am-engine-view .data-toolbar-active {\r
	min-width: 200px;\r
}\r
\r
.data-card-toolbar.data-toolbar-block {\r
	top: -48px;\r
	bottom: auto;\r
	display: none;\r
}\r
\r
.data-card-toolbar.data-card-toolbar-active {\r
	display: block;\r
}\r
\r
.data-card-toolbar.data-toolbar-active {\r
	display: block;\r
}`;hn(fb);var db=`.data-scrollable::-webkit-scrollbar {\r
    display: none;\r
    overflow: hidden;\r
  }\r
  .data-scrollable.scroll-x {\r
    padding-bottom: 10px;\r
    overflow-x: hidden;\r
  }\r
  \r
  .data-scrollable.scroll-y {\r
    padding-right: 10px;\r
    overflow-y: hidden;\r
  }\r
\r
  .data-scrollable:hover .data-scrollbar {\r
    display: block;\r
  }\r
  .data-scrollable.scrolling {\r
    -webkit-user-select: none;\r
       -moz-user-select: none;\r
        -ms-user-select: none;\r
            user-select: none;\r
  }\r
  .data-scrollable.scrolling .data-scrollbar {\r
    display: block;\r
  }\r
  .data-scrollable .data-scrollbar {\r
    display: none;\r
    position: absolute;\r
    cursor: default;\r
    transition: opacity 0.3s ease-in-out;\r
  }\r
  .data-scrollable .data-scrollbar .data-scrollbar-trigger {\r
    position: absolute;\r
    background: #c1c1c1;\r
    border-radius: 10px;\r
    cursor: pointer;\r
  }\r
  .data-scrollable .data-scrollbar .data-scrollbar-trigger:hover {\r
    background: #888;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-x {\r
    height: 8px;\r
    bottom: 0px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\r
    height: 8px;\r
    min-width: 60px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-y {\r
    top: 0;\r
    width: 8px;\r
    height: 100%;\r
    right: 0px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-y .data-scrollbar-trigger {\r
    width: 8px;\r
    min-height: 60px;\r
  }\r
  .data-scrollable .scrollbar-shadow-left {\r
    position: absolute;\r
    z-index: 10;\r
    left: 0;\r
    top: 0;\r
    bottom: 0;\r
    width: 4px;\r
    opacity: 0.8;\r
    background: linear-gradient(270deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\r
    background: -webkit-linear-gradient(right, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\r
    pointer-events: none;\r
  }\r
  .data-scrollable .scrollbar-shadow-right {\r
    position: absolute;\r
    z-index: 10;\r
    left: 0;\r
    top: 0;\r
    bottom: 0;\r
    width: 4px;\r
    opacity: 0.8;\r
    background: linear-gradient(90deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\r
    background: -webkit-linear-gradient(left, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\r
    pointer-events: none;\r
  }`;hn(db);var hb=`.data-resizer {\r
    position: absolute;\r
    width: 100%;\r
    height: 100%;\r
    top: 0;\r
    left: 0;\r
    bottom: 0px;\r
    right: 0;\r
    z-index: 1;\r
    outline: 2px solid #1890FF;\r
    max-width: initial !important;\r
}\r
.data-resizer img {\r
    position: absolute;\r
    top: 0;\r
    left: 0;\r
    bottom: 0;\r
    right: 0;\r
    cursor: pointer;\r
    width: 100%;\r
    height: 100%;\r
    opacity: 0.3;\r
}\r
.data-resizer-holder {\r
    position: absolute;\r
    width: 14px;\r
    height: 14px;\r
    border: 2px solid #fff;\r
    border-radius: 50%;\r
    background: #1890FF;\r
    display: inline-block;\r
}\r
.data-resizer-holder-right-top {\r
    top: -6px;\r
    right: -6px;\r
    cursor: nesw-resize;\r
}\r
.data-resizer-holder-right-bottom {\r
    bottom: -6px;\r
    right: -6px;\r
    cursor: nwse-resize;\r
}\r
.data-resizer-holder-left-bottom {\r
    bottom: -6px;\r
    left: -6px;\r
    cursor: nesw-resize;\r
}\r
.data-resizer-holder-left-top {\r
    left: -6px;\r
    top: -6px;\r
    cursor: nwse-resize;\r
}\r
\r
.data-resizer-number {\r
    position: absolute;\r
    display: inline-block;\r
    line-height: 24px;\r
    padding: 0 4px;\r
    font-size: 12px;\r
    border-radius: 3px 3px;\r
    background: rgba(0, 0, 0, 0.86);\r
    color: rgba(255, 255, 255, 0.96);\r
    font-family: 'Lucida Console', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\r
    opacity: 0;\r
    visibility: hidden;\r
    transition: opacity 0.3s ease-in-out;\r
    transform: scale(0.8);\r
}\r
\r
.data-resizer-number-right-top {\r
    top: 0px;\r
    right: -6px;\r
    transform: translateX(100%) scale(0.8);\r
}\r
\r
.data-resizer-number-right-bottom {\r
    right: -6px;\r
    bottom: 0px;\r
    transform: translateX(100%) scale(0.8);\r
}\r
\r
.data-resizer-number-left-bottom {\r
    left: -6px;\r
    bottom: 0px;\r
    transform: translateX(-100%) scale(0.8);\r
}\r
\r
.data-resizer-number-left-top {\r
    left: -6px;\r
    top: 0px;\r
    transform: translateX(-100%) scale(0.8);\r
}\r
\r
.data-resizer-number-active {\r
    opacity: 1;\r
    visibility: visible;\r
}`;hn(hb);var vn=(d=>(d.card="i-fluent-collections-24-regular",d.undo="i-simple-line-icons-action-undo",d.redo="i-simple-line-icons-action-redo",d.paint="i-ant-design-format-painter-outlined",d.eraser="i-fluent-eraser-tool-24-regular",d.bold="i-material-symbols-format-bold",d.italic="i-fluent-text-italic-24-regular",d.strick="i-fluent-text-strikethrough-24-regular",d.underline="i-icon-park-outline-text-underline",d.sup="i-ic-sharp-superscript",d.sub="i-ic-sharp-subscript",d))(vn||{});const Ni=(d={},i="div")=>{const e=document.createElement(i);return Object.entries(d).forEach(([t,n])=>{e.setAttribute(t,n)}),e},rl=(d,i)=>{var t;const e=document.createElement("button");return e.type="button",e.setAttribute("class",`${(t=d==null?void 0:d.class)!=null?t:""} ${d.icon} cursor-pointer`),e.title=d.title,e.addEventListener("click",()=>i.command.execute(d.cmd)),e},il=d=>{var t;const i=document.createElement("select");i.title=d.title,i.setAttribute("class",`${(t=d==null?void 0:d.class)!=null?t:""} cursor-pointer`);const e=Ni();return d.options.forEach(n=>{const r=document.createElement("option");r.value=n.value,r.innerHTML=n.render.content,r.setAttribute("style",n.render.style),e.appendChild(r)}),i.innerHTML=e.innerHTML,i.addEventListener("change",n=>d.cmd(n)),i};var vb=d=>rl({icon:vn.card,title:"\u66F4\u591A",cmd:""},d),gb=function(d){Ue(e,d);var i=He(e);function e(){return ve(this,e),i.apply(this,arguments)}return we(e,[{key:"execute",value:function(){var n=this.editor;!ye(n)||n.readonly||n.history.undo()}},{key:"queryState",value:function(){var n=this.editor;if(!(!ye(n)||n.readonly))return n.history.hasUndo()}},{key:"hotkey",value:function(){return this.options.hotkey||["mod+z","shift+mod+z"]}}],[{key:"pluginName",get:function(){return"undo"}}]),e}(Si),pb=function(d){Ue(e,d);var i=He(e);function e(){return ve(this,e),i.apply(this,arguments)}return we(e,[{key:"execute",value:function(){var n=this.editor;!ye(n)||n.readonly||n.history.redo()}},{key:"queryState",value:function(){var n=this.editor;if(!(!ye(n)||n.readonly))return n.history.hasRedo()}},{key:"hotkey",value:function(){return this.options.hotkey||["mod+y","shift+mod+y"]}}],[{key:"pluginName",get:function(){return"redo"}}]),e}(Si);function mb(d,i){i===void 0&&(i={});var e=i.insertAt;if(!(!d||typeof document=="undefined")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=d:n.appendChild(document.createTextNode(d))}}var bb=`.am-engine.data-paintformat-mode,\r
.am-engine-view.data-paintformat-mode {\r
    cursor: text;\r
    cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAUCAYAAACTQC2+AAAABGdBTUEAALGPC/xhBQAAATtJREFUSA3dlTFLA0EQhU+jlSkEG63EYGdlZZFG7QUbSyG/QP/C/Q0rqzQWQX+BwUKwtrexEFRQtFSI35NZWDa3soOHhQ8eM/v2zWw2N9xVVVUdwXUYoFxaq5il2wa8hvtG5dJaxYx16xFvLN8i3lmehiFC6Y94wbsTGsxZosajKA/7aewjrKZiyTocJO9DSYHT82r+YXyQs0eRfYBrD/Y1DB58OMyfeM/hrWq8N9qlZkmFBXiPPd6D7ikWUxwjrKWirTeJkzDeNYttKIxhDUuxiFGjfAnfMkUX3hs19emYqFt9P48mU6zVLEQPFjCfwgk8gyuwEd6pS5t0EQYmHhCXLZ8Kvz1oqmFO+H8HxVOXfZC5vwNd46y3xbx5ni1mQ4+dJ6NyDw4xX0GN9484YfcRhg+fcmmt408+5V99wSyVTWN94gAAAABJRU5ErkJggg==) 5 10, text;\r
}`;mb(bb);var yb="data-paintformat-mode",wb=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.activeMarks=void 0,t.activeBlocks=void 0,t.type=void 0,t.event=void 0,t.isFormat=!1,t.onBeforeCommandExecute=function(o){o!=="paintformat"&&!t.isFormat&&t.event&&t.removeActiveNodes(t.editor.container[0].ownerDocument)},t.onContainerMouseUp=function(o){if(!(!t.activeMarks||!o.target)){var l=t.editor;if(l.card.closest(U(o.target))){t.removeActiveNodes(l.container[0].ownerDocument);return}t.isFormat=!0,t.paintFormat(t.activeMarks,t.activeBlocks),t.isFormat=!1,t.type==="single"&&t.removeActiveNodes(l.container[0].ownerDocument)}},t}return we(e,[{key:"init",value:function(){var n=this.editor;!ye(n)||(n.on("beforeCommandExecute",this.onBeforeCommandExecute),n.container.on("mouseup",this.onContainerMouseUp))}},{key:"removeActiveNodes",value:function(n){Le(n)&&(n=U(n));var r=this.editor;r.container.removeClass(yb),this.activeMarks=void 0,this.activeBlocks=void 0,this.event&&(n.off("keydown",this.event),this.event=void 0),ye(r)&&r.trigger("select")}},{key:"bindEvent",value:function(n){var r=this,a=n[0].ownerDocument,o=function l(u){u.metaKey||u.ctrlKey||u.shiftKey||(r.event=void 0,(u.key==="Escape"||u.keyCode===27)&&(n.off("keydown",l),a&&r.removeActiveNodes(a)))};a&&(U(a).on("keydown",o),this.event=o)}},{key:"paintFormat",value:function(n,r){var a=this,o=this.editor;if(!!ye(o)){var l=o.change,u=o.command,c=o.block,h=l.range.get(),v=this.options.removeCommand||"removeformat";if(h.collapsed){var g=U("<img ".concat(Ce,'="').concat(ur,'" role="format-dummy" style="display: none;" />'));h.insertNode(g[0]);var p=c.closest(h.startNode);h.select(p,!0),l.range.select(h),typeof v=="function"?v(h):u.execute(v),this.paintMarks(n);var b=c.getBlocks(h);r&&b.forEach(function(k){a.paintBlocks(k,r)}),g=p.find('img[role="format-dummy"]'),h.select(g),h.collapse(!0),g.remove(),l.apply(h)}else{typeof v=="function"?v(h):u.execute(v),this.paintMarks(n);var y=c.getBlocks(h);r&&y.forEach(function(k){a.paintBlocks(k,r)})}o.mark.merge(h)}}},{key:"paintMarks",value:function(n){for(var r=this.editor,a=r.mark,o=n.length-1;o>=0;o--){var l=n[o];a.wrap(r.node.clone(l,!1,!1))}}},{key:"paintBlocks",value:function(n,r){var a=this,o=this.editor;if(!(!ye(o)||!n.inEditor())){var l=o.node,u=o.change,c=o.block,h=u.range.get(),v=h.createSelection("removeformat");r.forEach(function(g){if(!!n.inEditor()){if(a.options.paintBlock){var p=a.options.paintBlock(n,g);if(p===!1)return}if(g.name!==n.name){if(h.select(n).shrinkToElementNode(),u.blocks=[n],g.name==="p"){var b=c.findPlugin(n);b&&b.execute(g.name)}else if(l.isRootBlock(g)){var y=c.findPlugin(g);y&&y.execute(g.name)}else if(l.isList(g)&&g.name!=="li"){var k=c.findPlugin(g),E=c.findPlugin(n.name==="li"?n.parent():n);k&&E!==k&&k.execute()}}var _=g.css();Object.keys(_).length>0&&c.setBlocks({style:_})}}),v.move()}}},{key:"execute",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"single",r=this.editor;if(!!ye(r)){if(this.activeMarks){this.removeActiveNodes(r.container);return}this.type=n,this.bindEvent(r.container);var a=r.change,o=r.mark,l=r.block,u=a.range.get();this.activeMarks=o.findMarks(u),this.activeBlocks=l.findBlocks(u),r.trigger("select"),r.container.addClass("data-paintformat-mode")}}},{key:"queryState",value:function(){return!!this.activeMarks}},{key:"destroy",value:function(){var n=this.editor;n.off("beforeCommandExecute",this.onBeforeCommandExecute),n.container.off("mouseup",this.onContainerMouseUp)}}],[{key:"pluginName",get:function(){return"paintformat"}}]),e}(Si),kb=function(d){Ue(e,d);var i=He(e);function e(){return ve(this,e),i.apply(this,arguments)}return we(e,[{key:"execute",value:function(){var n=this.editor;if(!!ye(n)){var r=n.change,a=n.block,o=n.mark,l=n.inline,u=a,c=r.range.get(),h=u.getBlocks(c),v=o.findMarks(c),g=l.findInlines(c);if(v.length>0)o.unwrap();else if(g.length>0)l.unwrap();else{var p=c.createSelection("removeformat");h.forEach(function(b){var y=u.findPlugin(b.name==="li"?b.parent():b);y&&(c.select(b).shrinkToElementNode(),y.execute()),b.removeAttributes("style")}),p.move()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+\\"}}],[{key:"pluginName",get:function(){return"removeformat"}}]),e}(Si);const Eb=[gb,pb,wb,kb];var xb=d=>{const i=Ni({class:"children:m-1"});return[{icon:vn.undo,title:"\u64A4\u9500",cmd:"undo"},{icon:vn.redo,title:"\u6062\u590D",cmd:"redo"},{icon:vn.paint,title:"\u683C\u5F0F\u5237",cmd:"paintformat"},{icon:vn.eraser,title:"\u6A61\u76AE\u64E6",cmd:"removeformat"}].forEach(t=>{const n=rl(t,d);i.appendChild(n)}),i};function Cb(d,i){i===void 0&&(i={});var e=i.insertAt;if(!(!d||typeof document=="undefined")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=d:n.appendChild(document.createTextNode(d))}}var _b=`.data-anchor-button {\r
	position: absolute;\r
	width: 24px;\r
	height: 24px;\r
	line-height: 24px;\r
	text-align: center;\r
	font-size: 14px;\r
	display: block;\r
	background: rgba(255, 255, 255, 0.9);\r
	color: #BFBFBF;\r
	border-radius: 2px 2px;\r
	cursor: pointer;\r
	-webkit-user-select: none;\r
	-moz-user-select: none;\r
	-ms-user-select: none;\r
	user-select: none;\r
	opacity: 0;\r
	visibility: hidden;\r
	-webkit-transition: opacity 0.3s ease-in-out;\r
	transition: opacity 0.3s ease-in-out;\r
}\r
\r
.data-anchor-button.data-anchor-button-active {\r
	opacity: 1;\r
	visibility: visible;\r
}\r
\r
.data-anchor-button .data-icon {\r
	width: 18px;\r
}\r
\r
.data-anchor-button:hover {\r
	background: #f4f4f4;\r
	color: #595959;\r
}\r
\r
.am-engine-view h1,.am-engine-view h2,.am-engine-view h3,.am-engine-view h4,.am-engine-view h5,.am-engine-view h6 {\r
    position: relative;\r
}\r
\r
.am-engine-view h1 .data-anchor-button,.am-engine-view h2 .data-anchor-button,.am-engine-view h3 .data-anchor-button,.am-engine-view h4 .data-anchor-button,.am-engine-view h5 .data-anchor-button,.am-engine-view h6 .data-anchor-button{\r
    position: absolute;\r
    left: -24px;\r
    display: none;\r
}\r
\r
.am-engine-view h1:hover .data-anchor-button,.am-engine-view h2:hover .data-anchor-button,.am-engine-view h3:hover .data-anchor-button,.am-engine-view h4:hover .data-anchor-button,.am-engine-view h5:hover .data-anchor-button,.am-engine-view h6:hover .data-anchor-button {\r
    display: inline-block;\r
    opacity: 1;\r
    visibility: visible;\r
}\r
\r
.am-engine-view h1 , .am-engine h1,.am-engine-view h2 , .am-engine h2,.am-engine-view h3 , .am-engine h3,.am-engine-view h4 , .am-engine h4,.am-engine-view h5 , .am-engine h5,.am-engine-view h6 , .am-engine h6 {\r
    margin: 0;\r
    word-spacing: 1px;\r
    color: #262626;\r
    font-weight: bold;\r
    padding:0;\r
}\r
\r
.am-engine-view h1 , .am-engine h1 {\r
    font-size: 28px;\r
    line-height: 36px;\r
    padding: 7px 0;\r
}\r
\r
.am-engine-view h2 , .am-engine h2 {\r
    font-size: 24px;\r
    line-height: 32px;\r
    padding: 7px 0;\r
}\r
\r
.am-engine-view h3 , .am-engine h3 {\r
    font-size: 20px;\r
    line-height: 28px;\r
    padding: 7px 0;\r
}\r
\r
.am-engine-view h4 , .am-engine h4 {\r
    font-size: 16px;\r
    line-height: 24px;\r
    padding: 7px 0;\r
}\r
\r
.am-engine-view h5 , .am-engine h5 {\r
    font-size: 14px;\r
    line-height: 24px;\r
    padding: 7px 0;\r
}\r
\r
.am-engine-view h6 , .am-engine h6 {\r
    font-size: 14px;\r
    line-height: 24px;\r
    padding: 7px 0;\r
    font-weight: normal;\r
}`;Cb(_b);var Ab=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.attributes={id:"@var0"},t.variable={"@var0":/^[\w\.\-]+$/},t.tagName=["h1","h2","h3","h4","h5","h6"].filter(function(o){return!t.options.enableTypes||t.options.enableTypes.indexOf(o)>-1}),t.allowIn=["blockquote","$root"],t.disableMark=t.options.disableMark||["fontsize","bold"],t.onRender=function(o){var l=t.editor,u=l.language,c=U(o);t.tagName.length!==0&&c.find(t.tagName.join(",")).each(function(h){var v=U(h),g=v.attributes("id");if(g){v.find(".data-anchor-button").remove(),Jn.hide();var p=U('<a class="data-anchor-button" '.concat(Ce,'="').concat(ur,'"><span class="data-icon data-icon-').concat(v.name,'"></span></a>'));v.height()!==24&&p.css({top:(v.height()-24)/2+"px"}),p.on("mouseenter",function(){Jn.show(p,u.get("copyAnchor","title").toString())}),p.on("mouseleave",function(){Jn.hide()}),p.on("click",function(b){b.preventDefault(),b.stopPropagation();var y=t.options.anchorCopy?t.options.anchorCopy(g):window.location.href+"/"+g;l.clipboard.copy(y)?l.messageSuccess("copy",u.get("copy","success").toString()):l.messageError("copy",u.get("copy","error").toString())}),v.prepend(p)}})},t.updateId=function(){t.tagName.length!==0&&t.editor.container.find(t.tagName.join(",")).each(function(o){var l,u=U(o);if(!(!((l=u.parent())===null||l===void 0)&&l.isEditable())){u.removeAttributes("id");return}var c=u.attributes("id");(!c||U('[id="'.concat(c,'"]')).length>1)&&(c=u.attributes(Oe)||Xs(u),u.attributes("id",c))})},t.realtimeChange=function(){t.updateId(),t.showAnchor()},t.updateAnchorPosition=function(){var o,l=t.editor;if(!!ye(l)){var u=l.change,c=l.root,h=c.find(".data-anchor-button");if(h.length!==0){var v=u.range.get(),g=v.startNode.closest("h1,h2,h3,h4,h5,h6");if(g.length===0){h.remove(),Jn.hide();return}var p=((o=c.get())===null||o===void 0?void 0:o.getBoundingClientRect())||{left:0,top:0},b=g.get().getBoundingClientRect(),y=Math.round(b.left-p.left-h.get().clientWidth-1),k=Math.round(b.top-p.top+b.height/2-h.get().clientHeight/2);h.css({top:"".concat(k,"px"),left:"".concat(y,"px")})}}},t.showAnchor=function(){var o,l,u=t.editor;if(!(!ye(u)||t.tagName.length===0)){var c=u.change,h=u.root,v=u.clipboard,g=u.language,p=u.card,b=c.range.get(),y=h.find(".data-anchor-button"),k=b.startNode.closest(t.tagName.join(","));if((k.length===0||y.length>0&&y.find(".data-icon-".concat(k.name)).length===0||!u.isFocus())&&(y.remove(),Jn.hide()),!(k.length===0||p.closest(k,!0)||!u.isFocus())&&!!(!((o=k.parent())===null||o===void 0)&&o.isEditable())){if(y.find(".data-icon-".concat(k.name)).length>0){t.updateAnchorPosition();return}y=U('<span class="data-anchor-button" '.concat(Ce,'="').concat(ur,'"><span class="data-icon data-icon-').concat(k.name,'"></span></span>')),h.append(y);var E=((l=h.get())===null||l===void 0?void 0:l.getBoundingClientRect())||{left:0,top:0},_=k.get().getBoundingClientRect(),A=Math.round(_.left-E.left-y.get().clientWidth-1),x=Math.round(_.top-E.top+_.height/2-y.get().clientHeight/2);y.css({top:"".concat(x,"px"),left:"".concat(A,"px")}),y.addClass("data-anchor-button-active"),y.on("mouseenter",function(){Jn.show(y,g.get("copyAnchor","title").toString())}),y.on("mouseleave",function(){Jn.hide()}),y.on("click",function(C){C.preventDefault(),C.stopPropagation();var S=k.attributes("id"),O=t.options.anchorCopy?t.options.anchorCopy(S):window.location.href+"/"+S;v.copy(O)?u.messageSuccess("copy",g.get("copy","success").toString()):u.messageError("copy",g.get("copy","error").toString())})}}},t.markdownIt=function(o){t.options.markdown!==!1&&o.enable("heading")},t.onBackspace=function(o){var l,u=t.editor;if(!!ye(u)){var c=u.change,h=u.node,v=c.range.get();if(!!v.collapsed){var g=u.block;if(!!g.isFirstOffset(v,"start")){var p=g.closest(v.startNode);if(t.tagName.indexOf(p.name)>-1&&h.isEmptyWithTrim(p)&&((l=p.parent())===null||l===void 0?void 0:l.isEditable()))return o.preventDefault(),g.setBlocks("<p />"),!1;var b=p.parent();if(t.tagName.indexOf(p.name)>-1&&(!b||!h.isBlock(b)))return o.preventDefault(),c.mergeAfterDelete(p),!1}}}},t}return we(e,[{key:"init",value:function(){Zt(Mt(e.prototype),"init",this).call(this);var n=this.editor;if(ye(n))n.on("keydown:backspace",this.onBackspace),n.on("markdown-it",this.markdownIt),n.on("setValue",this.updateId),n.on("realtimeChange",this.realtimeChange),n.on("select",this.showAnchor),n.on("blur",this.showAnchor),window.addEventListener("resize",this.updateAnchorPosition);else{if(this.options.showAnchor===!1)return;n.on("render",this.onRender)}}},{key:"execute",value:function(n){var r=this.editor;if(!!ye(r)){(!n||n===this.queryState())&&(n="p");var a=this.options.enableTypes;if(!(n!=="p"&&a&&a.indexOf(n)<0)){var o=r.list,l=r.block;o.split(),l.setBlocks("<".concat(n," />"))}}}},{key:"queryState",value:function(){var n=this.editor;if(!!ye(n)){var r=n.change,a=r.blocks;if(a.length===0)return"";var o=this.tagName.find(function(l){return a.some(function(u){return u.name===l})});return o||""}}},{key:"hotkey",value:function(){var n,r,a,o,l,u,c=((n=this.options.hotkey)===null||n===void 0?void 0:n.h1)||"mod+opt+1",h=((r=this.options.hotkey)===null||r===void 0?void 0:r.h2)||"mod+opt+2",v=((a=this.options.hotkey)===null||a===void 0?void 0:a.h3)||"mod+opt+3",g=((o=this.options.hotkey)===null||o===void 0?void 0:o.h4)||"mod+opt+4",p=((l=this.options.hotkey)===null||l===void 0?void 0:l.h5)||"mod+opt+5",b=((u=this.options.hotkey)===null||u===void 0?void 0:u.h6)||"mod+opt+6",y=this.options.enableTypes;return[{key:c,args:"h1"},{key:h,args:"h2"},{key:v,args:"h3"},{key:g,args:"h4"},{key:p,args:"h5"},{key:b,args:"h6"}].filter(function(k){return!y||y.indexOf(k.key)>-1})}},{key:"destroy",value:function(){var n=this.editor;ye(n)?(n.off("keydown:backspace",this.onBackspace),n.off("markdown-it",this.markdownIt),n.off("setValue",this.updateId),n.off("realtimeChange",this.realtimeChange),n.off("select",this.showAnchor),n.off("blur",this.showAnchor),window.removeEventListener("resize",this.updateAnchorPosition)):n.off("render",this.onRender)}}],[{key:"pluginName",get:function(){return"heading"}}]),e}(w0),of="paste:each",Rn=ir("styleName"),Tb=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.tagName="span",Object.defineProperty(Tt(t),Rn,{writable:!0,value:"font-family"}),t.style=Ge({},Je(Tt(t),Rn)[Rn],"@var0"),t.variable={"@var0":{required:!0,value:"*"}},t.pasteEach=function(o){if(o.name===t.tagName){var l=o.css(),u=l[Je(Tt(t),Rn)[Rn]];if(!u)return;var c=t.options.filter;if(c){var h=c(u);h===!1?o.css(Je(Tt(t),Rn)[Rn],""):typeof h=="string"&&o.css(Je(Tt(t),Rn)[Rn],h)}else o.css(Je(Tt(t),Rn)[Rn],"");var v=t.editor.node;v.isMark(o)||v.unwrap(o)}},t}return we(e,[{key:"init",value:function(){Zt(Mt(e.prototype),"init",this).call(this);var n=this.editor;ye(n)&&n.on(of,this.pasteEach)}},{key:"isTrigger",value:function(n){var r=this.queryState();return r?!!n:!0}},{key:"execute",value:function(n){var r=this.editor;if(!!ye(r)){var a=r.change,o=r.mark,l=U("<".concat(this.tagName," />")),u=this.queryState();if(n&&(!u||n!==u[0])){if(this.setStyle(l,n),!this.followStyle&&a.range.get().collapsed)return;o.wrap(l);return}u&&(this.setStyle(l,u[0]),o.unwrap(l))}}},{key:"hotkey",value:function(){return this.options.hotkey||[]}},{key:"destroy",value:function(){var n=this.editor;ye(n)&&n.off(of,this.pasteEach)}}],[{key:"pluginName",get:function(){return"fontfamily"}}]),e}(Lr),sf="paste:each",Dn=ir("styleName"),Sb=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.mergeLeval=4,t.tagName="span",t.style={"font-size":"@var0"},t.variable={"@var0":{required:!0,value:/[\d\.]+(pt|px)$/}},Object.defineProperty(Tt(t),Dn,{writable:!0,value:"font-size"}),t.defaultSize=t.options.defaultSize||t.editor.container.css("font-size")||"14px",t.pasteEach=function(o){if(o.name===t.tagName){var l=o.css(Je(Tt(t),Dn)[Dn]);if(!l)return;var u=t.convertToPX(l);if(l.endsWith("pt")&&o.css(Je(Tt(t),Dn)[Dn],u),u!==t.defaultSize){var c=t.options.filter;if(c){var h=c(u);h===!1?o.css(Je(Tt(t),Dn)[Dn],""):typeof h=="string"&&o.css(Je(Tt(t),Dn)[Dn],h)}else o.css(Je(Tt(t),Dn)[Dn],"");var v=t.editor.node;v.isMark(o)||v.unwrap(o)}}},t}return we(e,[{key:"init",value:function(){Zt(Mt(e.prototype),"init",this).call(this);var n=this.editor;ye(n)&&n.on(sf,this.pasteEach),this.options.defaultSize&&n.container.css("font-size",this.defaultSize)}},{key:"isTrigger",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.defaultSize;return n!==r}},{key:"hotkey",value:function(){return this.options.hotkey||[]}},{key:"convertToPX",value:function(n){var r=/([\d\.]+)(pt|px)$/i.exec(n);return r&&r[2]==="pt"?String(Math.round(parseInt(r[1],10)*96/72))+"px":n}},{key:"destroy",value:function(){var n=this.editor;ye(n)&&n.off(sf,this.pasteEach)}}],[{key:"pluginName",get:function(){return"fontsize"}}]),e}(Lr);const Nb=[{key:"p",value:"\u6B63\u6587"},{key:"h1",value:"\u6807\u98981",style:"font-size: 28px; font-weight: bold;"},{key:"h2",value:"\u6807\u98982",style:"font-size: 24px; font-weight: bold;"},{key:"h3",value:"\u6807\u98983",style:"font-size: 20px; font-weight: bold;"},{key:"h4",value:"\u6807\u98984",style:"font-size: 16px; font-weight: bold;"},{key:"h5",value:"\u6807\u98985",style:"font-size: 14px; font-weight: bold;"},{key:"h6",value:"\u6807\u98986"}],Rb=[{key:"default",value:""},{key:"arial",value:"Arial"},{key:"comicSansMS",value:'"Comic Sans MS"'},{key:"courierNew",value:'"Courier New"'},{key:"georgia",value:"Georgia"},{key:"helvetica",value:"Helvetica"},{key:"impact",value:"Impact"},{key:"timesNewRoman",value:'"Times New Roman"'},{key:"trebuchetMS",value:'"Trebuchet MS"'},{key:"verdana",value:"Verdana"},{key:"fangSong",value:"\u4EFF\u5B8B"},{key:"stFangsong",value:"\u534E\u6587\u4EFF\u5B8B"},{key:"stSong",value:"\u534E\u6587\u5B8B\u4F53"},{key:"stKaiti",value:"\u534E\u6587\u6977\u4F53"},{key:"simSun",value:"\u5B8B\u4F53"},{key:"microsoftYaHei",value:"\u5FAE\u8F6F\u96C5\u9ED1"},{key:"kaiTi",value:"\u6977\u4F53"},{key:"kaitiSC",value:'"Kaiti SC"'},{key:"simHei",value:"\u9ED1\u4F53"},{key:"heitiSC",value:'"Heiti SC"'},{key:"fzHei",value:"FZHei-B01S"},{key:"fzKai",value:"FZKai-Z03S"},{key:"fzFangSong",value:"FZFangSong-Z02S"}],Db=["12px","13px","14px","15px","16px","19px","22px","24px","29px","32px","40px","48px"],Ob=[Ab,Tb,Sb];var qb=d=>{const i=Ni({class:"children:m-1"}),e=il({title:"\u6807\u9898",options:Nb.map(({key:r,value:a,style:o})=>({value:r,render:{content:a,style:o}})),cmd:r=>d.command.execute("heading",r.target.value)}),t=il({title:"\u5B57\u4F53",options:Rb.map(({key:r,value:a})=>({value:r,render:{content:`${a||"\u9ED8\u8BA4"}`,style:`font-family: ${a};`}})),cmd:r=>d.command.execute("fontfamily",r.target.value)}),n=il({title:"\u5B57\u53F7",options:Db.map(r=>({value:r,render:{content:r,style:`font-size: ${r};`}})),cmd:r=>d.command.execute("fontsize",r.target.value)});return i.appendChild(e),i.appendChild(t),i.appendChild(n),i},lf="markdown-it",Ib=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.tagName="strong",t.markdownIt=function(o){t.options.markdown!==!1&&o.enable("emphasis")},t}return we(e,[{key:"init",value:function(){Zt(Mt(e.prototype),"init",this).call(this);var n=this.editor;ye(n)&&n.on(lf,this.markdownIt)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+b"}},{key:"conversion",value:function(){return[{from:{span:{style:{"font-weight":["bold","700"]}}},to:this.tagName},{from:"b",to:this.tagName}]}},{key:"destroy",value:function(){this.editor.off(lf,this.markdownIt)}}],[{key:"pluginName",get:function(){return"bold"}}]),e}(Lr),uf="markdown-it",Lb=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.tagName="em",t.markdownIt=function(o){t.options.markdown!==!1&&o.enable("emphasis")},t}return we(e,[{key:"init",value:function(){Zt(Mt(e.prototype),"init",this).call(this);var n=this.editor;ye(n)&&n.on(uf,this.markdownIt)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+i"}},{key:"conversion",value:function(){return[{from:{span:{style:{"font-style":"italic"}}},to:this.tagName},{from:"i",to:this.tagName}]}},{key:"destroy",value:function(){this.editor.off(uf,this.markdownIt)}}],[{key:"pluginName",get:function(){return"italic"}}]),e}(Lr),cf="markdown-it",Bb=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.tagName="del",t.markdownIt=function(o){t.options.markdown!==!1&&o.enable("strikethrough")},t}return we(e,[{key:"init",value:function(){Zt(Mt(e.prototype),"init",this).call(this);var n=this.editor;ye(n)&&n.on(cf,this.markdownIt)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+x"}},{key:"conversion",value:function(){var n=this;return[{from:function(a,o){return a==="span"&&(o["text-decoration"]||"").includes("line-through")},to:function(a,o,l){var u=U("<".concat(n.tagName," />"));return o["text-decoration"]=o["text-decoration"].split(/\s+/).filter(function(c){return c!=="line-through"}).join(" ").trim(),u.css(o),u.attributes(l),u}},{from:"s",to:this.tagName},{from:"strike",to:this.tagName}]}},{key:"destroy",value:function(){this.editor.off(cf,this.markdownIt)}}],[{key:"pluginName",get:function(){return"strikethrough"}}]),e}(Lr),Mb=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.tagName="u",t}return we(e,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+u"}},{key:"conversion",value:function(){var n=this;return[{from:function(a,o){return a==="span"&&(o["text-decoration"]||"").includes("underline")},to:function(a,o,l){var u=U("<".concat(n.tagName," />"));return o["text-decoration"]=o["text-decoration"].split(/\s+/).filter(function(c){return c!=="underline"}).join(" ").trim(),u.css(o),u.attributes(l),u}}]}}],[{key:"pluginName",get:function(){return"underline"}}]),e}(Lr),ff="markdown-it",Pb=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.tagName="sup",t.markdownIt=function(o){t.options.markdown!==!1&&(o.use(require("markdown-it-sup")),o.enable("sup"))},t}return we(e,[{key:"init",value:function(){Zt(Mt(e.prototype),"init",this).call(this);var n=this.editor;ye(n)&&n.on(ff,this.markdownIt)}},{key:"conversion",value:function(){var n=this;return[{from:function(a,o){return a==="span"&&(o["vertical-align"]||"")==="super"},to:function(a,o,l){var u=U("<".concat(n.tagName," />"));return delete o["vertical-align"],u.css(o),u.attributes(l),u}}]}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+."}},{key:"destroy",value:function(){this.editor.off(ff,this.markdownIt)}}],[{key:"pluginName",get:function(){return"sup"}}]),e}(Lr),df="markdown-it",Fb=function(d){Ue(e,d);var i=He(e);function e(){var t;ve(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.tagName="sub",t.markdownIt=function(o){t.options.markdown!==!1&&(o.use(require("markdown-it-sub")),o.enable("sub"))},t}return we(e,[{key:"init",value:function(){Zt(Mt(e.prototype),"init",this).call(this);var n=this.editor;ye(n)&&n.on(df,this.markdownIt)}},{key:"conversion",value:function(){var n=this;return[{from:function(a,o){return a==="span"&&(o["vertical-align"]||"")==="sub"},to:function(a,o,l){var u=U("<".concat(n.tagName," />"));return delete o["vertical-align"],u.css(o),u.attributes(l),u}}]}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+,"}},{key:"destroy",value:function(){this.editor.off(df,this.markdownIt)}}],[{key:"pluginName",get:function(){return"sub"}}]),e}(Lr);const zb=[Ib,Lb,Bb,Mb,Pb,Fb];var Ub=d=>{const i=Ni({class:"children:m-1"});return[{icon:vn.bold,title:"\u52A0\u7C97",cmd:"bold"},{icon:vn.italic,title:"\u659C\u4F53",cmd:"italic"},{icon:vn.strick,title:"\u5220\u9664\u7EBF",cmd:"strikethrough"},{icon:vn.underline,title:"\u4E0B\u5212\u7EBF",cmd:"underline"},{icon:vn.sup,title:"\u4E0A\u6807",cmd:"sup"},{icon:vn.sub,title:"\u4E0B\u6807",cmd:"sub"}].forEach(t=>{const n=rl(t,d);i.appendChild(n)}),i};const Hb=d=>{const i=Ni({class:"toolbar-el"});return[vb,xb,qb,Ub].forEach(t=>{i.appendChild(t(d))}),i},Vb=[...Eb,...Ob,...zb];class jb{constructor(i){const e=document.querySelector(i),t=Ni({class:"m-0 p-10"});e.appendChild(t);const n=new lb(t,{plugins:[...Vb]}),r=Hb(n);e.prepend(r),n.setValue("<h1>\u6765\u4E86\u8001\u5F1F</h1>"),n.on("change",()=>{const a=n.getValue();console.log(`value:${a}`)}),this.engine=n}}return jb});
//# sourceMappingURL=index.umd.js.map
