(function(En,na){typeof exports=="object"&&typeof module!="undefined"?module.exports=na():typeof define=="function"&&define.amd?define(na):(En=typeof globalThis!="undefined"?globalThis:En||self,En.YoungEditor=na())})(this,function(){"use strict";var En=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function na(f){if(f.__esModule)return f;var i=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(f).forEach(function(e){var t=Object.getOwnPropertyDescriptor(f,e);Object.defineProperty(i,e,t.get?t:{enumerable:!0,get:function(){return f[e]}})}),i}var er={};Object.defineProperty(er,"__esModule",{value:!0});for(var rv=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),gs={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Du={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:rv?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},ps={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},Ha=1;Ha<20;Ha++)ps["f"+Ha]=111+Ha;function ja(f,i,e){i&&!("byKey"in i)&&(e=i,i=null),Array.isArray(f)||(f=[f]);var t=f.map(function(a){return Ru(a,i)}),n=function(o){return t.some(function(l){return Ou(l,o)})},r=e==null?n:n(e);return r}function iv(f,i){return ja(f,i)}function av(f,i){return ja(f,{byKey:!0},i)}function Ru(f,i){var e=i&&i.byKey,t={};f=f.replace("++","+add");var n=f.split("+"),r=n.length;for(var a in gs)t[gs[a]]=!1;var o=!0,l=!1,u=void 0;try{for(var c=n[Symbol.iterator](),h;!(o=(h=c.next()).done);o=!0){var v=h.value,g=v.endsWith("?")&&v.length>1;g&&(v=v.slice(0,-1));var p=ms(v),b=gs[p];if(v.length>1&&!b&&!Du[v]&&!ps[p])throw new TypeError('Unknown modifier: "'+v+'"');(r===1||!b)&&(e?t.key=p:t.which=qu(v)),b&&(t[b]=g?null:!0)}}catch(y){l=!0,u=y}finally{try{!o&&c.return&&c.return()}finally{if(l)throw u}}return t}function Ou(f,i){for(var e in f){var t=f[e],n=void 0;if(t!=null&&(e==="key"&&i.key!=null?n=i.key.toLowerCase():e==="which"?n=t===91&&i.which===93?91:i.which:n=i[e],!(n==null&&t===!1)&&n!==t))return!1}return!0}function qu(f){f=ms(f);var i=ps[f]||f.toUpperCase().charCodeAt(0);return i}function ms(f){return f=f.toLowerCase(),f=Du[f]||f,f}var Le=er.default=ja,Ga=er.isHotkey=ja;er.isCodeHotkey=iv,er.isKeyHotkey=av,er.parseHotkey=Ru,er.compareHotkey=Ou,er.toKeyCode=qu,er.toKeyName=ms;var Lu={exports:{}},Iu={exports:{}};(function(f){function i(e){return f.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f.exports.__esModule=!0,f.exports.default=f.exports,i(e)}f.exports=i,f.exports.__esModule=!0,f.exports.default=f.exports})(Iu),function(f){var i=Iu.exports.default;function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */f.exports=e=function(){return t},f.exports.__esModule=!0,f.exports.default=f.exports;var t={},n=Object.prototype,r=n.hasOwnProperty,a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(O,A,I){return Object.defineProperty(O,A,{value:I,enumerable:!0,configurable:!0,writable:!0}),O[A]}try{c({},"")}catch{c=function(I,$,ie){return I[$]=ie}}function h(O,A,I,$){var ie=A&&A.prototype instanceof p?A:p,N=Object.create(ie.prototype),P=new F($||[]);return N._invoke=function(V,W,Y){var Q="suspendedStart";return function(re,te){if(Q==="executing")throw new Error("Generator is already running");if(Q==="completed"){if(re==="throw")throw te;return M()}for(Y.method=re,Y.arg=te;;){var J=Y.delegate;if(J){var ne=S(J,Y);if(ne){if(ne===g)continue;return ne}}if(Y.method==="next")Y.sent=Y._sent=Y.arg;else if(Y.method==="throw"){if(Q==="suspendedStart")throw Q="completed",Y.arg;Y.dispatchException(Y.arg)}else Y.method==="return"&&Y.abrupt("return",Y.arg);Q="executing";var ae=v(V,W,Y);if(ae.type==="normal"){if(Q=Y.done?"completed":"suspendedYield",ae.arg===g)continue;return{value:ae.arg,done:Y.done}}ae.type==="throw"&&(Q="completed",Y.method="throw",Y.arg=ae.arg)}}}(O,I,P),N}function v(O,A,I){try{return{type:"normal",arg:O.call(A,I)}}catch($){return{type:"throw",arg:$}}}t.wrap=h;var g={};function p(){}function b(){}function y(){}var k={};c(k,o,function(){return this});var E=Object.getPrototypeOf,_=E&&E(E(G([])));_&&_!==n&&r.call(_,o)&&(k=_);var T=y.prototype=p.prototype=Object.create(k);function x(O){["next","throw","return"].forEach(function(A){c(O,A,function(I){return this._invoke(A,I)})})}function C(O,A){function I(ie,N,P,V){var W=v(O[ie],O,N);if(W.type!=="throw"){var Y=W.arg,Q=Y.value;return Q&&i(Q)=="object"&&r.call(Q,"__await")?A.resolve(Q.__await).then(function(re){I("next",re,P,V)},function(re){I("throw",re,P,V)}):A.resolve(Q).then(function(re){Y.value=re,P(Y)},function(re){return I("throw",re,P,V)})}V(W.arg)}var $;this._invoke=function(ie,N){function P(){return new A(function(V,W){I(ie,N,V,W)})}return $=$?$.then(P,P):P()}}function S(O,A){var I=O.iterator[A.method];if(I===void 0){if(A.delegate=null,A.method==="throw"){if(O.iterator.return&&(A.method="return",A.arg=void 0,S(O,A),A.method==="throw"))return g;A.method="throw",A.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var $=v(I,O.iterator,A.arg);if($.type==="throw")return A.method="throw",A.arg=$.arg,A.delegate=null,g;var ie=$.arg;return ie?ie.done?(A[O.resultName]=ie.value,A.next=O.nextLoc,A.method!=="return"&&(A.method="next",A.arg=void 0),A.delegate=null,g):ie:(A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,g)}function R(O){var A={tryLoc:O[0]};1 in O&&(A.catchLoc=O[1]),2 in O&&(A.finallyLoc=O[2],A.afterLoc=O[3]),this.tryEntries.push(A)}function z(O){var A=O.completion||{};A.type="normal",delete A.arg,O.completion=A}function F(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(R,this),this.reset(!0)}function G(O){if(O){var A=O[o];if(A)return A.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var I=-1,$=function ie(){for(;++I<O.length;)if(r.call(O,I))return ie.value=O[I],ie.done=!1,ie;return ie.value=void 0,ie.done=!0,ie};return $.next=$}}return{next:M}}function M(){return{value:void 0,done:!0}}return b.prototype=y,c(T,"constructor",y),c(y,"constructor",b),b.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(O){var A=typeof O=="function"&&O.constructor;return!!A&&(A===b||(A.displayName||A.name)==="GeneratorFunction")},t.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,y):(O.__proto__=y,c(O,u,"GeneratorFunction")),O.prototype=Object.create(T),O},t.awrap=function(O){return{__await:O}},x(C.prototype),c(C.prototype,l,function(){return this}),t.AsyncIterator=C,t.async=function(O,A,I,$,ie){ie===void 0&&(ie=Promise);var N=new C(h(O,A,I,$),ie);return t.isGeneratorFunction(A)?N:N.next().then(function(P){return P.done?P.value:N.next()})},x(T),c(T,u,"Generator"),c(T,o,function(){return this}),c(T,"toString",function(){return"[object Generator]"}),t.keys=function(O){var A=[];for(var I in O)A.push(I);return A.reverse(),function $(){for(;A.length;){var ie=A.pop();if(ie in O)return $.value=ie,$.done=!1,$}return $.done=!0,$}},t.values=G,F.prototype={constructor:F,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!A)for(var I in this)I.charAt(0)==="t"&&r.call(this,I)&&!isNaN(+I.slice(1))&&(this[I]=void 0)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var I=this;function $(Y,Q){return P.type="throw",P.arg=A,I.next=Y,Q&&(I.method="next",I.arg=void 0),!!Q}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var N=this.tryEntries[ie],P=N.completion;if(N.tryLoc==="root")return $("end");if(N.tryLoc<=this.prev){var V=r.call(N,"catchLoc"),W=r.call(N,"finallyLoc");if(V&&W){if(this.prev<N.catchLoc)return $(N.catchLoc,!0);if(this.prev<N.finallyLoc)return $(N.finallyLoc)}else if(V){if(this.prev<N.catchLoc)return $(N.catchLoc,!0)}else{if(!W)throw new Error("try statement without catch or finally");if(this.prev<N.finallyLoc)return $(N.finallyLoc)}}}},abrupt:function(A,I){for(var $=this.tryEntries.length-1;$>=0;--$){var ie=this.tryEntries[$];if(ie.tryLoc<=this.prev&&r.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var N=ie;break}}N&&(A==="break"||A==="continue")&&N.tryLoc<=I&&I<=N.finallyLoc&&(N=null);var P=N?N.completion:{};return P.type=A,P.arg=I,N?(this.method="next",this.next=N.finallyLoc,g):this.complete(P)},complete:function(A,I){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&I&&(this.next=I),g},finish:function(A){for(var I=this.tryEntries.length-1;I>=0;--I){var $=this.tryEntries[I];if($.finallyLoc===A)return this.complete($.completion,$.afterLoc),z($),g}},catch:function(A){for(var I=this.tryEntries.length-1;I>=0;--I){var $=this.tryEntries[I];if($.tryLoc===A){var ie=$.completion;if(ie.type==="throw"){var N=ie.arg;z($)}return N}}throw new Error("illegal catch attempt")},delegateYield:function(A,I,$){return this.delegate={iterator:G(A),resultName:I,nextLoc:$},this.method==="next"&&(this.arg=void 0),g}},t}f.exports=e,f.exports.__esModule=!0,f.exports.default=f.exports}(Lu);var Wa=Lu.exports(),ht=Wa;try{regeneratorRuntime=Wa}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Wa:Function("r","regeneratorRuntime = r")(Wa)}function et(f){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},et(f)}function Bu(f,i,e,t,n,r,a){try{var o=f[r](a),l=o.value}catch(u){e(u);return}o.done?i(l):Promise.resolve(l).then(t,n)}function xn(f){return function(){var i=this,e=arguments;return new Promise(function(t,n){var r=f.apply(i,e);function a(l){Bu(r,t,n,a,o,"next",l)}function o(l){Bu(r,t,n,a,o,"throw",l)}a(void 0)})}}function Ce(f,i,e){return i in f?Object.defineProperty(f,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):f[i]=e,f}function Mu(f,i){var e=Object.keys(f);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(f);i&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(f,n).enumerable})),e.push.apply(e,t)}return e}function Ve(f){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?arguments[i]:{};i%2?Mu(Object(e),!0).forEach(function(t){Ce(f,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(e)):Mu(Object(e)).forEach(function(t){Object.defineProperty(f,t,Object.getOwnPropertyDescriptor(e,t))})}return f}function be(f,i){if(!(f instanceof i))throw new TypeError("Cannot call a class as a function")}function Pu(f,i){for(var e=0;e<i.length;e++){var t=i[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(f,t.key,t)}}function ke(f,i,e){return i&&Pu(f.prototype,i),e&&Pu(f,e),Object.defineProperty(f,"prototype",{writable:!1}),f}function Zr(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function Cr(f){return Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cr(f)}function ov(f,i){for(;!Object.prototype.hasOwnProperty.call(f,i)&&(f=Cr(f),f!==null););return f}function yi(){return typeof Reflect!="undefined"&&Reflect.get?yi=Reflect.get.bind():yi=function(i,e,t){var n=ov(i,e);if(!!n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?i:t):r.value}},yi.apply(this,arguments)}function bs(f,i){return bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},bs(f,i)}function rt(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(i&&i.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),i&&bs(f,i)}function sv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lv(f,i){if(i&&(et(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zr(f)}function it(f){var i=sv();return function(){var t=Cr(f),n;if(i){var r=Cr(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return lv(this,n)}}function ct(f,i){if(!Object.prototype.hasOwnProperty.call(f,i))throw new TypeError("attempted to use private field on non-instance");return f}var uv=0;function Yr(f){return"__private_"+uv+++"_"+f}var tt={},cv={Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",amp:"&",AMP:"&",andand:"\u2A55",And:"\u2A53",and:"\u2227",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angmsd:"\u2221",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",apacir:"\u2A6F",ap:"\u2248",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250C",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252C",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxul:"\u2518",boxuL:"\u255B",boxUl:"\u255C",boxUL:"\u255D",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255A",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253C",boxvH:"\u256A",boxVh:"\u256B",boxVH:"\u256C",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251C",boxvR:"\u255E",boxVr:"\u255F",boxVR:"\u2560",bprime:"\u2035",breve:"\u02D8",Breve:"\u02D8",brvbar:"\xA6",bscr:"\u{1D4B7}",Bscr:"\u212C",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsolb:"\u29C5",bsol:"\\",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",cap:"\u2229",Cap:"\u22D2",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",centerdot:"\xB7",CenterDot:"\xB7",cfr:"\u{1D520}",Cfr:"\u212D",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25CB",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",conint:"\u222E",Conint:"\u222F",ContourIntegral:"\u222E",copf:"\u{1D554}",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xA9",COPY:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",cross:"\u2717",Cross:"\u2A2F",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",cupbrcap:"\u2A48",cupcap:"\u2A46",CupCap:"\u224D",cup:"\u222A",Cup:"\u22D3",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21A1",dArr:"\u21D3",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21CA",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",diamond:"\u22C4",Diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21D3",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21BD",DownRightTeeVector:"\u295F",DownRightVectorBar:"\u2957",DownRightVector:"\u21C1",DownTeeArrow:"\u21A7",DownTee:"\u22A4",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",Ecirc:"\xCA",ecirc:"\xEA",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",escr:"\u212F",Escr:"\u2130",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",forall:"\u2200",ForAll:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",fscr:"\u{1D4BB}",Fscr:"\u2131",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",gescc:"\u2AA9",ges:"\u2A7E",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",gg:"\u226B",Gg:"\u22D9",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2AA5",gl:"\u2277",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gnE:"\u2269",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gt:">",GT:">",Gt:"\u226B",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",harrcir:"\u2948",harr:"\u2194",hArr:"\u21D4",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",Hfr:"\u210C",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",hopf:"\u{1D559}",Hopf:"\u210D",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\u{1D4BD}",Hscr:"\u210B",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",ifr:"\u{1D526}",Ifr:"\u2111",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",incare:"\u2105",in:"\u2208",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",intcal:"\u22BA",int:"\u222B",Int:"\u222C",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",iscr:"\u{1D4BE}",Iscr:"\u2110",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",lang:"\u27E8",Lang:"\u27EA",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",larrb:"\u21E4",larrbfs:"\u291F",larr:"\u2190",Larr:"\u219E",lArr:"\u21D0",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",latail:"\u2919",lAtail:"\u291B",lat:"\u2AAB",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lBarr:"\u290E",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27E8",LeftArrowBar:"\u21E4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21D0",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21C3",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTeeArrow:"\u21A4",LeftTee:"\u22A3",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangleBar:"\u29CF",LeftTriangle:"\u22B2",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21BF",LeftVectorBar:"\u2952",LeftVector:"\u21BC",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",lescc:"\u2AA8",les:"\u2A7D",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21C7",ll:"\u226A",Ll:"\u22D8",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoustache:"\u23B0",lmoust:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lnE:"\u2268",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",longleftarrow:"\u27F5",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftrightarrow:"\u27F7",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longmapsto:"\u27FC",longrightarrow:"\u27F6",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",Lscr:"\u2112",lsh:"\u21B0",Lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",lt:"<",LT:"<",Lt:"\u226A",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midast:"*",midcir:"\u2AF0",mid:"\u2223",middot:"\xB7",minusb:"\u229F",minus:"\u2212",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",mscr:"\u{1D4C2}",Mscr:"\u2133",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266E",naturals:"\u2115",natur:"\u266E",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21D7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nharr:"\u21AE",nhArr:"\u21CE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlarr:"\u219A",nlArr:"\u21CD",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219A",nLeftarrow:"\u21CD",nleftrightarrow:"\u21AE",nLeftrightarrow:"\u21CE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nopf:"\u{1D55F}",Nopf:"\u2115",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangle:"\u22EA",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangle:"\u22EB",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",nprec:"\u2280",npreceq:"\u2AAF\u0338",npre:"\u2AAF\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219B",nrArr:"\u21CF",nrarrw:"\u219D\u0338",nrightarrow:"\u219B",nRightarrow:"\u21CF",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvDash:"\u22AD",nVdash:"\u22AE",nVDash:"\u22AF",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21D6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",Ocirc:"\xD4",ocirc:"\xF4",ocir:"\u229A",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",orarr:"\u21BB",Or:"\u2A54",or:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",otimesas:"\u2A36",Otimes:"\u2A37",otimes:"\u2297",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",para:"\xB6",parallel:"\u2225",par:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plus:"+",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",popf:"\u{1D561}",Popf:"\u2119",pound:"\xA3",prap:"\u2AB7",Pr:"\u2ABB",pr:"\u227A",prcue:"\u227C",precapprox:"\u2AB7",prec:"\u227A",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",pre:"\u2AAF",prE:"\u2AB3",precsim:"\u227E",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportional:"\u221D",Proportion:"\u2237",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",qopf:"\u{1D562}",Qopf:"\u211A",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",quot:'"',QUOT:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",rang:"\u27E9",Rang:"\u27EB",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21A0",rArr:"\u21D2",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",ratail:"\u291A",rAtail:"\u291C",ratio:"\u2236",rationals:"\u211A",rbarr:"\u290D",rBarr:"\u290F",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",Re:"\u211C",rect:"\u25AD",reg:"\xAE",REG:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",rfr:"\u{1D52F}",Rfr:"\u211C",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrowBar:"\u21E5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21D2",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVectorBar:"\u2955",RightDownVector:"\u21C2",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTeeArrow:"\u21A6",RightTee:"\u22A2",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangleBar:"\u29D0",RightTriangle:"\u22B3",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVectorBar:"\u2954",RightUpVector:"\u21BE",RightVectorBar:"\u2953",RightVector:"\u21C0",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoustache:"\u23B1",rmoust:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",ropf:"\u{1D563}",Ropf:"\u211D",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",rscr:"\u{1D4C7}",Rscr:"\u211B",rsh:"\u21B1",Rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2ABC",sc:"\u227B",sccue:"\u227D",sce:"\u2AB0",scE:"\u2AB4",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdotb:"\u22A1",sdot:"\u22C5",sdote:"\u2A66",searhk:"\u2925",searr:"\u2198",seArr:"\u21D8",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",solbar:"\u233F",solb:"\u29C4",sol:"/",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25A1",Square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squ:"\u25A1",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",sub:"\u2282",Sub:"\u22D0",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subset:"\u2282",Subset:"\u22D0",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succapprox:"\u2AB8",succ:"\u227B",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",sum:"\u2211",Sum:"\u2211",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",sup:"\u2283",Sup:"\u22D1",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",supset:"\u2283",Supset:"\u22D1",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21D9",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",tilde:"\u02DC",Tilde:"\u223C",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2A31",timesb:"\u22A0",times:"\xD7",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",topbot:"\u2336",topcir:"\u2AF1",top:"\u22A4",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",uarr:"\u2191",Uarr:"\u219F",uArr:"\u21D1",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21D1",UpArrowDownArrow:"\u21C5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21D5",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03C5",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTeeArrow:"\u21A5",UpTee:"\u22A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",varr:"\u2195",vArr:"\u21D5",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",vBar:"\u2AE8",Vbar:"\u2AEB",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22A2",vDash:"\u22A8",Vdash:"\u22A9",VDash:"\u22AB",Vdashl:"\u2AE6",veebar:"\u22BB",vee:"\u2228",Vee:"\u22C1",veeeq:"\u225A",vellip:"\u22EE",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",wedge:"\u2227",Wedge:"\u22C0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xharr:"\u27F7",xhArr:"\u27FA",Xi:"\u039E",xi:"\u03BE",xlarr:"\u27F5",xlArr:"\u27F8",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrarr:"\u27F6",xrArr:"\u27F9",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",yuml:"\xFF",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",zfr:"\u{1D537}",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",Zopf:"\u2124",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"},Fu=cv,ys=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,wi={},zu={};function fv(f){var i,e,t=zu[f];if(t)return t;for(t=zu[f]=[],i=0;i<128;i++)e=String.fromCharCode(i),/^[0-9a-z]$/i.test(e)?t.push(e):t.push("%"+("0"+i.toString(16).toUpperCase()).slice(-2));for(i=0;i<f.length;i++)t[f.charCodeAt(i)]=f[i];return t}function $a(f,i,e){var t,n,r,a,o,l="";for(typeof i!="string"&&(e=i,i=$a.defaultChars),typeof e=="undefined"&&(e=!0),o=fv(i),t=0,n=f.length;t<n;t++){if(r=f.charCodeAt(t),e&&r===37&&t+2<n&&/^[0-9a-f]{2}$/i.test(f.slice(t+1,t+3))){l+=f.slice(t,t+3),t+=2;continue}if(r<128){l+=o[r];continue}if(r>=55296&&r<=57343){if(r>=55296&&r<=56319&&t+1<n&&(a=f.charCodeAt(t+1),a>=56320&&a<=57343)){l+=encodeURIComponent(f[t]+f[t+1]),t++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(f[t])}return l}$a.defaultChars=";/?:@&=+$,-_.!~*'()#",$a.componentChars="-_.!~*'()";var dv=$a,Uu={};function hv(f){var i,e,t=Uu[f];if(t)return t;for(t=Uu[f]=[],i=0;i<128;i++)e=String.fromCharCode(i),t.push(e);for(i=0;i<f.length;i++)e=f.charCodeAt(i),t[e]="%"+("0"+e.toString(16).toUpperCase()).slice(-2);return t}function Ka(f,i){var e;return typeof i!="string"&&(i=Ka.defaultChars),e=hv(i),f.replace(/(%[a-f0-9]{2})+/gi,function(t){var n,r,a,o,l,u,c,h="";for(n=0,r=t.length;n<r;n+=3){if(a=parseInt(t.slice(n+1,n+3),16),a<128){h+=e[a];continue}if((a&224)===192&&n+3<r&&(o=parseInt(t.slice(n+4,n+6),16),(o&192)===128)){c=a<<6&1984|o&63,c<128?h+="\uFFFD\uFFFD":h+=String.fromCharCode(c),n+=3;continue}if((a&240)===224&&n+6<r&&(o=parseInt(t.slice(n+4,n+6),16),l=parseInt(t.slice(n+7,n+9),16),(o&192)===128&&(l&192)===128)){c=a<<12&61440|o<<6&4032|l&63,c<2048||c>=55296&&c<=57343?h+="\uFFFD\uFFFD\uFFFD":h+=String.fromCharCode(c),n+=6;continue}if((a&248)===240&&n+9<r&&(o=parseInt(t.slice(n+4,n+6),16),l=parseInt(t.slice(n+7,n+9),16),u=parseInt(t.slice(n+10,n+12),16),(o&192)===128&&(l&192)===128&&(u&192)===128)){c=a<<18&1835008|o<<12&258048|l<<6&4032|u&63,c<65536||c>1114111?h+="\uFFFD\uFFFD\uFFFD\uFFFD":(c-=65536,h+=String.fromCharCode(55296+(c>>10),56320+(c&1023))),n+=9;continue}h+="\uFFFD"}return h})}Ka.defaultChars=";/?:@&=+$,#",Ka.componentChars="";var vv=Ka,gv=function(i){var e="";return e+=i.protocol||"",e+=i.slashes?"//":"",e+=i.auth?i.auth+"@":"",i.hostname&&i.hostname.indexOf(":")!==-1?e+="["+i.hostname+"]":e+=i.hostname||"",e+=i.port?":"+i.port:"",e+=i.pathname||"",e+=i.search||"",e+=i.hash||"",e};function Za(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var pv=/^([a-z0-9.+-]+:)/i,mv=/:[0-9]*$/,bv=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,yv=["<",">",'"',"`"," ","\r",`
`,"	"],wv=["{","}","|","\\","^","`"].concat(yv),kv=["'"].concat(wv),Vu=["%","/","?",";","#"].concat(kv),Hu=["/","?","#"],Ev=255,ju=/^[+a-z0-9A-Z_-]{0,63}$/,xv=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Gu={javascript:!0,"javascript:":!0},Wu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Cv(f,i){if(f&&f instanceof Za)return f;var e=new Za;return e.parse(f,i),e}Za.prototype.parse=function(f,i){var e,t,n,r,a,o=f;if(o=o.trim(),!i&&f.split("#").length===1){var l=bv.exec(o);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}var u=pv.exec(o);if(u&&(u=u[0],n=u.toLowerCase(),this.protocol=u,o=o.substr(u.length)),(i||u||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=o.substr(0,2)==="//",a&&!(u&&Gu[u])&&(o=o.substr(2),this.slashes=!0)),!Gu[u]&&(a||u&&!Wu[u])){var c=-1;for(e=0;e<Hu.length;e++)r=o.indexOf(Hu[e]),r!==-1&&(c===-1||r<c)&&(c=r);var h,v;for(c===-1?v=o.lastIndexOf("@"):v=o.lastIndexOf("@",c),v!==-1&&(h=o.slice(0,v),o=o.slice(v+1),this.auth=h),c=-1,e=0;e<Vu.length;e++)r=o.indexOf(Vu[e]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=o.length),o[c-1]===":"&&c--;var g=o.slice(0,c);o=o.slice(c),this.parseHost(g),this.hostname=this.hostname||"";var p=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!p){var b=this.hostname.split(/\./);for(e=0,t=b.length;e<t;e++){var y=b[e];if(!!y&&!y.match(ju)){for(var k="",E=0,_=y.length;E<_;E++)y.charCodeAt(E)>127?k+="x":k+=y[E];if(!k.match(ju)){var T=b.slice(0,e),x=b.slice(e+1),C=y.match(xv);C&&(T.push(C[1]),x.unshift(C[2])),x.length&&(o=x.join(".")+o),this.hostname=T.join(".");break}}}}this.hostname.length>Ev&&(this.hostname=""),p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var S=o.indexOf("#");S!==-1&&(this.hash=o.substr(S),o=o.slice(0,S));var R=o.indexOf("?");return R!==-1&&(this.search=o.substr(R),o=o.slice(0,R)),o&&(this.pathname=o),Wu[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this},Za.prototype.parseHost=function(f){var i=mv.exec(f);i&&(i=i[0],i!==":"&&(this.port=i.substr(1)),f=f.substr(0,f.length-i.length)),f&&(this.hostname=f)};var _v=Cv;wi.encode=dv,wi.decode=vv,wi.format=gv,wi.parse=_v;var ki={},$u=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ku=/[\0-\x1F\x7F-\x9F]/,Av=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Zu=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;ki.Any=$u,ki.Cc=Ku,ki.Cf=Av,ki.P=ys,ki.Z=Zu,function(f){function i(A){return Object.prototype.toString.call(A)}function e(A){return i(A)==="[object String]"}var t=Object.prototype.hasOwnProperty;function n(A,I){return t.call(A,I)}function r(A){var I=Array.prototype.slice.call(arguments,1);return I.forEach(function($){if(!!$){if(typeof $!="object")throw new TypeError($+"must be object");Object.keys($).forEach(function(ie){A[ie]=$[ie]})}}),A}function a(A,I,$){return[].concat(A.slice(0,I),$,A.slice(I+1))}function o(A){return!(A>=55296&&A<=57343||A>=64976&&A<=65007||(A&65535)===65535||(A&65535)===65534||A>=0&&A<=8||A===11||A>=14&&A<=31||A>=127&&A<=159||A>1114111)}function l(A){if(A>65535){A-=65536;var I=55296+(A>>10),$=56320+(A&1023);return String.fromCharCode(I,$)}return String.fromCharCode(A)}var u=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,c=/&([a-z#][a-z0-9]{1,31});/gi,h=new RegExp(u.source+"|"+c.source,"gi"),v=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,g=Fu;function p(A,I){var $=0;return n(g,I)?g[I]:I.charCodeAt(0)===35&&v.test(I)&&($=I[1].toLowerCase()==="x"?parseInt(I.slice(2),16):parseInt(I.slice(1),10),o($))?l($):A}function b(A){return A.indexOf("\\")<0?A:A.replace(u,"$1")}function y(A){return A.indexOf("\\")<0&&A.indexOf("&")<0?A:A.replace(h,function(I,$,ie){return $||p(I,ie)})}var k=/[&<>"]/,E=/[&<>"]/g,_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function T(A){return _[A]}function x(A){return k.test(A)?A.replace(E,T):A}var C=/[.?*+^$[\]\\(){}|-]/g;function S(A){return A.replace(C,"\\$&")}function R(A){switch(A){case 9:case 32:return!0}return!1}function z(A){if(A>=8192&&A<=8202)return!0;switch(A){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var F=ys;function G(A){return F.test(A)}function M(A){switch(A){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function O(A){return A=A.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(A=A.replace(/ẞ/g,"\xDF")),A.toLowerCase().toUpperCase()}f.lib={},f.lib.mdurl=wi,f.lib.ucmicro=ki,f.assign=r,f.isString=e,f.has=n,f.unescapeMd=b,f.unescapeAll=y,f.isValidEntityCode=o,f.fromCodePoint=l,f.escapeHtml=x,f.arrayReplaceAt=a,f.isSpace=R,f.isWhiteSpace=z,f.isMdAsciiPunct=M,f.isPunctChar=G,f.escapeRE=S,f.normalizeReference=O}(tt);var Ya={},Tv=function(i,e,t){var n,r,a,o,l=-1,u=i.posMax,c=i.pos;for(i.pos=e+1,n=1;i.pos<u;){if(a=i.src.charCodeAt(i.pos),a===93&&(n--,n===0)){r=!0;break}if(o=i.pos,i.md.inline.skipToken(i),a===91){if(o===i.pos-1)n++;else if(t)return i.pos=c,-1}}return r&&(l=i.pos),i.pos=c,l},Yu=tt.unescapeAll,Sv=function(i,e,t){var n,r,a=0,o=e,l={ok:!1,pos:0,lines:0,str:""};if(i.charCodeAt(e)===60){for(e++;e<t;){if(n=i.charCodeAt(e),n===10||n===60)return l;if(n===62)return l.pos=e+1,l.str=Yu(i.slice(o+1,e)),l.ok=!0,l;if(n===92&&e+1<t){e+=2;continue}e++}return l}for(r=0;e<t&&(n=i.charCodeAt(e),!(n===32||n<32||n===127));){if(n===92&&e+1<t){if(i.charCodeAt(e+1)===32)break;e+=2;continue}if(n===40&&(r++,r>32))return l;if(n===41){if(r===0)break;r--}e++}return o===e||r!==0||(l.str=Yu(i.slice(o,e)),l.lines=a,l.pos=e,l.ok=!0),l},Nv=tt.unescapeAll,Dv=function(i,e,t){var n,r,a=0,o=e,l={ok:!1,pos:0,lines:0,str:""};if(e>=t||(r=i.charCodeAt(e),r!==34&&r!==39&&r!==40))return l;for(e++,r===40&&(r=41);e<t;){if(n=i.charCodeAt(e),n===r)return l.pos=e+1,l.lines=a,l.str=Nv(i.slice(o+1,e)),l.ok=!0,l;if(n===40&&r===41)return l;n===10?a++:n===92&&e+1<t&&(e++,i.charCodeAt(e)===10&&a++),e++}return l};Ya.parseLinkLabel=Tv,Ya.parseLinkDestination=Sv,Ya.parseLinkTitle=Dv;var Rv=tt.assign,Ov=tt.unescapeAll,Xr=tt.escapeHtml,zn={};zn.code_inline=function(f,i,e,t,n){var r=f[i];return"<code"+n.renderAttrs(r)+">"+Xr(f[i].content)+"</code>"},zn.code_block=function(f,i,e,t,n){var r=f[i];return"<pre"+n.renderAttrs(r)+"><code>"+Xr(f[i].content)+`</code></pre>
`},zn.fence=function(f,i,e,t,n){var r=f[i],a=r.info?Ov(r.info).trim():"",o="",l="",u,c,h,v,g;return a&&(h=a.split(/(\s+)/g),o=h[0],l=h.slice(2).join("")),e.highlight?u=e.highlight(r.content,o,l)||Xr(r.content):u=Xr(r.content),u.indexOf("<pre")===0?u+`
`:a?(c=r.attrIndex("class"),v=r.attrs?r.attrs.slice():[],c<0?v.push(["class",e.langPrefix+o]):(v[c]=v[c].slice(),v[c][1]+=" "+e.langPrefix+o),g={attrs:v},"<pre><code"+n.renderAttrs(g)+">"+u+`</code></pre>
`):"<pre><code"+n.renderAttrs(r)+">"+u+`</code></pre>
`},zn.image=function(f,i,e,t,n){var r=f[i];return r.attrs[r.attrIndex("alt")][1]=n.renderInlineAsText(r.children,e,t),n.renderToken(f,i,e)},zn.hardbreak=function(f,i,e){return e.xhtmlOut?`<br />
`:`<br>
`},zn.softbreak=function(f,i,e){return e.breaks?e.xhtmlOut?`<br />
`:`<br>
`:`
`},zn.text=function(f,i){return Xr(f[i].content)},zn.html_block=function(f,i){return f[i].content},zn.html_inline=function(f,i){return f[i].content};function Ei(){this.rules=Rv({},zn)}Ei.prototype.renderAttrs=function(i){var e,t,n;if(!i.attrs)return"";for(n="",e=0,t=i.attrs.length;e<t;e++)n+=" "+Xr(i.attrs[e][0])+'="'+Xr(i.attrs[e][1])+'"';return n},Ei.prototype.renderToken=function(i,e,t){var n,r="",a=!1,o=i[e];return o.hidden?"":(o.block&&o.nesting!==-1&&e&&i[e-1].hidden&&(r+=`
`),r+=(o.nesting===-1?"</":"<")+o.tag,r+=this.renderAttrs(o),o.nesting===0&&t.xhtmlOut&&(r+=" /"),o.block&&(a=!0,o.nesting===1&&e+1<i.length&&(n=i[e+1],(n.type==="inline"||n.hidden||n.nesting===-1&&n.tag===o.tag)&&(a=!1))),r+=a?`>
`:">",r)},Ei.prototype.renderInline=function(f,i,e){for(var t,n="",r=this.rules,a=0,o=f.length;a<o;a++)t=f[a].type,typeof r[t]!="undefined"?n+=r[t](f,a,i,e,this):n+=this.renderToken(f,a,i);return n},Ei.prototype.renderInlineAsText=function(f,i,e){for(var t="",n=0,r=f.length;n<r;n++)f[n].type==="text"?t+=f[n].content:f[n].type==="image"?t+=this.renderInlineAsText(f[n].children,i,e):f[n].type==="softbreak"&&(t+=`
`);return t},Ei.prototype.render=function(f,i,e){var t,n,r,a="",o=this.rules;for(t=0,n=f.length;t<n;t++)r=f[t].type,r==="inline"?a+=this.renderInline(f[t].children,i,e):typeof o[r]!="undefined"?a+=o[f[t].type](f,t,i,e,this):a+=this.renderToken(f,t,i,e);return a};var qv=Ei;function Cn(){this.__rules__=[],this.__cache__=null}Cn.prototype.__find__=function(f){for(var i=0;i<this.__rules__.length;i++)if(this.__rules__[i].name===f)return i;return-1},Cn.prototype.__compile__=function(){var f=this,i=[""];f.__rules__.forEach(function(e){!e.enabled||e.alt.forEach(function(t){i.indexOf(t)<0&&i.push(t)})}),f.__cache__={},i.forEach(function(e){f.__cache__[e]=[],f.__rules__.forEach(function(t){!t.enabled||e&&t.alt.indexOf(e)<0||f.__cache__[e].push(t.fn)})})},Cn.prototype.at=function(f,i,e){var t=this.__find__(f),n=e||{};if(t===-1)throw new Error("Parser rule not found: "+f);this.__rules__[t].fn=i,this.__rules__[t].alt=n.alt||[],this.__cache__=null},Cn.prototype.before=function(f,i,e,t){var n=this.__find__(f),r=t||{};if(n===-1)throw new Error("Parser rule not found: "+f);this.__rules__.splice(n,0,{name:i,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null},Cn.prototype.after=function(f,i,e,t){var n=this.__find__(f),r=t||{};if(n===-1)throw new Error("Parser rule not found: "+f);this.__rules__.splice(n+1,0,{name:i,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null},Cn.prototype.push=function(f,i,e){var t=e||{};this.__rules__.push({name:f,enabled:!0,fn:i,alt:t.alt||[]}),this.__cache__=null},Cn.prototype.enable=function(f,i){Array.isArray(f)||(f=[f]);var e=[];return f.forEach(function(t){var n=this.__find__(t);if(n<0){if(i)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[n].enabled=!0,e.push(t)},this),this.__cache__=null,e},Cn.prototype.enableOnly=function(f,i){Array.isArray(f)||(f=[f]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(f,i)},Cn.prototype.disable=function(f,i){Array.isArray(f)||(f=[f]);var e=[];return f.forEach(function(t){var n=this.__find__(t);if(n<0){if(i)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[n].enabled=!1,e.push(t)},this),this.__cache__=null,e},Cn.prototype.getRules=function(f){return this.__cache__===null&&this.__compile__(),this.__cache__[f]||[]};var ws=Cn,Lv=/\r\n?|\n/g,Iv=/\0/g,Bv=function(i){var e;e=i.src.replace(Lv,`
`),e=e.replace(Iv,"\uFFFD"),i.src=e},Mv=function(i){var e;i.inlineMode?(e=new i.Token("inline","",0),e.content=i.src,e.map=[0,1],e.children=[],i.tokens.push(e)):i.md.block.parse(i.src,i.md,i.env,i.tokens)},Pv=function(i){var e=i.tokens,t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],t.type==="inline"&&i.md.inline.parse(t.content,i.md,i.env,t.children)},Fv=tt.arrayReplaceAt;function zv(f){return/^<a[>\s]/i.test(f)}function Uv(f){return/^<\/a\s*>/i.test(f)}var Vv=function(i){var e,t,n,r,a,o,l,u,c,h,v,g,p,b,y,k,E=i.tokens,_;if(!!i.md.options.linkify){for(t=0,n=E.length;t<n;t++)if(!(E[t].type!=="inline"||!i.md.linkify.pretest(E[t].content)))for(r=E[t].children,p=0,e=r.length-1;e>=0;e--){if(o=r[e],o.type==="link_close"){for(e--;r[e].level!==o.level&&r[e].type!=="link_open";)e--;continue}if(o.type==="html_inline"&&(zv(o.content)&&p>0&&p--,Uv(o.content)&&p++),!(p>0)&&o.type==="text"&&i.md.linkify.test(o.content)){for(c=o.content,_=i.md.linkify.match(c),l=[],g=o.level,v=0,_.length>0&&_[0].index===0&&e>0&&r[e-1].type==="text_special"&&(_=_.slice(1)),u=0;u<_.length;u++)b=_[u].url,y=i.md.normalizeLink(b),i.md.validateLink(y)&&(k=_[u].text,_[u].schema?_[u].schema==="mailto:"&&!/^mailto:/i.test(k)?k=i.md.normalizeLinkText("mailto:"+k).replace(/^mailto:/,""):k=i.md.normalizeLinkText(k):k=i.md.normalizeLinkText("http://"+k).replace(/^http:\/\//,""),h=_[u].index,h>v&&(a=new i.Token("text","",0),a.content=c.slice(v,h),a.level=g,l.push(a)),a=new i.Token("link_open","a",1),a.attrs=[["href",y]],a.level=g++,a.markup="linkify",a.info="auto",l.push(a),a=new i.Token("text","",0),a.content=k,a.level=g,l.push(a),a=new i.Token("link_close","a",-1),a.level=--g,a.markup="linkify",a.info="auto",l.push(a),v=_[u].lastIndex);v<c.length&&(a=new i.Token("text","",0),a.content=c.slice(v),a.level=g,l.push(a)),E[t].children=r=Fv(r,e,l)}}}},Xu=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Hv=/\((c|tm|r)\)/i,jv=/\((c|tm|r)\)/ig,Gv={c:"\xA9",r:"\xAE",tm:"\u2122"};function Wv(f,i){return Gv[i.toLowerCase()]}function $v(f){var i,e,t=0;for(i=f.length-1;i>=0;i--)e=f[i],e.type==="text"&&!t&&(e.content=e.content.replace(jv,Wv)),e.type==="link_open"&&e.info==="auto"&&t--,e.type==="link_close"&&e.info==="auto"&&t++}function Kv(f){var i,e,t=0;for(i=f.length-1;i>=0;i--)e=f[i],e.type==="text"&&!t&&Xu.test(e.content)&&(e.content=e.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),e.type==="link_open"&&e.info==="auto"&&t--,e.type==="link_close"&&e.info==="auto"&&t++}var Zv=function(i){var e;if(!!i.md.options.typographer)for(e=i.tokens.length-1;e>=0;e--)i.tokens[e].type==="inline"&&(Hv.test(i.tokens[e].content)&&$v(i.tokens[e].children),Xu.test(i.tokens[e].content)&&Kv(i.tokens[e].children))},Ju=tt.isWhiteSpace,Qu=tt.isPunctChar,ec=tt.isMdAsciiPunct,Yv=/['"]/,tc=/['"]/g,nc="\u2019";function Xa(f,i,e){return f.slice(0,i)+e+f.slice(i+1)}function Xv(f,i){var e,t,n,r,a,o,l,u,c,h,v,g,p,b,y,k,E,_,T,x,C;for(T=[],e=0;e<f.length;e++){for(t=f[e],l=f[e].level,E=T.length-1;E>=0&&!(T[E].level<=l);E--);if(T.length=E+1,t.type!=="text")continue;n=t.content,a=0,o=n.length;e:for(;a<o&&(tc.lastIndex=a,r=tc.exec(n),!!r);){if(y=k=!0,a=r.index+1,_=r[0]==="'",c=32,r.index-1>=0)c=n.charCodeAt(r.index-1);else for(E=e-1;E>=0&&!(f[E].type==="softbreak"||f[E].type==="hardbreak");E--)if(!!f[E].content){c=f[E].content.charCodeAt(f[E].content.length-1);break}if(h=32,a<o)h=n.charCodeAt(a);else for(E=e+1;E<f.length&&!(f[E].type==="softbreak"||f[E].type==="hardbreak");E++)if(!!f[E].content){h=f[E].content.charCodeAt(0);break}if(v=ec(c)||Qu(String.fromCharCode(c)),g=ec(h)||Qu(String.fromCharCode(h)),p=Ju(c),b=Ju(h),b?y=!1:g&&(p||v||(y=!1)),p?k=!1:v&&(b||g||(k=!1)),h===34&&r[0]==='"'&&c>=48&&c<=57&&(k=y=!1),y&&k&&(y=v,k=g),!y&&!k){_&&(t.content=Xa(t.content,r.index,nc));continue}if(k){for(E=T.length-1;E>=0&&(u=T[E],!(T[E].level<l));E--)if(u.single===_&&T[E].level===l){u=T[E],_?(x=i.md.options.quotes[2],C=i.md.options.quotes[3]):(x=i.md.options.quotes[0],C=i.md.options.quotes[1]),t.content=Xa(t.content,r.index,C),f[u.token].content=Xa(f[u.token].content,u.pos,x),a+=C.length-1,u.token===e&&(a+=x.length-1),n=t.content,o=n.length,T.length=E;continue e}}y?T.push({token:e,pos:r.index,single:_,level:l}):k&&_&&(t.content=Xa(t.content,r.index,nc))}}}var Jv=function(i){var e;if(!!i.md.options.typographer)for(e=i.tokens.length-1;e>=0;e--)i.tokens[e].type!=="inline"||!Yv.test(i.tokens[e].content)||Xv(i.tokens[e].children,i)},Qv=function(i){var e,t,n,r,a,o,l=i.tokens;for(e=0,t=l.length;e<t;e++)if(l[e].type==="inline"){for(n=l[e].children,a=n.length,r=0;r<a;r++)n[r].type==="text_special"&&(n[r].type="text");for(r=o=0;r<a;r++)n[r].type==="text"&&r+1<a&&n[r+1].type==="text"?n[r+1].content=n[r].content+n[r+1].content:(r!==o&&(n[o]=n[r]),o++);r!==o&&(n.length=o)}};function xi(f,i,e){this.type=f,this.tag=i,this.attrs=null,this.map=null,this.nesting=e,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}xi.prototype.attrIndex=function(i){var e,t,n;if(!this.attrs)return-1;for(e=this.attrs,t=0,n=e.length;t<n;t++)if(e[t][0]===i)return t;return-1},xi.prototype.attrPush=function(i){this.attrs?this.attrs.push(i):this.attrs=[i]},xi.prototype.attrSet=function(i,e){var t=this.attrIndex(i),n=[i,e];t<0?this.attrPush(n):this.attrs[t]=n},xi.prototype.attrGet=function(i){var e=this.attrIndex(i),t=null;return e>=0&&(t=this.attrs[e][1]),t},xi.prototype.attrJoin=function(i,e){var t=this.attrIndex(i);t<0?this.attrPush([i,e]):this.attrs[t][1]=this.attrs[t][1]+" "+e};var ks=xi,eg=ks;function rc(f,i,e){this.src=f,this.env=e,this.tokens=[],this.inlineMode=!1,this.md=i}rc.prototype.Token=eg;var tg=rc,ng=ws,Es=[["normalize",Bv],["block",Mv],["inline",Pv],["linkify",Vv],["replacements",Zv],["smartquotes",Jv],["text_join",Qv]];function xs(){this.ruler=new ng;for(var f=0;f<Es.length;f++)this.ruler.push(Es[f][0],Es[f][1])}xs.prototype.process=function(f){var i,e,t;for(t=this.ruler.getRules(""),i=0,e=t.length;i<e;i++)t[i](f)},xs.prototype.State=tg;var rg=xs,Cs=tt.isSpace;function _s(f,i){var e=f.bMarks[i]+f.tShift[i],t=f.eMarks[i];return f.src.slice(e,t)}function ic(f){var i=[],e=0,t=f.length,n,r=!1,a=0,o="";for(n=f.charCodeAt(e);e<t;)n===124&&(r?(o+=f.substring(a,e-1),a=e):(i.push(o+f.substring(a,e)),o="",a=e+1)),r=n===92,e++,n=f.charCodeAt(e);return i.push(o+f.substring(a)),i}var ig=function(i,e,t,n){var r,a,o,l,u,c,h,v,g,p,b,y,k,E,_,T,x,C;if(e+2>t||(c=e+1,i.sCount[c]<i.blkIndent)||i.sCount[c]-i.blkIndent>=4||(o=i.bMarks[c]+i.tShift[c],o>=i.eMarks[c])||(x=i.src.charCodeAt(o++),x!==124&&x!==45&&x!==58)||o>=i.eMarks[c]||(C=i.src.charCodeAt(o++),C!==124&&C!==45&&C!==58&&!Cs(C))||x===45&&Cs(C))return!1;for(;o<i.eMarks[c];){if(r=i.src.charCodeAt(o),r!==124&&r!==45&&r!==58&&!Cs(r))return!1;o++}for(a=_s(i,e+1),h=a.split("|"),p=[],l=0;l<h.length;l++){if(b=h[l].trim(),!b){if(l===0||l===h.length-1)continue;return!1}if(!/^:?-+:?$/.test(b))return!1;b.charCodeAt(b.length-1)===58?p.push(b.charCodeAt(0)===58?"center":"right"):b.charCodeAt(0)===58?p.push("left"):p.push("")}if(a=_s(i,e).trim(),a.indexOf("|")===-1||i.sCount[e]-i.blkIndent>=4||(h=ic(a),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),v=h.length,v===0||v!==p.length))return!1;if(n)return!0;for(E=i.parentType,i.parentType="table",T=i.md.block.ruler.getRules("blockquote"),g=i.push("table_open","table",1),g.map=y=[e,0],g=i.push("thead_open","thead",1),g.map=[e,e+1],g=i.push("tr_open","tr",1),g.map=[e,e+1],l=0;l<h.length;l++)g=i.push("th_open","th",1),p[l]&&(g.attrs=[["style","text-align:"+p[l]]]),g=i.push("inline","",0),g.content=h[l].trim(),g.children=[],g=i.push("th_close","th",-1);for(g=i.push("tr_close","tr",-1),g=i.push("thead_close","thead",-1),c=e+2;c<t&&!(i.sCount[c]<i.blkIndent);c++){for(_=!1,l=0,u=T.length;l<u;l++)if(T[l](i,c,t,!0)){_=!0;break}if(_||(a=_s(i,c).trim(),!a)||i.sCount[c]-i.blkIndent>=4)break;for(h=ic(a),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),c===e+2&&(g=i.push("tbody_open","tbody",1),g.map=k=[e+2,0]),g=i.push("tr_open","tr",1),g.map=[c,c+1],l=0;l<v;l++)g=i.push("td_open","td",1),p[l]&&(g.attrs=[["style","text-align:"+p[l]]]),g=i.push("inline","",0),g.content=h[l]?h[l].trim():"",g.children=[],g=i.push("td_close","td",-1);g=i.push("tr_close","tr",-1)}return k&&(g=i.push("tbody_close","tbody",-1),k[1]=c),g=i.push("table_close","table",-1),y[1]=c,i.parentType=E,i.line=c,!0},ag=function(i,e,t){var n,r,a;if(i.sCount[e]-i.blkIndent<4)return!1;for(r=n=e+1;n<t;){if(i.isEmpty(n)){n++;continue}if(i.sCount[n]-i.blkIndent>=4){n++,r=n;continue}break}return i.line=r,a=i.push("code_block","code",0),a.content=i.getLines(e,r,4+i.blkIndent,!1)+`
`,a.map=[e,i.line],!0},og=function(i,e,t,n){var r,a,o,l,u,c,h,v=!1,g=i.bMarks[e]+i.tShift[e],p=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||g+3>p||(r=i.src.charCodeAt(g),r!==126&&r!==96)||(u=g,g=i.skipChars(g,r),a=g-u,a<3)||(h=i.src.slice(u,g),o=i.src.slice(g,p),r===96&&o.indexOf(String.fromCharCode(r))>=0))return!1;if(n)return!0;for(l=e;l++,!(l>=t||(g=u=i.bMarks[l]+i.tShift[l],p=i.eMarks[l],g<p&&i.sCount[l]<i.blkIndent));)if(i.src.charCodeAt(g)===r&&!(i.sCount[l]-i.blkIndent>=4)&&(g=i.skipChars(g,r),!(g-u<a)&&(g=i.skipSpaces(g),!(g<p)))){v=!0;break}return a=i.sCount[e],i.line=l+(v?1:0),c=i.push("fence","code",0),c.info=o,c.content=i.getLines(e+1,l,a,!0),c.markup=h,c.map=[e,i.line],!0},ac=tt.isSpace,sg=function(i,e,t,n){var r,a,o,l,u,c,h,v,g,p,b,y,k,E,_,T,x,C,S,R,z=i.lineMax,F=i.bMarks[e]+i.tShift[e],G=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||i.src.charCodeAt(F++)!==62)return!1;if(n)return!0;for(l=g=i.sCount[e]+1,i.src.charCodeAt(F)===32?(F++,l++,g++,r=!1,T=!0):i.src.charCodeAt(F)===9?(T=!0,(i.bsCount[e]+g)%4===3?(F++,l++,g++,r=!1):r=!0):T=!1,p=[i.bMarks[e]],i.bMarks[e]=F;F<G&&(a=i.src.charCodeAt(F),ac(a));){a===9?g+=4-(g+i.bsCount[e]+(r?1:0))%4:g++;F++}for(b=[i.bsCount[e]],i.bsCount[e]=i.sCount[e]+1+(T?1:0),c=F>=G,E=[i.sCount[e]],i.sCount[e]=g-l,_=[i.tShift[e]],i.tShift[e]=F-i.bMarks[e],C=i.md.block.ruler.getRules("blockquote"),k=i.parentType,i.parentType="blockquote",v=e+1;v<t&&(R=i.sCount[v]<i.blkIndent,F=i.bMarks[v]+i.tShift[v],G=i.eMarks[v],!(F>=G));v++){if(i.src.charCodeAt(F++)===62&&!R){for(l=g=i.sCount[v]+1,i.src.charCodeAt(F)===32?(F++,l++,g++,r=!1,T=!0):i.src.charCodeAt(F)===9?(T=!0,(i.bsCount[v]+g)%4===3?(F++,l++,g++,r=!1):r=!0):T=!1,p.push(i.bMarks[v]),i.bMarks[v]=F;F<G&&(a=i.src.charCodeAt(F),ac(a));){a===9?g+=4-(g+i.bsCount[v]+(r?1:0))%4:g++;F++}c=F>=G,b.push(i.bsCount[v]),i.bsCount[v]=i.sCount[v]+1+(T?1:0),E.push(i.sCount[v]),i.sCount[v]=g-l,_.push(i.tShift[v]),i.tShift[v]=F-i.bMarks[v];continue}if(c)break;for(x=!1,o=0,u=C.length;o<u;o++)if(C[o](i,v,t,!0)){x=!0;break}if(x){i.lineMax=v,i.blkIndent!==0&&(p.push(i.bMarks[v]),b.push(i.bsCount[v]),_.push(i.tShift[v]),E.push(i.sCount[v]),i.sCount[v]-=i.blkIndent);break}p.push(i.bMarks[v]),b.push(i.bsCount[v]),_.push(i.tShift[v]),E.push(i.sCount[v]),i.sCount[v]=-1}for(y=i.blkIndent,i.blkIndent=0,S=i.push("blockquote_open","blockquote",1),S.markup=">",S.map=h=[e,0],i.md.block.tokenize(i,e,v),S=i.push("blockquote_close","blockquote",-1),S.markup=">",i.lineMax=z,i.parentType=k,h[1]=i.line,o=0;o<_.length;o++)i.bMarks[o+e]=p[o],i.tShift[o+e]=_[o],i.sCount[o+e]=E[o],i.bsCount[o+e]=b[o];return i.blkIndent=y,!0},lg=tt.isSpace,ug=function(i,e,t,n){var r,a,o,l,u=i.bMarks[e]+i.tShift[e],c=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||(r=i.src.charCodeAt(u++),r!==42&&r!==45&&r!==95))return!1;for(a=1;u<c;){if(o=i.src.charCodeAt(u++),o!==r&&!lg(o))return!1;o===r&&a++}return a<3?!1:(n||(i.line=e+1,l=i.push("hr","hr",0),l.map=[e,i.line],l.markup=Array(a+1).join(String.fromCharCode(r))),!0)},oc=tt.isSpace;function sc(f,i){var e,t,n,r;return t=f.bMarks[i]+f.tShift[i],n=f.eMarks[i],e=f.src.charCodeAt(t++),e!==42&&e!==45&&e!==43||t<n&&(r=f.src.charCodeAt(t),!oc(r))?-1:t}function lc(f,i){var e,t=f.bMarks[i]+f.tShift[i],n=t,r=f.eMarks[i];if(n+1>=r||(e=f.src.charCodeAt(n++),e<48||e>57))return-1;for(;;){if(n>=r)return-1;if(e=f.src.charCodeAt(n++),e>=48&&e<=57){if(n-t>=10)return-1;continue}if(e===41||e===46)break;return-1}return n<r&&(e=f.src.charCodeAt(n),!oc(e))?-1:n}function cg(f,i){var e,t,n=f.level+2;for(e=i+2,t=f.tokens.length-2;e<t;e++)f.tokens[e].level===n&&f.tokens[e].type==="paragraph_open"&&(f.tokens[e+2].hidden=!0,f.tokens[e].hidden=!0,e+=2)}var fg=function(i,e,t,n){var r,a,o,l,u,c,h,v,g,p,b,y,k,E,_,T,x,C,S,R,z,F,G,M,O,A,I,$,ie=!1,N=!0;if(i.sCount[e]-i.blkIndent>=4||i.listIndent>=0&&i.sCount[e]-i.listIndent>=4&&i.sCount[e]<i.blkIndent)return!1;if(n&&i.parentType==="paragraph"&&i.sCount[e]>=i.blkIndent&&(ie=!0),(G=lc(i,e))>=0){if(h=!0,O=i.bMarks[e]+i.tShift[e],k=Number(i.src.slice(O,G-1)),ie&&k!==1)return!1}else if((G=sc(i,e))>=0)h=!1;else return!1;if(ie&&i.skipSpaces(G)>=i.eMarks[e])return!1;if(y=i.src.charCodeAt(G-1),n)return!0;for(b=i.tokens.length,h?($=i.push("ordered_list_open","ol",1),k!==1&&($.attrs=[["start",k]])):$=i.push("bullet_list_open","ul",1),$.map=p=[e,0],$.markup=String.fromCharCode(y),_=e,M=!1,I=i.md.block.ruler.getRules("list"),C=i.parentType,i.parentType="list";_<t;){for(F=G,E=i.eMarks[_],c=T=i.sCount[_]+G-(i.bMarks[e]+i.tShift[e]);F<E;){if(r=i.src.charCodeAt(F),r===9)T+=4-(T+i.bsCount[_])%4;else if(r===32)T++;else break;F++}if(a=F,a>=E?u=1:u=T-c,u>4&&(u=1),l=c+u,$=i.push("list_item_open","li",1),$.markup=String.fromCharCode(y),$.map=v=[e,0],h&&($.info=i.src.slice(O,G-1)),z=i.tight,R=i.tShift[e],S=i.sCount[e],x=i.listIndent,i.listIndent=i.blkIndent,i.blkIndent=l,i.tight=!0,i.tShift[e]=a-i.bMarks[e],i.sCount[e]=T,a>=E&&i.isEmpty(e+1)?i.line=Math.min(i.line+2,t):i.md.block.tokenize(i,e,t,!0),(!i.tight||M)&&(N=!1),M=i.line-e>1&&i.isEmpty(i.line-1),i.blkIndent=i.listIndent,i.listIndent=x,i.tShift[e]=R,i.sCount[e]=S,i.tight=z,$=i.push("list_item_close","li",-1),$.markup=String.fromCharCode(y),_=e=i.line,v[1]=_,a=i.bMarks[e],_>=t||i.sCount[_]<i.blkIndent||i.sCount[e]-i.blkIndent>=4)break;for(A=!1,o=0,g=I.length;o<g;o++)if(I[o](i,_,t,!0)){A=!0;break}if(A)break;if(h){if(G=lc(i,_),G<0)break;O=i.bMarks[_]+i.tShift[_]}else if(G=sc(i,_),G<0)break;if(y!==i.src.charCodeAt(G-1))break}return h?$=i.push("ordered_list_close","ol",-1):$=i.push("bullet_list_close","ul",-1),$.markup=String.fromCharCode(y),p[1]=_,i.line=_,i.parentType=C,N&&cg(i,b),!0},dg=tt.normalizeReference,Ja=tt.isSpace,hg=function(i,e,t,n){var r,a,o,l,u,c,h,v,g,p,b,y,k,E,_,T,x=0,C=i.bMarks[e]+i.tShift[e],S=i.eMarks[e],R=e+1;if(i.sCount[e]-i.blkIndent>=4||i.src.charCodeAt(C)!==91)return!1;for(;++C<S;)if(i.src.charCodeAt(C)===93&&i.src.charCodeAt(C-1)!==92){if(C+1===S||i.src.charCodeAt(C+1)!==58)return!1;break}for(l=i.lineMax,_=i.md.block.ruler.getRules("reference"),p=i.parentType,i.parentType="reference";R<l&&!i.isEmpty(R);R++)if(!(i.sCount[R]-i.blkIndent>3)&&!(i.sCount[R]<0)){for(E=!1,c=0,h=_.length;c<h;c++)if(_[c](i,R,l,!0)){E=!0;break}if(E)break}for(k=i.getLines(e,R,i.blkIndent,!1).trim(),S=k.length,C=1;C<S;C++){if(r=k.charCodeAt(C),r===91)return!1;if(r===93){g=C;break}else r===10?x++:r===92&&(C++,C<S&&k.charCodeAt(C)===10&&x++)}if(g<0||k.charCodeAt(g+1)!==58)return!1;for(C=g+2;C<S;C++)if(r=k.charCodeAt(C),r===10)x++;else if(!Ja(r))break;if(b=i.md.helpers.parseLinkDestination(k,C,S),!b.ok||(u=i.md.normalizeLink(b.str),!i.md.validateLink(u)))return!1;for(C=b.pos,x+=b.lines,a=C,o=x,y=C;C<S;C++)if(r=k.charCodeAt(C),r===10)x++;else if(!Ja(r))break;for(b=i.md.helpers.parseLinkTitle(k,C,S),C<S&&y!==C&&b.ok?(T=b.str,C=b.pos,x+=b.lines):(T="",C=a,x=o);C<S&&(r=k.charCodeAt(C),!!Ja(r));)C++;if(C<S&&k.charCodeAt(C)!==10&&T)for(T="",C=a,x=o;C<S&&(r=k.charCodeAt(C),!!Ja(r));)C++;return C<S&&k.charCodeAt(C)!==10||(v=dg(k.slice(1,g)),!v)?!1:(n||(typeof i.env.references=="undefined"&&(i.env.references={}),typeof i.env.references[v]=="undefined"&&(i.env.references[v]={title:T,href:u}),i.parentType=p,i.line=e+x+1),!0)},vg=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Qa={},gg="[a-zA-Z_:][a-zA-Z0-9:._-]*",pg="[^\"'=<>`\\x00-\\x20]+",mg="'[^']*'",bg='"[^"]*"',yg="(?:"+pg+"|"+mg+"|"+bg+")",wg="(?:\\s+"+gg+"(?:\\s*=\\s*"+yg+")?)",uc="<[A-Za-z][A-Za-z0-9\\-]*"+wg+"*\\s*\\/?>",cc="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",kg="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",Eg="<[?][\\s\\S]*?[?]>",xg="<![A-Z]+\\s+[^>]*>",Cg="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",_g=new RegExp("^(?:"+uc+"|"+cc+"|"+kg+"|"+Eg+"|"+xg+"|"+Cg+")"),Ag=new RegExp("^(?:"+uc+"|"+cc+")");Qa.HTML_TAG_RE=_g,Qa.HTML_OPEN_CLOSE_TAG_RE=Ag;var Tg=vg,Sg=Qa.HTML_OPEN_CLOSE_TAG_RE,Ci=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Tg.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Sg.source+"\\s*$"),/^$/,!1]],Ng=function(i,e,t,n){var r,a,o,l,u=i.bMarks[e]+i.tShift[e],c=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||!i.md.options.html||i.src.charCodeAt(u)!==60)return!1;for(l=i.src.slice(u,c),r=0;r<Ci.length&&!Ci[r][0].test(l);r++);if(r===Ci.length)return!1;if(n)return Ci[r][2];if(a=e+1,!Ci[r][1].test(l)){for(;a<t&&!(i.sCount[a]<i.blkIndent);a++)if(u=i.bMarks[a]+i.tShift[a],c=i.eMarks[a],l=i.src.slice(u,c),Ci[r][1].test(l)){l.length!==0&&a++;break}}return i.line=a,o=i.push("html_block","",0),o.map=[e,a],o.content=i.getLines(e,a,i.blkIndent,!0),!0},fc=tt.isSpace,Dg=function(i,e,t,n){var r,a,o,l,u=i.bMarks[e]+i.tShift[e],c=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||(r=i.src.charCodeAt(u),r!==35||u>=c))return!1;for(a=1,r=i.src.charCodeAt(++u);r===35&&u<c&&a<=6;)a++,r=i.src.charCodeAt(++u);return a>6||u<c&&!fc(r)?!1:(n||(c=i.skipSpacesBack(c,u),o=i.skipCharsBack(c,35,u),o>u&&fc(i.src.charCodeAt(o-1))&&(c=o),i.line=e+1,l=i.push("heading_open","h"+String(a),1),l.markup="########".slice(0,a),l.map=[e,i.line],l=i.push("inline","",0),l.content=i.src.slice(u,c).trim(),l.map=[e,i.line],l.children=[],l=i.push("heading_close","h"+String(a),-1),l.markup="########".slice(0,a)),!0)},Rg=function(i,e,t){var n,r,a,o,l,u,c,h,v,g=e+1,p,b=i.md.block.ruler.getRules("paragraph");if(i.sCount[e]-i.blkIndent>=4)return!1;for(p=i.parentType,i.parentType="paragraph";g<t&&!i.isEmpty(g);g++)if(!(i.sCount[g]-i.blkIndent>3)){if(i.sCount[g]>=i.blkIndent&&(u=i.bMarks[g]+i.tShift[g],c=i.eMarks[g],u<c&&(v=i.src.charCodeAt(u),(v===45||v===61)&&(u=i.skipChars(u,v),u=i.skipSpaces(u),u>=c)))){h=v===61?1:2;break}if(!(i.sCount[g]<0)){for(r=!1,a=0,o=b.length;a<o;a++)if(b[a](i,g,t,!0)){r=!0;break}if(r)break}}return h?(n=i.getLines(e,g,i.blkIndent,!1).trim(),i.line=g+1,l=i.push("heading_open","h"+String(h),1),l.markup=String.fromCharCode(v),l.map=[e,i.line],l=i.push("inline","",0),l.content=n,l.map=[e,i.line-1],l.children=[],l=i.push("heading_close","h"+String(h),-1),l.markup=String.fromCharCode(v),i.parentType=p,!0):!1},Og=function(i,e){var t,n,r,a,o,l,u=e+1,c=i.md.block.ruler.getRules("paragraph"),h=i.lineMax;for(l=i.parentType,i.parentType="paragraph";u<h&&!i.isEmpty(u);u++)if(!(i.sCount[u]-i.blkIndent>3)&&!(i.sCount[u]<0)){for(n=!1,r=0,a=c.length;r<a;r++)if(c[r](i,u,h,!0)){n=!0;break}if(n)break}return t=i.getLines(e,u,i.blkIndent,!1).trim(),i.line=u,o=i.push("paragraph_open","p",1),o.map=[e,i.line],o=i.push("inline","",0),o.content=t,o.map=[e,i.line],o.children=[],o=i.push("paragraph_close","p",-1),i.parentType=l,!0},dc=ks,eo=tt.isSpace;function Un(f,i,e,t){var n,r,a,o,l,u,c,h;for(this.src=f,this.md=i,this.env=e,this.tokens=t,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",r=this.src,h=!1,a=o=u=c=0,l=r.length;o<l;o++){if(n=r.charCodeAt(o),!h)if(eo(n)){u++,n===9?c+=4-c%4:c++;continue}else h=!0;(n===10||o===l-1)&&(n!==10&&o++,this.bMarks.push(a),this.eMarks.push(o),this.tShift.push(u),this.sCount.push(c),this.bsCount.push(0),h=!1,u=0,c=0,a=o+1)}this.bMarks.push(r.length),this.eMarks.push(r.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Un.prototype.push=function(f,i,e){var t=new dc(f,i,e);return t.block=!0,e<0&&this.level--,t.level=this.level,e>0&&this.level++,this.tokens.push(t),t},Un.prototype.isEmpty=function(i){return this.bMarks[i]+this.tShift[i]>=this.eMarks[i]},Un.prototype.skipEmptyLines=function(i){for(var e=this.lineMax;i<e&&!(this.bMarks[i]+this.tShift[i]<this.eMarks[i]);i++);return i},Un.prototype.skipSpaces=function(i){for(var e,t=this.src.length;i<t&&(e=this.src.charCodeAt(i),!!eo(e));i++);return i},Un.prototype.skipSpacesBack=function(i,e){if(i<=e)return i;for(;i>e;)if(!eo(this.src.charCodeAt(--i)))return i+1;return i},Un.prototype.skipChars=function(i,e){for(var t=this.src.length;i<t&&this.src.charCodeAt(i)===e;i++);return i},Un.prototype.skipCharsBack=function(i,e,t){if(i<=t)return i;for(;i>t;)if(e!==this.src.charCodeAt(--i))return i+1;return i},Un.prototype.getLines=function(i,e,t,n){var r,a,o,l,u,c,h,v=i;if(i>=e)return"";for(c=new Array(e-i),r=0;v<e;v++,r++){for(a=0,h=l=this.bMarks[v],v+1<e||n?u=this.eMarks[v]+1:u=this.eMarks[v];l<u&&a<t;){if(o=this.src.charCodeAt(l),eo(o))o===9?a+=4-(a+this.bsCount[v])%4:a++;else if(l-h<this.tShift[v])a++;else break;l++}a>t?c[r]=new Array(a-t+1).join(" ")+this.src.slice(l,u):c[r]=this.src.slice(l,u)}return c.join("")},Un.prototype.Token=dc;var qg=Un,Lg=ws,to=[["table",ig,["paragraph","reference"]],["code",ag],["fence",og,["paragraph","reference","blockquote","list"]],["blockquote",sg,["paragraph","reference","blockquote","list"]],["hr",ug,["paragraph","reference","blockquote","list"]],["list",fg,["paragraph","reference","blockquote"]],["reference",hg],["html_block",Ng,["paragraph","reference","blockquote"]],["heading",Dg,["paragraph","reference","blockquote"]],["lheading",Rg],["paragraph",Og]];function no(){this.ruler=new Lg;for(var f=0;f<to.length;f++)this.ruler.push(to[f][0],to[f][1],{alt:(to[f][2]||[]).slice()})}no.prototype.tokenize=function(f,i,e){for(var t,n,r=this.ruler.getRules(""),a=r.length,o=i,l=!1,u=f.md.options.maxNesting;o<e&&(f.line=o=f.skipEmptyLines(o),!(o>=e||f.sCount[o]<f.blkIndent));){if(f.level>=u){f.line=e;break}for(n=0;n<a&&(t=r[n](f,o,e,!1),!t);n++);f.tight=!l,f.isEmpty(f.line-1)&&(l=!0),o=f.line,o<e&&f.isEmpty(o)&&(l=!0,o++,f.line=o)}},no.prototype.parse=function(f,i,e,t){var n;!f||(n=new this.State(f,i,e,t),this.tokenize(n,n.line,n.lineMax))},no.prototype.State=qg;var Ig=no;function Bg(f){switch(f){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}for(var Mg=function(i,e){for(var t=i.pos;t<i.posMax&&!Bg(i.src.charCodeAt(t));)t++;return t===i.pos?!1:(e||(i.pending+=i.src.slice(i.pos,t)),i.pos=t,!0)},Pg=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,Fg=function(i,e){var t,n,r,a,o,l,u,c;return!i.md.options.linkify||i.linkLevel>0||(t=i.pos,n=i.posMax,t+3>n)||i.src.charCodeAt(t)!==58||i.src.charCodeAt(t+1)!==47||i.src.charCodeAt(t+2)!==47||(r=i.pending.match(Pg),!r)||(a=r[1],o=i.md.linkify.matchAtStart(i.src.slice(t-a.length)),!o)||(l=o.url,l=l.replace(/\*+$/,""),u=i.md.normalizeLink(l),!i.md.validateLink(u))?!1:(e||(i.pending=i.pending.slice(0,-a.length),c=i.push("link_open","a",1),c.attrs=[["href",u]],c.markup="linkify",c.info="auto",c=i.push("text","",0),c.content=i.md.normalizeLinkText(l),c=i.push("link_close","a",-1),c.markup="linkify",c.info="auto"),i.pos+=l.length-a.length,!0)},zg=tt.isSpace,Ug=function(i,e){var t,n,r,a=i.pos;if(i.src.charCodeAt(a)!==10)return!1;if(t=i.pending.length-1,n=i.posMax,!e)if(t>=0&&i.pending.charCodeAt(t)===32)if(t>=1&&i.pending.charCodeAt(t-1)===32){for(r=t-1;r>=1&&i.pending.charCodeAt(r-1)===32;)r--;i.pending=i.pending.slice(0,r),i.push("hardbreak","br",0)}else i.pending=i.pending.slice(0,-1),i.push("softbreak","br",0);else i.push("softbreak","br",0);for(a++;a<n&&zg(i.src.charCodeAt(a));)a++;return i.pos=a,!0},Vg=tt.isSpace,As=[],hc=0;hc<256;hc++)As.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(f){As[f.charCodeAt(0)]=1});var Hg=function(i,e){var t,n,r,a,o,l=i.pos,u=i.posMax;if(i.src.charCodeAt(l)!==92||(l++,l>=u))return!1;if(t=i.src.charCodeAt(l),t===10){for(e||i.push("hardbreak","br",0),l++;l<u&&(t=i.src.charCodeAt(l),!!Vg(t));)l++;return i.pos=l,!0}return a=i.src[l],t>=55296&&t<=56319&&l+1<u&&(n=i.src.charCodeAt(l+1),n>=56320&&n<=57343&&(a+=i.src[l+1],l++)),r="\\"+a,e||(o=i.push("text_special","",0),t<256&&As[t]!==0?o.content=a:o.content=r,o.markup=r,o.info="escape"),i.pos=l+1,!0},jg=function(i,e){var t,n,r,a,o,l,u,c,h=i.pos,v=i.src.charCodeAt(h);if(v!==96)return!1;for(t=h,h++,n=i.posMax;h<n&&i.src.charCodeAt(h)===96;)h++;if(r=i.src.slice(t,h),u=r.length,i.backticksScanned&&(i.backticks[u]||0)<=t)return e||(i.pending+=r),i.pos+=u,!0;for(o=l=h;(o=i.src.indexOf("`",l))!==-1;){for(l=o+1;l<n&&i.src.charCodeAt(l)===96;)l++;if(c=l-o,c===u)return e||(a=i.push("code_inline","code",0),a.markup=r,a.content=i.src.slice(h,o).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),i.pos=l,!0;i.backticks[c]=o}return i.backticksScanned=!0,e||(i.pending+=r),i.pos+=u,!0},ro={};ro.tokenize=function(i,e){var t,n,r,a,o,l=i.pos,u=i.src.charCodeAt(l);if(e||u!==126||(n=i.scanDelims(i.pos,!0),a=n.length,o=String.fromCharCode(u),a<2))return!1;for(a%2&&(r=i.push("text","",0),r.content=o,a--),t=0;t<a;t+=2)r=i.push("text","",0),r.content=o+o,i.delimiters.push({marker:u,length:0,token:i.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return i.pos+=n.length,!0};function vc(f,i){var e,t,n,r,a,o=[],l=i.length;for(e=0;e<l;e++)n=i[e],n.marker===126&&n.end!==-1&&(r=i[n.end],a=f.tokens[n.token],a.type="s_open",a.tag="s",a.nesting=1,a.markup="~~",a.content="",a=f.tokens[r.token],a.type="s_close",a.tag="s",a.nesting=-1,a.markup="~~",a.content="",f.tokens[r.token-1].type==="text"&&f.tokens[r.token-1].content==="~"&&o.push(r.token-1));for(;o.length;){for(e=o.pop(),t=e+1;t<f.tokens.length&&f.tokens[t].type==="s_close";)t++;t--,e!==t&&(a=f.tokens[t],f.tokens[t]=f.tokens[e],f.tokens[e]=a)}}ro.postProcess=function(i){var e,t=i.tokens_meta,n=i.tokens_meta.length;for(vc(i,i.delimiters),e=0;e<n;e++)t[e]&&t[e].delimiters&&vc(i,t[e].delimiters)};var io={};io.tokenize=function(i,e){var t,n,r,a=i.pos,o=i.src.charCodeAt(a);if(e||o!==95&&o!==42)return!1;for(n=i.scanDelims(i.pos,o===42),t=0;t<n.length;t++)r=i.push("text","",0),r.content=String.fromCharCode(o),i.delimiters.push({marker:o,length:n.length,token:i.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return i.pos+=n.length,!0};function gc(f,i){var e,t,n,r,a,o,l=i.length;for(e=l-1;e>=0;e--)t=i[e],!(t.marker!==95&&t.marker!==42)&&t.end!==-1&&(n=i[t.end],o=e>0&&i[e-1].end===t.end+1&&i[e-1].marker===t.marker&&i[e-1].token===t.token-1&&i[t.end+1].token===n.token+1,a=String.fromCharCode(t.marker),r=f.tokens[t.token],r.type=o?"strong_open":"em_open",r.tag=o?"strong":"em",r.nesting=1,r.markup=o?a+a:a,r.content="",r=f.tokens[n.token],r.type=o?"strong_close":"em_close",r.tag=o?"strong":"em",r.nesting=-1,r.markup=o?a+a:a,r.content="",o&&(f.tokens[i[e-1].token].content="",f.tokens[i[t.end+1].token].content="",e--))}io.postProcess=function(i){var e,t=i.tokens_meta,n=i.tokens_meta.length;for(gc(i,i.delimiters),e=0;e<n;e++)t[e]&&t[e].delimiters&&gc(i,t[e].delimiters)};var Gg=tt.normalizeReference,Ts=tt.isSpace,Wg=function(i,e){var t,n,r,a,o,l,u,c,h,v="",g="",p=i.pos,b=i.posMax,y=i.pos,k=!0;if(i.src.charCodeAt(i.pos)!==91||(o=i.pos+1,a=i.md.helpers.parseLinkLabel(i,i.pos,!0),a<0))return!1;if(l=a+1,l<b&&i.src.charCodeAt(l)===40){for(k=!1,l++;l<b&&(n=i.src.charCodeAt(l),!(!Ts(n)&&n!==10));l++);if(l>=b)return!1;if(y=l,u=i.md.helpers.parseLinkDestination(i.src,l,i.posMax),u.ok){for(v=i.md.normalizeLink(u.str),i.md.validateLink(v)?l=u.pos:v="",y=l;l<b&&(n=i.src.charCodeAt(l),!(!Ts(n)&&n!==10));l++);if(u=i.md.helpers.parseLinkTitle(i.src,l,i.posMax),l<b&&y!==l&&u.ok)for(g=u.str,l=u.pos;l<b&&(n=i.src.charCodeAt(l),!(!Ts(n)&&n!==10));l++);}(l>=b||i.src.charCodeAt(l)!==41)&&(k=!0),l++}if(k){if(typeof i.env.references=="undefined")return!1;if(l<b&&i.src.charCodeAt(l)===91?(y=l+1,l=i.md.helpers.parseLinkLabel(i,l),l>=0?r=i.src.slice(y,l++):l=a+1):l=a+1,r||(r=i.src.slice(o,a)),c=i.env.references[Gg(r)],!c)return i.pos=p,!1;v=c.href,g=c.title}return e||(i.pos=o,i.posMax=a,h=i.push("link_open","a",1),h.attrs=t=[["href",v]],g&&t.push(["title",g]),i.linkLevel++,i.md.inline.tokenize(i),i.linkLevel--,h=i.push("link_close","a",-1)),i.pos=l,i.posMax=b,!0},$g=tt.normalizeReference,Ss=tt.isSpace,Kg=function(i,e){var t,n,r,a,o,l,u,c,h,v,g,p,b,y="",k=i.pos,E=i.posMax;if(i.src.charCodeAt(i.pos)!==33||i.src.charCodeAt(i.pos+1)!==91||(l=i.pos+2,o=i.md.helpers.parseLinkLabel(i,i.pos+1,!1),o<0))return!1;if(u=o+1,u<E&&i.src.charCodeAt(u)===40){for(u++;u<E&&(n=i.src.charCodeAt(u),!(!Ss(n)&&n!==10));u++);if(u>=E)return!1;for(b=u,h=i.md.helpers.parseLinkDestination(i.src,u,i.posMax),h.ok&&(y=i.md.normalizeLink(h.str),i.md.validateLink(y)?u=h.pos:y=""),b=u;u<E&&(n=i.src.charCodeAt(u),!(!Ss(n)&&n!==10));u++);if(h=i.md.helpers.parseLinkTitle(i.src,u,i.posMax),u<E&&b!==u&&h.ok)for(v=h.str,u=h.pos;u<E&&(n=i.src.charCodeAt(u),!(!Ss(n)&&n!==10));u++);else v="";if(u>=E||i.src.charCodeAt(u)!==41)return i.pos=k,!1;u++}else{if(typeof i.env.references=="undefined")return!1;if(u<E&&i.src.charCodeAt(u)===91?(b=u+1,u=i.md.helpers.parseLinkLabel(i,u),u>=0?a=i.src.slice(b,u++):u=o+1):u=o+1,a||(a=i.src.slice(l,o)),c=i.env.references[$g(a)],!c)return i.pos=k,!1;y=c.href,v=c.title}return e||(r=i.src.slice(l,o),i.md.inline.parse(r,i.md,i.env,p=[]),g=i.push("image","img",0),g.attrs=t=[["src",y],["alt",""]],g.children=p,g.content=r,v&&t.push(["title",v])),i.pos=u,i.posMax=E,!0},Zg=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Yg=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,Xg=function(i,e){var t,n,r,a,o,l,u=i.pos;if(i.src.charCodeAt(u)!==60)return!1;for(o=i.pos,l=i.posMax;;){if(++u>=l||(a=i.src.charCodeAt(u),a===60))return!1;if(a===62)break}return t=i.src.slice(o+1,u),Yg.test(t)?(n=i.md.normalizeLink(t),i.md.validateLink(n)?(e||(r=i.push("link_open","a",1),r.attrs=[["href",n]],r.markup="autolink",r.info="auto",r=i.push("text","",0),r.content=i.md.normalizeLinkText(t),r=i.push("link_close","a",-1),r.markup="autolink",r.info="auto"),i.pos+=t.length+2,!0):!1):Zg.test(t)?(n=i.md.normalizeLink("mailto:"+t),i.md.validateLink(n)?(e||(r=i.push("link_open","a",1),r.attrs=[["href",n]],r.markup="autolink",r.info="auto",r=i.push("text","",0),r.content=i.md.normalizeLinkText(t),r=i.push("link_close","a",-1),r.markup="autolink",r.info="auto"),i.pos+=t.length+2,!0):!1):!1},Jg=Qa.HTML_TAG_RE;function Qg(f){return/^<a[>\s]/i.test(f)}function ep(f){return/^<\/a\s*>/i.test(f)}function tp(f){var i=f|32;return i>=97&&i<=122}var np=function(i,e){var t,n,r,a,o=i.pos;return!i.md.options.html||(r=i.posMax,i.src.charCodeAt(o)!==60||o+2>=r)||(t=i.src.charCodeAt(o+1),t!==33&&t!==63&&t!==47&&!tp(t))||(n=i.src.slice(o).match(Jg),!n)?!1:(e||(a=i.push("html_inline","",0),a.content=i.src.slice(o,o+n[0].length),Qg(a.content)&&i.linkLevel++,ep(a.content)&&i.linkLevel--),i.pos+=n[0].length,!0)},pc=Fu,rp=tt.has,ip=tt.isValidEntityCode,mc=tt.fromCodePoint,ap=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,op=/^&([a-z][a-z0-9]{1,31});/i,sp=function(i,e){var t,n,r,a,o=i.pos,l=i.posMax;if(i.src.charCodeAt(o)!==38||o+1>=l)return!1;if(t=i.src.charCodeAt(o+1),t===35){if(r=i.src.slice(o).match(ap),r)return e||(n=r[1][0].toLowerCase()==="x"?parseInt(r[1].slice(1),16):parseInt(r[1],10),a=i.push("text_special","",0),a.content=ip(n)?mc(n):mc(65533),a.markup=r[0],a.info="entity"),i.pos+=r[0].length,!0}else if(r=i.src.slice(o).match(op),r&&rp(pc,r[1]))return e||(a=i.push("text_special","",0),a.content=pc[r[1]],a.markup=r[0],a.info="entity"),i.pos+=r[0].length,!0;return!1};function bc(f,i){var e,t,n,r,a,o,l,u,c={},h=i.length;if(!!h){var v=0,g=-2,p=[];for(e=0;e<h;e++)if(n=i[e],p.push(0),(i[v].marker!==n.marker||g!==n.token-1)&&(v=e),g=n.token,n.length=n.length||0,!!n.close){for(c.hasOwnProperty(n.marker)||(c[n.marker]=[-1,-1,-1,-1,-1,-1]),a=c[n.marker][(n.open?3:0)+n.length%3],t=v-p[v]-1,o=t;t>a;t-=p[t]+1)if(r=i[t],r.marker===n.marker&&r.open&&r.end<0&&(l=!1,(r.close||n.open)&&(r.length+n.length)%3===0&&(r.length%3!==0||n.length%3!==0)&&(l=!0),!l)){u=t>0&&!i[t-1].open?p[t-1]+1:0,p[e]=e-t+u,p[t]=u,n.open=!1,r.end=e,r.close=!1,o=-1,g=-2;break}o!==-1&&(c[n.marker][(n.open?3:0)+(n.length||0)%3]=o)}}}var lp=function(i){var e,t=i.tokens_meta,n=i.tokens_meta.length;for(bc(i,i.delimiters),e=0;e<n;e++)t[e]&&t[e].delimiters&&bc(i,t[e].delimiters)},up=function(i){var e,t,n=0,r=i.tokens,a=i.tokens.length;for(e=t=0;e<a;e++)r[e].nesting<0&&n--,r[e].level=n,r[e].nesting>0&&n++,r[e].type==="text"&&e+1<a&&r[e+1].type==="text"?r[e+1].content=r[e].content+r[e+1].content:(e!==t&&(r[t]=r[e]),t++);e!==t&&(r.length=t)},Ns=ks,yc=tt.isWhiteSpace,wc=tt.isPunctChar,kc=tt.isMdAsciiPunct;function ra(f,i,e,t){this.src=f,this.env=e,this.md=i,this.tokens=t,this.tokens_meta=Array(t.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}ra.prototype.pushPending=function(){var f=new Ns("text","",0);return f.content=this.pending,f.level=this.pendingLevel,this.tokens.push(f),this.pending="",f},ra.prototype.push=function(f,i,e){this.pending&&this.pushPending();var t=new Ns(f,i,e),n=null;return e<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),t.level=this.level,e>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],n={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(t),this.tokens_meta.push(n),t},ra.prototype.scanDelims=function(f,i){var e=f,t,n,r,a,o,l,u,c,h,v=!0,g=!0,p=this.posMax,b=this.src.charCodeAt(f);for(t=f>0?this.src.charCodeAt(f-1):32;e<p&&this.src.charCodeAt(e)===b;)e++;return r=e-f,n=e<p?this.src.charCodeAt(e):32,u=kc(t)||wc(String.fromCharCode(t)),h=kc(n)||wc(String.fromCharCode(n)),l=yc(t),c=yc(n),c?v=!1:h&&(l||u||(v=!1)),l?g=!1:u&&(c||h||(g=!1)),i?(a=v,o=g):(a=v&&(!g||u),o=g&&(!v||h)),{can_open:a,can_close:o,length:r}},ra.prototype.Token=Ns;var cp=ra,Ec=ws,Ds=[["text",Mg],["linkify",Fg],["newline",Ug],["escape",Hg],["backticks",jg],["strikethrough",ro.tokenize],["emphasis",io.tokenize],["link",Wg],["image",Kg],["autolink",Xg],["html_inline",np],["entity",sp]],Rs=[["balance_pairs",lp],["strikethrough",ro.postProcess],["emphasis",io.postProcess],["fragments_join",up]];function ia(){var f;for(this.ruler=new Ec,f=0;f<Ds.length;f++)this.ruler.push(Ds[f][0],Ds[f][1]);for(this.ruler2=new Ec,f=0;f<Rs.length;f++)this.ruler2.push(Rs[f][0],Rs[f][1])}ia.prototype.skipToken=function(f){var i,e,t=f.pos,n=this.ruler.getRules(""),r=n.length,a=f.md.options.maxNesting,o=f.cache;if(typeof o[t]!="undefined"){f.pos=o[t];return}if(f.level<a)for(e=0;e<r&&(f.level++,i=n[e](f,!0),f.level--,!i);e++);else f.pos=f.posMax;i||f.pos++,o[t]=f.pos},ia.prototype.tokenize=function(f){for(var i,e,t=this.ruler.getRules(""),n=t.length,r=f.posMax,a=f.md.options.maxNesting;f.pos<r;){if(f.level<a)for(e=0;e<n&&(i=t[e](f,!1),!i);e++);if(i){if(f.pos>=r)break;continue}f.pending+=f.src[f.pos++]}f.pending&&f.pushPending()},ia.prototype.parse=function(f,i,e,t){var n,r,a,o=new this.State(f,i,e,t);for(this.tokenize(o),r=this.ruler2.getRules(""),a=r.length,n=0;n<a;n++)r[n](o)},ia.prototype.State=cp;var fp=ia,dp=function(f){var i={};f=f||{},i.src_Any=$u.source,i.src_Cc=Ku.source,i.src_Z=Zu.source,i.src_P=ys.source,i.src_ZPCc=[i.src_Z,i.src_P,i.src_Cc].join("|"),i.src_ZCc=[i.src_Z,i.src_Cc].join("|");var e="[><\uFF5C]";return i.src_pseudo_letter="(?:(?!"+e+"|"+i.src_ZPCc+")"+i.src_Any+")",i.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",i.src_auth="(?:(?:(?!"+i.src_ZCc+"|[@/\\[\\]()]).)+@)?",i.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",i.src_host_terminator="(?=$|"+e+"|"+i.src_ZPCc+")(?!"+(f["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+i.src_ZPCc+"))",i.src_path="(?:[/?#](?:(?!"+i.src_ZCc+"|"+e+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+i.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+i.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+i.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+i.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+i.src_ZCc+"|[']).)+\\'|\\'(?="+i.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+i.src_ZCc+"|[.]|$)|"+(f["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+i.src_ZCc+"|$)|;(?!"+i.src_ZCc+"|$)|\\!+(?!"+i.src_ZCc+"|[!]|$)|\\?(?!"+i.src_ZCc+"|[?]|$))+|\\/)?",i.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',i.src_xn="xn--[a-z0-9\\-]{1,59}",i.src_domain_root="(?:"+i.src_xn+"|"+i.src_pseudo_letter+"{1,63})",i.src_domain="(?:"+i.src_xn+"|(?:"+i.src_pseudo_letter+")|(?:"+i.src_pseudo_letter+"(?:-|"+i.src_pseudo_letter+"){0,61}"+i.src_pseudo_letter+"))",i.src_host="(?:(?:(?:(?:"+i.src_domain+")\\.)*"+i.src_domain+"))",i.tpl_host_fuzzy="(?:"+i.src_ip4+"|(?:(?:(?:"+i.src_domain+")\\.)+(?:%TLDS%)))",i.tpl_host_no_ip_fuzzy="(?:(?:(?:"+i.src_domain+")\\.)+(?:%TLDS%))",i.src_host_strict=i.src_host+i.src_host_terminator,i.tpl_host_fuzzy_strict=i.tpl_host_fuzzy+i.src_host_terminator,i.src_host_port_strict=i.src_host+i.src_port+i.src_host_terminator,i.tpl_host_port_fuzzy_strict=i.tpl_host_fuzzy+i.src_port+i.src_host_terminator,i.tpl_host_port_no_ip_fuzzy_strict=i.tpl_host_no_ip_fuzzy+i.src_port+i.src_host_terminator,i.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+i.src_ZPCc+"|>|$))",i.tpl_email_fuzzy="(^|"+e+'|"|\\(|'+i.src_ZCc+")("+i.src_email_name+"@"+i.tpl_host_fuzzy_strict+")",i.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+i.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+i.tpl_host_port_fuzzy_strict+i.src_path+")",i.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+i.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+i.tpl_host_port_no_ip_fuzzy_strict+i.src_path+")",i};function Os(f){var i=Array.prototype.slice.call(arguments,1);return i.forEach(function(e){!e||Object.keys(e).forEach(function(t){f[t]=e[t]})}),f}function ao(f){return Object.prototype.toString.call(f)}function hp(f){return ao(f)==="[object String]"}function vp(f){return ao(f)==="[object Object]"}function gp(f){return ao(f)==="[object RegExp]"}function xc(f){return ao(f)==="[object Function]"}function pp(f){return f.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var Cc={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function mp(f){return Object.keys(f||{}).reduce(function(i,e){return i||Cc.hasOwnProperty(e)},!1)}var bp={"http:":{validate:function(f,i,e){var t=f.slice(i);return e.re.http||(e.re.http=new RegExp("^\\/\\/"+e.re.src_auth+e.re.src_host_port_strict+e.re.src_path,"i")),e.re.http.test(t)?t.match(e.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(f,i,e){var t=f.slice(i);return e.re.no_http||(e.re.no_http=new RegExp("^"+e.re.src_auth+"(?:localhost|(?:(?:"+e.re.src_domain+")\\.)+"+e.re.src_domain_root+")"+e.re.src_port+e.re.src_host_terminator+e.re.src_path,"i")),e.re.no_http.test(t)?i>=3&&f[i-3]===":"||i>=3&&f[i-3]==="/"?0:t.match(e.re.no_http)[0].length:0}},"mailto:":{validate:function(f,i,e){var t=f.slice(i);return e.re.mailto||(e.re.mailto=new RegExp("^"+e.re.src_email_name+"@"+e.re.src_host_strict,"i")),e.re.mailto.test(t)?t.match(e.re.mailto)[0].length:0}}},yp="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",wp="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function kp(f){f.__index__=-1,f.__text_cache__=""}function Ep(f){return function(i,e){var t=i.slice(e);return f.test(t)?t.match(f)[0].length:0}}function _c(){return function(f,i){i.normalize(f)}}function oo(f){var i=f.re=dp(f.__opts__),e=f.__tlds__.slice();f.onCompile(),f.__tlds_replaced__||e.push(yp),e.push(i.src_xn),i.src_tlds=e.join("|");function t(o){return o.replace("%TLDS%",i.src_tlds)}i.email_fuzzy=RegExp(t(i.tpl_email_fuzzy),"i"),i.link_fuzzy=RegExp(t(i.tpl_link_fuzzy),"i"),i.link_no_ip_fuzzy=RegExp(t(i.tpl_link_no_ip_fuzzy),"i"),i.host_fuzzy_test=RegExp(t(i.tpl_host_fuzzy_test),"i");var n=[];f.__compiled__={};function r(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(f.__schemas__).forEach(function(o){var l=f.__schemas__[o];if(l!==null){var u={validate:null,link:null};if(f.__compiled__[o]=u,vp(l)){gp(l.validate)?u.validate=Ep(l.validate):xc(l.validate)?u.validate=l.validate:r(o,l),xc(l.normalize)?u.normalize=l.normalize:l.normalize?r(o,l):u.normalize=_c();return}if(hp(l)){n.push(o);return}r(o,l)}}),n.forEach(function(o){!f.__compiled__[f.__schemas__[o]]||(f.__compiled__[o].validate=f.__compiled__[f.__schemas__[o]].validate,f.__compiled__[o].normalize=f.__compiled__[f.__schemas__[o]].normalize)}),f.__compiled__[""]={validate:null,normalize:_c()};var a=Object.keys(f.__compiled__).filter(function(o){return o.length>0&&f.__compiled__[o]}).map(pp).join("|");f.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+i.src_ZPCc+"))("+a+")","i"),f.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+i.src_ZPCc+"))("+a+")","ig"),f.re.schema_at_start=RegExp("^"+f.re.schema_search.source,"i"),f.re.pretest=RegExp("("+f.re.schema_test.source+")|("+f.re.host_fuzzy_test.source+")|@","i"),kp(f)}function xp(f,i){var e=f.__index__,t=f.__last_index__,n=f.__text_cache__.slice(e,t);this.schema=f.__schema__.toLowerCase(),this.index=e+i,this.lastIndex=t+i,this.raw=n,this.text=n,this.url=n}function qs(f,i){var e=new xp(f,i);return f.__compiled__[e.schema].normalize(e,f),e}function Xt(f,i){if(!(this instanceof Xt))return new Xt(f,i);i||mp(f)&&(i=f,f={}),this.__opts__=Os({},Cc,i),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Os({},bp,f),this.__compiled__={},this.__tlds__=wp,this.__tlds_replaced__=!1,this.re={},oo(this)}Xt.prototype.add=function(i,e){return this.__schemas__[i]=e,oo(this),this},Xt.prototype.set=function(i){return this.__opts__=Os(this.__opts__,i),this},Xt.prototype.test=function(i){if(this.__text_cache__=i,this.__index__=-1,!i.length)return!1;var e,t,n,r,a,o,l,u,c;if(this.re.schema_test.test(i)){for(l=this.re.schema_search,l.lastIndex=0;(e=l.exec(i))!==null;)if(r=this.testSchemaAt(i,e[2],l.lastIndex),r){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+r;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=i.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(t=i.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(a=t.index+t[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=t.index+t[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=i.indexOf("@"),c>=0&&(n=i.match(this.re.email_fuzzy))!==null&&(a=n.index+n[1].length,o=n.index+n[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=o))),this.__index__>=0},Xt.prototype.pretest=function(i){return this.re.pretest.test(i)},Xt.prototype.testSchemaAt=function(i,e,t){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(i,t,this):0},Xt.prototype.match=function(i){var e=0,t=[];this.__index__>=0&&this.__text_cache__===i&&(t.push(qs(this,e)),e=this.__last_index__);for(var n=e?i.slice(e):i;this.test(n);)t.push(qs(this,e)),n=n.slice(this.__last_index__),e+=this.__last_index__;return t.length?t:null},Xt.prototype.matchAtStart=function(i){if(this.__text_cache__=i,this.__index__=-1,!i.length)return null;var e=this.re.schema_at_start.exec(i);if(!e)return null;var t=this.testSchemaAt(i,e[2],e[0].length);return t?(this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+t,qs(this,0)):null},Xt.prototype.tlds=function(i,e){return i=Array.isArray(i)?i:[i],e?(this.__tlds__=this.__tlds__.concat(i).sort().filter(function(t,n,r){return t!==r[n-1]}).reverse(),oo(this),this):(this.__tlds__=i.slice(),this.__tlds_replaced__=!0,oo(this),this)},Xt.prototype.normalize=function(i){i.schema||(i.url="http://"+i.url),i.schema==="mailto:"&&!/^mailto:/i.test(i.url)&&(i.url="mailto:"+i.url)},Xt.prototype.onCompile=function(){};var Cp=Xt;const _i=2147483647,Vn=36,Ls=1,aa=26,_p=38,Ap=700,Ac=72,Tc=128,Sc="-",Tp=/^xn--/,Sp=/[^\0-\x7E]/,Np=/[\x2E\u3002\uFF0E\uFF61]/g,Dp={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Is=Vn-Ls,Hn=Math.floor,Bs=String.fromCharCode;function Jr(f){throw new RangeError(Dp[f])}function Rp(f,i){const e=[];let t=f.length;for(;t--;)e[t]=i(f[t]);return e}function Nc(f,i){const e=f.split("@");let t="";e.length>1&&(t=e[0]+"@",f=e[1]),f=f.replace(Np,".");const n=f.split("."),r=Rp(n,i).join(".");return t+r}function Ms(f){const i=[];let e=0;const t=f.length;for(;e<t;){const n=f.charCodeAt(e++);if(n>=55296&&n<=56319&&e<t){const r=f.charCodeAt(e++);(r&64512)==56320?i.push(((n&1023)<<10)+(r&1023)+65536):(i.push(n),e--)}else i.push(n)}return i}const Dc=f=>String.fromCodePoint(...f),Op=function(f){return f-48<10?f-22:f-65<26?f-65:f-97<26?f-97:Vn},Rc=function(f,i){return f+22+75*(f<26)-((i!=0)<<5)},Oc=function(f,i,e){let t=0;for(f=e?Hn(f/Ap):f>>1,f+=Hn(f/i);f>Is*aa>>1;t+=Vn)f=Hn(f/Is);return Hn(t+(Is+1)*f/(f+_p))},Ps=function(f){const i=[],e=f.length;let t=0,n=Tc,r=Ac,a=f.lastIndexOf(Sc);a<0&&(a=0);for(let o=0;o<a;++o)f.charCodeAt(o)>=128&&Jr("not-basic"),i.push(f.charCodeAt(o));for(let o=a>0?a+1:0;o<e;){let l=t;for(let c=1,h=Vn;;h+=Vn){o>=e&&Jr("invalid-input");const v=Op(f.charCodeAt(o++));(v>=Vn||v>Hn((_i-t)/c))&&Jr("overflow"),t+=v*c;const g=h<=r?Ls:h>=r+aa?aa:h-r;if(v<g)break;const p=Vn-g;c>Hn(_i/p)&&Jr("overflow"),c*=p}const u=i.length+1;r=Oc(t-l,u,l==0),Hn(t/u)>_i-n&&Jr("overflow"),n+=Hn(t/u),t%=u,i.splice(t++,0,n)}return String.fromCodePoint(...i)},Fs=function(f){const i=[];f=Ms(f);let e=f.length,t=Tc,n=0,r=Ac;for(const l of f)l<128&&i.push(Bs(l));let a=i.length,o=a;for(a&&i.push(Sc);o<e;){let l=_i;for(const c of f)c>=t&&c<l&&(l=c);const u=o+1;l-t>Hn((_i-n)/u)&&Jr("overflow"),n+=(l-t)*u,t=l;for(const c of f)if(c<t&&++n>_i&&Jr("overflow"),c==t){let h=n;for(let v=Vn;;v+=Vn){const g=v<=r?Ls:v>=r+aa?aa:v-r;if(h<g)break;const p=h-g,b=Vn-g;i.push(Bs(Rc(g+p%b,0))),h=Hn(p/b)}i.push(Bs(Rc(h,0))),r=Oc(n,u,o==a),n=0,++o}++n,++t}return i.join("")},qc=function(f){return Nc(f,function(i){return Tp.test(i)?Ps(i.slice(4).toLowerCase()):i})},Lc=function(f){return Nc(f,function(i){return Sp.test(i)?"xn--"+Fs(i):i})};var qp=Object.freeze(Object.defineProperty({__proto__:null,ucs2decode:Ms,ucs2encode:Dc,decode:Ps,encode:Fs,toASCII:Lc,toUnicode:qc,default:{version:"2.1.0",ucs2:{decode:Ms,encode:Dc},decode:Ps,encode:Fs,toASCII:Lc,toUnicode:qc}},Symbol.toStringTag,{value:"Module"})),Lp=na(qp),Ip={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Bp={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Mp={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},oa=tt,Pp=Ya,Fp=qv,zp=rg,Up=Ig,Vp=fp,Hp=Cp,Qr=wi,Ic=Lp,jp={default:Ip,zero:Bp,commonmark:Mp},Gp=/^(vbscript|javascript|file|data):/,Wp=/^data:image\/(gif|png|jpeg|webp);/;function $p(f){var i=f.trim().toLowerCase();return Gp.test(i)?!!Wp.test(i):!0}var Bc=["http:","https:","mailto:"];function Kp(f){var i=Qr.parse(f,!0);if(i.hostname&&(!i.protocol||Bc.indexOf(i.protocol)>=0))try{i.hostname=Ic.toASCII(i.hostname)}catch{}return Qr.encode(Qr.format(i))}function Zp(f){var i=Qr.parse(f,!0);if(i.hostname&&(!i.protocol||Bc.indexOf(i.protocol)>=0))try{i.hostname=Ic.toUnicode(i.hostname)}catch{}return Qr.decode(Qr.format(i),Qr.decode.defaultChars+"%")}function ln(f,i){if(!(this instanceof ln))return new ln(f,i);i||oa.isString(f)||(i=f||{},f="default"),this.inline=new Vp,this.block=new Up,this.core=new zp,this.renderer=new Fp,this.linkify=new Hp,this.validateLink=$p,this.normalizeLink=Kp,this.normalizeLinkText=Zp,this.utils=oa,this.helpers=oa.assign({},Pp),this.options={},this.configure(f),i&&this.set(i)}ln.prototype.set=function(f){return oa.assign(this.options,f),this},ln.prototype.configure=function(f){var i=this,e;if(oa.isString(f)&&(e=f,f=jp[e],!f))throw new Error('Wrong `markdown-it` preset "'+e+'", check name');if(!f)throw new Error("Wrong `markdown-it` preset, can't be empty");return f.options&&i.set(f.options),f.components&&Object.keys(f.components).forEach(function(t){f.components[t].rules&&i[t].ruler.enableOnly(f.components[t].rules),f.components[t].rules2&&i[t].ruler2.enableOnly(f.components[t].rules2)}),this},ln.prototype.enable=function(f,i){var e=[];Array.isArray(f)||(f=[f]),["core","block","inline"].forEach(function(n){e=e.concat(this[n].ruler.enable(f,!0))},this),e=e.concat(this.inline.ruler2.enable(f,!0));var t=f.filter(function(n){return e.indexOf(n)<0});if(t.length&&!i)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+t);return this},ln.prototype.disable=function(f,i){var e=[];Array.isArray(f)||(f=[f]),["core","block","inline"].forEach(function(n){e=e.concat(this[n].ruler.disable(f,!0))},this),e=e.concat(this.inline.ruler2.disable(f,!0));var t=f.filter(function(n){return e.indexOf(n)<0});if(t.length&&!i)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+t);return this},ln.prototype.use=function(f){var i=[this].concat(Array.prototype.slice.call(arguments,1));return f.apply(f,i),this},ln.prototype.parse=function(f,i){if(typeof f!="string")throw new Error("Input data should be a String");var e=new this.core.State(f,this,i);return this.core.process(e),e.tokens},ln.prototype.render=function(f,i){return i=i||{},this.renderer.render(this.parse(f,i),this.options,i)},ln.prototype.parseInline=function(f,i){var e=new this.core.State(f,this,i);return e.inlineMode=!0,this.core.process(e),e.tokens},ln.prototype.renderInline=function(f,i){return i=i||{},this.renderer.render(this.parseInline(f,i),this.options,i)};var Yp=ln,Xp=Yp;function Jp(f){if(Array.isArray(f))return f}function Qp(f,i){var e=f==null?null:typeof Symbol!="undefined"&&f[Symbol.iterator]||f["@@iterator"];if(e!=null){var t=[],n=!0,r=!1,a,o;try{for(e=e.call(f);!(n=(a=e.next()).done)&&(t.push(a.value),!(i&&t.length===i));n=!0);}catch(l){r=!0,o=l}finally{try{!n&&e.return!=null&&e.return()}finally{if(r)throw o}}return t}}function zs(f,i){(i==null||i>f.length)&&(i=f.length);for(var e=0,t=new Array(i);e<i;e++)t[e]=f[e];return t}function Us(f,i){if(!!f){if(typeof f=="string")return zs(f,i);var e=Object.prototype.toString.call(f).slice(8,-1);if(e==="Object"&&f.constructor&&(e=f.constructor.name),e==="Map"||e==="Set")return Array.from(f);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return zs(f,i)}}function em(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ai(f,i){return Jp(f)||Qp(f,i)||Us(f,i)||em()}function _r(f,i){var e=typeof Symbol!="undefined"&&f[Symbol.iterator]||f["@@iterator"];if(!e){if(Array.isArray(f)||(e=Us(f))||i&&f&&typeof f.length=="number"){e&&(f=e);var t=0,n=function(){};return{s:n,n:function(){return t>=f.length?{done:!0}:{done:!1,value:f[t++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r=!0,a=!1,o;return{s:function(){e=e.call(f)},n:function(){var u=e.next();return r=u.done,u},e:function(u){a=!0,o=u},f:function(){try{!r&&e.return!=null&&e.return()}finally{if(a)throw o}}}}var Mc={exports:{}};(function(f){(function(i){function e(x,C){var S=(x&65535)+(C&65535),R=(x>>16)+(C>>16)+(S>>16);return R<<16|S&65535}function t(x,C){return x<<C|x>>>32-C}function n(x,C,S,R,z,F){return e(t(e(e(C,x),e(R,F)),z),S)}function r(x,C,S,R,z,F,G){return n(C&S|~C&R,x,C,z,F,G)}function a(x,C,S,R,z,F,G){return n(C&R|S&~R,x,C,z,F,G)}function o(x,C,S,R,z,F,G){return n(C^S^R,x,C,z,F,G)}function l(x,C,S,R,z,F,G){return n(S^(C|~R),x,C,z,F,G)}function u(x,C){x[C>>5]|=128<<C%32,x[(C+64>>>9<<4)+14]=C;var S,R,z,F,G,M=1732584193,O=-271733879,A=-1732584194,I=271733878;for(S=0;S<x.length;S+=16)R=M,z=O,F=A,G=I,M=r(M,O,A,I,x[S],7,-680876936),I=r(I,M,O,A,x[S+1],12,-389564586),A=r(A,I,M,O,x[S+2],17,606105819),O=r(O,A,I,M,x[S+3],22,-1044525330),M=r(M,O,A,I,x[S+4],7,-176418897),I=r(I,M,O,A,x[S+5],12,1200080426),A=r(A,I,M,O,x[S+6],17,-1473231341),O=r(O,A,I,M,x[S+7],22,-45705983),M=r(M,O,A,I,x[S+8],7,1770035416),I=r(I,M,O,A,x[S+9],12,-1958414417),A=r(A,I,M,O,x[S+10],17,-42063),O=r(O,A,I,M,x[S+11],22,-1990404162),M=r(M,O,A,I,x[S+12],7,1804603682),I=r(I,M,O,A,x[S+13],12,-40341101),A=r(A,I,M,O,x[S+14],17,-1502002290),O=r(O,A,I,M,x[S+15],22,1236535329),M=a(M,O,A,I,x[S+1],5,-165796510),I=a(I,M,O,A,x[S+6],9,-1069501632),A=a(A,I,M,O,x[S+11],14,643717713),O=a(O,A,I,M,x[S],20,-373897302),M=a(M,O,A,I,x[S+5],5,-701558691),I=a(I,M,O,A,x[S+10],9,38016083),A=a(A,I,M,O,x[S+15],14,-660478335),O=a(O,A,I,M,x[S+4],20,-405537848),M=a(M,O,A,I,x[S+9],5,568446438),I=a(I,M,O,A,x[S+14],9,-1019803690),A=a(A,I,M,O,x[S+3],14,-187363961),O=a(O,A,I,M,x[S+8],20,1163531501),M=a(M,O,A,I,x[S+13],5,-1444681467),I=a(I,M,O,A,x[S+2],9,-51403784),A=a(A,I,M,O,x[S+7],14,1735328473),O=a(O,A,I,M,x[S+12],20,-1926607734),M=o(M,O,A,I,x[S+5],4,-378558),I=o(I,M,O,A,x[S+8],11,-2022574463),A=o(A,I,M,O,x[S+11],16,1839030562),O=o(O,A,I,M,x[S+14],23,-35309556),M=o(M,O,A,I,x[S+1],4,-1530992060),I=o(I,M,O,A,x[S+4],11,1272893353),A=o(A,I,M,O,x[S+7],16,-155497632),O=o(O,A,I,M,x[S+10],23,-1094730640),M=o(M,O,A,I,x[S+13],4,681279174),I=o(I,M,O,A,x[S],11,-358537222),A=o(A,I,M,O,x[S+3],16,-722521979),O=o(O,A,I,M,x[S+6],23,76029189),M=o(M,O,A,I,x[S+9],4,-640364487),I=o(I,M,O,A,x[S+12],11,-421815835),A=o(A,I,M,O,x[S+15],16,530742520),O=o(O,A,I,M,x[S+2],23,-995338651),M=l(M,O,A,I,x[S],6,-198630844),I=l(I,M,O,A,x[S+7],10,1126891415),A=l(A,I,M,O,x[S+14],15,-1416354905),O=l(O,A,I,M,x[S+5],21,-57434055),M=l(M,O,A,I,x[S+12],6,1700485571),I=l(I,M,O,A,x[S+3],10,-1894986606),A=l(A,I,M,O,x[S+10],15,-1051523),O=l(O,A,I,M,x[S+1],21,-2054922799),M=l(M,O,A,I,x[S+8],6,1873313359),I=l(I,M,O,A,x[S+15],10,-30611744),A=l(A,I,M,O,x[S+6],15,-1560198380),O=l(O,A,I,M,x[S+13],21,1309151649),M=l(M,O,A,I,x[S+4],6,-145523070),I=l(I,M,O,A,x[S+11],10,-1120210379),A=l(A,I,M,O,x[S+2],15,718787259),O=l(O,A,I,M,x[S+9],21,-343485551),M=e(M,R),O=e(O,z),A=e(A,F),I=e(I,G);return[M,O,A,I]}function c(x){var C,S="",R=x.length*32;for(C=0;C<R;C+=8)S+=String.fromCharCode(x[C>>5]>>>C%32&255);return S}function h(x){var C,S=[];for(S[(x.length>>2)-1]=void 0,C=0;C<S.length;C+=1)S[C]=0;var R=x.length*8;for(C=0;C<R;C+=8)S[C>>5]|=(x.charCodeAt(C/8)&255)<<C%32;return S}function v(x){return c(u(h(x),x.length*8))}function g(x,C){var S,R=h(x),z=[],F=[],G;for(z[15]=F[15]=void 0,R.length>16&&(R=u(R,x.length*8)),S=0;S<16;S+=1)z[S]=R[S]^909522486,F[S]=R[S]^1549556828;return G=u(z.concat(h(C)),512+C.length*8),c(u(F.concat(G),512+128))}function p(x){var C="0123456789abcdef",S="",R,z;for(z=0;z<x.length;z+=1)R=x.charCodeAt(z),S+=C.charAt(R>>>4&15)+C.charAt(R&15);return S}function b(x){return unescape(encodeURIComponent(x))}function y(x){return v(b(x))}function k(x){return p(y(x))}function E(x,C){return g(b(x),b(C))}function _(x,C){return p(E(x,C))}function T(x,C,S){return C?S?E(C,x):_(C,x):S?y(x):k(x)}f.exports?f.exports=T:i.md5=T})(En)})(Mc);var tm=Mc.exports,Ye={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(f,i){(function(){var e,t="4.17.21",n=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",h=1,v=2,g=4,p=1,b=2,y=1,k=2,E=4,_=8,T=16,x=32,C=64,S=128,R=256,z=512,F=30,G="...",M=800,O=16,A=1,I=2,$=3,ie=1/0,N=9007199254740991,P=17976931348623157e292,V=0/0,W=4294967295,Y=W-1,Q=W>>>1,re=[["ary",S],["bind",y],["bindKey",k],["curry",_],["curryRight",T],["flip",z],["partial",x],["partialRight",C],["rearg",R]],te="[object Arguments]",J="[object Array]",ne="[object AsyncFunction]",ae="[object Boolean]",fe="[object Date]",pe="[object DOMException]",ge="[object Error]",ye="[object Function]",L="[object GeneratorFunction]",K="[object Map]",U="[object Number]",le="[object Null]",he="[object Object]",ve="[object Promise]",xe="[object Proxy]",Se="[object RegExp]",me="[object Set]",_e="[object String]",Xe="[object Symbol]",at="[object Undefined]",Dt="[object WeakMap]",qt="[object WeakSet]",Jt="[object ArrayBuffer]",Ut="[object DataView]",Yn="[object Float32Array]",Nn="[object Float64Array]",Dn="[object Int8Array]",Rn="[object Int16Array]",On="[object Int32Array]",hn="[object Uint8Array]",Wt="[object Uint8ClampedArray]",qn="[object Uint16Array]",Vt="[object Uint32Array]",li=/\b__p \+= '';/g,Fr=/\b(__p \+=) '' \+/g,hr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ln=/&(?:amp|lt|gt|quot|#39);/g,ft=/[&<>"']/g,Qt=RegExp(Ln.source),In=RegExp(ft.source),kt=/<%-([\s\S]+?)%>/g,bl=/<%([\s\S]+?)%>/g,Mi=/<%=([\s\S]+?)%>/g,ya=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wo=/^\w*$/,wa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pi=/[\\^$.*+?()[\]{}|]/g,ka=RegExp(Pi.source),Ea=/^\s+/,ko=/\s/,Eo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xa=/\{\n\/\* \[wrapped with (.+)\] \*/,Ca=/,? & /,_a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xo=/[()=,{}\[\]\/\s]/,Co=/\\(\\)?/g,Fi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Aa=/\w*$/,_o=/^[-+]0x[0-9a-f]+$/i,Ao=/^0b[01]+$/i,To=/^\[object .+?Constructor\]$/,zi=/^0o[0-7]+$/i,Ke=/^(?:0|[1-9]\d*)$/,ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Be=/($^)/,vr=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",Ta="\\u0300-\\u036f",yl="\\ufe20-\\ufe2f",So="\\u20d0-\\u20ff",Ui=Ta+yl+So,ui="\\u2700-\\u27bf",Lf="a-z\\xdf-\\xf6\\xf8-\\xff",xy="\\xac\\xb1\\xd7\\xf7",Cy="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_y="\\u2000-\\u206f",Ay=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",If="A-Z\\xc0-\\xd6\\xd8-\\xde",Bf="\\ufe0e\\ufe0f",Mf=xy+Cy+_y+Ay,wl="['\u2019]",Ty="["+en+"]",Pf="["+Mf+"]",No="["+Ui+"]",Ff="\\d+",Sy="["+ui+"]",zf="["+Lf+"]",Uf="[^"+en+Mf+Ff+ui+Lf+If+"]",kl="\\ud83c[\\udffb-\\udfff]",Ny="(?:"+No+"|"+kl+")",Vf="[^"+en+"]",El="(?:\\ud83c[\\udde6-\\uddff]){2}",xl="[\\ud800-\\udbff][\\udc00-\\udfff]",Vi="["+If+"]",Hf="\\u200d",jf="(?:"+zf+"|"+Uf+")",Dy="(?:"+Vi+"|"+Uf+")",Gf="(?:"+wl+"(?:d|ll|m|re|s|t|ve))?",Wf="(?:"+wl+"(?:D|LL|M|RE|S|T|VE))?",$f=Ny+"?",Kf="["+Bf+"]?",Ry="(?:"+Hf+"(?:"+[Vf,El,xl].join("|")+")"+Kf+$f+")*",Oy="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zf=Kf+$f+Ry,Ly="(?:"+[Sy,El,xl].join("|")+")"+Zf,Iy="(?:"+[Vf+No+"?",No,El,xl,Ty].join("|")+")",By=RegExp(wl,"g"),My=RegExp(No,"g"),Cl=RegExp(kl+"(?="+kl+")|"+Iy+Zf,"g"),Py=RegExp([Vi+"?"+zf+"+"+Gf+"(?="+[Pf,Vi,"$"].join("|")+")",Dy+"+"+Wf+"(?="+[Pf,Vi+jf,"$"].join("|")+")",Vi+"?"+jf+"+"+Gf,Vi+"+"+Wf,qy,Oy,Ff,Ly].join("|"),"g"),Fy=RegExp("["+Hf+en+Ui+Bf+"]"),zy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Uy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vy=-1,vt={};vt[Yn]=vt[Nn]=vt[Dn]=vt[Rn]=vt[On]=vt[hn]=vt[Wt]=vt[qn]=vt[Vt]=!0,vt[te]=vt[J]=vt[Jt]=vt[ae]=vt[Ut]=vt[fe]=vt[ge]=vt[ye]=vt[K]=vt[U]=vt[he]=vt[Se]=vt[me]=vt[_e]=vt[Dt]=!1;var dt={};dt[te]=dt[J]=dt[Jt]=dt[Ut]=dt[ae]=dt[fe]=dt[Yn]=dt[Nn]=dt[Dn]=dt[Rn]=dt[On]=dt[K]=dt[U]=dt[he]=dt[Se]=dt[me]=dt[_e]=dt[Xe]=dt[hn]=dt[Wt]=dt[qn]=dt[Vt]=!0,dt[ge]=dt[ye]=dt[Dt]=!1;var Hy={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},jy={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gy={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wy={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$y=parseFloat,Ky=parseInt,Yf=typeof En=="object"&&En&&En.Object===Object&&En,Zy=typeof self=="object"&&self&&self.Object===Object&&self,Lt=Yf||Zy||Function("return this")(),_l=i&&!i.nodeType&&i,ci=_l&&!0&&f&&!f.nodeType&&f,Xf=ci&&ci.exports===_l,Al=Xf&&Yf.process,vn=function(){try{var X=ci&&ci.require&&ci.require("util").types;return X||Al&&Al.binding&&Al.binding("util")}catch{}}(),Jf=vn&&vn.isArrayBuffer,Qf=vn&&vn.isDate,ed=vn&&vn.isMap,td=vn&&vn.isRegExp,nd=vn&&vn.isSet,rd=vn&&vn.isTypedArray;function tn(X,se,oe){switch(oe.length){case 0:return X.call(se);case 1:return X.call(se,oe[0]);case 2:return X.call(se,oe[0],oe[1]);case 3:return X.call(se,oe[0],oe[1],oe[2])}return X.apply(se,oe)}function Yy(X,se,oe,Ee){for(var Me=-1,nt=X==null?0:X.length;++Me<nt;){var Tt=X[Me];se(Ee,Tt,oe(Tt),X)}return Ee}function gn(X,se){for(var oe=-1,Ee=X==null?0:X.length;++oe<Ee&&se(X[oe],oe,X)!==!1;);return X}function Xy(X,se){for(var oe=X==null?0:X.length;oe--&&se(X[oe],oe,X)!==!1;);return X}function id(X,se){for(var oe=-1,Ee=X==null?0:X.length;++oe<Ee;)if(!se(X[oe],oe,X))return!1;return!0}function zr(X,se){for(var oe=-1,Ee=X==null?0:X.length,Me=0,nt=[];++oe<Ee;){var Tt=X[oe];se(Tt,oe,X)&&(nt[Me++]=Tt)}return nt}function Do(X,se){var oe=X==null?0:X.length;return!!oe&&Hi(X,se,0)>-1}function Tl(X,se,oe){for(var Ee=-1,Me=X==null?0:X.length;++Ee<Me;)if(oe(se,X[Ee]))return!0;return!1}function pt(X,se){for(var oe=-1,Ee=X==null?0:X.length,Me=Array(Ee);++oe<Ee;)Me[oe]=se(X[oe],oe,X);return Me}function Ur(X,se){for(var oe=-1,Ee=se.length,Me=X.length;++oe<Ee;)X[Me+oe]=se[oe];return X}function Sl(X,se,oe,Ee){var Me=-1,nt=X==null?0:X.length;for(Ee&&nt&&(oe=X[++Me]);++Me<nt;)oe=se(oe,X[Me],Me,X);return oe}function Jy(X,se,oe,Ee){var Me=X==null?0:X.length;for(Ee&&Me&&(oe=X[--Me]);Me--;)oe=se(oe,X[Me],Me,X);return oe}function Nl(X,se){for(var oe=-1,Ee=X==null?0:X.length;++oe<Ee;)if(se(X[oe],oe,X))return!0;return!1}var Qy=Dl("length");function ew(X){return X.split("")}function tw(X){return X.match(_a)||[]}function ad(X,se,oe){var Ee;return oe(X,function(Me,nt,Tt){if(se(Me,nt,Tt))return Ee=nt,!1}),Ee}function Ro(X,se,oe,Ee){for(var Me=X.length,nt=oe+(Ee?1:-1);Ee?nt--:++nt<Me;)if(se(X[nt],nt,X))return nt;return-1}function Hi(X,se,oe){return se===se?hw(X,se,oe):Ro(X,od,oe)}function nw(X,se,oe,Ee){for(var Me=oe-1,nt=X.length;++Me<nt;)if(Ee(X[Me],se))return Me;return-1}function od(X){return X!==X}function sd(X,se){var oe=X==null?0:X.length;return oe?Ol(X,se)/oe:V}function Dl(X){return function(se){return se==null?e:se[X]}}function Rl(X){return function(se){return X==null?e:X[se]}}function ld(X,se,oe,Ee,Me){return Me(X,function(nt,Tt,ut){oe=Ee?(Ee=!1,nt):se(oe,nt,Tt,ut)}),oe}function rw(X,se){var oe=X.length;for(X.sort(se);oe--;)X[oe]=X[oe].value;return X}function Ol(X,se){for(var oe,Ee=-1,Me=X.length;++Ee<Me;){var nt=se(X[Ee]);nt!==e&&(oe=oe===e?nt:oe+nt)}return oe}function ql(X,se){for(var oe=-1,Ee=Array(X);++oe<X;)Ee[oe]=se(oe);return Ee}function iw(X,se){return pt(se,function(oe){return[oe,X[oe]]})}function ud(X){return X&&X.slice(0,hd(X)+1).replace(Ea,"")}function nn(X){return function(se){return X(se)}}function Ll(X,se){return pt(se,function(oe){return X[oe]})}function Sa(X,se){return X.has(se)}function cd(X,se){for(var oe=-1,Ee=X.length;++oe<Ee&&Hi(se,X[oe],0)>-1;);return oe}function fd(X,se){for(var oe=X.length;oe--&&Hi(se,X[oe],0)>-1;);return oe}function aw(X,se){for(var oe=X.length,Ee=0;oe--;)X[oe]===se&&++Ee;return Ee}var ow=Rl(Hy),sw=Rl(jy);function lw(X){return"\\"+Wy[X]}function uw(X,se){return X==null?e:X[se]}function ji(X){return Fy.test(X)}function cw(X){return zy.test(X)}function fw(X){for(var se,oe=[];!(se=X.next()).done;)oe.push(se.value);return oe}function Il(X){var se=-1,oe=Array(X.size);return X.forEach(function(Ee,Me){oe[++se]=[Me,Ee]}),oe}function dd(X,se){return function(oe){return X(se(oe))}}function Vr(X,se){for(var oe=-1,Ee=X.length,Me=0,nt=[];++oe<Ee;){var Tt=X[oe];(Tt===se||Tt===c)&&(X[oe]=c,nt[Me++]=oe)}return nt}function Oo(X){var se=-1,oe=Array(X.size);return X.forEach(function(Ee){oe[++se]=Ee}),oe}function dw(X){var se=-1,oe=Array(X.size);return X.forEach(function(Ee){oe[++se]=[Ee,Ee]}),oe}function hw(X,se,oe){for(var Ee=oe-1,Me=X.length;++Ee<Me;)if(X[Ee]===se)return Ee;return-1}function vw(X,se,oe){for(var Ee=oe+1;Ee--;)if(X[Ee]===se)return Ee;return Ee}function Gi(X){return ji(X)?pw(X):Qy(X)}function Bn(X){return ji(X)?mw(X):ew(X)}function hd(X){for(var se=X.length;se--&&ko.test(X.charAt(se)););return se}var gw=Rl(Gy);function pw(X){for(var se=Cl.lastIndex=0;Cl.test(X);)++se;return se}function mw(X){return X.match(Cl)||[]}function bw(X){return X.match(Py)||[]}var yw=function X(se){se=se==null?Lt:Wi.defaults(Lt.Object(),se,Wi.pick(Lt,Uy));var oe=se.Array,Ee=se.Date,Me=se.Error,nt=se.Function,Tt=se.Math,ut=se.Object,Bl=se.RegExp,ww=se.String,pn=se.TypeError,qo=oe.prototype,kw=nt.prototype,$i=ut.prototype,Lo=se["__core-js_shared__"],Io=kw.toString,st=$i.hasOwnProperty,Ew=0,vd=function(){var s=/[^.]+$/.exec(Lo&&Lo.keys&&Lo.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Bo=$i.toString,xw=Io.call(ut),Cw=Lt._,_w=Bl("^"+Io.call(st).replace(Pi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mo=Xf?se.Buffer:e,Hr=se.Symbol,Po=se.Uint8Array,gd=Mo?Mo.allocUnsafe:e,Fo=dd(ut.getPrototypeOf,ut),pd=ut.create,md=$i.propertyIsEnumerable,zo=qo.splice,bd=Hr?Hr.isConcatSpreadable:e,Na=Hr?Hr.iterator:e,fi=Hr?Hr.toStringTag:e,Uo=function(){try{var s=pi(ut,"defineProperty");return s({},"",{}),s}catch{}}(),Aw=se.clearTimeout!==Lt.clearTimeout&&se.clearTimeout,Tw=Ee&&Ee.now!==Lt.Date.now&&Ee.now,Sw=se.setTimeout!==Lt.setTimeout&&se.setTimeout,Vo=Tt.ceil,Ho=Tt.floor,Ml=ut.getOwnPropertySymbols,Nw=Mo?Mo.isBuffer:e,yd=se.isFinite,Dw=qo.join,Rw=dd(ut.keys,ut),St=Tt.max,Bt=Tt.min,Ow=Ee.now,qw=se.parseInt,wd=Tt.random,Lw=qo.reverse,Pl=pi(se,"DataView"),Da=pi(se,"Map"),Fl=pi(se,"Promise"),Ki=pi(se,"Set"),Ra=pi(se,"WeakMap"),Oa=pi(ut,"create"),jo=Ra&&new Ra,Zi={},Iw=mi(Pl),Bw=mi(Da),Mw=mi(Fl),Pw=mi(Ki),Fw=mi(Ra),Go=Hr?Hr.prototype:e,qa=Go?Go.valueOf:e,kd=Go?Go.toString:e;function q(s){if(Et(s)&&!Pe(s)&&!(s instanceof Je)){if(s instanceof mn)return s;if(st.call(s,"__wrapped__"))return Eh(s)}return new mn(s)}var Yi=function(){function s(){}return function(d){if(!mt(d))return{};if(pd)return pd(d);s.prototype=d;var m=new s;return s.prototype=e,m}}();function Wo(){}function mn(s,d){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=e}q.templateSettings={escape:kt,evaluate:bl,interpolate:Mi,variable:"",imports:{_:q}},q.prototype=Wo.prototype,q.prototype.constructor=q,mn.prototype=Yi(Wo.prototype),mn.prototype.constructor=mn;function Je(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function zw(){var s=new Je(this.__wrapped__);return s.__actions__=$t(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=$t(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=$t(this.__views__),s}function Uw(){if(this.__filtered__){var s=new Je(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function Vw(){var s=this.__wrapped__.value(),d=this.__dir__,m=Pe(s),w=d<0,D=m?s.length:0,B=ek(0,D,this.__views__),j=B.start,Z=B.end,ee=Z-j,ue=w?Z:j-1,ce=this.__iteratees__,de=ce.length,we=0,Te=Bt(ee,this.__takeCount__);if(!m||!w&&D==ee&&Te==ee)return Gd(s,this.__actions__);var Re=[];e:for(;ee--&&we<Te;){ue+=d;for(var Ue=-1,Oe=s[ue];++Ue<de;){var Ze=ce[Ue],Qe=Ze.iteratee,on=Ze.type,Gt=Qe(Oe);if(on==I)Oe=Gt;else if(!Gt){if(on==A)continue e;break e}}Re[we++]=Oe}return Re}Je.prototype=Yi(Wo.prototype),Je.prototype.constructor=Je;function di(s){var d=-1,m=s==null?0:s.length;for(this.clear();++d<m;){var w=s[d];this.set(w[0],w[1])}}function Hw(){this.__data__=Oa?Oa(null):{},this.size=0}function jw(s){var d=this.has(s)&&delete this.__data__[s];return this.size-=d?1:0,d}function Gw(s){var d=this.__data__;if(Oa){var m=d[s];return m===l?e:m}return st.call(d,s)?d[s]:e}function Ww(s){var d=this.__data__;return Oa?d[s]!==e:st.call(d,s)}function $w(s,d){var m=this.__data__;return this.size+=this.has(s)?0:1,m[s]=Oa&&d===e?l:d,this}di.prototype.clear=Hw,di.prototype.delete=jw,di.prototype.get=Gw,di.prototype.has=Ww,di.prototype.set=$w;function gr(s){var d=-1,m=s==null?0:s.length;for(this.clear();++d<m;){var w=s[d];this.set(w[0],w[1])}}function Kw(){this.__data__=[],this.size=0}function Zw(s){var d=this.__data__,m=$o(d,s);if(m<0)return!1;var w=d.length-1;return m==w?d.pop():zo.call(d,m,1),--this.size,!0}function Yw(s){var d=this.__data__,m=$o(d,s);return m<0?e:d[m][1]}function Xw(s){return $o(this.__data__,s)>-1}function Jw(s,d){var m=this.__data__,w=$o(m,s);return w<0?(++this.size,m.push([s,d])):m[w][1]=d,this}gr.prototype.clear=Kw,gr.prototype.delete=Zw,gr.prototype.get=Yw,gr.prototype.has=Xw,gr.prototype.set=Jw;function pr(s){var d=-1,m=s==null?0:s.length;for(this.clear();++d<m;){var w=s[d];this.set(w[0],w[1])}}function Qw(){this.size=0,this.__data__={hash:new di,map:new(Da||gr),string:new di}}function e1(s){var d=as(this,s).delete(s);return this.size-=d?1:0,d}function t1(s){return as(this,s).get(s)}function n1(s){return as(this,s).has(s)}function r1(s,d){var m=as(this,s),w=m.size;return m.set(s,d),this.size+=m.size==w?0:1,this}pr.prototype.clear=Qw,pr.prototype.delete=e1,pr.prototype.get=t1,pr.prototype.has=n1,pr.prototype.set=r1;function hi(s){var d=-1,m=s==null?0:s.length;for(this.__data__=new pr;++d<m;)this.add(s[d])}function i1(s){return this.__data__.set(s,l),this}function a1(s){return this.__data__.has(s)}hi.prototype.add=hi.prototype.push=i1,hi.prototype.has=a1;function Mn(s){var d=this.__data__=new gr(s);this.size=d.size}function o1(){this.__data__=new gr,this.size=0}function s1(s){var d=this.__data__,m=d.delete(s);return this.size=d.size,m}function l1(s){return this.__data__.get(s)}function u1(s){return this.__data__.has(s)}function c1(s,d){var m=this.__data__;if(m instanceof gr){var w=m.__data__;if(!Da||w.length<n-1)return w.push([s,d]),this.size=++m.size,this;m=this.__data__=new pr(w)}return m.set(s,d),this.size=m.size,this}Mn.prototype.clear=o1,Mn.prototype.delete=s1,Mn.prototype.get=l1,Mn.prototype.has=u1,Mn.prototype.set=c1;function Ed(s,d){var m=Pe(s),w=!m&&bi(s),D=!m&&!w&&Kr(s),B=!m&&!w&&!D&&ea(s),j=m||w||D||B,Z=j?ql(s.length,ww):[],ee=Z.length;for(var ue in s)(d||st.call(s,ue))&&!(j&&(ue=="length"||D&&(ue=="offset"||ue=="parent")||B&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||wr(ue,ee)))&&Z.push(ue);return Z}function xd(s){var d=s.length;return d?s[Yl(0,d-1)]:e}function f1(s,d){return os($t(s),vi(d,0,s.length))}function d1(s){return os($t(s))}function zl(s,d,m){(m!==e&&!Pn(s[d],m)||m===e&&!(d in s))&&mr(s,d,m)}function La(s,d,m){var w=s[d];(!(st.call(s,d)&&Pn(w,m))||m===e&&!(d in s))&&mr(s,d,m)}function $o(s,d){for(var m=s.length;m--;)if(Pn(s[m][0],d))return m;return-1}function h1(s,d,m,w){return jr(s,function(D,B,j){d(w,D,m(D),j)}),w}function Cd(s,d){return s&&Jn(d,Rt(d),s)}function v1(s,d){return s&&Jn(d,Zt(d),s)}function mr(s,d,m){d=="__proto__"&&Uo?Uo(s,d,{configurable:!0,enumerable:!0,value:m,writable:!0}):s[d]=m}function Ul(s,d){for(var m=-1,w=d.length,D=oe(w),B=s==null;++m<w;)D[m]=B?e:ku(s,d[m]);return D}function vi(s,d,m){return s===s&&(m!==e&&(s=s<=m?s:m),d!==e&&(s=s>=d?s:d)),s}function bn(s,d,m,w,D,B){var j,Z=d&h,ee=d&v,ue=d&g;if(m&&(j=D?m(s,w,D,B):m(s)),j!==e)return j;if(!mt(s))return s;var ce=Pe(s);if(ce){if(j=nk(s),!Z)return $t(s,j)}else{var de=Mt(s),we=de==ye||de==L;if(Kr(s))return Kd(s,Z);if(de==he||de==te||we&&!D){if(j=ee||we?{}:hh(s),!Z)return ee?G1(s,v1(j,s)):j1(s,Cd(j,s))}else{if(!dt[de])return D?s:{};j=rk(s,de,Z)}}B||(B=new Mn);var Te=B.get(s);if(Te)return Te;B.set(s,j),Vh(s)?s.forEach(function(Oe){j.add(bn(Oe,d,m,Oe,s,B))}):zh(s)&&s.forEach(function(Oe,Ze){j.set(Ze,bn(Oe,d,m,Ze,s,B))});var Re=ue?ee?su:ou:ee?Zt:Rt,Ue=ce?e:Re(s);return gn(Ue||s,function(Oe,Ze){Ue&&(Ze=Oe,Oe=s[Ze]),La(j,Ze,bn(Oe,d,m,Ze,s,B))}),j}function g1(s){var d=Rt(s);return function(m){return _d(m,s,d)}}function _d(s,d,m){var w=m.length;if(s==null)return!w;for(s=ut(s);w--;){var D=m[w],B=d[D],j=s[D];if(j===e&&!(D in s)||!B(j))return!1}return!0}function Ad(s,d,m){if(typeof s!="function")throw new pn(a);return Ua(function(){s.apply(e,m)},d)}function Ia(s,d,m,w){var D=-1,B=Do,j=!0,Z=s.length,ee=[],ue=d.length;if(!Z)return ee;m&&(d=pt(d,nn(m))),w?(B=Tl,j=!1):d.length>=n&&(B=Sa,j=!1,d=new hi(d));e:for(;++D<Z;){var ce=s[D],de=m==null?ce:m(ce);if(ce=w||ce!==0?ce:0,j&&de===de){for(var we=ue;we--;)if(d[we]===de)continue e;ee.push(ce)}else B(d,de,w)||ee.push(ce)}return ee}var jr=Qd(Xn),Td=Qd(Hl,!0);function p1(s,d){var m=!0;return jr(s,function(w,D,B){return m=!!d(w,D,B),m}),m}function Ko(s,d,m){for(var w=-1,D=s.length;++w<D;){var B=s[w],j=d(B);if(j!=null&&(Z===e?j===j&&!an(j):m(j,Z)))var Z=j,ee=B}return ee}function m1(s,d,m,w){var D=s.length;for(m=Fe(m),m<0&&(m=-m>D?0:D+m),w=w===e||w>D?D:Fe(w),w<0&&(w+=D),w=m>w?0:jh(w);m<w;)s[m++]=d;return s}function Sd(s,d){var m=[];return jr(s,function(w,D,B){d(w,D,B)&&m.push(w)}),m}function It(s,d,m,w,D){var B=-1,j=s.length;for(m||(m=ak),D||(D=[]);++B<j;){var Z=s[B];d>0&&m(Z)?d>1?It(Z,d-1,m,w,D):Ur(D,Z):w||(D[D.length]=Z)}return D}var Vl=eh(),Nd=eh(!0);function Xn(s,d){return s&&Vl(s,d,Rt)}function Hl(s,d){return s&&Nd(s,d,Rt)}function Zo(s,d){return zr(d,function(m){return kr(s[m])})}function gi(s,d){d=Wr(d,s);for(var m=0,w=d.length;s!=null&&m<w;)s=s[Qn(d[m++])];return m&&m==w?s:e}function Dd(s,d,m){var w=d(s);return Pe(s)?w:Ur(w,m(s))}function Ht(s){return s==null?s===e?at:le:fi&&fi in ut(s)?Q1(s):dk(s)}function jl(s,d){return s>d}function b1(s,d){return s!=null&&st.call(s,d)}function y1(s,d){return s!=null&&d in ut(s)}function w1(s,d,m){return s>=Bt(d,m)&&s<St(d,m)}function Gl(s,d,m){for(var w=m?Tl:Do,D=s[0].length,B=s.length,j=B,Z=oe(B),ee=1/0,ue=[];j--;){var ce=s[j];j&&d&&(ce=pt(ce,nn(d))),ee=Bt(ce.length,ee),Z[j]=!m&&(d||D>=120&&ce.length>=120)?new hi(j&&ce):e}ce=s[0];var de=-1,we=Z[0];e:for(;++de<D&&ue.length<ee;){var Te=ce[de],Re=d?d(Te):Te;if(Te=m||Te!==0?Te:0,!(we?Sa(we,Re):w(ue,Re,m))){for(j=B;--j;){var Ue=Z[j];if(!(Ue?Sa(Ue,Re):w(s[j],Re,m)))continue e}we&&we.push(Re),ue.push(Te)}}return ue}function k1(s,d,m,w){return Xn(s,function(D,B,j){d(w,m(D),B,j)}),w}function Ba(s,d,m){d=Wr(d,s),s=mh(s,d);var w=s==null?s:s[Qn(wn(d))];return w==null?e:tn(w,s,m)}function Rd(s){return Et(s)&&Ht(s)==te}function E1(s){return Et(s)&&Ht(s)==Jt}function x1(s){return Et(s)&&Ht(s)==fe}function Ma(s,d,m,w,D){return s===d?!0:s==null||d==null||!Et(s)&&!Et(d)?s!==s&&d!==d:C1(s,d,m,w,Ma,D)}function C1(s,d,m,w,D,B){var j=Pe(s),Z=Pe(d),ee=j?J:Mt(s),ue=Z?J:Mt(d);ee=ee==te?he:ee,ue=ue==te?he:ue;var ce=ee==he,de=ue==he,we=ee==ue;if(we&&Kr(s)){if(!Kr(d))return!1;j=!0,ce=!1}if(we&&!ce)return B||(B=new Mn),j||ea(s)?ch(s,d,m,w,D,B):X1(s,d,ee,m,w,D,B);if(!(m&p)){var Te=ce&&st.call(s,"__wrapped__"),Re=de&&st.call(d,"__wrapped__");if(Te||Re){var Ue=Te?s.value():s,Oe=Re?d.value():d;return B||(B=new Mn),D(Ue,Oe,m,w,B)}}return we?(B||(B=new Mn),J1(s,d,m,w,D,B)):!1}function _1(s){return Et(s)&&Mt(s)==K}function Wl(s,d,m,w){var D=m.length,B=D,j=!w;if(s==null)return!B;for(s=ut(s);D--;){var Z=m[D];if(j&&Z[2]?Z[1]!==s[Z[0]]:!(Z[0]in s))return!1}for(;++D<B;){Z=m[D];var ee=Z[0],ue=s[ee],ce=Z[1];if(j&&Z[2]){if(ue===e&&!(ee in s))return!1}else{var de=new Mn;if(w)var we=w(ue,ce,ee,s,d,de);if(!(we===e?Ma(ce,ue,p|b,w,de):we))return!1}}return!0}function Od(s){if(!mt(s)||sk(s))return!1;var d=kr(s)?_w:To;return d.test(mi(s))}function A1(s){return Et(s)&&Ht(s)==Se}function T1(s){return Et(s)&&Mt(s)==me}function S1(s){return Et(s)&&ds(s.length)&&!!vt[Ht(s)]}function qd(s){return typeof s=="function"?s:s==null?Yt:typeof s=="object"?Pe(s)?Bd(s[0],s[1]):Id(s):tv(s)}function $l(s){if(!za(s))return Rw(s);var d=[];for(var m in ut(s))st.call(s,m)&&m!="constructor"&&d.push(m);return d}function N1(s){if(!mt(s))return fk(s);var d=za(s),m=[];for(var w in s)w=="constructor"&&(d||!st.call(s,w))||m.push(w);return m}function Kl(s,d){return s<d}function Ld(s,d){var m=-1,w=Kt(s)?oe(s.length):[];return jr(s,function(D,B,j){w[++m]=d(D,B,j)}),w}function Id(s){var d=uu(s);return d.length==1&&d[0][2]?gh(d[0][0],d[0][1]):function(m){return m===s||Wl(m,s,d)}}function Bd(s,d){return fu(s)&&vh(d)?gh(Qn(s),d):function(m){var w=ku(m,s);return w===e&&w===d?Eu(m,s):Ma(d,w,p|b)}}function Yo(s,d,m,w,D){s!==d&&Vl(d,function(B,j){if(D||(D=new Mn),mt(B))D1(s,d,j,m,Yo,w,D);else{var Z=w?w(hu(s,j),B,j+"",s,d,D):e;Z===e&&(Z=B),zl(s,j,Z)}},Zt)}function D1(s,d,m,w,D,B,j){var Z=hu(s,m),ee=hu(d,m),ue=j.get(ee);if(ue){zl(s,m,ue);return}var ce=B?B(Z,ee,m+"",s,d,j):e,de=ce===e;if(de){var we=Pe(ee),Te=!we&&Kr(ee),Re=!we&&!Te&&ea(ee);ce=ee,we||Te||Re?Pe(Z)?ce=Z:Ct(Z)?ce=$t(Z):Te?(de=!1,ce=Kd(ee,!0)):Re?(de=!1,ce=Zd(ee,!0)):ce=[]:Va(ee)||bi(ee)?(ce=Z,bi(Z)?ce=Gh(Z):(!mt(Z)||kr(Z))&&(ce=hh(ee))):de=!1}de&&(j.set(ee,ce),D(ce,ee,w,B,j),j.delete(ee)),zl(s,m,ce)}function Md(s,d){var m=s.length;if(!!m)return d+=d<0?m:0,wr(d,m)?s[d]:e}function Pd(s,d,m){d.length?d=pt(d,function(B){return Pe(B)?function(j){return gi(j,B.length===1?B[0]:B)}:B}):d=[Yt];var w=-1;d=pt(d,nn(De()));var D=Ld(s,function(B,j,Z){var ee=pt(d,function(ue){return ue(B)});return{criteria:ee,index:++w,value:B}});return rw(D,function(B,j){return H1(B,j,m)})}function R1(s,d){return Fd(s,d,function(m,w){return Eu(s,w)})}function Fd(s,d,m){for(var w=-1,D=d.length,B={};++w<D;){var j=d[w],Z=gi(s,j);m(Z,j)&&Pa(B,Wr(j,s),Z)}return B}function O1(s){return function(d){return gi(d,s)}}function Zl(s,d,m,w){var D=w?nw:Hi,B=-1,j=d.length,Z=s;for(s===d&&(d=$t(d)),m&&(Z=pt(s,nn(m)));++B<j;)for(var ee=0,ue=d[B],ce=m?m(ue):ue;(ee=D(Z,ce,ee,w))>-1;)Z!==s&&zo.call(Z,ee,1),zo.call(s,ee,1);return s}function zd(s,d){for(var m=s?d.length:0,w=m-1;m--;){var D=d[m];if(m==w||D!==B){var B=D;wr(D)?zo.call(s,D,1):Ql(s,D)}}return s}function Yl(s,d){return s+Ho(wd()*(d-s+1))}function q1(s,d,m,w){for(var D=-1,B=St(Vo((d-s)/(m||1)),0),j=oe(B);B--;)j[w?B:++D]=s,s+=m;return j}function Xl(s,d){var m="";if(!s||d<1||d>N)return m;do d%2&&(m+=s),d=Ho(d/2),d&&(s+=s);while(d);return m}function We(s,d){return vu(ph(s,d,Yt),s+"")}function L1(s){return xd(ta(s))}function I1(s,d){var m=ta(s);return os(m,vi(d,0,m.length))}function Pa(s,d,m,w){if(!mt(s))return s;d=Wr(d,s);for(var D=-1,B=d.length,j=B-1,Z=s;Z!=null&&++D<B;){var ee=Qn(d[D]),ue=m;if(ee==="__proto__"||ee==="constructor"||ee==="prototype")return s;if(D!=j){var ce=Z[ee];ue=w?w(ce,ee,Z):e,ue===e&&(ue=mt(ce)?ce:wr(d[D+1])?[]:{})}La(Z,ee,ue),Z=Z[ee]}return s}var Ud=jo?function(s,d){return jo.set(s,d),s}:Yt,B1=Uo?function(s,d){return Uo(s,"toString",{configurable:!0,enumerable:!1,value:Cu(d),writable:!0})}:Yt;function M1(s){return os(ta(s))}function yn(s,d,m){var w=-1,D=s.length;d<0&&(d=-d>D?0:D+d),m=m>D?D:m,m<0&&(m+=D),D=d>m?0:m-d>>>0,d>>>=0;for(var B=oe(D);++w<D;)B[w]=s[w+d];return B}function P1(s,d){var m;return jr(s,function(w,D,B){return m=d(w,D,B),!m}),!!m}function Xo(s,d,m){var w=0,D=s==null?w:s.length;if(typeof d=="number"&&d===d&&D<=Q){for(;w<D;){var B=w+D>>>1,j=s[B];j!==null&&!an(j)&&(m?j<=d:j<d)?w=B+1:D=B}return D}return Jl(s,d,Yt,m)}function Jl(s,d,m,w){var D=0,B=s==null?0:s.length;if(B===0)return 0;d=m(d);for(var j=d!==d,Z=d===null,ee=an(d),ue=d===e;D<B;){var ce=Ho((D+B)/2),de=m(s[ce]),we=de!==e,Te=de===null,Re=de===de,Ue=an(de);if(j)var Oe=w||Re;else ue?Oe=Re&&(w||we):Z?Oe=Re&&we&&(w||!Te):ee?Oe=Re&&we&&!Te&&(w||!Ue):Te||Ue?Oe=!1:Oe=w?de<=d:de<d;Oe?D=ce+1:B=ce}return Bt(B,Y)}function Vd(s,d){for(var m=-1,w=s.length,D=0,B=[];++m<w;){var j=s[m],Z=d?d(j):j;if(!m||!Pn(Z,ee)){var ee=Z;B[D++]=j===0?0:j}}return B}function Hd(s){return typeof s=="number"?s:an(s)?V:+s}function rn(s){if(typeof s=="string")return s;if(Pe(s))return pt(s,rn)+"";if(an(s))return kd?kd.call(s):"";var d=s+"";return d=="0"&&1/s==-ie?"-0":d}function Gr(s,d,m){var w=-1,D=Do,B=s.length,j=!0,Z=[],ee=Z;if(m)j=!1,D=Tl;else if(B>=n){var ue=d?null:Z1(s);if(ue)return Oo(ue);j=!1,D=Sa,ee=new hi}else ee=d?[]:Z;e:for(;++w<B;){var ce=s[w],de=d?d(ce):ce;if(ce=m||ce!==0?ce:0,j&&de===de){for(var we=ee.length;we--;)if(ee[we]===de)continue e;d&&ee.push(de),Z.push(ce)}else D(ee,de,m)||(ee!==Z&&ee.push(de),Z.push(ce))}return Z}function Ql(s,d){return d=Wr(d,s),s=mh(s,d),s==null||delete s[Qn(wn(d))]}function jd(s,d,m,w){return Pa(s,d,m(gi(s,d)),w)}function Jo(s,d,m,w){for(var D=s.length,B=w?D:-1;(w?B--:++B<D)&&d(s[B],B,s););return m?yn(s,w?0:B,w?B+1:D):yn(s,w?B+1:0,w?D:B)}function Gd(s,d){var m=s;return m instanceof Je&&(m=m.value()),Sl(d,function(w,D){return D.func.apply(D.thisArg,Ur([w],D.args))},m)}function eu(s,d,m){var w=s.length;if(w<2)return w?Gr(s[0]):[];for(var D=-1,B=oe(w);++D<w;)for(var j=s[D],Z=-1;++Z<w;)Z!=D&&(B[D]=Ia(B[D]||j,s[Z],d,m));return Gr(It(B,1),d,m)}function Wd(s,d,m){for(var w=-1,D=s.length,B=d.length,j={};++w<D;){var Z=w<B?d[w]:e;m(j,s[w],Z)}return j}function tu(s){return Ct(s)?s:[]}function nu(s){return typeof s=="function"?s:Yt}function Wr(s,d){return Pe(s)?s:fu(s,d)?[s]:kh(ot(s))}var F1=We;function $r(s,d,m){var w=s.length;return m=m===e?w:m,!d&&m>=w?s:yn(s,d,m)}var $d=Aw||function(s){return Lt.clearTimeout(s)};function Kd(s,d){if(d)return s.slice();var m=s.length,w=gd?gd(m):new s.constructor(m);return s.copy(w),w}function ru(s){var d=new s.constructor(s.byteLength);return new Po(d).set(new Po(s)),d}function z1(s,d){var m=d?ru(s.buffer):s.buffer;return new s.constructor(m,s.byteOffset,s.byteLength)}function U1(s){var d=new s.constructor(s.source,Aa.exec(s));return d.lastIndex=s.lastIndex,d}function V1(s){return qa?ut(qa.call(s)):{}}function Zd(s,d){var m=d?ru(s.buffer):s.buffer;return new s.constructor(m,s.byteOffset,s.length)}function Yd(s,d){if(s!==d){var m=s!==e,w=s===null,D=s===s,B=an(s),j=d!==e,Z=d===null,ee=d===d,ue=an(d);if(!Z&&!ue&&!B&&s>d||B&&j&&ee&&!Z&&!ue||w&&j&&ee||!m&&ee||!D)return 1;if(!w&&!B&&!ue&&s<d||ue&&m&&D&&!w&&!B||Z&&m&&D||!j&&D||!ee)return-1}return 0}function H1(s,d,m){for(var w=-1,D=s.criteria,B=d.criteria,j=D.length,Z=m.length;++w<j;){var ee=Yd(D[w],B[w]);if(ee){if(w>=Z)return ee;var ue=m[w];return ee*(ue=="desc"?-1:1)}}return s.index-d.index}function Xd(s,d,m,w){for(var D=-1,B=s.length,j=m.length,Z=-1,ee=d.length,ue=St(B-j,0),ce=oe(ee+ue),de=!w;++Z<ee;)ce[Z]=d[Z];for(;++D<j;)(de||D<B)&&(ce[m[D]]=s[D]);for(;ue--;)ce[Z++]=s[D++];return ce}function Jd(s,d,m,w){for(var D=-1,B=s.length,j=-1,Z=m.length,ee=-1,ue=d.length,ce=St(B-Z,0),de=oe(ce+ue),we=!w;++D<ce;)de[D]=s[D];for(var Te=D;++ee<ue;)de[Te+ee]=d[ee];for(;++j<Z;)(we||D<B)&&(de[Te+m[j]]=s[D++]);return de}function $t(s,d){var m=-1,w=s.length;for(d||(d=oe(w));++m<w;)d[m]=s[m];return d}function Jn(s,d,m,w){var D=!m;m||(m={});for(var B=-1,j=d.length;++B<j;){var Z=d[B],ee=w?w(m[Z],s[Z],Z,m,s):e;ee===e&&(ee=s[Z]),D?mr(m,Z,ee):La(m,Z,ee)}return m}function j1(s,d){return Jn(s,cu(s),d)}function G1(s,d){return Jn(s,fh(s),d)}function Qo(s,d){return function(m,w){var D=Pe(m)?Yy:h1,B=d?d():{};return D(m,s,De(w,2),B)}}function Xi(s){return We(function(d,m){var w=-1,D=m.length,B=D>1?m[D-1]:e,j=D>2?m[2]:e;for(B=s.length>3&&typeof B=="function"?(D--,B):e,j&&jt(m[0],m[1],j)&&(B=D<3?e:B,D=1),d=ut(d);++w<D;){var Z=m[w];Z&&s(d,Z,w,B)}return d})}function Qd(s,d){return function(m,w){if(m==null)return m;if(!Kt(m))return s(m,w);for(var D=m.length,B=d?D:-1,j=ut(m);(d?B--:++B<D)&&w(j[B],B,j)!==!1;);return m}}function eh(s){return function(d,m,w){for(var D=-1,B=ut(d),j=w(d),Z=j.length;Z--;){var ee=j[s?Z:++D];if(m(B[ee],ee,B)===!1)break}return d}}function W1(s,d,m){var w=d&y,D=Fa(s);function B(){var j=this&&this!==Lt&&this instanceof B?D:s;return j.apply(w?m:this,arguments)}return B}function th(s){return function(d){d=ot(d);var m=ji(d)?Bn(d):e,w=m?m[0]:d.charAt(0),D=m?$r(m,1).join(""):d.slice(1);return w[s]()+D}}function Ji(s){return function(d){return Sl(Qh(Jh(d).replace(By,"")),s,"")}}function Fa(s){return function(){var d=arguments;switch(d.length){case 0:return new s;case 1:return new s(d[0]);case 2:return new s(d[0],d[1]);case 3:return new s(d[0],d[1],d[2]);case 4:return new s(d[0],d[1],d[2],d[3]);case 5:return new s(d[0],d[1],d[2],d[3],d[4]);case 6:return new s(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new s(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var m=Yi(s.prototype),w=s.apply(m,d);return mt(w)?w:m}}function $1(s,d,m){var w=Fa(s);function D(){for(var B=arguments.length,j=oe(B),Z=B,ee=Qi(D);Z--;)j[Z]=arguments[Z];var ue=B<3&&j[0]!==ee&&j[B-1]!==ee?[]:Vr(j,ee);if(B-=ue.length,B<m)return oh(s,d,es,D.placeholder,e,j,ue,e,e,m-B);var ce=this&&this!==Lt&&this instanceof D?w:s;return tn(ce,this,j)}return D}function nh(s){return function(d,m,w){var D=ut(d);if(!Kt(d)){var B=De(m,3);d=Rt(d),m=function(Z){return B(D[Z],Z,D)}}var j=s(d,m,w);return j>-1?D[B?d[j]:j]:e}}function rh(s){return yr(function(d){var m=d.length,w=m,D=mn.prototype.thru;for(s&&d.reverse();w--;){var B=d[w];if(typeof B!="function")throw new pn(a);if(D&&!j&&is(B)=="wrapper")var j=new mn([],!0)}for(w=j?w:m;++w<m;){B=d[w];var Z=is(B),ee=Z=="wrapper"?lu(B):e;ee&&du(ee[0])&&ee[1]==(S|_|x|R)&&!ee[4].length&&ee[9]==1?j=j[is(ee[0])].apply(j,ee[3]):j=B.length==1&&du(B)?j[Z]():j.thru(B)}return function(){var ue=arguments,ce=ue[0];if(j&&ue.length==1&&Pe(ce))return j.plant(ce).value();for(var de=0,we=m?d[de].apply(this,ue):ce;++de<m;)we=d[de].call(this,we);return we}})}function es(s,d,m,w,D,B,j,Z,ee,ue){var ce=d&S,de=d&y,we=d&k,Te=d&(_|T),Re=d&z,Ue=we?e:Fa(s);function Oe(){for(var Ze=arguments.length,Qe=oe(Ze),on=Ze;on--;)Qe[on]=arguments[on];if(Te)var Gt=Qi(Oe),sn=aw(Qe,Gt);if(w&&(Qe=Xd(Qe,w,D,Te)),B&&(Qe=Jd(Qe,B,j,Te)),Ze-=sn,Te&&Ze<ue){var _t=Vr(Qe,Gt);return oh(s,d,es,Oe.placeholder,m,Qe,_t,Z,ee,ue-Ze)}var Fn=de?m:this,xr=we?Fn[s]:s;return Ze=Qe.length,Z?Qe=hk(Qe,Z):Re&&Ze>1&&Qe.reverse(),ce&&ee<Ze&&(Qe.length=ee),this&&this!==Lt&&this instanceof Oe&&(xr=Ue||Fa(xr)),xr.apply(Fn,Qe)}return Oe}function ih(s,d){return function(m,w){return k1(m,s,d(w),{})}}function ts(s,d){return function(m,w){var D;if(m===e&&w===e)return d;if(m!==e&&(D=m),w!==e){if(D===e)return w;typeof m=="string"||typeof w=="string"?(m=rn(m),w=rn(w)):(m=Hd(m),w=Hd(w)),D=s(m,w)}return D}}function iu(s){return yr(function(d){return d=pt(d,nn(De())),We(function(m){var w=this;return s(d,function(D){return tn(D,w,m)})})})}function ns(s,d){d=d===e?" ":rn(d);var m=d.length;if(m<2)return m?Xl(d,s):d;var w=Xl(d,Vo(s/Gi(d)));return ji(d)?$r(Bn(w),0,s).join(""):w.slice(0,s)}function K1(s,d,m,w){var D=d&y,B=Fa(s);function j(){for(var Z=-1,ee=arguments.length,ue=-1,ce=w.length,de=oe(ce+ee),we=this&&this!==Lt&&this instanceof j?B:s;++ue<ce;)de[ue]=w[ue];for(;ee--;)de[ue++]=arguments[++Z];return tn(we,D?m:this,de)}return j}function ah(s){return function(d,m,w){return w&&typeof w!="number"&&jt(d,m,w)&&(m=w=e),d=Er(d),m===e?(m=d,d=0):m=Er(m),w=w===e?d<m?1:-1:Er(w),q1(d,m,w,s)}}function rs(s){return function(d,m){return typeof d=="string"&&typeof m=="string"||(d=kn(d),m=kn(m)),s(d,m)}}function oh(s,d,m,w,D,B,j,Z,ee,ue){var ce=d&_,de=ce?j:e,we=ce?e:j,Te=ce?B:e,Re=ce?e:B;d|=ce?x:C,d&=~(ce?C:x),d&E||(d&=~(y|k));var Ue=[s,d,D,Te,de,Re,we,Z,ee,ue],Oe=m.apply(e,Ue);return du(s)&&bh(Oe,Ue),Oe.placeholder=w,yh(Oe,s,d)}function au(s){var d=Tt[s];return function(m,w){if(m=kn(m),w=w==null?0:Bt(Fe(w),292),w&&yd(m)){var D=(ot(m)+"e").split("e"),B=d(D[0]+"e"+(+D[1]+w));return D=(ot(B)+"e").split("e"),+(D[0]+"e"+(+D[1]-w))}return d(m)}}var Z1=Ki&&1/Oo(new Ki([,-0]))[1]==ie?function(s){return new Ki(s)}:Tu;function sh(s){return function(d){var m=Mt(d);return m==K?Il(d):m==me?dw(d):iw(d,s(d))}}function br(s,d,m,w,D,B,j,Z){var ee=d&k;if(!ee&&typeof s!="function")throw new pn(a);var ue=w?w.length:0;if(ue||(d&=~(x|C),w=D=e),j=j===e?j:St(Fe(j),0),Z=Z===e?Z:Fe(Z),ue-=D?D.length:0,d&C){var ce=w,de=D;w=D=e}var we=ee?e:lu(s),Te=[s,d,m,w,D,ce,de,B,j,Z];if(we&&ck(Te,we),s=Te[0],d=Te[1],m=Te[2],w=Te[3],D=Te[4],Z=Te[9]=Te[9]===e?ee?0:s.length:St(Te[9]-ue,0),!Z&&d&(_|T)&&(d&=~(_|T)),!d||d==y)var Re=W1(s,d,m);else d==_||d==T?Re=$1(s,d,Z):(d==x||d==(y|x))&&!D.length?Re=K1(s,d,m,w):Re=es.apply(e,Te);var Ue=we?Ud:bh;return yh(Ue(Re,Te),s,d)}function lh(s,d,m,w){return s===e||Pn(s,$i[m])&&!st.call(w,m)?d:s}function uh(s,d,m,w,D,B){return mt(s)&&mt(d)&&(B.set(d,s),Yo(s,d,e,uh,B),B.delete(d)),s}function Y1(s){return Va(s)?e:s}function ch(s,d,m,w,D,B){var j=m&p,Z=s.length,ee=d.length;if(Z!=ee&&!(j&&ee>Z))return!1;var ue=B.get(s),ce=B.get(d);if(ue&&ce)return ue==d&&ce==s;var de=-1,we=!0,Te=m&b?new hi:e;for(B.set(s,d),B.set(d,s);++de<Z;){var Re=s[de],Ue=d[de];if(w)var Oe=j?w(Ue,Re,de,d,s,B):w(Re,Ue,de,s,d,B);if(Oe!==e){if(Oe)continue;we=!1;break}if(Te){if(!Nl(d,function(Ze,Qe){if(!Sa(Te,Qe)&&(Re===Ze||D(Re,Ze,m,w,B)))return Te.push(Qe)})){we=!1;break}}else if(!(Re===Ue||D(Re,Ue,m,w,B))){we=!1;break}}return B.delete(s),B.delete(d),we}function X1(s,d,m,w,D,B,j){switch(m){case Ut:if(s.byteLength!=d.byteLength||s.byteOffset!=d.byteOffset)return!1;s=s.buffer,d=d.buffer;case Jt:return!(s.byteLength!=d.byteLength||!B(new Po(s),new Po(d)));case ae:case fe:case U:return Pn(+s,+d);case ge:return s.name==d.name&&s.message==d.message;case Se:case _e:return s==d+"";case K:var Z=Il;case me:var ee=w&p;if(Z||(Z=Oo),s.size!=d.size&&!ee)return!1;var ue=j.get(s);if(ue)return ue==d;w|=b,j.set(s,d);var ce=ch(Z(s),Z(d),w,D,B,j);return j.delete(s),ce;case Xe:if(qa)return qa.call(s)==qa.call(d)}return!1}function J1(s,d,m,w,D,B){var j=m&p,Z=ou(s),ee=Z.length,ue=ou(d),ce=ue.length;if(ee!=ce&&!j)return!1;for(var de=ee;de--;){var we=Z[de];if(!(j?we in d:st.call(d,we)))return!1}var Te=B.get(s),Re=B.get(d);if(Te&&Re)return Te==d&&Re==s;var Ue=!0;B.set(s,d),B.set(d,s);for(var Oe=j;++de<ee;){we=Z[de];var Ze=s[we],Qe=d[we];if(w)var on=j?w(Qe,Ze,we,d,s,B):w(Ze,Qe,we,s,d,B);if(!(on===e?Ze===Qe||D(Ze,Qe,m,w,B):on)){Ue=!1;break}Oe||(Oe=we=="constructor")}if(Ue&&!Oe){var Gt=s.constructor,sn=d.constructor;Gt!=sn&&"constructor"in s&&"constructor"in d&&!(typeof Gt=="function"&&Gt instanceof Gt&&typeof sn=="function"&&sn instanceof sn)&&(Ue=!1)}return B.delete(s),B.delete(d),Ue}function yr(s){return vu(ph(s,e,_h),s+"")}function ou(s){return Dd(s,Rt,cu)}function su(s){return Dd(s,Zt,fh)}var lu=jo?function(s){return jo.get(s)}:Tu;function is(s){for(var d=s.name+"",m=Zi[d],w=st.call(Zi,d)?m.length:0;w--;){var D=m[w],B=D.func;if(B==null||B==s)return D.name}return d}function Qi(s){var d=st.call(q,"placeholder")?q:s;return d.placeholder}function De(){var s=q.iteratee||_u;return s=s===_u?qd:s,arguments.length?s(arguments[0],arguments[1]):s}function as(s,d){var m=s.__data__;return ok(d)?m[typeof d=="string"?"string":"hash"]:m.map}function uu(s){for(var d=Rt(s),m=d.length;m--;){var w=d[m],D=s[w];d[m]=[w,D,vh(D)]}return d}function pi(s,d){var m=uw(s,d);return Od(m)?m:e}function Q1(s){var d=st.call(s,fi),m=s[fi];try{s[fi]=e;var w=!0}catch{}var D=Bo.call(s);return w&&(d?s[fi]=m:delete s[fi]),D}var cu=Ml?function(s){return s==null?[]:(s=ut(s),zr(Ml(s),function(d){return md.call(s,d)}))}:Su,fh=Ml?function(s){for(var d=[];s;)Ur(d,cu(s)),s=Fo(s);return d}:Su,Mt=Ht;(Pl&&Mt(new Pl(new ArrayBuffer(1)))!=Ut||Da&&Mt(new Da)!=K||Fl&&Mt(Fl.resolve())!=ve||Ki&&Mt(new Ki)!=me||Ra&&Mt(new Ra)!=Dt)&&(Mt=function(s){var d=Ht(s),m=d==he?s.constructor:e,w=m?mi(m):"";if(w)switch(w){case Iw:return Ut;case Bw:return K;case Mw:return ve;case Pw:return me;case Fw:return Dt}return d});function ek(s,d,m){for(var w=-1,D=m.length;++w<D;){var B=m[w],j=B.size;switch(B.type){case"drop":s+=j;break;case"dropRight":d-=j;break;case"take":d=Bt(d,s+j);break;case"takeRight":s=St(s,d-j);break}}return{start:s,end:d}}function tk(s){var d=s.match(xa);return d?d[1].split(Ca):[]}function dh(s,d,m){d=Wr(d,s);for(var w=-1,D=d.length,B=!1;++w<D;){var j=Qn(d[w]);if(!(B=s!=null&&m(s,j)))break;s=s[j]}return B||++w!=D?B:(D=s==null?0:s.length,!!D&&ds(D)&&wr(j,D)&&(Pe(s)||bi(s)))}function nk(s){var d=s.length,m=new s.constructor(d);return d&&typeof s[0]=="string"&&st.call(s,"index")&&(m.index=s.index,m.input=s.input),m}function hh(s){return typeof s.constructor=="function"&&!za(s)?Yi(Fo(s)):{}}function rk(s,d,m){var w=s.constructor;switch(d){case Jt:return ru(s);case ae:case fe:return new w(+s);case Ut:return z1(s,m);case Yn:case Nn:case Dn:case Rn:case On:case hn:case Wt:case qn:case Vt:return Zd(s,m);case K:return new w;case U:case _e:return new w(s);case Se:return U1(s);case me:return new w;case Xe:return V1(s)}}function ik(s,d){var m=d.length;if(!m)return s;var w=m-1;return d[w]=(m>1?"& ":"")+d[w],d=d.join(m>2?", ":" "),s.replace(Eo,`{
/* [wrapped with `+d+`] */
`)}function ak(s){return Pe(s)||bi(s)||!!(bd&&s&&s[bd])}function wr(s,d){var m=typeof s;return d=d==null?N:d,!!d&&(m=="number"||m!="symbol"&&Ke.test(s))&&s>-1&&s%1==0&&s<d}function jt(s,d,m){if(!mt(m))return!1;var w=typeof d;return(w=="number"?Kt(m)&&wr(d,m.length):w=="string"&&d in m)?Pn(m[d],s):!1}function fu(s,d){if(Pe(s))return!1;var m=typeof s;return m=="number"||m=="symbol"||m=="boolean"||s==null||an(s)?!0:wo.test(s)||!ya.test(s)||d!=null&&s in ut(d)}function ok(s){var d=typeof s;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?s!=="__proto__":s===null}function du(s){var d=is(s),m=q[d];if(typeof m!="function"||!(d in Je.prototype))return!1;if(s===m)return!0;var w=lu(m);return!!w&&s===w[0]}function sk(s){return!!vd&&vd in s}var lk=Lo?kr:Nu;function za(s){var d=s&&s.constructor,m=typeof d=="function"&&d.prototype||$i;return s===m}function vh(s){return s===s&&!mt(s)}function gh(s,d){return function(m){return m==null?!1:m[s]===d&&(d!==e||s in ut(m))}}function uk(s){var d=cs(s,function(w){return m.size===u&&m.clear(),w}),m=d.cache;return d}function ck(s,d){var m=s[1],w=d[1],D=m|w,B=D<(y|k|S),j=w==S&&m==_||w==S&&m==R&&s[7].length<=d[8]||w==(S|R)&&d[7].length<=d[8]&&m==_;if(!(B||j))return s;w&y&&(s[2]=d[2],D|=m&y?0:E);var Z=d[3];if(Z){var ee=s[3];s[3]=ee?Xd(ee,Z,d[4]):Z,s[4]=ee?Vr(s[3],c):d[4]}return Z=d[5],Z&&(ee=s[5],s[5]=ee?Jd(ee,Z,d[6]):Z,s[6]=ee?Vr(s[5],c):d[6]),Z=d[7],Z&&(s[7]=Z),w&S&&(s[8]=s[8]==null?d[8]:Bt(s[8],d[8])),s[9]==null&&(s[9]=d[9]),s[0]=d[0],s[1]=D,s}function fk(s){var d=[];if(s!=null)for(var m in ut(s))d.push(m);return d}function dk(s){return Bo.call(s)}function ph(s,d,m){return d=St(d===e?s.length-1:d,0),function(){for(var w=arguments,D=-1,B=St(w.length-d,0),j=oe(B);++D<B;)j[D]=w[d+D];D=-1;for(var Z=oe(d+1);++D<d;)Z[D]=w[D];return Z[d]=m(j),tn(s,this,Z)}}function mh(s,d){return d.length<2?s:gi(s,yn(d,0,-1))}function hk(s,d){for(var m=s.length,w=Bt(d.length,m),D=$t(s);w--;){var B=d[w];s[w]=wr(B,m)?D[B]:e}return s}function hu(s,d){if(!(d==="constructor"&&typeof s[d]=="function")&&d!="__proto__")return s[d]}var bh=wh(Ud),Ua=Sw||function(s,d){return Lt.setTimeout(s,d)},vu=wh(B1);function yh(s,d,m){var w=d+"";return vu(s,ik(w,vk(tk(w),m)))}function wh(s){var d=0,m=0;return function(){var w=Ow(),D=O-(w-m);if(m=w,D>0){if(++d>=M)return arguments[0]}else d=0;return s.apply(e,arguments)}}function os(s,d){var m=-1,w=s.length,D=w-1;for(d=d===e?w:d;++m<d;){var B=Yl(m,D),j=s[B];s[B]=s[m],s[m]=j}return s.length=d,s}var kh=uk(function(s){var d=[];return s.charCodeAt(0)===46&&d.push(""),s.replace(wa,function(m,w,D,B){d.push(D?B.replace(Co,"$1"):w||m)}),d});function Qn(s){if(typeof s=="string"||an(s))return s;var d=s+"";return d=="0"&&1/s==-ie?"-0":d}function mi(s){if(s!=null){try{return Io.call(s)}catch{}try{return s+""}catch{}}return""}function vk(s,d){return gn(re,function(m){var w="_."+m[0];d&m[1]&&!Do(s,w)&&s.push(w)}),s.sort()}function Eh(s){if(s instanceof Je)return s.clone();var d=new mn(s.__wrapped__,s.__chain__);return d.__actions__=$t(s.__actions__),d.__index__=s.__index__,d.__values__=s.__values__,d}function gk(s,d,m){(m?jt(s,d,m):d===e)?d=1:d=St(Fe(d),0);var w=s==null?0:s.length;if(!w||d<1)return[];for(var D=0,B=0,j=oe(Vo(w/d));D<w;)j[B++]=yn(s,D,D+=d);return j}function pk(s){for(var d=-1,m=s==null?0:s.length,w=0,D=[];++d<m;){var B=s[d];B&&(D[w++]=B)}return D}function mk(){var s=arguments.length;if(!s)return[];for(var d=oe(s-1),m=arguments[0],w=s;w--;)d[w-1]=arguments[w];return Ur(Pe(m)?$t(m):[m],It(d,1))}var bk=We(function(s,d){return Ct(s)?Ia(s,It(d,1,Ct,!0)):[]}),yk=We(function(s,d){var m=wn(d);return Ct(m)&&(m=e),Ct(s)?Ia(s,It(d,1,Ct,!0),De(m,2)):[]}),wk=We(function(s,d){var m=wn(d);return Ct(m)&&(m=e),Ct(s)?Ia(s,It(d,1,Ct,!0),e,m):[]});function kk(s,d,m){var w=s==null?0:s.length;return w?(d=m||d===e?1:Fe(d),yn(s,d<0?0:d,w)):[]}function Ek(s,d,m){var w=s==null?0:s.length;return w?(d=m||d===e?1:Fe(d),d=w-d,yn(s,0,d<0?0:d)):[]}function xk(s,d){return s&&s.length?Jo(s,De(d,3),!0,!0):[]}function Ck(s,d){return s&&s.length?Jo(s,De(d,3),!0):[]}function _k(s,d,m,w){var D=s==null?0:s.length;return D?(m&&typeof m!="number"&&jt(s,d,m)&&(m=0,w=D),m1(s,d,m,w)):[]}function xh(s,d,m){var w=s==null?0:s.length;if(!w)return-1;var D=m==null?0:Fe(m);return D<0&&(D=St(w+D,0)),Ro(s,De(d,3),D)}function Ch(s,d,m){var w=s==null?0:s.length;if(!w)return-1;var D=w-1;return m!==e&&(D=Fe(m),D=m<0?St(w+D,0):Bt(D,w-1)),Ro(s,De(d,3),D,!0)}function _h(s){var d=s==null?0:s.length;return d?It(s,1):[]}function Ak(s){var d=s==null?0:s.length;return d?It(s,ie):[]}function Tk(s,d){var m=s==null?0:s.length;return m?(d=d===e?1:Fe(d),It(s,d)):[]}function Sk(s){for(var d=-1,m=s==null?0:s.length,w={};++d<m;){var D=s[d];w[D[0]]=D[1]}return w}function Ah(s){return s&&s.length?s[0]:e}function Nk(s,d,m){var w=s==null?0:s.length;if(!w)return-1;var D=m==null?0:Fe(m);return D<0&&(D=St(w+D,0)),Hi(s,d,D)}function Dk(s){var d=s==null?0:s.length;return d?yn(s,0,-1):[]}var Rk=We(function(s){var d=pt(s,tu);return d.length&&d[0]===s[0]?Gl(d):[]}),Ok=We(function(s){var d=wn(s),m=pt(s,tu);return d===wn(m)?d=e:m.pop(),m.length&&m[0]===s[0]?Gl(m,De(d,2)):[]}),qk=We(function(s){var d=wn(s),m=pt(s,tu);return d=typeof d=="function"?d:e,d&&m.pop(),m.length&&m[0]===s[0]?Gl(m,e,d):[]});function Lk(s,d){return s==null?"":Dw.call(s,d)}function wn(s){var d=s==null?0:s.length;return d?s[d-1]:e}function Ik(s,d,m){var w=s==null?0:s.length;if(!w)return-1;var D=w;return m!==e&&(D=Fe(m),D=D<0?St(w+D,0):Bt(D,w-1)),d===d?vw(s,d,D):Ro(s,od,D,!0)}function Bk(s,d){return s&&s.length?Md(s,Fe(d)):e}var Mk=We(Th);function Th(s,d){return s&&s.length&&d&&d.length?Zl(s,d):s}function Pk(s,d,m){return s&&s.length&&d&&d.length?Zl(s,d,De(m,2)):s}function Fk(s,d,m){return s&&s.length&&d&&d.length?Zl(s,d,e,m):s}var zk=yr(function(s,d){var m=s==null?0:s.length,w=Ul(s,d);return zd(s,pt(d,function(D){return wr(D,m)?+D:D}).sort(Yd)),w});function Uk(s,d){var m=[];if(!(s&&s.length))return m;var w=-1,D=[],B=s.length;for(d=De(d,3);++w<B;){var j=s[w];d(j,w,s)&&(m.push(j),D.push(w))}return zd(s,D),m}function gu(s){return s==null?s:Lw.call(s)}function Vk(s,d,m){var w=s==null?0:s.length;return w?(m&&typeof m!="number"&&jt(s,d,m)?(d=0,m=w):(d=d==null?0:Fe(d),m=m===e?w:Fe(m)),yn(s,d,m)):[]}function Hk(s,d){return Xo(s,d)}function jk(s,d,m){return Jl(s,d,De(m,2))}function Gk(s,d){var m=s==null?0:s.length;if(m){var w=Xo(s,d);if(w<m&&Pn(s[w],d))return w}return-1}function Wk(s,d){return Xo(s,d,!0)}function $k(s,d,m){return Jl(s,d,De(m,2),!0)}function Kk(s,d){var m=s==null?0:s.length;if(m){var w=Xo(s,d,!0)-1;if(Pn(s[w],d))return w}return-1}function Zk(s){return s&&s.length?Vd(s):[]}function Yk(s,d){return s&&s.length?Vd(s,De(d,2)):[]}function Xk(s){var d=s==null?0:s.length;return d?yn(s,1,d):[]}function Jk(s,d,m){return s&&s.length?(d=m||d===e?1:Fe(d),yn(s,0,d<0?0:d)):[]}function Qk(s,d,m){var w=s==null?0:s.length;return w?(d=m||d===e?1:Fe(d),d=w-d,yn(s,d<0?0:d,w)):[]}function eE(s,d){return s&&s.length?Jo(s,De(d,3),!1,!0):[]}function tE(s,d){return s&&s.length?Jo(s,De(d,3)):[]}var nE=We(function(s){return Gr(It(s,1,Ct,!0))}),rE=We(function(s){var d=wn(s);return Ct(d)&&(d=e),Gr(It(s,1,Ct,!0),De(d,2))}),iE=We(function(s){var d=wn(s);return d=typeof d=="function"?d:e,Gr(It(s,1,Ct,!0),e,d)});function aE(s){return s&&s.length?Gr(s):[]}function oE(s,d){return s&&s.length?Gr(s,De(d,2)):[]}function sE(s,d){return d=typeof d=="function"?d:e,s&&s.length?Gr(s,e,d):[]}function pu(s){if(!(s&&s.length))return[];var d=0;return s=zr(s,function(m){if(Ct(m))return d=St(m.length,d),!0}),ql(d,function(m){return pt(s,Dl(m))})}function Sh(s,d){if(!(s&&s.length))return[];var m=pu(s);return d==null?m:pt(m,function(w){return tn(d,e,w)})}var lE=We(function(s,d){return Ct(s)?Ia(s,d):[]}),uE=We(function(s){return eu(zr(s,Ct))}),cE=We(function(s){var d=wn(s);return Ct(d)&&(d=e),eu(zr(s,Ct),De(d,2))}),fE=We(function(s){var d=wn(s);return d=typeof d=="function"?d:e,eu(zr(s,Ct),e,d)}),dE=We(pu);function hE(s,d){return Wd(s||[],d||[],La)}function vE(s,d){return Wd(s||[],d||[],Pa)}var gE=We(function(s){var d=s.length,m=d>1?s[d-1]:e;return m=typeof m=="function"?(s.pop(),m):e,Sh(s,m)});function Nh(s){var d=q(s);return d.__chain__=!0,d}function pE(s,d){return d(s),s}function ss(s,d){return d(s)}var mE=yr(function(s){var d=s.length,m=d?s[0]:0,w=this.__wrapped__,D=function(B){return Ul(B,s)};return d>1||this.__actions__.length||!(w instanceof Je)||!wr(m)?this.thru(D):(w=w.slice(m,+m+(d?1:0)),w.__actions__.push({func:ss,args:[D],thisArg:e}),new mn(w,this.__chain__).thru(function(B){return d&&!B.length&&B.push(e),B}))});function bE(){return Nh(this)}function yE(){return new mn(this.value(),this.__chain__)}function wE(){this.__values__===e&&(this.__values__=Hh(this.value()));var s=this.__index__>=this.__values__.length,d=s?e:this.__values__[this.__index__++];return{done:s,value:d}}function kE(){return this}function EE(s){for(var d,m=this;m instanceof Wo;){var w=Eh(m);w.__index__=0,w.__values__=e,d?D.__wrapped__=w:d=w;var D=w;m=m.__wrapped__}return D.__wrapped__=s,d}function xE(){var s=this.__wrapped__;if(s instanceof Je){var d=s;return this.__actions__.length&&(d=new Je(this)),d=d.reverse(),d.__actions__.push({func:ss,args:[gu],thisArg:e}),new mn(d,this.__chain__)}return this.thru(gu)}function CE(){return Gd(this.__wrapped__,this.__actions__)}var _E=Qo(function(s,d,m){st.call(s,m)?++s[m]:mr(s,m,1)});function AE(s,d,m){var w=Pe(s)?id:p1;return m&&jt(s,d,m)&&(d=e),w(s,De(d,3))}function TE(s,d){var m=Pe(s)?zr:Sd;return m(s,De(d,3))}var SE=nh(xh),NE=nh(Ch);function DE(s,d){return It(ls(s,d),1)}function RE(s,d){return It(ls(s,d),ie)}function OE(s,d,m){return m=m===e?1:Fe(m),It(ls(s,d),m)}function Dh(s,d){var m=Pe(s)?gn:jr;return m(s,De(d,3))}function Rh(s,d){var m=Pe(s)?Xy:Td;return m(s,De(d,3))}var qE=Qo(function(s,d,m){st.call(s,m)?s[m].push(d):mr(s,m,[d])});function LE(s,d,m,w){s=Kt(s)?s:ta(s),m=m&&!w?Fe(m):0;var D=s.length;return m<0&&(m=St(D+m,0)),hs(s)?m<=D&&s.indexOf(d,m)>-1:!!D&&Hi(s,d,m)>-1}var IE=We(function(s,d,m){var w=-1,D=typeof d=="function",B=Kt(s)?oe(s.length):[];return jr(s,function(j){B[++w]=D?tn(d,j,m):Ba(j,d,m)}),B}),BE=Qo(function(s,d,m){mr(s,m,d)});function ls(s,d){var m=Pe(s)?pt:Ld;return m(s,De(d,3))}function ME(s,d,m,w){return s==null?[]:(Pe(d)||(d=d==null?[]:[d]),m=w?e:m,Pe(m)||(m=m==null?[]:[m]),Pd(s,d,m))}var PE=Qo(function(s,d,m){s[m?0:1].push(d)},function(){return[[],[]]});function FE(s,d,m){var w=Pe(s)?Sl:ld,D=arguments.length<3;return w(s,De(d,4),m,D,jr)}function zE(s,d,m){var w=Pe(s)?Jy:ld,D=arguments.length<3;return w(s,De(d,4),m,D,Td)}function UE(s,d){var m=Pe(s)?zr:Sd;return m(s,fs(De(d,3)))}function VE(s){var d=Pe(s)?xd:L1;return d(s)}function HE(s,d,m){(m?jt(s,d,m):d===e)?d=1:d=Fe(d);var w=Pe(s)?f1:I1;return w(s,d)}function jE(s){var d=Pe(s)?d1:M1;return d(s)}function GE(s){if(s==null)return 0;if(Kt(s))return hs(s)?Gi(s):s.length;var d=Mt(s);return d==K||d==me?s.size:$l(s).length}function WE(s,d,m){var w=Pe(s)?Nl:P1;return m&&jt(s,d,m)&&(d=e),w(s,De(d,3))}var $E=We(function(s,d){if(s==null)return[];var m=d.length;return m>1&&jt(s,d[0],d[1])?d=[]:m>2&&jt(d[0],d[1],d[2])&&(d=[d[0]]),Pd(s,It(d,1),[])}),us=Tw||function(){return Lt.Date.now()};function KE(s,d){if(typeof d!="function")throw new pn(a);return s=Fe(s),function(){if(--s<1)return d.apply(this,arguments)}}function Oh(s,d,m){return d=m?e:d,d=s&&d==null?s.length:d,br(s,S,e,e,e,e,d)}function qh(s,d){var m;if(typeof d!="function")throw new pn(a);return s=Fe(s),function(){return--s>0&&(m=d.apply(this,arguments)),s<=1&&(d=e),m}}var mu=We(function(s,d,m){var w=y;if(m.length){var D=Vr(m,Qi(mu));w|=x}return br(s,w,d,m,D)}),Lh=We(function(s,d,m){var w=y|k;if(m.length){var D=Vr(m,Qi(Lh));w|=x}return br(d,w,s,m,D)});function Ih(s,d,m){d=m?e:d;var w=br(s,_,e,e,e,e,e,d);return w.placeholder=Ih.placeholder,w}function Bh(s,d,m){d=m?e:d;var w=br(s,T,e,e,e,e,e,d);return w.placeholder=Bh.placeholder,w}function Mh(s,d,m){var w,D,B,j,Z,ee,ue=0,ce=!1,de=!1,we=!0;if(typeof s!="function")throw new pn(a);d=kn(d)||0,mt(m)&&(ce=!!m.leading,de="maxWait"in m,B=de?St(kn(m.maxWait)||0,d):B,we="trailing"in m?!!m.trailing:we);function Te(_t){var Fn=w,xr=D;return w=D=e,ue=_t,j=s.apply(xr,Fn),j}function Re(_t){return ue=_t,Z=Ua(Ze,d),ce?Te(_t):j}function Ue(_t){var Fn=_t-ee,xr=_t-ue,nv=d-Fn;return de?Bt(nv,B-xr):nv}function Oe(_t){var Fn=_t-ee,xr=_t-ue;return ee===e||Fn>=d||Fn<0||de&&xr>=B}function Ze(){var _t=us();if(Oe(_t))return Qe(_t);Z=Ua(Ze,Ue(_t))}function Qe(_t){return Z=e,we&&w?Te(_t):(w=D=e,j)}function on(){Z!==e&&$d(Z),ue=0,w=ee=D=Z=e}function Gt(){return Z===e?j:Qe(us())}function sn(){var _t=us(),Fn=Oe(_t);if(w=arguments,D=this,ee=_t,Fn){if(Z===e)return Re(ee);if(de)return $d(Z),Z=Ua(Ze,d),Te(ee)}return Z===e&&(Z=Ua(Ze,d)),j}return sn.cancel=on,sn.flush=Gt,sn}var ZE=We(function(s,d){return Ad(s,1,d)}),YE=We(function(s,d,m){return Ad(s,kn(d)||0,m)});function XE(s){return br(s,z)}function cs(s,d){if(typeof s!="function"||d!=null&&typeof d!="function")throw new pn(a);var m=function(){var w=arguments,D=d?d.apply(this,w):w[0],B=m.cache;if(B.has(D))return B.get(D);var j=s.apply(this,w);return m.cache=B.set(D,j)||B,j};return m.cache=new(cs.Cache||pr),m}cs.Cache=pr;function fs(s){if(typeof s!="function")throw new pn(a);return function(){var d=arguments;switch(d.length){case 0:return!s.call(this);case 1:return!s.call(this,d[0]);case 2:return!s.call(this,d[0],d[1]);case 3:return!s.call(this,d[0],d[1],d[2])}return!s.apply(this,d)}}function JE(s){return qh(2,s)}var QE=F1(function(s,d){d=d.length==1&&Pe(d[0])?pt(d[0],nn(De())):pt(It(d,1),nn(De()));var m=d.length;return We(function(w){for(var D=-1,B=Bt(w.length,m);++D<B;)w[D]=d[D].call(this,w[D]);return tn(s,this,w)})}),bu=We(function(s,d){var m=Vr(d,Qi(bu));return br(s,x,e,d,m)}),Ph=We(function(s,d){var m=Vr(d,Qi(Ph));return br(s,C,e,d,m)}),ex=yr(function(s,d){return br(s,R,e,e,e,d)});function tx(s,d){if(typeof s!="function")throw new pn(a);return d=d===e?d:Fe(d),We(s,d)}function nx(s,d){if(typeof s!="function")throw new pn(a);return d=d==null?0:St(Fe(d),0),We(function(m){var w=m[d],D=$r(m,0,d);return w&&Ur(D,w),tn(s,this,D)})}function rx(s,d,m){var w=!0,D=!0;if(typeof s!="function")throw new pn(a);return mt(m)&&(w="leading"in m?!!m.leading:w,D="trailing"in m?!!m.trailing:D),Mh(s,d,{leading:w,maxWait:d,trailing:D})}function ix(s){return Oh(s,1)}function ax(s,d){return bu(nu(d),s)}function ox(){if(!arguments.length)return[];var s=arguments[0];return Pe(s)?s:[s]}function sx(s){return bn(s,g)}function lx(s,d){return d=typeof d=="function"?d:e,bn(s,g,d)}function ux(s){return bn(s,h|g)}function cx(s,d){return d=typeof d=="function"?d:e,bn(s,h|g,d)}function fx(s,d){return d==null||_d(s,d,Rt(d))}function Pn(s,d){return s===d||s!==s&&d!==d}var dx=rs(jl),hx=rs(function(s,d){return s>=d}),bi=Rd(function(){return arguments}())?Rd:function(s){return Et(s)&&st.call(s,"callee")&&!md.call(s,"callee")},Pe=oe.isArray,vx=Jf?nn(Jf):E1;function Kt(s){return s!=null&&ds(s.length)&&!kr(s)}function Ct(s){return Et(s)&&Kt(s)}function gx(s){return s===!0||s===!1||Et(s)&&Ht(s)==ae}var Kr=Nw||Nu,px=Qf?nn(Qf):x1;function mx(s){return Et(s)&&s.nodeType===1&&!Va(s)}function bx(s){if(s==null)return!0;if(Kt(s)&&(Pe(s)||typeof s=="string"||typeof s.splice=="function"||Kr(s)||ea(s)||bi(s)))return!s.length;var d=Mt(s);if(d==K||d==me)return!s.size;if(za(s))return!$l(s).length;for(var m in s)if(st.call(s,m))return!1;return!0}function yx(s,d){return Ma(s,d)}function wx(s,d,m){m=typeof m=="function"?m:e;var w=m?m(s,d):e;return w===e?Ma(s,d,e,m):!!w}function yu(s){if(!Et(s))return!1;var d=Ht(s);return d==ge||d==pe||typeof s.message=="string"&&typeof s.name=="string"&&!Va(s)}function kx(s){return typeof s=="number"&&yd(s)}function kr(s){if(!mt(s))return!1;var d=Ht(s);return d==ye||d==L||d==ne||d==xe}function Fh(s){return typeof s=="number"&&s==Fe(s)}function ds(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=N}function mt(s){var d=typeof s;return s!=null&&(d=="object"||d=="function")}function Et(s){return s!=null&&typeof s=="object"}var zh=ed?nn(ed):_1;function Ex(s,d){return s===d||Wl(s,d,uu(d))}function xx(s,d,m){return m=typeof m=="function"?m:e,Wl(s,d,uu(d),m)}function Cx(s){return Uh(s)&&s!=+s}function _x(s){if(lk(s))throw new Me(r);return Od(s)}function Ax(s){return s===null}function Tx(s){return s==null}function Uh(s){return typeof s=="number"||Et(s)&&Ht(s)==U}function Va(s){if(!Et(s)||Ht(s)!=he)return!1;var d=Fo(s);if(d===null)return!0;var m=st.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&Io.call(m)==xw}var wu=td?nn(td):A1;function Sx(s){return Fh(s)&&s>=-N&&s<=N}var Vh=nd?nn(nd):T1;function hs(s){return typeof s=="string"||!Pe(s)&&Et(s)&&Ht(s)==_e}function an(s){return typeof s=="symbol"||Et(s)&&Ht(s)==Xe}var ea=rd?nn(rd):S1;function Nx(s){return s===e}function Dx(s){return Et(s)&&Mt(s)==Dt}function Rx(s){return Et(s)&&Ht(s)==qt}var Ox=rs(Kl),qx=rs(function(s,d){return s<=d});function Hh(s){if(!s)return[];if(Kt(s))return hs(s)?Bn(s):$t(s);if(Na&&s[Na])return fw(s[Na]());var d=Mt(s),m=d==K?Il:d==me?Oo:ta;return m(s)}function Er(s){if(!s)return s===0?s:0;if(s=kn(s),s===ie||s===-ie){var d=s<0?-1:1;return d*P}return s===s?s:0}function Fe(s){var d=Er(s),m=d%1;return d===d?m?d-m:d:0}function jh(s){return s?vi(Fe(s),0,W):0}function kn(s){if(typeof s=="number")return s;if(an(s))return V;if(mt(s)){var d=typeof s.valueOf=="function"?s.valueOf():s;s=mt(d)?d+"":d}if(typeof s!="string")return s===0?s:+s;s=ud(s);var m=Ao.test(s);return m||zi.test(s)?Ky(s.slice(2),m?2:8):_o.test(s)?V:+s}function Gh(s){return Jn(s,Zt(s))}function Lx(s){return s?vi(Fe(s),-N,N):s===0?s:0}function ot(s){return s==null?"":rn(s)}var Ix=Xi(function(s,d){if(za(d)||Kt(d)){Jn(d,Rt(d),s);return}for(var m in d)st.call(d,m)&&La(s,m,d[m])}),Wh=Xi(function(s,d){Jn(d,Zt(d),s)}),vs=Xi(function(s,d,m,w){Jn(d,Zt(d),s,w)}),Bx=Xi(function(s,d,m,w){Jn(d,Rt(d),s,w)}),Mx=yr(Ul);function Px(s,d){var m=Yi(s);return d==null?m:Cd(m,d)}var Fx=We(function(s,d){s=ut(s);var m=-1,w=d.length,D=w>2?d[2]:e;for(D&&jt(d[0],d[1],D)&&(w=1);++m<w;)for(var B=d[m],j=Zt(B),Z=-1,ee=j.length;++Z<ee;){var ue=j[Z],ce=s[ue];(ce===e||Pn(ce,$i[ue])&&!st.call(s,ue))&&(s[ue]=B[ue])}return s}),zx=We(function(s){return s.push(e,uh),tn($h,e,s)});function Ux(s,d){return ad(s,De(d,3),Xn)}function Vx(s,d){return ad(s,De(d,3),Hl)}function Hx(s,d){return s==null?s:Vl(s,De(d,3),Zt)}function jx(s,d){return s==null?s:Nd(s,De(d,3),Zt)}function Gx(s,d){return s&&Xn(s,De(d,3))}function Wx(s,d){return s&&Hl(s,De(d,3))}function $x(s){return s==null?[]:Zo(s,Rt(s))}function Kx(s){return s==null?[]:Zo(s,Zt(s))}function ku(s,d,m){var w=s==null?e:gi(s,d);return w===e?m:w}function Zx(s,d){return s!=null&&dh(s,d,b1)}function Eu(s,d){return s!=null&&dh(s,d,y1)}var Yx=ih(function(s,d,m){d!=null&&typeof d.toString!="function"&&(d=Bo.call(d)),s[d]=m},Cu(Yt)),Xx=ih(function(s,d,m){d!=null&&typeof d.toString!="function"&&(d=Bo.call(d)),st.call(s,d)?s[d].push(m):s[d]=[m]},De),Jx=We(Ba);function Rt(s){return Kt(s)?Ed(s):$l(s)}function Zt(s){return Kt(s)?Ed(s,!0):N1(s)}function Qx(s,d){var m={};return d=De(d,3),Xn(s,function(w,D,B){mr(m,d(w,D,B),w)}),m}function eC(s,d){var m={};return d=De(d,3),Xn(s,function(w,D,B){mr(m,D,d(w,D,B))}),m}var tC=Xi(function(s,d,m){Yo(s,d,m)}),$h=Xi(function(s,d,m,w){Yo(s,d,m,w)}),nC=yr(function(s,d){var m={};if(s==null)return m;var w=!1;d=pt(d,function(B){return B=Wr(B,s),w||(w=B.length>1),B}),Jn(s,su(s),m),w&&(m=bn(m,h|v|g,Y1));for(var D=d.length;D--;)Ql(m,d[D]);return m});function rC(s,d){return Kh(s,fs(De(d)))}var iC=yr(function(s,d){return s==null?{}:R1(s,d)});function Kh(s,d){if(s==null)return{};var m=pt(su(s),function(w){return[w]});return d=De(d),Fd(s,m,function(w,D){return d(w,D[0])})}function aC(s,d,m){d=Wr(d,s);var w=-1,D=d.length;for(D||(D=1,s=e);++w<D;){var B=s==null?e:s[Qn(d[w])];B===e&&(w=D,B=m),s=kr(B)?B.call(s):B}return s}function oC(s,d,m){return s==null?s:Pa(s,d,m)}function sC(s,d,m,w){return w=typeof w=="function"?w:e,s==null?s:Pa(s,d,m,w)}var Zh=sh(Rt),Yh=sh(Zt);function lC(s,d,m){var w=Pe(s),D=w||Kr(s)||ea(s);if(d=De(d,4),m==null){var B=s&&s.constructor;D?m=w?new B:[]:mt(s)?m=kr(B)?Yi(Fo(s)):{}:m={}}return(D?gn:Xn)(s,function(j,Z,ee){return d(m,j,Z,ee)}),m}function uC(s,d){return s==null?!0:Ql(s,d)}function cC(s,d,m){return s==null?s:jd(s,d,nu(m))}function fC(s,d,m,w){return w=typeof w=="function"?w:e,s==null?s:jd(s,d,nu(m),w)}function ta(s){return s==null?[]:Ll(s,Rt(s))}function dC(s){return s==null?[]:Ll(s,Zt(s))}function hC(s,d,m){return m===e&&(m=d,d=e),m!==e&&(m=kn(m),m=m===m?m:0),d!==e&&(d=kn(d),d=d===d?d:0),vi(kn(s),d,m)}function vC(s,d,m){return d=Er(d),m===e?(m=d,d=0):m=Er(m),s=kn(s),w1(s,d,m)}function gC(s,d,m){if(m&&typeof m!="boolean"&&jt(s,d,m)&&(d=m=e),m===e&&(typeof d=="boolean"?(m=d,d=e):typeof s=="boolean"&&(m=s,s=e)),s===e&&d===e?(s=0,d=1):(s=Er(s),d===e?(d=s,s=0):d=Er(d)),s>d){var w=s;s=d,d=w}if(m||s%1||d%1){var D=wd();return Bt(s+D*(d-s+$y("1e-"+((D+"").length-1))),d)}return Yl(s,d)}var pC=Ji(function(s,d,m){return d=d.toLowerCase(),s+(m?Xh(d):d)});function Xh(s){return xu(ot(s).toLowerCase())}function Jh(s){return s=ot(s),s&&s.replace(ze,ow).replace(My,"")}function mC(s,d,m){s=ot(s),d=rn(d);var w=s.length;m=m===e?w:vi(Fe(m),0,w);var D=m;return m-=d.length,m>=0&&s.slice(m,D)==d}function bC(s){return s=ot(s),s&&In.test(s)?s.replace(ft,sw):s}function yC(s){return s=ot(s),s&&ka.test(s)?s.replace(Pi,"\\$&"):s}var wC=Ji(function(s,d,m){return s+(m?"-":"")+d.toLowerCase()}),kC=Ji(function(s,d,m){return s+(m?" ":"")+d.toLowerCase()}),EC=th("toLowerCase");function xC(s,d,m){s=ot(s),d=Fe(d);var w=d?Gi(s):0;if(!d||w>=d)return s;var D=(d-w)/2;return ns(Ho(D),m)+s+ns(Vo(D),m)}function CC(s,d,m){s=ot(s),d=Fe(d);var w=d?Gi(s):0;return d&&w<d?s+ns(d-w,m):s}function _C(s,d,m){s=ot(s),d=Fe(d);var w=d?Gi(s):0;return d&&w<d?ns(d-w,m)+s:s}function AC(s,d,m){return m||d==null?d=0:d&&(d=+d),qw(ot(s).replace(Ea,""),d||0)}function TC(s,d,m){return(m?jt(s,d,m):d===e)?d=1:d=Fe(d),Xl(ot(s),d)}function SC(){var s=arguments,d=ot(s[0]);return s.length<3?d:d.replace(s[1],s[2])}var NC=Ji(function(s,d,m){return s+(m?"_":"")+d.toLowerCase()});function DC(s,d,m){return m&&typeof m!="number"&&jt(s,d,m)&&(d=m=e),m=m===e?W:m>>>0,m?(s=ot(s),s&&(typeof d=="string"||d!=null&&!wu(d))&&(d=rn(d),!d&&ji(s))?$r(Bn(s),0,m):s.split(d,m)):[]}var RC=Ji(function(s,d,m){return s+(m?" ":"")+xu(d)});function OC(s,d,m){return s=ot(s),m=m==null?0:vi(Fe(m),0,s.length),d=rn(d),s.slice(m,m+d.length)==d}function qC(s,d,m){var w=q.templateSettings;m&&jt(s,d,m)&&(d=e),s=ot(s),d=vs({},d,w,lh);var D=vs({},d.imports,w.imports,lh),B=Rt(D),j=Ll(D,B),Z,ee,ue=0,ce=d.interpolate||Be,de="__p += '",we=Bl((d.escape||Be).source+"|"+ce.source+"|"+(ce===Mi?Fi:Be).source+"|"+(d.evaluate||Be).source+"|$","g"),Te="//# sourceURL="+(st.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vy+"]")+`
`;s.replace(we,function(Oe,Ze,Qe,on,Gt,sn){return Qe||(Qe=on),de+=s.slice(ue,sn).replace(vr,lw),Ze&&(Z=!0,de+=`' +
__e(`+Ze+`) +
'`),Gt&&(ee=!0,de+=`';
`+Gt+`;
__p += '`),Qe&&(de+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),ue=sn+Oe.length,Oe}),de+=`';
`;var Re=st.call(d,"variable")&&d.variable;if(!Re)de=`with (obj) {
`+de+`
}
`;else if(xo.test(Re))throw new Me(o);de=(ee?de.replace(li,""):de).replace(Fr,"$1").replace(hr,"$1;"),de="function("+(Re||"obj")+`) {
`+(Re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Z?", __e = _.escape":"")+(ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+de+`return __p
}`;var Ue=ev(function(){return nt(B,Te+"return "+de).apply(e,j)});if(Ue.source=de,yu(Ue))throw Ue;return Ue}function LC(s){return ot(s).toLowerCase()}function IC(s){return ot(s).toUpperCase()}function BC(s,d,m){if(s=ot(s),s&&(m||d===e))return ud(s);if(!s||!(d=rn(d)))return s;var w=Bn(s),D=Bn(d),B=cd(w,D),j=fd(w,D)+1;return $r(w,B,j).join("")}function MC(s,d,m){if(s=ot(s),s&&(m||d===e))return s.slice(0,hd(s)+1);if(!s||!(d=rn(d)))return s;var w=Bn(s),D=fd(w,Bn(d))+1;return $r(w,0,D).join("")}function PC(s,d,m){if(s=ot(s),s&&(m||d===e))return s.replace(Ea,"");if(!s||!(d=rn(d)))return s;var w=Bn(s),D=cd(w,Bn(d));return $r(w,D).join("")}function FC(s,d){var m=F,w=G;if(mt(d)){var D="separator"in d?d.separator:D;m="length"in d?Fe(d.length):m,w="omission"in d?rn(d.omission):w}s=ot(s);var B=s.length;if(ji(s)){var j=Bn(s);B=j.length}if(m>=B)return s;var Z=m-Gi(w);if(Z<1)return w;var ee=j?$r(j,0,Z).join(""):s.slice(0,Z);if(D===e)return ee+w;if(j&&(Z+=ee.length-Z),wu(D)){if(s.slice(Z).search(D)){var ue,ce=ee;for(D.global||(D=Bl(D.source,ot(Aa.exec(D))+"g")),D.lastIndex=0;ue=D.exec(ce);)var de=ue.index;ee=ee.slice(0,de===e?Z:de)}}else if(s.indexOf(rn(D),Z)!=Z){var we=ee.lastIndexOf(D);we>-1&&(ee=ee.slice(0,we))}return ee+w}function zC(s){return s=ot(s),s&&Qt.test(s)?s.replace(Ln,gw):s}var UC=Ji(function(s,d,m){return s+(m?" ":"")+d.toUpperCase()}),xu=th("toUpperCase");function Qh(s,d,m){return s=ot(s),d=m?e:d,d===e?cw(s)?bw(s):tw(s):s.match(d)||[]}var ev=We(function(s,d){try{return tn(s,e,d)}catch(m){return yu(m)?m:new Me(m)}}),VC=yr(function(s,d){return gn(d,function(m){m=Qn(m),mr(s,m,mu(s[m],s))}),s});function HC(s){var d=s==null?0:s.length,m=De();return s=d?pt(s,function(w){if(typeof w[1]!="function")throw new pn(a);return[m(w[0]),w[1]]}):[],We(function(w){for(var D=-1;++D<d;){var B=s[D];if(tn(B[0],this,w))return tn(B[1],this,w)}})}function jC(s){return g1(bn(s,h))}function Cu(s){return function(){return s}}function GC(s,d){return s==null||s!==s?d:s}var WC=rh(),$C=rh(!0);function Yt(s){return s}function _u(s){return qd(typeof s=="function"?s:bn(s,h))}function KC(s){return Id(bn(s,h))}function ZC(s,d){return Bd(s,bn(d,h))}var YC=We(function(s,d){return function(m){return Ba(m,s,d)}}),XC=We(function(s,d){return function(m){return Ba(s,m,d)}});function Au(s,d,m){var w=Rt(d),D=Zo(d,w);m==null&&!(mt(d)&&(D.length||!w.length))&&(m=d,d=s,s=this,D=Zo(d,Rt(d)));var B=!(mt(m)&&"chain"in m)||!!m.chain,j=kr(s);return gn(D,function(Z){var ee=d[Z];s[Z]=ee,j&&(s.prototype[Z]=function(){var ue=this.__chain__;if(B||ue){var ce=s(this.__wrapped__),de=ce.__actions__=$t(this.__actions__);return de.push({func:ee,args:arguments,thisArg:s}),ce.__chain__=ue,ce}return ee.apply(s,Ur([this.value()],arguments))})}),s}function JC(){return Lt._===this&&(Lt._=Cw),this}function Tu(){}function QC(s){return s=Fe(s),We(function(d){return Md(d,s)})}var e_=iu(pt),t_=iu(id),n_=iu(Nl);function tv(s){return fu(s)?Dl(Qn(s)):O1(s)}function r_(s){return function(d){return s==null?e:gi(s,d)}}var i_=ah(),a_=ah(!0);function Su(){return[]}function Nu(){return!1}function o_(){return{}}function s_(){return""}function l_(){return!0}function u_(s,d){if(s=Fe(s),s<1||s>N)return[];var m=W,w=Bt(s,W);d=De(d),s-=W;for(var D=ql(w,d);++m<s;)d(m);return D}function c_(s){return Pe(s)?pt(s,Qn):an(s)?[s]:$t(kh(ot(s)))}function f_(s){var d=++Ew;return ot(s)+d}var d_=ts(function(s,d){return s+d},0),h_=au("ceil"),v_=ts(function(s,d){return s/d},1),g_=au("floor");function p_(s){return s&&s.length?Ko(s,Yt,jl):e}function m_(s,d){return s&&s.length?Ko(s,De(d,2),jl):e}function b_(s){return sd(s,Yt)}function y_(s,d){return sd(s,De(d,2))}function w_(s){return s&&s.length?Ko(s,Yt,Kl):e}function k_(s,d){return s&&s.length?Ko(s,De(d,2),Kl):e}var E_=ts(function(s,d){return s*d},1),x_=au("round"),C_=ts(function(s,d){return s-d},0);function __(s){return s&&s.length?Ol(s,Yt):0}function A_(s,d){return s&&s.length?Ol(s,De(d,2)):0}return q.after=KE,q.ary=Oh,q.assign=Ix,q.assignIn=Wh,q.assignInWith=vs,q.assignWith=Bx,q.at=Mx,q.before=qh,q.bind=mu,q.bindAll=VC,q.bindKey=Lh,q.castArray=ox,q.chain=Nh,q.chunk=gk,q.compact=pk,q.concat=mk,q.cond=HC,q.conforms=jC,q.constant=Cu,q.countBy=_E,q.create=Px,q.curry=Ih,q.curryRight=Bh,q.debounce=Mh,q.defaults=Fx,q.defaultsDeep=zx,q.defer=ZE,q.delay=YE,q.difference=bk,q.differenceBy=yk,q.differenceWith=wk,q.drop=kk,q.dropRight=Ek,q.dropRightWhile=xk,q.dropWhile=Ck,q.fill=_k,q.filter=TE,q.flatMap=DE,q.flatMapDeep=RE,q.flatMapDepth=OE,q.flatten=_h,q.flattenDeep=Ak,q.flattenDepth=Tk,q.flip=XE,q.flow=WC,q.flowRight=$C,q.fromPairs=Sk,q.functions=$x,q.functionsIn=Kx,q.groupBy=qE,q.initial=Dk,q.intersection=Rk,q.intersectionBy=Ok,q.intersectionWith=qk,q.invert=Yx,q.invertBy=Xx,q.invokeMap=IE,q.iteratee=_u,q.keyBy=BE,q.keys=Rt,q.keysIn=Zt,q.map=ls,q.mapKeys=Qx,q.mapValues=eC,q.matches=KC,q.matchesProperty=ZC,q.memoize=cs,q.merge=tC,q.mergeWith=$h,q.method=YC,q.methodOf=XC,q.mixin=Au,q.negate=fs,q.nthArg=QC,q.omit=nC,q.omitBy=rC,q.once=JE,q.orderBy=ME,q.over=e_,q.overArgs=QE,q.overEvery=t_,q.overSome=n_,q.partial=bu,q.partialRight=Ph,q.partition=PE,q.pick=iC,q.pickBy=Kh,q.property=tv,q.propertyOf=r_,q.pull=Mk,q.pullAll=Th,q.pullAllBy=Pk,q.pullAllWith=Fk,q.pullAt=zk,q.range=i_,q.rangeRight=a_,q.rearg=ex,q.reject=UE,q.remove=Uk,q.rest=tx,q.reverse=gu,q.sampleSize=HE,q.set=oC,q.setWith=sC,q.shuffle=jE,q.slice=Vk,q.sortBy=$E,q.sortedUniq=Zk,q.sortedUniqBy=Yk,q.split=DC,q.spread=nx,q.tail=Xk,q.take=Jk,q.takeRight=Qk,q.takeRightWhile=eE,q.takeWhile=tE,q.tap=pE,q.throttle=rx,q.thru=ss,q.toArray=Hh,q.toPairs=Zh,q.toPairsIn=Yh,q.toPath=c_,q.toPlainObject=Gh,q.transform=lC,q.unary=ix,q.union=nE,q.unionBy=rE,q.unionWith=iE,q.uniq=aE,q.uniqBy=oE,q.uniqWith=sE,q.unset=uC,q.unzip=pu,q.unzipWith=Sh,q.update=cC,q.updateWith=fC,q.values=ta,q.valuesIn=dC,q.without=lE,q.words=Qh,q.wrap=ax,q.xor=uE,q.xorBy=cE,q.xorWith=fE,q.zip=dE,q.zipObject=hE,q.zipObjectDeep=vE,q.zipWith=gE,q.entries=Zh,q.entriesIn=Yh,q.extend=Wh,q.extendWith=vs,Au(q,q),q.add=d_,q.attempt=ev,q.camelCase=pC,q.capitalize=Xh,q.ceil=h_,q.clamp=hC,q.clone=sx,q.cloneDeep=ux,q.cloneDeepWith=cx,q.cloneWith=lx,q.conformsTo=fx,q.deburr=Jh,q.defaultTo=GC,q.divide=v_,q.endsWith=mC,q.eq=Pn,q.escape=bC,q.escapeRegExp=yC,q.every=AE,q.find=SE,q.findIndex=xh,q.findKey=Ux,q.findLast=NE,q.findLastIndex=Ch,q.findLastKey=Vx,q.floor=g_,q.forEach=Dh,q.forEachRight=Rh,q.forIn=Hx,q.forInRight=jx,q.forOwn=Gx,q.forOwnRight=Wx,q.get=ku,q.gt=dx,q.gte=hx,q.has=Zx,q.hasIn=Eu,q.head=Ah,q.identity=Yt,q.includes=LE,q.indexOf=Nk,q.inRange=vC,q.invoke=Jx,q.isArguments=bi,q.isArray=Pe,q.isArrayBuffer=vx,q.isArrayLike=Kt,q.isArrayLikeObject=Ct,q.isBoolean=gx,q.isBuffer=Kr,q.isDate=px,q.isElement=mx,q.isEmpty=bx,q.isEqual=yx,q.isEqualWith=wx,q.isError=yu,q.isFinite=kx,q.isFunction=kr,q.isInteger=Fh,q.isLength=ds,q.isMap=zh,q.isMatch=Ex,q.isMatchWith=xx,q.isNaN=Cx,q.isNative=_x,q.isNil=Tx,q.isNull=Ax,q.isNumber=Uh,q.isObject=mt,q.isObjectLike=Et,q.isPlainObject=Va,q.isRegExp=wu,q.isSafeInteger=Sx,q.isSet=Vh,q.isString=hs,q.isSymbol=an,q.isTypedArray=ea,q.isUndefined=Nx,q.isWeakMap=Dx,q.isWeakSet=Rx,q.join=Lk,q.kebabCase=wC,q.last=wn,q.lastIndexOf=Ik,q.lowerCase=kC,q.lowerFirst=EC,q.lt=Ox,q.lte=qx,q.max=p_,q.maxBy=m_,q.mean=b_,q.meanBy=y_,q.min=w_,q.minBy=k_,q.stubArray=Su,q.stubFalse=Nu,q.stubObject=o_,q.stubString=s_,q.stubTrue=l_,q.multiply=E_,q.nth=Bk,q.noConflict=JC,q.noop=Tu,q.now=us,q.pad=xC,q.padEnd=CC,q.padStart=_C,q.parseInt=AC,q.random=gC,q.reduce=FE,q.reduceRight=zE,q.repeat=TC,q.replace=SC,q.result=aC,q.round=x_,q.runInContext=X,q.sample=VE,q.size=GE,q.snakeCase=NC,q.some=WE,q.sortedIndex=Hk,q.sortedIndexBy=jk,q.sortedIndexOf=Gk,q.sortedLastIndex=Wk,q.sortedLastIndexBy=$k,q.sortedLastIndexOf=Kk,q.startCase=RC,q.startsWith=OC,q.subtract=C_,q.sum=__,q.sumBy=A_,q.template=qC,q.times=u_,q.toFinite=Er,q.toInteger=Fe,q.toLength=jh,q.toLower=LC,q.toNumber=kn,q.toSafeInteger=Lx,q.toString=ot,q.toUpper=IC,q.trim=BC,q.trimEnd=MC,q.trimStart=PC,q.truncate=FC,q.unescape=zC,q.uniqueId=f_,q.upperCase=UC,q.upperFirst=xu,q.each=Dh,q.eachRight=Rh,q.first=Ah,Au(q,function(){var s={};return Xn(q,function(d,m){st.call(q.prototype,m)||(s[m]=d)}),s}(),{chain:!1}),q.VERSION=t,gn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){q[s].placeholder=q}),gn(["drop","take"],function(s,d){Je.prototype[s]=function(m){m=m===e?1:St(Fe(m),0);var w=this.__filtered__&&!d?new Je(this):this.clone();return w.__filtered__?w.__takeCount__=Bt(m,w.__takeCount__):w.__views__.push({size:Bt(m,W),type:s+(w.__dir__<0?"Right":"")}),w},Je.prototype[s+"Right"]=function(m){return this.reverse()[s](m).reverse()}}),gn(["filter","map","takeWhile"],function(s,d){var m=d+1,w=m==A||m==$;Je.prototype[s]=function(D){var B=this.clone();return B.__iteratees__.push({iteratee:De(D,3),type:m}),B.__filtered__=B.__filtered__||w,B}}),gn(["head","last"],function(s,d){var m="take"+(d?"Right":"");Je.prototype[s]=function(){return this[m](1).value()[0]}}),gn(["initial","tail"],function(s,d){var m="drop"+(d?"":"Right");Je.prototype[s]=function(){return this.__filtered__?new Je(this):this[m](1)}}),Je.prototype.compact=function(){return this.filter(Yt)},Je.prototype.find=function(s){return this.filter(s).head()},Je.prototype.findLast=function(s){return this.reverse().find(s)},Je.prototype.invokeMap=We(function(s,d){return typeof s=="function"?new Je(this):this.map(function(m){return Ba(m,s,d)})}),Je.prototype.reject=function(s){return this.filter(fs(De(s)))},Je.prototype.slice=function(s,d){s=Fe(s);var m=this;return m.__filtered__&&(s>0||d<0)?new Je(m):(s<0?m=m.takeRight(-s):s&&(m=m.drop(s)),d!==e&&(d=Fe(d),m=d<0?m.dropRight(-d):m.take(d-s)),m)},Je.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Je.prototype.toArray=function(){return this.take(W)},Xn(Je.prototype,function(s,d){var m=/^(?:filter|find|map|reject)|While$/.test(d),w=/^(?:head|last)$/.test(d),D=q[w?"take"+(d=="last"?"Right":""):d],B=w||/^find/.test(d);!D||(q.prototype[d]=function(){var j=this.__wrapped__,Z=w?[1]:arguments,ee=j instanceof Je,ue=Z[0],ce=ee||Pe(j),de=function(Ze){var Qe=D.apply(q,Ur([Ze],Z));return w&&we?Qe[0]:Qe};ce&&m&&typeof ue=="function"&&ue.length!=1&&(ee=ce=!1);var we=this.__chain__,Te=!!this.__actions__.length,Re=B&&!we,Ue=ee&&!Te;if(!B&&ce){j=Ue?j:new Je(this);var Oe=s.apply(j,Z);return Oe.__actions__.push({func:ss,args:[de],thisArg:e}),new mn(Oe,we)}return Re&&Ue?s.apply(this,Z):(Oe=this.thru(de),Re?w?Oe.value()[0]:Oe.value():Oe)})}),gn(["pop","push","shift","sort","splice","unshift"],function(s){var d=qo[s],m=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",w=/^(?:pop|shift)$/.test(s);q.prototype[s]=function(){var D=arguments;if(w&&!this.__chain__){var B=this.value();return d.apply(Pe(B)?B:[],D)}return this[m](function(j){return d.apply(Pe(j)?j:[],D)})}}),Xn(Je.prototype,function(s,d){var m=q[d];if(m){var w=m.name+"";st.call(Zi,w)||(Zi[w]=[]),Zi[w].push({name:d,func:m})}}),Zi[es(e,k).name]=[{name:"wrapper",func:e}],Je.prototype.clone=zw,Je.prototype.reverse=Uw,Je.prototype.value=Vw,q.prototype.at=mE,q.prototype.chain=bE,q.prototype.commit=yE,q.prototype.next=wE,q.prototype.plant=EE,q.prototype.reverse=xE,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=CE,q.prototype.first=q.prototype.head,Na&&(q.prototype[Na]=kE),q},Wi=yw();ci?((ci.exports=Wi)._=Wi,_l._=Wi):Lt._=Wi}).call(En)})(Ye,Ye.exports);function nm(f){if(Array.isArray(f))return zs(f)}function rm(f){if(typeof Symbol!="undefined"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}function im(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(f){return nm(f)||rm(f)||Us(f)||im()}var Pc={exports:{}};(function(f){(function(i){var e=/^\s+/,t=/\s+$/,n=0,r=i.round,a=i.min,o=i.max,l=i.random;function u(L,K){if(L=L||"",K=K||{},L instanceof u)return L;if(!(this instanceof u))return new u(L,K);var U=c(L);this._originalInput=L,this._r=U.r,this._g=U.g,this._b=U.b,this._a=U.a,this._roundA=r(100*this._a)/100,this._format=K.format||U.format,this._gradientType=K.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=U.ok,this._tc_id=n++}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var L=this.toRgb();return(L.r*299+L.g*587+L.b*114)/1e3},getLuminance:function(){var L=this.toRgb(),K,U,le,he,ve,xe;return K=L.r/255,U=L.g/255,le=L.b/255,K<=.03928?he=K/12.92:he=i.pow((K+.055)/1.055,2.4),U<=.03928?ve=U/12.92:ve=i.pow((U+.055)/1.055,2.4),le<=.03928?xe=le/12.92:xe=i.pow((le+.055)/1.055,2.4),.2126*he+.7152*ve+.0722*xe},setAlpha:function(L){return this._a=P(L),this._roundA=r(100*this._a)/100,this},toHsv:function(){var L=p(this._r,this._g,this._b);return{h:L.h*360,s:L.s,v:L.v,a:this._a}},toHsvString:function(){var L=p(this._r,this._g,this._b),K=r(L.h*360),U=r(L.s*100),le=r(L.v*100);return this._a==1?"hsv("+K+", "+U+"%, "+le+"%)":"hsva("+K+", "+U+"%, "+le+"%, "+this._roundA+")"},toHsl:function(){var L=v(this._r,this._g,this._b);return{h:L.h*360,s:L.s,l:L.l,a:this._a}},toHslString:function(){var L=v(this._r,this._g,this._b),K=r(L.h*360),U=r(L.s*100),le=r(L.l*100);return this._a==1?"hsl("+K+", "+U+"%, "+le+"%)":"hsla("+K+", "+U+"%, "+le+"%, "+this._roundA+")"},toHex:function(L){return y(this._r,this._g,this._b,L)},toHexString:function(L){return"#"+this.toHex(L)},toHex8:function(L){return k(this._r,this._g,this._b,this._a,L)},toHex8String:function(L){return"#"+this.toHex8(L)},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(V(this._r,255)*100)+"%",g:r(V(this._g,255)*100)+"%",b:r(V(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+r(V(this._r,255)*100)+"%, "+r(V(this._g,255)*100)+"%, "+r(V(this._b,255)*100)+"%)":"rgba("+r(V(this._r,255)*100)+"%, "+r(V(this._g,255)*100)+"%, "+r(V(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ie[y(this._r,this._g,this._b,!0)]||!1},toFilter:function(L){var K="#"+E(this._r,this._g,this._b,this._a),U=K,le=this._gradientType?"GradientType = 1, ":"";if(L){var he=u(L);U="#"+E(he._r,he._g,he._b,he._a)}return"progid:DXImageTransform.Microsoft.gradient("+le+"startColorstr="+K+",endColorstr="+U+")"},toString:function(L){var K=!!L;L=L||this._format;var U=!1,le=this._a<1&&this._a>=0,he=!K&&le&&(L==="hex"||L==="hex6"||L==="hex3"||L==="hex4"||L==="hex8"||L==="name");return he?L==="name"&&this._a===0?this.toName():this.toRgbString():(L==="rgb"&&(U=this.toRgbString()),L==="prgb"&&(U=this.toPercentageRgbString()),(L==="hex"||L==="hex6")&&(U=this.toHexString()),L==="hex3"&&(U=this.toHexString(!0)),L==="hex4"&&(U=this.toHex8String(!0)),L==="hex8"&&(U=this.toHex8String()),L==="name"&&(U=this.toName()),L==="hsl"&&(U=this.toHslString()),L==="hsv"&&(U=this.toHsvString()),U||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(L,K){var U=L.apply(null,[this].concat([].slice.call(K)));return this._r=U._r,this._g=U._g,this._b=U._b,this.setAlpha(U._a),this},lighten:function(){return this._applyModification(C,arguments)},brighten:function(){return this._applyModification(S,arguments)},darken:function(){return this._applyModification(R,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(T,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(z,arguments)},_applyCombination:function(L,K){return L.apply(null,[this].concat([].slice.call(K)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(F,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(O,arguments)},triad:function(){return this._applyCombination(G,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},u.fromRatio=function(L,K){if(typeof L=="object"){var U={};for(var le in L)L.hasOwnProperty(le)&&(le==="a"?U[le]=L[le]:U[le]=J(L[le]));L=U}return u(L,K)};function c(L){var K={r:0,g:0,b:0},U=1,le=null,he=null,ve=null,xe=!1,Se=!1;return typeof L=="string"&&(L=ge(L)),typeof L=="object"&&(pe(L.r)&&pe(L.g)&&pe(L.b)?(K=h(L.r,L.g,L.b),xe=!0,Se=String(L.r).substr(-1)==="%"?"prgb":"rgb"):pe(L.h)&&pe(L.s)&&pe(L.v)?(le=J(L.s),he=J(L.v),K=b(L.h,le,he),xe=!0,Se="hsv"):pe(L.h)&&pe(L.s)&&pe(L.l)&&(le=J(L.s),ve=J(L.l),K=g(L.h,le,ve),xe=!0,Se="hsl"),L.hasOwnProperty("a")&&(U=L.a)),U=P(U),{ok:xe,format:L.format||Se,r:a(255,o(K.r,0)),g:a(255,o(K.g,0)),b:a(255,o(K.b,0)),a:U}}function h(L,K,U){return{r:V(L,255)*255,g:V(K,255)*255,b:V(U,255)*255}}function v(L,K,U){L=V(L,255),K=V(K,255),U=V(U,255);var le=o(L,K,U),he=a(L,K,U),ve,xe,Se=(le+he)/2;if(le==he)ve=xe=0;else{var me=le-he;switch(xe=Se>.5?me/(2-le-he):me/(le+he),le){case L:ve=(K-U)/me+(K<U?6:0);break;case K:ve=(U-L)/me+2;break;case U:ve=(L-K)/me+4;break}ve/=6}return{h:ve,s:xe,l:Se}}function g(L,K,U){var le,he,ve;L=V(L,360),K=V(K,100),U=V(U,100);function xe(_e,Xe,at){return at<0&&(at+=1),at>1&&(at-=1),at<1/6?_e+(Xe-_e)*6*at:at<1/2?Xe:at<2/3?_e+(Xe-_e)*(2/3-at)*6:_e}if(K===0)le=he=ve=U;else{var Se=U<.5?U*(1+K):U+K-U*K,me=2*U-Se;le=xe(me,Se,L+1/3),he=xe(me,Se,L),ve=xe(me,Se,L-1/3)}return{r:le*255,g:he*255,b:ve*255}}function p(L,K,U){L=V(L,255),K=V(K,255),U=V(U,255);var le=o(L,K,U),he=a(L,K,U),ve,xe,Se=le,me=le-he;if(xe=le===0?0:me/le,le==he)ve=0;else{switch(le){case L:ve=(K-U)/me+(K<U?6:0);break;case K:ve=(U-L)/me+2;break;case U:ve=(L-K)/me+4;break}ve/=6}return{h:ve,s:xe,v:Se}}function b(L,K,U){L=V(L,360)*6,K=V(K,100),U=V(U,100);var le=i.floor(L),he=L-le,ve=U*(1-K),xe=U*(1-he*K),Se=U*(1-(1-he)*K),me=le%6,_e=[U,xe,ve,ve,Se,U][me],Xe=[Se,U,U,xe,ve,ve][me],at=[ve,ve,Se,U,U,xe][me];return{r:_e*255,g:Xe*255,b:at*255}}function y(L,K,U,le){var he=[te(r(L).toString(16)),te(r(K).toString(16)),te(r(U).toString(16))];return le&&he[0].charAt(0)==he[0].charAt(1)&&he[1].charAt(0)==he[1].charAt(1)&&he[2].charAt(0)==he[2].charAt(1)?he[0].charAt(0)+he[1].charAt(0)+he[2].charAt(0):he.join("")}function k(L,K,U,le,he){var ve=[te(r(L).toString(16)),te(r(K).toString(16)),te(r(U).toString(16)),te(ne(le))];return he&&ve[0].charAt(0)==ve[0].charAt(1)&&ve[1].charAt(0)==ve[1].charAt(1)&&ve[2].charAt(0)==ve[2].charAt(1)&&ve[3].charAt(0)==ve[3].charAt(1)?ve[0].charAt(0)+ve[1].charAt(0)+ve[2].charAt(0)+ve[3].charAt(0):ve.join("")}function E(L,K,U,le){var he=[te(ne(le)),te(r(L).toString(16)),te(r(K).toString(16)),te(r(U).toString(16))];return he.join("")}u.equals=function(L,K){return!L||!K?!1:u(L).toRgbString()==u(K).toRgbString()},u.random=function(){return u.fromRatio({r:l(),g:l(),b:l()})};function _(L,K){K=K===0?0:K||10;var U=u(L).toHsl();return U.s-=K/100,U.s=W(U.s),u(U)}function T(L,K){K=K===0?0:K||10;var U=u(L).toHsl();return U.s+=K/100,U.s=W(U.s),u(U)}function x(L){return u(L).desaturate(100)}function C(L,K){K=K===0?0:K||10;var U=u(L).toHsl();return U.l+=K/100,U.l=W(U.l),u(U)}function S(L,K){K=K===0?0:K||10;var U=u(L).toRgb();return U.r=o(0,a(255,U.r-r(255*-(K/100)))),U.g=o(0,a(255,U.g-r(255*-(K/100)))),U.b=o(0,a(255,U.b-r(255*-(K/100)))),u(U)}function R(L,K){K=K===0?0:K||10;var U=u(L).toHsl();return U.l-=K/100,U.l=W(U.l),u(U)}function z(L,K){var U=u(L).toHsl(),le=(U.h+K)%360;return U.h=le<0?360+le:le,u(U)}function F(L){var K=u(L).toHsl();return K.h=(K.h+180)%360,u(K)}function G(L){var K=u(L).toHsl(),U=K.h;return[u(L),u({h:(U+120)%360,s:K.s,l:K.l}),u({h:(U+240)%360,s:K.s,l:K.l})]}function M(L){var K=u(L).toHsl(),U=K.h;return[u(L),u({h:(U+90)%360,s:K.s,l:K.l}),u({h:(U+180)%360,s:K.s,l:K.l}),u({h:(U+270)%360,s:K.s,l:K.l})]}function O(L){var K=u(L).toHsl(),U=K.h;return[u(L),u({h:(U+72)%360,s:K.s,l:K.l}),u({h:(U+216)%360,s:K.s,l:K.l})]}function A(L,K,U){K=K||6,U=U||30;var le=u(L).toHsl(),he=360/U,ve=[u(L)];for(le.h=(le.h-(he*K>>1)+720)%360;--K;)le.h=(le.h+he)%360,ve.push(u(le));return ve}function I(L,K){K=K||6;for(var U=u(L).toHsv(),le=U.h,he=U.s,ve=U.v,xe=[],Se=1/K;K--;)xe.push(u({h:le,s:he,v:ve})),ve=(ve+Se)%1;return xe}u.mix=function(L,K,U){U=U===0?0:U||50;var le=u(L).toRgb(),he=u(K).toRgb(),ve=U/100,xe={r:(he.r-le.r)*ve+le.r,g:(he.g-le.g)*ve+le.g,b:(he.b-le.b)*ve+le.b,a:(he.a-le.a)*ve+le.a};return u(xe)},u.readability=function(L,K){var U=u(L),le=u(K);return(i.max(U.getLuminance(),le.getLuminance())+.05)/(i.min(U.getLuminance(),le.getLuminance())+.05)},u.isReadable=function(L,K,U){var le=u.readability(L,K),he,ve;switch(ve=!1,he=ye(U),he.level+he.size){case"AAsmall":case"AAAlarge":ve=le>=4.5;break;case"AAlarge":ve=le>=3;break;case"AAAsmall":ve=le>=7;break}return ve},u.mostReadable=function(L,K,U){var le=null,he=0,ve,xe,Se,me;U=U||{},xe=U.includeFallbackColors,Se=U.level,me=U.size;for(var _e=0;_e<K.length;_e++)ve=u.readability(L,K[_e]),ve>he&&(he=ve,le=u(K[_e]));return u.isReadable(L,le,{level:Se,size:me})||!xe?le:(U.includeFallbackColors=!1,u.mostReadable(L,["#fff","#000"],U))};var $=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ie=u.hexNames=N($);function N(L){var K={};for(var U in L)L.hasOwnProperty(U)&&(K[L[U]]=U);return K}function P(L){return L=parseFloat(L),(isNaN(L)||L<0||L>1)&&(L=1),L}function V(L,K){Q(L)&&(L="100%");var U=re(L);return L=a(K,o(0,parseFloat(L))),U&&(L=parseInt(L*K,10)/100),i.abs(L-K)<1e-6?1:L%K/parseFloat(K)}function W(L){return a(1,o(0,L))}function Y(L){return parseInt(L,16)}function Q(L){return typeof L=="string"&&L.indexOf(".")!=-1&&parseFloat(L)===1}function re(L){return typeof L=="string"&&L.indexOf("%")!=-1}function te(L){return L.length==1?"0"+L:""+L}function J(L){return L<=1&&(L=L*100+"%"),L}function ne(L){return i.round(parseFloat(L)*255).toString(16)}function ae(L){return Y(L)/255}var fe=function(){var L="[-\\+]?\\d+%?",K="[-\\+]?\\d*\\.\\d+%?",U="(?:"+K+")|(?:"+L+")",le="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",he="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?";return{CSS_UNIT:new RegExp(U),rgb:new RegExp("rgb"+le),rgba:new RegExp("rgba"+he),hsl:new RegExp("hsl"+le),hsla:new RegExp("hsla"+he),hsv:new RegExp("hsv"+le),hsva:new RegExp("hsva"+he),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function pe(L){return!!fe.CSS_UNIT.exec(L)}function ge(L){L=L.replace(e,"").replace(t,"").toLowerCase();var K=!1;if($[L])L=$[L],K=!0;else if(L=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var U;return(U=fe.rgb.exec(L))?{r:U[1],g:U[2],b:U[3]}:(U=fe.rgba.exec(L))?{r:U[1],g:U[2],b:U[3],a:U[4]}:(U=fe.hsl.exec(L))?{h:U[1],s:U[2],l:U[3]}:(U=fe.hsla.exec(L))?{h:U[1],s:U[2],l:U[3],a:U[4]}:(U=fe.hsv.exec(L))?{h:U[1],s:U[2],v:U[3]}:(U=fe.hsva.exec(L))?{h:U[1],s:U[2],v:U[3],a:U[4]}:(U=fe.hex8.exec(L))?{r:Y(U[1]),g:Y(U[2]),b:Y(U[3]),a:ae(U[4]),format:K?"name":"hex8"}:(U=fe.hex6.exec(L))?{r:Y(U[1]),g:Y(U[2]),b:Y(U[3]),format:K?"name":"hex"}:(U=fe.hex4.exec(L))?{r:Y(U[1]+""+U[1]),g:Y(U[2]+""+U[2]),b:Y(U[3]+""+U[3]),a:ae(U[4]+""+U[4]),format:K?"name":"hex8"}:(U=fe.hex3.exec(L))?{r:Y(U[1]+""+U[1]),g:Y(U[2]+""+U[2]),b:Y(U[3]+""+U[3]),format:K?"name":"hex"}:!1}function ye(L){var K,U;return L=L||{level:"AA",size:"small"},K=(L.level||"AA").toUpperCase(),U=(L.size||"small").toLowerCase(),K!=="AA"&&K!=="AAA"&&(K="AA"),U!=="small"&&U!=="large"&&(U="small"),{level:K,size:U}}f.exports?f.exports=u:window.tinycolor=u})(Math)})(Pc);var tr=Pc.exports,Ti={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(f,i){(function(e){var t=Object.hasOwnProperty,n=Array.isArray?Array.isArray:function(P){return Object.prototype.toString.call(P)==="[object Array]"},r=10,a=typeof process=="object"&&typeof process.nextTick=="function",o=typeof Symbol=="function",l=typeof Reflect=="object",u=typeof setImmediate=="function",c=u?setImmediate:setTimeout,h=o?l&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(N){var P=Object.getOwnPropertyNames(N);return P.push.apply(P,Object.getOwnPropertySymbols(N)),P}:Object.keys;function v(){this._events={},this._conf&&g.call(this,this._conf)}function g(N){N&&(this._conf=N,N.delimiter&&(this.delimiter=N.delimiter),N.maxListeners!==e&&(this._maxListeners=N.maxListeners),N.wildcard&&(this.wildcard=N.wildcard),N.newListener&&(this._newListener=N.newListener),N.removeListener&&(this._removeListener=N.removeListener),N.verboseMemoryLeak&&(this.verboseMemoryLeak=N.verboseMemoryLeak),N.ignoreErrors&&(this.ignoreErrors=N.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(N,P){var V="(node) warning: possible EventEmitter memory leak detected. "+N+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(V+=" Event name: "+P+"."),typeof process!="undefined"&&process.emitWarning){var W=new Error(V);W.name="MaxListenersExceededWarning",W.emitter=this,W.count=N,process.emitWarning(W)}else console.error(V),console.trace&&console.trace()}var b=function(N,P,V){var W=arguments.length;switch(W){case 0:return[];case 1:return[N];case 2:return[N,P];case 3:return[N,P,V];default:for(var Y=new Array(W);W--;)Y[W]=arguments[W];return Y}};function y(N,P){for(var V={},W,Y=N.length,Q=P?value.length:0,re=0;re<Y;re++)W=N[re],V[W]=re<Q?P[re]:e;return V}function k(N,P,V){this._emitter=N,this._target=P,this._listeners={},this._listenersCount=0;var W,Y;if((V.on||V.off)&&(W=V.on,Y=V.off),P.addEventListener?(W=P.addEventListener,Y=P.removeEventListener):P.addListener?(W=P.addListener,Y=P.removeListener):P.on&&(W=P.on,Y=P.off),!W&&!Y)throw Error("target does not implement any known event API");if(typeof W!="function")throw TypeError("on method must be a function");if(typeof Y!="function")throw TypeError("off method must be a function");this._on=W,this._off=Y;var Q=N._observers;Q?Q.push(this):N._observers=[this]}Object.assign(k.prototype,{subscribe:function(N,P,V){var W=this,Y=this._target,Q=this._emitter,re=this._listeners,te=function(){var J=b.apply(null,arguments),ne={data:J,name:P,original:N};if(V){var ae=V.call(Y,ne);ae!==!1&&Q.emit.apply(Q,[ne.name].concat(J));return}Q.emit.apply(Q,[P].concat(J))};if(re[N])throw Error("Event '"+N+"' is already listening");this._listenersCount++,Q._newListener&&Q._removeListener&&!W._onNewListener?(this._onNewListener=function(J){J===P&&re[N]===null&&(re[N]=te,W._on.call(Y,N,te))},Q.on("newListener",this._onNewListener),this._onRemoveListener=function(J){J===P&&!Q.hasListeners(J)&&re[N]&&(re[N]=null,W._off.call(Y,N,te))},re[N]=null,Q.on("removeListener",this._onRemoveListener)):(re[N]=te,W._on.call(Y,N,te))},unsubscribe:function(N){var P=this,V=this._listeners,W=this._emitter,Y,Q,re=this._off,te=this._target,J;if(N&&typeof N!="string")throw TypeError("event must be a string");function ne(){P._onNewListener&&(W.off("newListener",P._onNewListener),W.off("removeListener",P._onRemoveListener),P._onNewListener=null,P._onRemoveListener=null);var ae=R.call(W,P);W._observers.splice(ae,1)}if(N){if(Y=V[N],!Y)return;re.call(te,N,Y),delete V[N],--this._listenersCount||ne()}else{for(Q=h(V),J=Q.length;J-- >0;)N=Q[J],re.call(te,N,V[N]);this._listeners={},this._listenersCount=0,ne()}}});function E(N,P,V,W){var Y=Object.assign({},P);if(!N)return Y;if(typeof N!="object")throw TypeError("options must be an object");var Q=Object.keys(N),re=Q.length,te,J,ne;function ae(pe){throw Error('Invalid "'+te+'" option value'+(pe?". Reason: "+pe:""))}for(var fe=0;fe<re;fe++){if(te=Q[fe],!W&&!t.call(P,te))throw Error('Unknown "'+te+'" option');J=N[te],J!==e&&(ne=V[te],Y[te]=ne?ne(J,ae):J)}return Y}function _(N,P){return(typeof N!="function"||!N.hasOwnProperty("prototype"))&&P("value must be a constructor"),N}function T(N){var P="value must be type of "+N.join("|"),V=N.length,W=N[0],Y=N[1];return V===1?function(Q,re){if(typeof Q===W)return Q;re(P)}:V===2?function(Q,re){var te=typeof Q;if(te===W||te===Y)return Q;re(P)}:function(Q,re){for(var te=typeof Q,J=V;J-- >0;)if(te===N[J])return Q;re(P)}}var x=T(["function"]),C=T(["object","function"]);function S(N,P,V){var W,Y,Q=0,re,te=new N(function(J,ne,ae){V=E(V,{timeout:0,overload:!1},{timeout:function(ye,L){return ye*=1,(typeof ye!="number"||ye<0||!Number.isFinite(ye))&&L("timeout must be a positive number"),ye}}),W=!V.overload&&typeof N.prototype.cancel=="function"&&typeof ae=="function";function fe(){Y&&(Y=null),Q&&(clearTimeout(Q),Q=0)}var pe=function(ye){fe(),J(ye)},ge=function(ye){fe(),ne(ye)};W?P(pe,ge,ae):(Y=[function(ye){ge(ye||Error("canceled"))}],P(pe,ge,function(ye){if(re)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof ye!="function")throw TypeError("onCancel callback must be a function");Y.push(ye)}),re=!0),V.timeout>0&&(Q=setTimeout(function(){var ye=Error("timeout");ye.code="ETIMEDOUT",Q=0,te.cancel(ye),ne(ye)},V.timeout))});return W||(te.cancel=function(J){if(!!Y){for(var ne=Y.length,ae=1;ae<ne;ae++)Y[ae](J);Y[0](J),Y=null}}),te}function R(N){var P=this._observers;if(!P)return-1;for(var V=P.length,W=0;W<V;W++)if(P[W]._target===N)return W;return-1}function z(N,P,V,W,Y){if(!V)return null;if(W===0){var Q=typeof P;if(Q==="string"){var re,te,J=0,ne=0,ae=this.delimiter,fe=ae.length;if((te=P.indexOf(ae))!==-1){re=new Array(5);do re[J++]=P.slice(ne,te),ne=te+fe;while((te=P.indexOf(ae,ne))!==-1);re[J++]=P.slice(ne),P=re,Y=J}else P=[P],Y=1}else Q==="object"?Y=P.length:(P=[P],Y=1)}var pe=null,ge,ye,L,K,U,le=P[W],he=P[W+1],ve,xe;if(W===Y)V._listeners&&(typeof V._listeners=="function"?(N&&N.push(V._listeners),pe=[V]):(N&&N.push.apply(N,V._listeners),pe=[V]));else if(le==="*"){for(ve=h(V),te=ve.length;te-- >0;)ge=ve[te],ge!=="_listeners"&&(xe=z(N,P,V[ge],W+1,Y),xe&&(pe?pe.push.apply(pe,xe):pe=xe));return pe}else if(le==="**"){for(U=W+1===Y||W+2===Y&&he==="*",U&&V._listeners&&(pe=z(N,P,V,Y,Y)),ve=h(V),te=ve.length;te-- >0;)ge=ve[te],ge!=="_listeners"&&(ge==="*"||ge==="**"?(V[ge]._listeners&&!U&&(xe=z(N,P,V[ge],Y,Y),xe&&(pe?pe.push.apply(pe,xe):pe=xe)),xe=z(N,P,V[ge],W,Y)):ge===he?xe=z(N,P,V[ge],W+2,Y):xe=z(N,P,V[ge],W,Y),xe&&(pe?pe.push.apply(pe,xe):pe=xe));return pe}else V[le]&&(pe=z(N,P,V[le],W+1,Y));if(ye=V["*"],ye&&z(N,P,ye,W+1,Y),L=V["**"],L)if(W<Y)for(L._listeners&&z(N,P,L,Y,Y),ve=h(L),te=ve.length;te-- >0;)ge=ve[te],ge!=="_listeners"&&(ge===he?z(N,P,L[ge],W+2,Y):ge===le?z(N,P,L[ge],W+1,Y):(K={},K[ge]=L[ge],z(N,P,{"**":K},W+1,Y)));else L._listeners?z(N,P,L,Y,Y):L["*"]&&L["*"]._listeners&&z(N,P,L["*"],Y,Y);return pe}function F(N,P,V){var W=0,Y=0,Q,re=this.delimiter,te=re.length,J;if(typeof N=="string")if((Q=N.indexOf(re))!==-1){J=new Array(5);do J[W++]=N.slice(Y,Q),Y=Q+te;while((Q=N.indexOf(re,Y))!==-1);J[W++]=N.slice(Y)}else J=[N],W=1;else J=N,W=N.length;if(W>1){for(Q=0;Q+1<W;Q++)if(J[Q]==="**"&&J[Q+1]==="**")return}var ne=this.listenerTree,ae;for(Q=0;Q<W;Q++)if(ae=J[Q],ne=ne[ae]||(ne[ae]={}),Q===W-1)return ne._listeners?(typeof ne._listeners=="function"&&(ne._listeners=[ne._listeners]),V?ne._listeners.unshift(P):ne._listeners.push(P),!ne._listeners.warned&&this._maxListeners>0&&ne._listeners.length>this._maxListeners&&(ne._listeners.warned=!0,p.call(this,ne._listeners.length,ae))):ne._listeners=P,!0;return!0}function G(N,P,V,W){for(var Y=h(N),Q=Y.length,re,te,J,ne=N._listeners,ae;Q-- >0;)te=Y[Q],re=N[te],te==="_listeners"?J=V:J=V?V.concat(te):[te],ae=W||typeof te=="symbol",ne&&P.push(ae?J:J.join(this.delimiter)),typeof re=="object"&&G.call(this,re,P,J,ae);return P}function M(N){for(var P=h(N),V=P.length,W,Y,Q;V-- >0;)Y=P[V],W=N[Y],W&&(Q=!0,Y!=="_listeners"&&!M(W)&&delete N[Y]);return Q}function O(N,P,V){this.emitter=N,this.event=P,this.listener=V}O.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function A(N,P,V){if(V===!0)Y=!0;else if(V===!1)W=!0;else{if(!V||typeof V!="object")throw TypeError("options should be an object or true");var W=V.async,Y=V.promisify,Q=V.nextTick,re=V.objectify}if(W||Q||Y){var te=P,J=P._origin||P;if(Q&&!a)throw Error("process.nextTick is not supported");Y===e&&(Y=P.constructor.name==="AsyncFunction"),P=function(){var ne=arguments,ae=this,fe=this.event;return Y?Q?Promise.resolve():new Promise(function(pe){c(pe)}).then(function(){return ae.event=fe,te.apply(ae,ne)}):(Q?process.nextTick:c)(function(){ae.event=fe,te.apply(ae,ne)})},P._async=!0,P._origin=J}return[P,re?new O(this,N,P):this]}function I(N){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,g.call(this,N)}I.EventEmitter2=I,I.prototype.listenTo=function(N,P,V){if(typeof N!="object")throw TypeError("target musts be an object");var W=this;V=E(V,{on:e,off:e,reducers:e},{on:x,off:x,reducers:C});function Y(Q){if(typeof Q!="object")throw TypeError("events must be an object");var re=V.reducers,te=R.call(W,N),J;te===-1?J=new k(W,N,V):J=W._observers[te];for(var ne=h(Q),ae=ne.length,fe,pe=typeof re=="function",ge=0;ge<ae;ge++)fe=ne[ge],J.subscribe(fe,Q[fe]||fe,pe?re:re&&re[fe])}return n(P)?Y(y(P)):Y(typeof P=="string"?y(P.split(/\s+/)):P),this},I.prototype.stopListeningTo=function(N,P){var V=this._observers;if(!V)return!1;var W=V.length,Y,Q=!1;if(N&&typeof N!="object")throw TypeError("target should be an object");for(;W-- >0;)Y=V[W],(!N||Y._target===N)&&(Y.unsubscribe(P),Q=!0);return Q},I.prototype.delimiter=".",I.prototype.setMaxListeners=function(N){N!==e&&(this._maxListeners=N,this._conf||(this._conf={}),this._conf.maxListeners=N)},I.prototype.getMaxListeners=function(){return this._maxListeners},I.prototype.event="",I.prototype.once=function(N,P,V){return this._once(N,P,!1,V)},I.prototype.prependOnceListener=function(N,P,V){return this._once(N,P,!0,V)},I.prototype._once=function(N,P,V,W){return this._many(N,1,P,V,W)},I.prototype.many=function(N,P,V,W){return this._many(N,P,V,!1,W)},I.prototype.prependMany=function(N,P,V,W){return this._many(N,P,V,!0,W)},I.prototype._many=function(N,P,V,W,Y){var Q=this;if(typeof V!="function")throw new Error("many only accepts instances of Function");function re(){return--P===0&&Q.off(N,re),V.apply(this,arguments)}return re._origin=V,this._on(N,re,W,Y)},I.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||v.call(this);var N=arguments[0],P,V=this.wildcard,W,Y,Q,re,te;if(N==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(V&&(P=N,N!=="newListener"&&N!=="removeListener"&&typeof N=="object")){if(Y=N.length,o){for(Q=0;Q<Y;Q++)if(typeof N[Q]=="symbol"){te=!0;break}}te||(N=N.join(this.delimiter))}var J=arguments.length,ne;if(this._all&&this._all.length)for(ne=this._all.slice(),Q=0,Y=ne.length;Q<Y;Q++)switch(this.event=N,J){case 1:ne[Q].call(this,N);break;case 2:ne[Q].call(this,N,arguments[1]);break;case 3:ne[Q].call(this,N,arguments[1],arguments[2]);break;default:ne[Q].apply(this,arguments)}if(V)ne=[],z.call(this,ne,P,this.listenerTree,0,Y);else if(ne=this._events[N],typeof ne=="function"){switch(this.event=N,J){case 1:ne.call(this);break;case 2:ne.call(this,arguments[1]);break;case 3:ne.call(this,arguments[1],arguments[2]);break;default:for(W=new Array(J-1),re=1;re<J;re++)W[re-1]=arguments[re];ne.apply(this,W)}return!0}else ne&&(ne=ne.slice());if(ne&&ne.length){if(J>3)for(W=new Array(J-1),re=1;re<J;re++)W[re-1]=arguments[re];for(Q=0,Y=ne.length;Q<Y;Q++)switch(this.event=N,J){case 1:ne[Q].call(this);break;case 2:ne[Q].call(this,arguments[1]);break;case 3:ne[Q].call(this,arguments[1],arguments[2]);break;default:ne[Q].apply(this,W)}return!0}else if(!this.ignoreErrors&&!this._all&&N==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},I.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||v.call(this);var N=arguments[0],P=this.wildcard,V,W,Y,Q,re,te;if(N==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(P&&(V=N,N!=="newListener"&&N!=="removeListener"&&typeof N=="object")){if(Q=N.length,o){for(re=0;re<Q;re++)if(typeof N[re]=="symbol"){W=!0;break}}W||(N=N.join(this.delimiter))}var J=[],ne=arguments.length,ae;if(this._all)for(re=0,Q=this._all.length;re<Q;re++)switch(this.event=N,ne){case 1:J.push(this._all[re].call(this,N));break;case 2:J.push(this._all[re].call(this,N,arguments[1]));break;case 3:J.push(this._all[re].call(this,N,arguments[1],arguments[2]));break;default:J.push(this._all[re].apply(this,arguments))}if(P?(ae=[],z.call(this,ae,V,this.listenerTree,0)):ae=this._events[N],typeof ae=="function")switch(this.event=N,ne){case 1:J.push(ae.call(this));break;case 2:J.push(ae.call(this,arguments[1]));break;case 3:J.push(ae.call(this,arguments[1],arguments[2]));break;default:for(Y=new Array(ne-1),te=1;te<ne;te++)Y[te-1]=arguments[te];J.push(ae.apply(this,Y))}else if(ae&&ae.length){if(ae=ae.slice(),ne>3)for(Y=new Array(ne-1),te=1;te<ne;te++)Y[te-1]=arguments[te];for(re=0,Q=ae.length;re<Q;re++)switch(this.event=N,ne){case 1:J.push(ae[re].call(this));break;case 2:J.push(ae[re].call(this,arguments[1]));break;case 3:J.push(ae[re].call(this,arguments[1],arguments[2]));break;default:J.push(ae[re].apply(this,Y))}}else if(!this.ignoreErrors&&!this._all&&N==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(J)},I.prototype.on=function(N,P,V){return this._on(N,P,!1,V)},I.prototype.prependListener=function(N,P,V){return this._on(N,P,!0,V)},I.prototype.onAny=function(N){return this._onAny(N,!1)},I.prototype.prependAny=function(N){return this._onAny(N,!0)},I.prototype.addListener=I.prototype.on,I.prototype._onAny=function(N,P){if(typeof N!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),P?this._all.unshift(N):this._all.push(N),this},I.prototype._on=function(N,P,V,W){if(typeof N=="function")return this._onAny(N,P),this;if(typeof P!="function")throw new Error("on only accepts instances of Function");this._events||v.call(this);var Y=this,Q;return W!==e&&(Q=A.call(this,N,P,W),P=Q[0],Y=Q[1]),this._newListener&&this.emit("newListener",N,P),this.wildcard?(F.call(this,N,P,V),Y):(this._events[N]?(typeof this._events[N]=="function"&&(this._events[N]=[this._events[N]]),V?this._events[N].unshift(P):this._events[N].push(P),!this._events[N].warned&&this._maxListeners>0&&this._events[N].length>this._maxListeners&&(this._events[N].warned=!0,p.call(this,this._events[N].length,N))):this._events[N]=P,Y)},I.prototype.off=function(N,P){if(typeof P!="function")throw new Error("removeListener only takes instances of Function");var V,W=[];if(this.wildcard){var Y=typeof N=="string"?N.split(this.delimiter):N.slice();if(W=z.call(this,null,Y,this.listenerTree,0),!W)return this}else{if(!this._events[N])return this;V=this._events[N],W.push({_listeners:V})}for(var Q=0;Q<W.length;Q++){var re=W[Q];if(V=re._listeners,n(V)){for(var te=-1,J=0,ne=V.length;J<ne;J++)if(V[J]===P||V[J].listener&&V[J].listener===P||V[J]._origin&&V[J]._origin===P){te=J;break}if(te<0)continue;return this.wildcard?re._listeners.splice(te,1):this._events[N].splice(te,1),V.length===0&&(this.wildcard?delete re._listeners:delete this._events[N]),this._removeListener&&this.emit("removeListener",N,P),this}else(V===P||V.listener&&V.listener===P||V._origin&&V._origin===P)&&(this.wildcard?delete re._listeners:delete this._events[N],this._removeListener&&this.emit("removeListener",N,P))}return this.listenerTree&&M(this.listenerTree),this},I.prototype.offAny=function(N){var P=0,V=0,W;if(N&&this._all&&this._all.length>0){for(W=this._all,P=0,V=W.length;P<V;P++)if(N===W[P])return W.splice(P,1),this._removeListener&&this.emit("removeListenerAny",N),this}else{if(W=this._all,this._removeListener)for(P=0,V=W.length;P<V;P++)this.emit("removeListenerAny",W[P]);this._all=[]}return this},I.prototype.removeListener=I.prototype.off,I.prototype.removeAllListeners=function(N){if(N===e)return!this._events||v.call(this),this;if(this.wildcard){var P=z.call(this,null,N,this.listenerTree,0),V,W;if(!P)return this;for(W=0;W<P.length;W++)V=P[W],V._listeners=null;this.listenerTree&&M(this.listenerTree)}else this._events&&(this._events[N]=null);return this},I.prototype.listeners=function(N){var P=this._events,V,W,Y,Q,re;if(N===e){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!P)return[];for(V=h(P),Q=V.length,Y=[];Q-- >0;)W=P[V[Q]],typeof W=="function"?Y.push(W):Y.push.apply(Y,W);return Y}else{if(this.wildcard){if(re=this.listenerTree,!re)return[];var te=[],J=typeof N=="string"?N.split(this.delimiter):N.slice();return z.call(this,te,J,re,0),te}return P?(W=P[N],W?typeof W=="function"?[W]:W:[]):[]}},I.prototype.eventNames=function(N){var P=this._events;return this.wildcard?G.call(this,this.listenerTree,[],null,N):P?h(P):[]},I.prototype.listenerCount=function(N){return this.listeners(N).length},I.prototype.hasListeners=function(N){if(this.wildcard){var P=[],V=typeof N=="string"?N.split(this.delimiter):N.slice();return z.call(this,P,V,this.listenerTree,0),P.length>0}var W=this._events,Y=this._all;return!!(Y&&Y.length||W&&(N===e?h(W).length:W[N]))},I.prototype.listenersAny=function(){return this._all?this._all:[]},I.prototype.waitFor=function(N,P){var V=this,W=typeof P;return W==="number"?P={timeout:P}:W==="function"&&(P={filter:P}),P=E(P,{timeout:0,filter:e,handleError:!1,Promise,overload:!1},{filter:x,Promise:_}),S(P.Promise,function(Y,Q,re){function te(){var J=P.filter;if(!(J&&!J.apply(V,arguments)))if(V.off(N,te),P.handleError){var ne=arguments[0];ne?Q(ne):Y(b.apply(null,arguments).slice(1))}else Y(b.apply(null,arguments))}re(function(){V.off(N,te)}),V._on(N,te,!1)},{timeout:P.timeout,overload:P.overload})};function $(N,P,V){V=E(V,{Promise,timeout:0,overload:!1},{Promise:_});var W=V.Promise;return S(W,function(Y,Q,re){var te;if(typeof N.addEventListener=="function"){te=function(){Y(b.apply(null,arguments))},re(function(){N.removeEventListener(P,te)}),N.addEventListener(P,te,{once:!0});return}var J=function(){ne&&N.removeListener("error",ne),Y(b.apply(null,arguments))},ne;P!=="error"&&(ne=function(ae){N.removeListener(P,J),Q(ae)},N.once("error",ne)),re(function(){ne&&N.removeListener("error",ne),N.removeListener(P,J)}),N.once(P,J)},{timeout:V.timeout,overload:V.overload})}var ie=I.prototype;Object.defineProperties(I,{defaultMaxListeners:{get:function(){return ie._maxListeners},set:function(N){if(typeof N!="number"||N<0||Number.isNaN(N))throw TypeError("n must be a non-negative number");ie._maxListeners=N},enumerable:!0},once:{value:$,writable:!0,configurable:!0}}),Object.defineProperties(ie,{_maxListeners:{value:r,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof e=="function"&&e.amd?e(function(){return I}):f.exports=I})()})(Ti);var Fc=am;function am(f,i,e,t){var n=function(a,o,l,u){i(l,a,o,"left"),i(u,o,a,"right")},r=f.transformX=function(a,o){e(a),e(o);for(var l=[],u=0;u<o.length;u++){for(var c=o[u],h=[],v=0;v<a.length;){var g=[];if(n(a[v],c,h,g),v++,g.length===1)c=g[0];else if(g.length===0){for(var p=v;p<a.length;p++)t(h,a[p]);c=null;break}else{for(var b=r(a.slice(v),g),y=0;y<b[0].length;y++)t(h,b[0][y]);for(var k=0;k<b[1].length;k++)t(l,b[1][k]);c=null;break}}c!=null&&t(l,c),a=h}return[a,l]};f.transform=function(a,o,l){if(!(l==="left"||l==="right"))throw new Error("type must be 'left' or 'right'");return o.length===0?a:a.length===1&&o.length===1?i([],a[0],o[0],l):l==="left"?r(a,o)[0]:r(o,a)[1]}}var zc={exports:{}},Ar=zc.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(f){if(f!=null&&typeof f!="string")throw new Error("Initial data must be a string");return f||""}},Vs=function(f,i,e){return f.slice(0,i)+e+f.slice(i)},Hs=function(f){if(typeof f.p!="number")throw new Error("component missing position field");if(typeof f.i=="string"==(typeof f.d=="string"))throw new Error("component needs an i or d field");if(f.p<0)throw new Error("position cannot be negative")},so=function(f){for(var i=0;i<f.length;i++)Hs(f[i])};Ar.apply=function(f,i){var e;so(i);for(var t=0;t<i.length;t++){var n=i[t];if(n.i!=null)f=Vs(f,n.p,n.i);else{if(e=f.slice(n.p,n.p+n.d.length),n.d!==e)throw new Error("Delete component '"+n.d+"' does not match deleted text '"+e+"'");f=f.slice(0,n.p)+f.slice(n.p+n.d.length)}}return f};var nr=Ar._append=function(f,i){if(!(i.i===""||i.d===""))if(f.length===0)f.push(i);else{var e=f[f.length-1];e.i!=null&&i.i!=null&&e.p<=i.p&&i.p<=e.p+e.i.length?f[f.length-1]={i:Vs(e.i,i.p-e.p,i.i),p:e.p}:e.d!=null&&i.d!=null&&i.p<=e.p&&e.p<=i.p+i.d.length?f[f.length-1]={d:Vs(i.d,e.p-i.p,e.d),p:i.p}:f.push(i)}};Ar.compose=function(f,i){so(f),so(i);for(var e=f.slice(),t=0;t<i.length;t++)nr(e,i[t]);return e},Ar.normalize=function(f){var i=[];(f.i!=null||f.p!=null)&&(f=[f]);for(var e=0;e<f.length;e++){var t=f[e];t.p==null&&(t.p=0),nr(i,t)}return i};var js=function(f,i,e){return i.i!=null?i.p<f||i.p===f&&e?f+i.i.length:f:f<=i.p?f:f<=i.p+i.d.length?i.p:f-i.d.length};Ar.transformCursor=function(f,i,e){for(var t=e==="right",n=0;n<i.length;n++)f=js(f,i[n],t);return f};var om=Ar._tc=function(f,i,e,t){if(Hs(i),Hs(e),i.i!=null)nr(f,{i:i.i,p:js(i.p,e,t==="right")});else if(e.i!=null){var n=i.d;i.p<e.p&&(nr(f,{d:n.slice(0,e.p-i.p),p:i.p}),n=n.slice(e.p-i.p)),n!==""&&nr(f,{d:n,p:i.p+e.i.length})}else if(i.p>=e.p+e.d.length)nr(f,{d:i.d,p:i.p-e.d.length});else if(i.p+i.d.length<=e.p)nr(f,i);else{var r={d:"",p:i.p};i.p<e.p&&(r.d=i.d.slice(0,e.p-i.p)),i.p+i.d.length>e.p+e.d.length&&(r.d+=i.d.slice(e.p+e.d.length-i.p));var a=Math.max(i.p,e.p),o=Math.min(i.p+i.d.length,e.p+e.d.length),l=i.d.slice(a-i.p,o-i.p),u=e.d.slice(a-e.p,o-e.p);if(l!==u)throw new Error("Delete ops delete different text in the same region of the document");r.d!==""&&(r.p=js(r.p,e),nr(f,r))}return f},sm=function(f){return f.i!=null?{d:f.i,p:f.p}:{i:f.d,p:f.p}};Ar.invert=function(f){f=f.slice().reverse();for(var i=0;i<f.length;i++)f[i]=sm(f[i]);return f},Fc(Ar,om,so,nr);var lo=function(f){return Object.prototype.toString.call(f)=="[object Array]"},lm=function(f){return!!f&&f.constructor===Object},_n=function(f){return JSON.parse(JSON.stringify(f))},Ie={name:"json0",uri:"http://sharejs.org/types/JSONv0"},rr={};Ie.registerSubtype=function(f){rr[f.name]=f},Ie.create=function(f){return f===void 0?null:_n(f)},Ie.invertComponent=function(f){var i={p:f.p};return f.t&&rr[f.t]&&(i.t=f.t,i.o=rr[f.t].invert(f.o)),f.si!==void 0&&(i.sd=f.si),f.sd!==void 0&&(i.si=f.sd),f.oi!==void 0&&(i.od=f.oi),f.od!==void 0&&(i.oi=f.od),f.li!==void 0&&(i.ld=f.li),f.ld!==void 0&&(i.li=f.ld),f.na!==void 0&&(i.na=-f.na),f.lm!==void 0&&(i.lm=f.p[f.p.length-1],i.p=f.p.slice(0,f.p.length-1).concat([f.lm])),i},Ie.invert=function(f){for(var i=f.slice().reverse(),e=[],t=0;t<i.length;t++)e.push(Ie.invertComponent(i[t]));return e},Ie.checkValidOp=function(f){for(var i=0;i<f.length;i++)if(!lo(f[i].p))throw new Error("Missing path")},Ie.checkList=function(f){if(!lo(f))throw new Error("Referenced element not a list")},Ie.checkObj=function(f){if(!lm(f))throw new Error("Referenced element not an object (it was "+JSON.stringify(f)+")")};function sa(f){f.t="text0";var i={p:f.p.pop()};f.si!=null&&(i.i=f.si),f.sd!=null&&(i.d=f.sd),f.o=[i]}function la(f){f.p.push(f.o[0].p),f.o[0].i!=null&&(f.si=f.o[0].i),f.o[0].d!=null&&(f.sd=f.o[0].d),delete f.t,delete f.o}Ie.apply=function(f,i){Ie.checkValidOp(i),i=_n(i);for(var e={data:f},t=0;t<i.length;t++){var n=i[t];(n.si!=null||n.sd!=null)&&sa(n);for(var r=null,a=e,o="data",l=0;l<n.p.length;l++){var u=n.p[l];if(r=a,a=a[o],o=u,r==null)throw new Error("Path invalid")}if(n.t&&n.o!==void 0&&rr[n.t])a[o]=rr[n.t].apply(a[o],n.o);else if(n.na!==void 0){if(typeof a[o]!="number")throw new Error("Referenced element not a number");a[o]+=n.na}else if(n.li!==void 0&&n.ld!==void 0)Ie.checkList(a),a[o]=n.li;else if(n.li!==void 0)Ie.checkList(a),a.splice(o,0,n.li);else if(n.ld!==void 0)Ie.checkList(a),a.splice(o,1);else if(n.lm!==void 0){if(Ie.checkList(a),n.lm!=o){var c=a[o];a.splice(o,1),a.splice(n.lm,0,c)}}else if(n.oi!==void 0)Ie.checkObj(a),a[o]=n.oi;else if(n.od!==void 0)Ie.checkObj(a),delete a[o];else throw new Error("invalid / missing instruction in op")}return e.data},Ie.shatter=function(f){for(var i=[],e=0;e<f.length;e++)i.push([f[e]]);return i},Ie.incrementalApply=function(f,i,e){for(var t=0;t<i.length;t++){var n=[i[t]];f=Ie.apply(f,n),e(n,f)}return f};var um=Ie.pathMatches=function(f,i,e){if(f.length!=i.length)return!1;for(var t=0;t<f.length;t++)if(f[t]!==i[t]&&(!e||t!==f.length-1))return!1;return!0};Ie.append=function(f,i){if(i=_n(i),f.length===0){f.push(i);return}var e=f[f.length-1];if((i.si!=null||i.sd!=null)&&(e.si!=null||e.sd!=null)&&(sa(i),sa(e)),um(i.p,e.p))if(i.t&&e.t&&i.t===e.t&&rr[i.t]){if(e.o=rr[i.t].compose(e.o,i.o),i.si!=null||i.sd!=null){for(var t=i.p,n=0;n<e.o.length-1;n++)i.o=[e.o.pop()],i.p=t.slice(),la(i),f.push(i);la(e)}}else e.na!=null&&i.na!=null?f[f.length-1]={p:e.p,na:e.na+i.na}:e.li!==void 0&&i.li===void 0&&i.ld===e.li?e.ld!==void 0?delete e.li:f.pop():e.od!==void 0&&e.oi===void 0&&i.oi!==void 0&&i.od===void 0?e.oi=i.oi:e.oi!==void 0&&i.od!==void 0?i.oi!==void 0?e.oi=i.oi:e.od!==void 0?delete e.oi:f.pop():i.lm!==void 0&&i.p[i.p.length-1]===i.lm||f.push(i);else(i.si!=null||i.sd!=null)&&(e.si!=null||e.sd!=null)&&(la(i),la(e)),f.push(i)},Ie.compose=function(f,i){Ie.checkValidOp(f),Ie.checkValidOp(i);for(var e=_n(f),t=0;t<i.length;t++)Ie.append(e,i[t]);return e},Ie.normalize=function(f){var i=[];f=lo(f)?f:[f];for(var e=0;e<f.length;e++){var t=f[e];t.p==null&&(t.p=[]),Ie.append(i,t)}return i},Ie.commonLengthForOps=function(f,i){var e=f.p.length,t=i.p.length;if((f.na!=null||f.t)&&e++,(i.na!=null||i.t)&&t++,e===0)return-1;if(t===0)return null;e--,t--;for(var n=0;n<e;n++){var r=f.p[n];if(n>=t||r!==i.p[n])return null}return e},Ie.canOpAffectPath=function(f,i){return Ie.commonLengthForOps({p:i},f)!=null},Ie.transformComponent=function(f,i,e,t){i=_n(i);var n=Ie.commonLengthForOps(e,i),r=Ie.commonLengthForOps(i,e),a=i.p.length,o=e.p.length;if((i.na!=null||i.t)&&a++,(e.na!=null||e.t)&&o++,r!=null&&o>a&&i.p[r]==e.p[r]){if(i.ld!==void 0){var l=_n(e);l.p=l.p.slice(a),i.ld=Ie.apply(_n(i.ld),[l])}else if(i.od!==void 0){var l=_n(e);l.p=l.p.slice(a),i.od=Ie.apply(_n(i.od),[l])}}if(n!=null){var u=a==o,l=e;if((i.si!=null||i.sd!=null)&&(e.si!=null||e.sd!=null)&&(sa(i),l=_n(e),sa(l)),l.t&&rr[l.t]){if(i.t&&i.t===l.t){var c=rr[i.t].transform(i.o,l.o,t);if(i.si!=null||i.sd!=null)for(var h=i.p,v=0;v<c.length;v++)i.o=[c[v]],i.p=h.slice(),la(i),Ie.append(f,i);else(!lo(c)||c.length>0)&&(i.o=c,Ie.append(f,i));return f}}else if(e.na===void 0){if(e.li!==void 0&&e.ld!==void 0){if(e.p[n]===i.p[n])if(u){if(i.ld!==void 0)if(i.li!==void 0&&t==="left")i.ld=_n(e.li);else return f}else return f}else if(e.li!==void 0)i.li!==void 0&&i.ld===void 0&&u&&i.p[n]===e.p[n]?t==="right"&&i.p[n]++:e.p[n]<=i.p[n]&&i.p[n]++,i.lm!==void 0&&u&&e.p[n]<=i.lm&&i.lm++;else if(e.ld!==void 0){if(i.lm!==void 0&&u){if(e.p[n]===i.p[n])return f;var h=e.p[n],g=i.p[n],p=i.lm;(h<p||h===p&&g<p)&&i.lm--}if(e.p[n]<i.p[n])i.p[n]--;else if(e.p[n]===i.p[n]){if(o<a)return f;if(i.ld!==void 0)if(i.li!==void 0)delete i.ld;else return f}}else if(e.lm!==void 0)if(i.lm!==void 0&&a===o){var g=i.p[n],p=i.lm,b=e.p[n],y=e.lm;if(b!==y)if(g===b)if(t==="left")i.p[n]=y,g===p&&(i.lm=y);else return f;else g>b&&i.p[n]--,g>y?i.p[n]++:g===y&&b>y&&(i.p[n]++,g===p&&i.lm++),(p>b||p===b&&p>g)&&i.lm--,p>y?i.lm++:p===y&&(y>b&&p>g||y<b&&p<g?t==="right"&&i.lm++:p>g?i.lm++:p===b&&i.lm--)}else if(i.li!==void 0&&i.ld===void 0&&u){var g=e.p[n],p=e.lm;h=i.p[n],h>g&&i.p[n]--,h>p&&i.p[n]++}else{var g=e.p[n],p=e.lm;h=i.p[n],h===g?i.p[n]=p:(h>g&&i.p[n]--,(h>p||h===p&&g>p)&&i.p[n]++)}else if(e.oi!==void 0&&e.od!==void 0){if(i.p[n]===e.p[n])if(i.oi!==void 0&&u){if(t==="right")return f;i.od=e.oi}else return f}else if(e.oi!==void 0){if(i.oi!==void 0&&i.p[n]===e.p[n])if(t==="left")Ie.append(f,{p:i.p,od:e.oi});else return f}else if(e.od!==void 0&&i.p[n]==e.p[n]){if(!u)return f;if(i.oi!==void 0)delete i.od;else return f}}}return Ie.append(f,i),f},Fc(Ie,Ie.transformComponent,Ie.checkValidOp,Ie.append);var cm=zc.exports;Ie.registerSubtype(cm);var fm=Ie,Si={type:fm},ua={exports:{}};(function(f){var i=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},e=-1,t=1,n=0;i.Diff=function(r,a){return[r,a]},i.prototype.diff_main=function(r,a,o,l){typeof l=="undefined"&&(this.Diff_Timeout<=0?l=Number.MAX_VALUE:l=new Date().getTime()+this.Diff_Timeout*1e3);var u=l;if(r==null||a==null)throw new Error("Null input. (diff_main)");if(r==a)return r?[new i.Diff(n,r)]:[];typeof o=="undefined"&&(o=!0);var c=o,h=this.diff_commonPrefix(r,a),v=r.substring(0,h);r=r.substring(h),a=a.substring(h),h=this.diff_commonSuffix(r,a);var g=r.substring(r.length-h);r=r.substring(0,r.length-h),a=a.substring(0,a.length-h);var p=this.diff_compute_(r,a,c,u);return v&&p.unshift(new i.Diff(n,v)),g&&p.push(new i.Diff(n,g)),this.diff_cleanupMerge(p),p},i.prototype.diff_compute_=function(r,a,o,l){var u;if(!r)return[new i.Diff(t,a)];if(!a)return[new i.Diff(e,r)];var c=r.length>a.length?r:a,h=r.length>a.length?a:r,v=c.indexOf(h);if(v!=-1)return u=[new i.Diff(t,c.substring(0,v)),new i.Diff(n,h),new i.Diff(t,c.substring(v+h.length))],r.length>a.length&&(u[0][0]=u[2][0]=e),u;if(h.length==1)return[new i.Diff(e,r),new i.Diff(t,a)];var g=this.diff_halfMatch_(r,a);if(g){var p=g[0],b=g[1],y=g[2],k=g[3],E=g[4],_=this.diff_main(p,y,o,l),T=this.diff_main(b,k,o,l);return _.concat([new i.Diff(n,E)],T)}return o&&r.length>100&&a.length>100?this.diff_lineMode_(r,a,l):this.diff_bisect_(r,a,l)},i.prototype.diff_lineMode_=function(r,a,o){var l=this.diff_linesToChars_(r,a);r=l.chars1,a=l.chars2;var u=l.lineArray,c=this.diff_main(r,a,!1,o);this.diff_charsToLines_(c,u),this.diff_cleanupSemantic(c),c.push(new i.Diff(n,""));for(var h=0,v=0,g=0,p="",b="";h<c.length;){switch(c[h][0]){case t:g++,b+=c[h][1];break;case e:v++,p+=c[h][1];break;case n:if(v>=1&&g>=1){c.splice(h-v-g,v+g),h=h-v-g;for(var y=this.diff_main(p,b,!1,o),k=y.length-1;k>=0;k--)c.splice(h,0,y[k]);h=h+y.length}g=0,v=0,p="",b="";break}h++}return c.pop(),c},i.prototype.diff_bisect_=function(r,a,o){for(var l=r.length,u=a.length,c=Math.ceil((l+u)/2),h=c,v=2*c,g=new Array(v),p=new Array(v),b=0;b<v;b++)g[b]=-1,p[b]=-1;g[h+1]=0,p[h+1]=0;for(var y=l-u,k=y%2!=0,E=0,_=0,T=0,x=0,C=0;C<c&&!(new Date().getTime()>o);C++){for(var S=-C+E;S<=C-_;S+=2){var R=h+S,z;S==-C||S!=C&&g[R-1]<g[R+1]?z=g[R+1]:z=g[R-1]+1;for(var F=z-S;z<l&&F<u&&r.charAt(z)==a.charAt(F);)z++,F++;if(g[R]=z,z>l)_+=2;else if(F>u)E+=2;else if(k){var G=h+y-S;if(G>=0&&G<v&&p[G]!=-1){var M=l-p[G];if(z>=M)return this.diff_bisectSplit_(r,a,z,F,o)}}}for(var O=-C+T;O<=C-x;O+=2){var G=h+O,M;O==-C||O!=C&&p[G-1]<p[G+1]?M=p[G+1]:M=p[G-1]+1;for(var A=M-O;M<l&&A<u&&r.charAt(l-M-1)==a.charAt(u-A-1);)M++,A++;if(p[G]=M,M>l)x+=2;else if(A>u)T+=2;else if(!k){var R=h+y-O;if(R>=0&&R<v&&g[R]!=-1){var z=g[R],F=h+z-R;if(M=l-M,z>=M)return this.diff_bisectSplit_(r,a,z,F,o)}}}}return[new i.Diff(e,r),new i.Diff(t,a)]},i.prototype.diff_bisectSplit_=function(r,a,o,l,u){var c=r.substring(0,o),h=a.substring(0,l),v=r.substring(o),g=a.substring(l),p=this.diff_main(c,h,!1,u),b=this.diff_main(v,g,!1,u);return p.concat(b)},i.prototype.diff_linesToChars_=function(r,a){var o=[],l={};o[0]="";function u(g){for(var p="",b=0,y=-1,k=o.length;y<g.length-1;){y=g.indexOf(`
`,b),y==-1&&(y=g.length-1);var E=g.substring(b,y+1);(l.hasOwnProperty?l.hasOwnProperty(E):l[E]!==void 0)?p+=String.fromCharCode(l[E]):(k==c&&(E=g.substring(b),y=g.length),p+=String.fromCharCode(k),l[E]=k,o[k++]=E),b=y+1}return p}var c=4e4,h=u(r);c=65535;var v=u(a);return{chars1:h,chars2:v,lineArray:o}},i.prototype.diff_charsToLines_=function(r,a){for(var o=0;o<r.length;o++){for(var l=r[o][1],u=[],c=0;c<l.length;c++)u[c]=a[l.charCodeAt(c)];r[o][1]=u.join("")}},i.prototype.diff_commonPrefix=function(r,a){if(!r||!a||r.charAt(0)!=a.charAt(0))return 0;for(var o=0,l=Math.min(r.length,a.length),u=l,c=0;o<u;)r.substring(c,u)==a.substring(c,u)?(o=u,c=o):l=u,u=Math.floor((l-o)/2+o);return u},i.prototype.diff_commonSuffix=function(r,a){if(!r||!a||r.charAt(r.length-1)!=a.charAt(a.length-1))return 0;for(var o=0,l=Math.min(r.length,a.length),u=l,c=0;o<u;)r.substring(r.length-u,r.length-c)==a.substring(a.length-u,a.length-c)?(o=u,c=o):l=u,u=Math.floor((l-o)/2+o);return u},i.prototype.diff_commonOverlap_=function(r,a){var o=r.length,l=a.length;if(o==0||l==0)return 0;o>l?r=r.substring(o-l):o<l&&(a=a.substring(0,o));var u=Math.min(o,l);if(r==a)return u;for(var c=0,h=1;;){var v=r.substring(u-h),g=a.indexOf(v);if(g==-1)return c;h+=g,(g==0||r.substring(u-h)==a.substring(0,h))&&(c=h,h++)}},i.prototype.diff_halfMatch_=function(r,a){if(this.Diff_Timeout<=0)return null;var o=r.length>a.length?r:a,l=r.length>a.length?a:r;if(o.length<4||l.length*2<o.length)return null;var u=this;function c(_,T,x){for(var C=_.substring(x,x+Math.floor(_.length/4)),S=-1,R="",z,F,G,M;(S=T.indexOf(C,S+1))!=-1;){var O=u.diff_commonPrefix(_.substring(x),T.substring(S)),A=u.diff_commonSuffix(_.substring(0,x),T.substring(0,S));R.length<A+O&&(R=T.substring(S-A,S)+T.substring(S,S+O),z=_.substring(0,x-A),F=_.substring(x+O),G=T.substring(0,S-A),M=T.substring(S+O))}return R.length*2>=_.length?[z,F,G,M,R]:null}var h=c(o,l,Math.ceil(o.length/4)),v=c(o,l,Math.ceil(o.length/2)),g;if(!h&&!v)return null;v?h?g=h[4].length>v[4].length?h:v:g=v:g=h;var p,b,y,k;r.length>a.length?(p=g[0],b=g[1],y=g[2],k=g[3]):(y=g[0],k=g[1],p=g[2],b=g[3]);var E=g[4];return[p,b,y,k,E]},i.prototype.diff_cleanupSemantic=function(r){for(var a=!1,o=[],l=0,u=null,c=0,h=0,v=0,g=0,p=0;c<r.length;)r[c][0]==n?(o[l++]=c,h=g,v=p,g=0,p=0,u=r[c][1]):(r[c][0]==t?g+=r[c][1].length:p+=r[c][1].length,u&&u.length<=Math.max(h,v)&&u.length<=Math.max(g,p)&&(r.splice(o[l-1],0,new i.Diff(e,u)),r[o[l-1]+1][0]=t,l--,l--,c=l>0?o[l-1]:-1,h=0,v=0,g=0,p=0,u=null,a=!0)),c++;for(a&&this.diff_cleanupMerge(r),this.diff_cleanupSemanticLossless(r),c=1;c<r.length;){if(r[c-1][0]==e&&r[c][0]==t){var b=r[c-1][1],y=r[c][1],k=this.diff_commonOverlap_(b,y),E=this.diff_commonOverlap_(y,b);k>=E?(k>=b.length/2||k>=y.length/2)&&(r.splice(c,0,new i.Diff(n,y.substring(0,k))),r[c-1][1]=b.substring(0,b.length-k),r[c+1][1]=y.substring(k),c++):(E>=b.length/2||E>=y.length/2)&&(r.splice(c,0,new i.Diff(n,b.substring(0,E))),r[c-1][0]=t,r[c-1][1]=y.substring(0,y.length-E),r[c+1][0]=e,r[c+1][1]=b.substring(E),c++),c++}c++}},i.prototype.diff_cleanupSemanticLossless=function(r){function a(E,_){if(!E||!_)return 6;var T=E.charAt(E.length-1),x=_.charAt(0),C=T.match(i.nonAlphaNumericRegex_),S=x.match(i.nonAlphaNumericRegex_),R=C&&T.match(i.whitespaceRegex_),z=S&&x.match(i.whitespaceRegex_),F=R&&T.match(i.linebreakRegex_),G=z&&x.match(i.linebreakRegex_),M=F&&E.match(i.blanklineEndRegex_),O=G&&_.match(i.blanklineStartRegex_);return M||O?5:F||G?4:C&&!R&&z?3:R||z?2:C||S?1:0}for(var o=1;o<r.length-1;){if(r[o-1][0]==n&&r[o+1][0]==n){var l=r[o-1][1],u=r[o][1],c=r[o+1][1],h=this.diff_commonSuffix(l,u);if(h){var v=u.substring(u.length-h);l=l.substring(0,l.length-h),u=v+u.substring(0,u.length-h),c=v+c}for(var g=l,p=u,b=c,y=a(l,u)+a(u,c);u.charAt(0)===c.charAt(0);){l+=u.charAt(0),u=u.substring(1)+c.charAt(0),c=c.substring(1);var k=a(l,u)+a(u,c);k>=y&&(y=k,g=l,p=u,b=c)}r[o-1][1]!=g&&(g?r[o-1][1]=g:(r.splice(o-1,1),o--),r[o][1]=p,b?r[o+1][1]=b:(r.splice(o+1,1),o--))}o++}},i.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,i.whitespaceRegex_=/\s/,i.linebreakRegex_=/[\r\n]/,i.blanklineEndRegex_=/\n\r?\n$/,i.blanklineStartRegex_=/^\r?\n\r?\n/,i.prototype.diff_cleanupEfficiency=function(r){for(var a=!1,o=[],l=0,u=null,c=0,h=!1,v=!1,g=!1,p=!1;c<r.length;)r[c][0]==n?(r[c][1].length<this.Diff_EditCost&&(g||p)?(o[l++]=c,h=g,v=p,u=r[c][1]):(l=0,u=null),g=p=!1):(r[c][0]==e?p=!0:g=!0,u&&(h&&v&&g&&p||u.length<this.Diff_EditCost/2&&h+v+g+p==3)&&(r.splice(o[l-1],0,new i.Diff(e,u)),r[o[l-1]+1][0]=t,l--,u=null,h&&v?(g=p=!0,l=0):(l--,c=l>0?o[l-1]:-1,g=p=!1),a=!0)),c++;a&&this.diff_cleanupMerge(r)},i.prototype.diff_cleanupMerge=function(r){r.push(new i.Diff(n,""));for(var a=0,o=0,l=0,u="",c="",h;a<r.length;)switch(r[a][0]){case t:l++,c+=r[a][1],a++;break;case e:o++,u+=r[a][1],a++;break;case n:o+l>1?(o!==0&&l!==0&&(h=this.diff_commonPrefix(c,u),h!==0&&(a-o-l>0&&r[a-o-l-1][0]==n?r[a-o-l-1][1]+=c.substring(0,h):(r.splice(0,0,new i.Diff(n,c.substring(0,h))),a++),c=c.substring(h),u=u.substring(h)),h=this.diff_commonSuffix(c,u),h!==0&&(r[a][1]=c.substring(c.length-h)+r[a][1],c=c.substring(0,c.length-h),u=u.substring(0,u.length-h))),a-=o+l,r.splice(a,o+l),u.length&&(r.splice(a,0,new i.Diff(e,u)),a++),c.length&&(r.splice(a,0,new i.Diff(t,c)),a++),a++):a!==0&&r[a-1][0]==n?(r[a-1][1]+=r[a][1],r.splice(a,1)):a++,l=0,o=0,u="",c="";break}r[r.length-1][1]===""&&r.pop();var v=!1;for(a=1;a<r.length-1;)r[a-1][0]==n&&r[a+1][0]==n&&(r[a][1].substring(r[a][1].length-r[a-1][1].length)==r[a-1][1]?(r[a][1]=r[a-1][1]+r[a][1].substring(0,r[a][1].length-r[a-1][1].length),r[a+1][1]=r[a-1][1]+r[a+1][1],r.splice(a-1,1),v=!0):r[a][1].substring(0,r[a+1][1].length)==r[a+1][1]&&(r[a-1][1]+=r[a+1][1],r[a][1]=r[a][1].substring(r[a+1][1].length)+r[a+1][1],r.splice(a+1,1),v=!0)),a++;v&&this.diff_cleanupMerge(r)},i.prototype.diff_xIndex=function(r,a){var o=0,l=0,u=0,c=0,h;for(h=0;h<r.length&&(r[h][0]!==t&&(o+=r[h][1].length),r[h][0]!==e&&(l+=r[h][1].length),!(o>a));h++)u=o,c=l;return r.length!=h&&r[h][0]===e?c:c+(a-u)},i.prototype.diff_prettyHtml=function(r){for(var a=[],o=/&/g,l=/</g,u=/>/g,c=/\n/g,h=0;h<r.length;h++){var v=r[h][0],g=r[h][1],p=g.replace(o,"&amp;").replace(l,"&lt;").replace(u,"&gt;").replace(c,"&para;<br>");switch(v){case t:a[h]='<ins style="background:#e6ffe6;">'+p+"</ins>";break;case e:a[h]='<del style="background:#ffe6e6;">'+p+"</del>";break;case n:a[h]="<span>"+p+"</span>";break}}return a.join("")},i.prototype.diff_text1=function(r){for(var a=[],o=0;o<r.length;o++)r[o][0]!==t&&(a[o]=r[o][1]);return a.join("")},i.prototype.diff_text2=function(r){for(var a=[],o=0;o<r.length;o++)r[o][0]!==e&&(a[o]=r[o][1]);return a.join("")},i.prototype.diff_levenshtein=function(r){for(var a=0,o=0,l=0,u=0;u<r.length;u++){var c=r[u][0],h=r[u][1];switch(c){case t:o+=h.length;break;case e:l+=h.length;break;case n:a+=Math.max(o,l),o=0,l=0;break}}return a+=Math.max(o,l),a},i.prototype.diff_toDelta=function(r){for(var a=[],o=0;o<r.length;o++)switch(r[o][0]){case t:a[o]="+"+encodeURI(r[o][1]);break;case e:a[o]="-"+r[o][1].length;break;case n:a[o]="="+r[o][1].length;break}return a.join("	").replace(/%20/g," ")},i.prototype.diff_fromDelta=function(r,a){for(var o=[],l=0,u=0,c=a.split(/\t/g),h=0;h<c.length;h++){var v=c[h].substring(1);switch(c[h].charAt(0)){case"+":try{o[l++]=new i.Diff(t,decodeURI(v))}catch{throw new Error("Illegal escape in diff_fromDelta: "+v)}break;case"-":case"=":var g=parseInt(v,10);if(isNaN(g)||g<0)throw new Error("Invalid number in diff_fromDelta: "+v);var p=r.substring(u,u+=g);c[h].charAt(0)=="="?o[l++]=new i.Diff(n,p):o[l++]=new i.Diff(e,p);break;default:if(c[h])throw new Error("Invalid diff operation in diff_fromDelta: "+c[h])}}if(u!=r.length)throw new Error("Delta length ("+u+") does not equal source text length ("+r.length+").");return o},i.prototype.match_main=function(r,a,o){if(r==null||a==null||o==null)throw new Error("Null input. (match_main)");return o=Math.max(0,Math.min(o,r.length)),r==a?0:r.length?r.substring(o,o+a.length)==a?o:this.match_bitap_(r,a,o):-1},i.prototype.match_bitap_=function(r,a,o){if(a.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(a),u=this;function c(z,F){var G=z/a.length,M=Math.abs(o-F);return u.Match_Distance?G+M/u.Match_Distance:M?1:G}var h=this.Match_Threshold,v=r.indexOf(a,o);v!=-1&&(h=Math.min(c(0,v),h),v=r.lastIndexOf(a,o+a.length),v!=-1&&(h=Math.min(c(0,v),h)));var g=1<<a.length-1;v=-1;for(var p,b,y=a.length+r.length,k,E=0;E<a.length;E++){for(p=0,b=y;p<b;)c(E,o+b)<=h?p=b:y=b,b=Math.floor((y-p)/2+p);y=b;var _=Math.max(1,o-b+1),T=Math.min(o+b,r.length)+a.length,x=Array(T+2);x[T+1]=(1<<E)-1;for(var C=T;C>=_;C--){var S=l[r.charAt(C-1)];if(E===0?x[C]=(x[C+1]<<1|1)&S:x[C]=(x[C+1]<<1|1)&S|((k[C+1]|k[C])<<1|1)|k[C+1],x[C]&g){var R=c(E,C-1);if(R<=h)if(h=R,v=C-1,v>o)_=Math.max(1,2*o-v);else break}}if(c(E+1,o)>h)break;k=x}return v},i.prototype.match_alphabet_=function(r){for(var a={},o=0;o<r.length;o++)a[r.charAt(o)]=0;for(var o=0;o<r.length;o++)a[r.charAt(o)]|=1<<r.length-o-1;return a},i.prototype.patch_addContext_=function(r,a){if(a.length!=0){if(r.start2===null)throw Error("patch not initialized");for(var o=a.substring(r.start2,r.start2+r.length1),l=0;a.indexOf(o)!=a.lastIndexOf(o)&&o.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,o=a.substring(r.start2-l,r.start2+r.length1+l);l+=this.Patch_Margin;var u=a.substring(r.start2-l,r.start2);u&&r.diffs.unshift(new i.Diff(n,u));var c=a.substring(r.start2+r.length1,r.start2+r.length1+l);c&&r.diffs.push(new i.Diff(n,c)),r.start1-=u.length,r.start2-=u.length,r.length1+=u.length+c.length,r.length2+=u.length+c.length}},i.prototype.patch_make=function(r,a,o){var l,u;if(typeof r=="string"&&typeof a=="string"&&typeof o=="undefined")l=r,u=this.diff_main(l,a,!0),u.length>2&&(this.diff_cleanupSemantic(u),this.diff_cleanupEfficiency(u));else if(r&&typeof r=="object"&&typeof a=="undefined"&&typeof o=="undefined")u=r,l=this.diff_text1(u);else if(typeof r=="string"&&a&&typeof a=="object"&&typeof o=="undefined")l=r,u=a;else if(typeof r=="string"&&typeof a=="string"&&o&&typeof o=="object")l=r,u=o;else throw new Error("Unknown call format to patch_make.");if(u.length===0)return[];for(var c=[],h=new i.patch_obj,v=0,g=0,p=0,b=l,y=l,k=0;k<u.length;k++){var E=u[k][0],_=u[k][1];switch(!v&&E!==n&&(h.start1=g,h.start2=p),E){case t:h.diffs[v++]=u[k],h.length2+=_.length,y=y.substring(0,p)+_+y.substring(p);break;case e:h.length1+=_.length,h.diffs[v++]=u[k],y=y.substring(0,p)+y.substring(p+_.length);break;case n:_.length<=2*this.Patch_Margin&&v&&u.length!=k+1?(h.diffs[v++]=u[k],h.length1+=_.length,h.length2+=_.length):_.length>=2*this.Patch_Margin&&v&&(this.patch_addContext_(h,b),c.push(h),h=new i.patch_obj,v=0,b=y,g=p);break}E!==t&&(g+=_.length),E!==e&&(p+=_.length)}return v&&(this.patch_addContext_(h,b),c.push(h)),c},i.prototype.patch_deepCopy=function(r){for(var a=[],o=0;o<r.length;o++){var l=r[o],u=new i.patch_obj;u.diffs=[];for(var c=0;c<l.diffs.length;c++)u.diffs[c]=new i.Diff(l.diffs[c][0],l.diffs[c][1]);u.start1=l.start1,u.start2=l.start2,u.length1=l.length1,u.length2=l.length2,a[o]=u}return a},i.prototype.patch_apply=function(r,a){if(r.length==0)return[a,[]];r=this.patch_deepCopy(r);var o=this.patch_addPadding(r);a=o+a+o,this.patch_splitMax(r);for(var l=0,u=[],c=0;c<r.length;c++){var h=r[c].start2+l,v=this.diff_text1(r[c].diffs),g,p=-1;if(v.length>this.Match_MaxBits?(g=this.match_main(a,v.substring(0,this.Match_MaxBits),h),g!=-1&&(p=this.match_main(a,v.substring(v.length-this.Match_MaxBits),h+v.length-this.Match_MaxBits),(p==-1||g>=p)&&(g=-1))):g=this.match_main(a,v,h),g==-1)u[c]=!1,l-=r[c].length2-r[c].length1;else{u[c]=!0,l=g-h;var b;if(p==-1?b=a.substring(g,g+v.length):b=a.substring(g,p+this.Match_MaxBits),v==b)a=a.substring(0,g)+this.diff_text2(r[c].diffs)+a.substring(g+v.length);else{var y=this.diff_main(v,b,!1);if(v.length>this.Match_MaxBits&&this.diff_levenshtein(y)/v.length>this.Patch_DeleteThreshold)u[c]=!1;else{this.diff_cleanupSemanticLossless(y);for(var k=0,E,_=0;_<r[c].diffs.length;_++){var T=r[c].diffs[_];T[0]!==n&&(E=this.diff_xIndex(y,k)),T[0]===t?a=a.substring(0,g+E)+T[1]+a.substring(g+E):T[0]===e&&(a=a.substring(0,g+E)+a.substring(g+this.diff_xIndex(y,k+T[1].length))),T[0]!==e&&(k+=T[1].length)}}}}}return a=a.substring(o.length,a.length-o.length),[a,u]},i.prototype.patch_addPadding=function(r){for(var a=this.Patch_Margin,o="",l=1;l<=a;l++)o+=String.fromCharCode(l);for(var l=0;l<r.length;l++)r[l].start1+=a,r[l].start2+=a;var u=r[0],c=u.diffs;if(c.length==0||c[0][0]!=n)c.unshift(new i.Diff(n,o)),u.start1-=a,u.start2-=a,u.length1+=a,u.length2+=a;else if(a>c[0][1].length){var h=a-c[0][1].length;c[0][1]=o.substring(c[0][1].length)+c[0][1],u.start1-=h,u.start2-=h,u.length1+=h,u.length2+=h}if(u=r[r.length-1],c=u.diffs,c.length==0||c[c.length-1][0]!=n)c.push(new i.Diff(n,o)),u.length1+=a,u.length2+=a;else if(a>c[c.length-1][1].length){var h=a-c[c.length-1][1].length;c[c.length-1][1]+=o.substring(0,h),u.length1+=h,u.length2+=h}return o},i.prototype.patch_splitMax=function(r){for(var a=this.Match_MaxBits,o=0;o<r.length;o++)if(!(r[o].length1<=a)){var l=r[o];r.splice(o--,1);for(var u=l.start1,c=l.start2,h="";l.diffs.length!==0;){var v=new i.patch_obj,g=!0;for(v.start1=u-h.length,v.start2=c-h.length,h!==""&&(v.length1=v.length2=h.length,v.diffs.push(new i.Diff(n,h)));l.diffs.length!==0&&v.length1<a-this.Patch_Margin;){var p=l.diffs[0][0],b=l.diffs[0][1];p===t?(v.length2+=b.length,c+=b.length,v.diffs.push(l.diffs.shift()),g=!1):p===e&&v.diffs.length==1&&v.diffs[0][0]==n&&b.length>2*a?(v.length1+=b.length,u+=b.length,g=!1,v.diffs.push(new i.Diff(p,b)),l.diffs.shift()):(b=b.substring(0,a-v.length1-this.Patch_Margin),v.length1+=b.length,u+=b.length,p===n?(v.length2+=b.length,c+=b.length):g=!1,v.diffs.push(new i.Diff(p,b)),b==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(b.length))}h=this.diff_text2(v.diffs),h=h.substring(h.length-this.Patch_Margin);var y=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);y!==""&&(v.length1+=y.length,v.length2+=y.length,v.diffs.length!==0&&v.diffs[v.diffs.length-1][0]===n?v.diffs[v.diffs.length-1][1]+=y:v.diffs.push(new i.Diff(n,y))),g||r.splice(++o,0,v)}}},i.prototype.patch_toText=function(r){for(var a=[],o=0;o<r.length;o++)a[o]=r[o];return a.join("")},i.prototype.patch_fromText=function(r){var a=[];if(!r)return a;for(var o=r.split(`
`),l=0,u=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<o.length;){var c=o[l].match(u);if(!c)throw new Error("Invalid patch string: "+o[l]);var h=new i.patch_obj;for(a.push(h),h.start1=parseInt(c[1],10),c[2]===""?(h.start1--,h.length1=1):c[2]=="0"?h.length1=0:(h.start1--,h.length1=parseInt(c[2],10)),h.start2=parseInt(c[3],10),c[4]===""?(h.start2--,h.length2=1):c[4]=="0"?h.length2=0:(h.start2--,h.length2=parseInt(c[4],10)),l++;l<o.length;){var v=o[l].charAt(0);try{var g=decodeURI(o[l].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+g)}if(v=="-")h.diffs.push(new i.Diff(e,g));else if(v=="+")h.diffs.push(new i.Diff(t,g));else if(v==" ")h.diffs.push(new i.Diff(n,g));else{if(v=="@")break;if(v!=="")throw new Error('Invalid patch mode "'+v+'" in: '+g)}l++}}return a},i.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},i.patch_obj.prototype.toString=function(){var r,a;this.length1===0?r=this.start1+",0":this.length1==1?r=this.start1+1:r=this.start1+1+","+this.length1,this.length2===0?a=this.start2+",0":this.length2==1?a=this.start2+1:a=this.start2+1+","+this.length2;for(var o=["@@ -"+r+" +"+a+` @@
`],l,u=0;u<this.diffs.length;u++){switch(this.diffs[u][0]){case t:l="+";break;case e:l="-";break;case n:l=" ";break}o[u+1]=l+encodeURI(this.diffs[u][1])+`
`}return o.join("").replace(/%20/g," ")},f.exports=i,f.exports.diff_match_patch=i,f.exports.DIFF_DELETE=e,f.exports.DIFF_INSERT=t,f.exports.DIFF_EQUAL=n})(ua);var dm=function(){var f=document.getSelection();if(!f.rangeCount)return function(){};for(var i=document.activeElement,e=[],t=0;t<f.rangeCount;t++)e.push(f.getRangeAt(t));switch(i.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":i.blur();break;default:i=null;break}return f.removeAllRanges(),function(){f.type==="Caret"&&f.removeAllRanges(),f.rangeCount||e.forEach(function(n){f.addRange(n)}),i&&i.focus()}},hm=dm,Uc={"text/plain":"Text","text/html":"Url",default:"Text"},vm="Copy to clipboard: #{key}, Enter";function gm(f){var i=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return f.replace(/#{\s*key\s*}/g,i)}function pm(f,i){var e,t,n,r,a,o,l=!1;i||(i={}),e=i.debug||!1;try{n=hm(),r=document.createRange(),a=document.getSelection(),o=document.createElement("span"),o.textContent=f,o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(c){if(c.stopPropagation(),i.format)if(c.preventDefault(),typeof c.clipboardData=="undefined"){e&&console.warn("unable to use e.clipboardData"),e&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var h=Uc[i.format]||Uc.default;window.clipboardData.setData(h,f)}else c.clipboardData.clearData(),c.clipboardData.setData(i.format,f);i.onCopy&&(c.preventDefault(),i.onCopy(c.clipboardData))}),document.body.appendChild(o),r.selectNodeContents(o),a.addRange(r);var u=document.execCommand("copy");if(!u)throw new Error("copy command was unsuccessful");l=!0}catch(c){e&&console.error("unable to copy using execCommand: ",c),e&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(i.format||"text",f),i.onCopy&&i.onCopy(window.clipboardData),l=!0}catch(h){e&&console.error("unable to copy using clipboardData: ",h),e&&console.error("falling back to prompt"),t=gm("message"in i?i.message:vm),window.prompt(t,f)}}finally{a&&(typeof a.removeRange=="function"?a.removeRange(r):a.removeAllRanges()),o&&document.body.removeChild(o),n()}return l}var mm=pm,bm={exports:{}};/*!
 2020 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 6.4.0
*/(function(f,i){(function(e,t){f.exports=t()})(En,function(){var e=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},n={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function a(o){var l,u,c,h,v,g,p,b,y,k,E,_,T,x,C,S,R,z,F,G,M,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=[],I=0;if(isNaN(o))throw new TypeError("Invalid number");if(c=O.bits===!0,C=O.unix===!0,_=O.pad===!0,u=O.base||2,T=O.round!==void 0?O.round:C?1:2,p=O.locale!==void 0?O.locale:"",b=O.localeOptions||{},S=O.separator!==void 0?O.separator:"",R=O.spacer!==void 0?O.spacer:C?"":" ",F=O.symbols||{},z=u===2&&O.standard||"jedec",E=O.output||"string",v=O.fullform===!0,g=O.fullforms instanceof Array?O.fullforms:[],l=O.exponent!==void 0?O.exponent:-1,G=r[O.roundingMethod]||Math.round,y=(k=Number(o))<0,h=u>2?1e3:1024,M=isNaN(O.precision)===!1?parseInt(O.precision,10):0,y&&(k=-k),(l===-1||isNaN(l))&&(l=Math.floor(Math.log(k)/Math.log(h)))<0&&(l=0),l>8&&(M>0&&(M+=8-l),l=8),E==="exponent")return l;if(k===0)A[0]=0,x=A[1]=C?"":t[z][c?"bits":"bytes"][l];else{I=k/(u===2?Math.pow(2,10*l):Math.pow(1e3,l)),c&&(I*=8)>=h&&l<8&&(I/=h,l++);var $=Math.pow(10,l>0?T:0);A[0]=G(I*$)/$,A[0]===h&&l<8&&O.exponent===void 0&&(A[0]=1,l++),x=A[1]=u===10&&l===1?c?"kb":"kB":t[z][c?"bits":"bytes"][l],C&&(A[1]=z==="jedec"?A[1].charAt(0):l>0?A[1].replace(/B$/,""):A[1],e.test(A[1])&&(A[0]=Math.floor(A[0]),A[1]=""))}if(y&&(A[0]=-A[0]),M>0&&(A[0]=A[0].toPrecision(M)),A[1]=F[A[1]]||A[1],p===!0?A[0]=A[0].toLocaleString():p.length>0?A[0]=A[0].toLocaleString(p,b):S.length>0&&(A[0]=A[0].toString().replace(".",S)),_&&Number.isInteger(A[0])===!1&&T>0){var ie=S||".",N=A[0].toString().split(ie),P=N[1]||"",V=P.length,W=T-V;A[0]="".concat(N[0]).concat(ie).concat(P.padEnd(V+W,"0"))}return v&&(A[1]=g[l]?g[l]:n[z][l]+(c?"bit":"byte")+(A[0]===1?"":"s")),E==="array"?A:E==="object"?{value:A[0],symbol:A[1],exponent:l,unit:x}:A.join(R)}return a.partial=function(o){return function(l){return a(l,o)}},a})})(bm);var ym=function(){function f(i){if(be(this,f),this.options={limitHeight:5e3,canvasCache:[],canvasCount:0},!i.container)throw new Error("need a cantainer!");this.options=Ve(Ve({},this.options),i),i.container.style["line-height"]="0px"}return ke(f,[{key:"removeCanvas",value:function(){var e=this.options.canvasCache;e==null||e.forEach(function(t){var n;t==null||(n=t.parentElement)===null||n===void 0||n.removeChild(t)}),this.options.canvasCache=[]}},{key:"getCanvas",value:function(e){var t=this.options.canvasCache;return e=e>0?e-1:e,t?t[e]:void 0}},{key:"resize",value:function(e,t){var n=this.options,r=n.limitHeight,a=n.canvasCount,o=n.container,l=this.options.canvasCache,u=Math.ceil(t/(r||0));if(u!==a){this.removeCanvas(),l=[];for(var c=0;c<u;c++){var h=document.createElement("canvas");h.style["vertical-align"]="bottom",h.setAttribute("width",e.toString()),c===u-1?h.setAttribute("height",(t%(r||0)).toString()):h.setAttribute("height",(r||0).toString()),o==null||o.appendChild(h),l.push(h)}this.options.canvasCache=l}else{var v,g=this.getCanvas(u);(v=l)===null||v===void 0||v.forEach(function(p){p.setAttribute("width",e.toString())}),g&&g.setAttribute("height",(t%(r||0)).toString())}}},{key:"handleSingleRect",value:function(e){var t=e.x,n=e.y,r=e.index,a=e.width,o=e.height,l=e.callback,u=this.options.limitHeight,c=this.getCanvas(r);if(c){var h=c.getContext("2d"),v=new DOMRect(t,n-(u||0)*(r-1),a,o);l(Ve(Ve({},v.toJSON()),{},{context:h}))}}},{key:"drawRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.fill,l=e.stroke,u=function(v){var g=v.context;!g||(g.fillStyle=o===void 0?"#FFEC3D":o,g.strokeStyle=l===void 0?"#FFEC3D":l,g.fillRect(v.x,v.y,v.width,v.height))},c=new DOMRect(t,n,r,a);this.handleRect(Ve(Ve({},c.toJSON()),{},{callback:u}))}},{key:"handleRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.callback,l=this.options.limitHeight,u={x:t+r,y:n+a},c=Math.ceil(n/(l||0)),h=Math.ceil(u.y/(l||0)),v=new DOMRect(t,n,r,a);this.handleSingleRect(Ve(Ve({},v.toJSON()),{},{index:c,callback:o})),c!==h&&this.handleSingleRect(Ve(Ve({},v.toJSON()),{},{index:h,callback:o}))}},{key:"getImageData",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=this.options.limitHeight,l=Math.ceil(n/(o||0)),u=this.getCanvas(l),c=u==null?void 0:u.getContext("2d");return c==null?void 0:c.getImageData(t,n,r,a)}},{key:"clearRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=function(c){var h=c.context,v=c.x,g=c.y,p=c.width,b=c.height;h==null||h.clearRect(v,g,p,b)},l=new DOMRect(t,n,r,a);this.handleRect(Ve(Ve({},l.toJSON()),{},{callback:o}))}},{key:"clear",value:function(){var e=this.options.canvasCache;e==null||e.forEach(function(t){var n=t.getContext("2d"),r=Number(t.getAttribute("width")),a=Number(t.getAttribute("height"));n==null||n.clearRect(0,0,r,a)})}},{key:"destroy",value:function(){this.removeCanvas()}}]),f}(),Ae="data-element",qe="data-id",ir="root",Tr="[".concat(Ae,'="').concat(ir,'"]'),Ni="ui",Di="[".concat(Ae,'="').concat(Ni,'"]'),ei="editable",xt="[".concat(Ae,'="').concat(ei,'"]'),Vc="data-transient-attributes",uo="data-transient-element",Gs="am-engine",wm="am-engine-mobile",km="am-engine-view",jn="anchor",Gn="focus",Wn="cursor",Ws="span[".concat(Ae,"=").concat(jn,"],anchor"),$s="span[".concat(Ae,"=").concat(Gn,"],focus"),co="span[".concat(Ae,"=").concat(Wn,"],cursor"),Em="card",He="data-card-key",bt="data-ready-card",Ot="data-card-type",ar="data-card-value",lt="data-card-element",un="data-card-loading",or="data-card-editable",yt="div[".concat(He,"],span[").concat(He,"]"),Ri="div[".concat(bt,"],span[").concat(bt,"]"),Pt="span[".concat(lt,"=left]"),xm="div[".concat(lt,"=center],span[").concat(lt,"=center]"),Ft="span[".concat(lt,"=right]"),Hc="trigger-card-id",sr=(typeof navigator!="undefined"?navigator:window.navigator).userAgent.toLowerCase(),Ks=/edge/i.test(sr),Cm=!Ks&&/chrome/i.test(sr),_m=/firefox/i.test(sr),Zs=!Ks&&!Cm&&/safari/i.test(sr),ca=/mobile/i.test(sr),Am=/os [\.\_\d]+ like mac os/i.test(sr),jc=/android/i.test(sr);!Am&&/mac os x/i.test(sr),/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(sr);var Gc=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5;i<5&&(i=5);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<i;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},Ys;(function(f){f.UPPER="upper",f.LOWER="lower"})(Ys||(Ys={}));var Xs=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ys.LOWER;return i.split("-").map(function(t,n){return e==="upper"||n>0?t.charAt(0).toUpperCase()+t.substr(1):e==="lower"&&n===0?t.charAt(0).toLowerCase()+t.substr(1):t}).join("")},Wc=function(i){var e=function(r){var a=parseInt(r,10).toString(16).toUpperCase();return a.length>1?a:"0"+a},t=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi;return i.replace(t,function(n,r,a,o){return"#"+e(r)+e(a)+e(o)})},Tm=function(i){for(var e={},t=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g,n;n=t.exec(i);){var r=(n[1]||n[2]||n[4]||n[6]).toLowerCase(),a=(n[2]?n[3]:n[4]?n[5]:n[7])||"";e[r]=a}return e},$c=new Map,Oi=function(i){var e=i.replace(/\s+/g,""),t={};if(!e)return t;var n=$c.get(e);if(n)return Object.assign({},n);var r=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,a;for(i=i.toLowerCase();a=r.exec(i);){var o=a,l=Ai(o,3);l[0];var u=l[1],c=l[2];(u.endsWith("color")||c.includes("rgb"))&&(c=Wc(c)),t[u.trim()]=c.trim()}return $c.set(e,t),Object.assign({},t)},Sm=function(i,e){var t=Xs(e),n=window.getComputedStyle(i,null);return n?n[t]:""},ti=function(i){return(i||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Js=function(i){return(i||"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},Kc=function(i){return i.replace(/&dot;/g,".")},fo=function(i){var e;return i&&(e=/^((-?\d+)(\.\d+)?)/.exec(i))?Math.floor(parseFloat(e[1])*1e4)/1e4:0},Nm=function(i){var e="";try{e=encodeURIComponent(JSON.stringify(i||""))}catch{}return"data:".concat(e)},Zc=function(i){try{return i=i.substr(5),JSON.parse(decodeURIComponent(i))}catch{return{}}},Qs=function(i){return i.replace(/<anchor\s*\/>/gi,"<span ".concat(Ae,'="').concat(jn,'"></span>')).replace(/<focus\s*\/>/gi,"<span ".concat(Ae,'="').concat(Gn,'"></span>')).replace(/<cursor\s*\/>/gi,"<span ".concat(Ae,'="').concat(Wn,'"></span>')).replace(/(<card\s+[^>]+>).*?<\/card>/gi,function(e,t){var n=Tm(t),r=n.type,a=n.name,o=n.value,l=n.editable,u=r==="inline",c=u?"span":"div",h=["<".concat(c)];return h.push(" ".concat(Ot,'="').concat(r||"",'"')),h.push(" ".concat(bt,'="').concat(a||"",'"')),l!==""&&h.push(" ".concat(or,'="').concat(l||"false",'"')),Object.keys(n).forEach(function(v){v.indexOf("data-")===0&&v.indexOf("data-card")!==0&&h.push(" ".concat(v,'="').concat(n[v]||"",'"'))}),o!==void 0&&h.push(" ".concat(ar,'="').concat(o,'"')),h.push("></".concat(c,">")),h.join("")})},Dm=function(i){return typeof i!="string"||(i=i.toLowerCase(),i.startsWith("data:text/html"))||!i.match(/^\S*$/)?!1:!!(["http:","https:","data:","ftp:"].some(function(e){return i.startsWith(e)})||i.startsWith("./")||i.startsWith("/")||i.indexOf(":")<0)},Yc=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!(e=+e))return"\u2022";switch(i==null?void 0:i.toLowerCase()){case"disc":return"\u2022";case"circle":return"\u25E6";case"square":return"\u25FC";case"lower-alpha":return String.fromCharCode("a".charCodeAt(0)+e);case"lower-roman":return String.fromCharCode(8559+e);case"decimal":default:return e}},wt=function(i){if(typeof document=="undefined"&&typeof global.__amWindow=="undefined")throw"document is not defined,If you are using ssr, you can assign a value to the `__amWindow` global variable.";return i?i.ownerDocument||i.document||i:typeof document=="undefined"?global.__amWindow.document:document},Rm=function(i){i instanceof Node||(i=i[0]),i.normalize()},el=function(i){return i.nodeType===wt().ELEMENT_NODE&&i.getAttribute(Ae)===ir?void 0:i.parentNode||void 0},Ne=function(i){return i.kind==="engine"},ho=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",t=new Xp(e,{html:!0,typographer:!0,linkify:!0});return i.trigger("markdown-it",t),t},tl=function(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,r=e.renderer,a=e.options,o=!1,l=i.schema.getTags("blocks"),u="",c=[];return t.forEach(function(h,v){var g=h.type,p=h.tag,b=h.children,y=h.nesting,k=i.trigger("markdown-it-token",{token:h,markdown:e,callback:function(x){u+=x}});if(k===!1){o=!0;return}var E="";if(g==="inline"&&b?(E=r.renderInline(b,a,{}),n&&b.find(function(T){return T.type.endsWith("_open")})&&(o=!0)):typeof r.rules[g]!="undefined"?E=r.rules[g](t,v,a,{},r):E=r.renderToken(t,v,a),y===1)c.push(""),u+=E;else if(y===0)c.length===0?(u+=E,p&&!o&&(o=!0)):E&&(c[c.length-1]+=E);else if(y===-1){var _;c.length>0&&!c[c.length-1]&&l.includes(p)&&(c[c.length-1]+="<br />"),u+=(_=c[c.length-1])!==null&&_!==void 0?_:"",c.pop(),c.every(function(T){return!T})&&(c=[]),u+=E,!o&&p!=="p"&&(o=!0)}}),o&&u?u:null},$e={TAG_NAME:0,ATTRIBUTE:1,ELEMENT:2},lr="data-uuid",nl="data-color",Xc=function(){function f(){be(this,f),this.listeners={}}return ke(f,[{key:"on",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),(et(n)!=="object"||!n.once)&&this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=this.listeners[e];if(!!n){for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}}}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=this.listeners[e];if(a){var o=void 0;return a.every(function(l){return o=l.apply(void 0,n),typeof o!="boolean"||o!==!1}),o}}},{key:"destroy",value:function(){var e=this;Object.keys(this.listeners).forEach(function(t){e.listeners[t].forEach(function(n){e.off(t,n)})})}}]),f}(),At=function(i){return!!i&&i.get!==void 0},Om=function(i){return!!i&&i.entries!==void 0},je=function(i){return!!i&&i.nodeType!==void 0},rl=function(i,e){if(i.nodeType!==Node.ELEMENT_NODE||!e)return!1;var t=function(a,o){for(var l,u=(l=wt(a))===null||l===void 0?void 0:l.querySelectorAll(o),c=u?u.length:0;--c>=0&&(u==null?void 0:u.item(c))!==a;);return c>-1},n=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.matchesSelector||t;return n.call(i,e)},qi=function(i){return i.nodeName===Em||!!i.getAttribute(Ot)},qm=function(i){return i.getAttribute(Ot)==="block"},Lm=function(i){return i.getAttribute(Ot)==="inline"},fa=function(i){return i.getAttribute(Ae)===ei||i.getAttribute(or)==="true"||!!(i!=null&&i.querySelector(xt))},ni=function(i,e){return i.getAttribute(Ae)===ir&&(!e||i===e)},Im=function(i){return ni(i)||i.getAttribute(Ae)===ei},Bm=function(i,e){if(i.nodeType===Node.ELEMENT_NODE&&ni(i,e))return!1;var t=il(i,Tr);return!!t&&(!e||t===e)},Mm=function(i){var e=i.getAttribute(Ae);return!!e&&[jn,Gn,Wn].indexOf(e)>-1},il=function(i,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(r){return r.parentElement||void 0},n=i||void 0;n;){if(rl(n,e))return n;n=t(n)}return n},Jc=new Map;function ri(f,i){if(!f)return[];if(typeof f=="string"){if(!i||/<.+>/.test(f)){var e=f.indexOf("<tr")===0,t=f.indexOf("<td")===0;f=f.trim().replace(/<!--[^>]*-->/g,"");var n=Jc.get(f);if(n){if(e){var r=n.querySelector("tbody");return r?r.cloneNode(!0).childNodes:[]}if(t){var a=n.querySelector("tr");return a?a.cloneNode(!0).childNodes:[]}return n.cloneNode(!0).childNodes}e&&(f="<table><tbody>".concat(f,"</tbody></table>")),t&&(f="<table><tbody><tr>".concat(f,"</tr></tbody></table>"));var o=wt().createElement("div");if(o.innerHTML=f,Jc.set(f,o.cloneNode(!0)),e){var l=o.querySelector("tbody");return l?l.childNodes:[]}if(t){var u=o.querySelector("tr");return u?u.childNodes:[]}return o.childNodes}return i.querySelectorAll(f)}if(Om(f)||Array.isArray(f))return f;if(At(f)){var c=[];return f.each(function(b){c.push(b)}),c}if(je(f)&&f.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var h=[],v=_r(f.childNodes),g;try{for(v.s();!(g=v.n()).done;){var p=g.value;h.push(p)}}catch(b){v.e(b)}finally{v.f()}return h}return[f]}var Pm=function(){function f(i,e){var t=this;be(this,f),this.events=[],this.document=null,this.context=void 0,this.name="",this.type=void 0,this.window=null,this.display=void 0,this.fragment=void 0,je(i)&&(i.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(this.fragment=i),i=[i]),i.forEach(function(o,l){t[l]=o,t.events[l]=new Xc});var n=this[0];if(n){this.document=wt(e),this.context=e;var r=n.nodeName,a=n.nodeType;this.name=r.toLowerCase(),this.type=a,this.window=this.document.defaultView||window}}return ke(f,[{key:"length",get:function(){for(var e=0;this[e];)e++;return e}},{key:"each",value:function(e){for(var t=0,n;(n=this[t])&&e(n,t)!==!1;)t++;return this}},{key:"toArray",value:function(){var e=[];return this.each(function(t){e.push(new f(t))}),e}},{key:"isElement",value:function(){return this.type===Node.ELEMENT_NODE}},{key:"isText",value:function(){return this.type===Node.TEXT_NODE}},{key:"isCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&qi(e)}},{key:"isBlockCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&qm(e)}},{key:"isInlineCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&Lm(e)}},{key:"isEditableCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&fa(e)}},{key:"isRoot",value:function(e){var t,n=this.get();return(n==null?void 0:n.nodeType)===Node.ELEMENT_NODE&&ni(n,e?(t=e[0])!==null&&t!==void 0?t:e:void 0)}},{key:"isEditable",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&Im(e)}},{key:"inEditor",value:function(e){var t,n=this.get();return!!n&&Bm(n,e?(t=e[0])!==null&&t!==void 0?t:e:void 0)}},{key:"isCursor",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&Mm(e)}},{key:"get",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.length===0?null:this[e]}},{key:"eq",value:function(e){return e>-1&&e<this.length?new f(this[e]):void 0}},{key:"index",value:function(){for(var e,t=(e=this.get())===null||e===void 0?void 0:e.previousSibling,n=0;t&&t.nodeType===Node.ELEMENT_NODE;)n++,t=t.previousSibling;return n}},{key:"parent",value:function(){var e,t=(e=this.get())===null||e===void 0?void 0:e.parentNode;return t?new f(t):void 0}},{key:"children",value:function(e){if(this.length===0)return new f([]);var t=this.get().childNodes;if(e){for(var n=[],r=0;r<t.length;r++){var a=t[r];rl(a,e)&&n.push(a)}return new f(n)}return new f(t)}},{key:"first",value:function(){var e;if(this.fragment)return this.eq(0)||null;var t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.firstChild;return t?new f(t):null}},{key:"last",value:function(){var e;if(this.fragment)return this.eq(this.length-1)||null;var t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.lastChild;return t?new f(t):null}},{key:"prev",value:function(){var e,t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.previousSibling;return t?new f(t):null}},{key:"next",value:function(){var e,t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.nextSibling;return t?new f(t):null}},{key:"prevElement",value:function(){var e=this.length===0?null:this.get().previousElementSibling;return e?new f(e):null}},{key:"nextElement",value:function(){var e=this.length===0?null:this.get().nextElementSibling;return e?new f(e):null}},{key:"getPath",value:function(e,t,n){e=e||document.body;var r=[];if(this.length>0){var a=this.getIndex(t);if(n){var o=n(a,r,this);o&&(r=o)}else r.unshift(a)}if(this.equal(e))return r;for(var l=this.parent();l&&!l.equal(e);){var u=l.getIndex(t);if(n){var c=n(u,r,l);c&&(r=c)}else r.unshift(u);l=l.parent()}return r}},{key:"contains",value:function(e){var t,n=je(e)?e:e.get();if(this.length===0)return!1;if(this.get().nodeType===Node.DOCUMENT_NODE&&((t=n)===null||t===void 0?void 0:t.nodeType)!==Node.DOCUMENT_NODE||n===this[0])return!0;for(;n=((r=n)===null||r===void 0?void 0:r.parentNode)||null;){var r;if(n===this[0])return!0}return!1}},{key:"find",value:function(e){if(this.length>0&&(this.isElement()||this.fragment)){var t,n=(t=this.fragment?this.fragment:this.get())===null||t===void 0?void 0:t.querySelectorAll(e);return new f(n||[])}return new f([])}},{key:"closest",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(a){return a.parentNode||void 0},n=[],r=this.get()||void 0;r;){if(rl(r,e))return n.push(r),new f(n);r=t(r)}return new f(n)}},{key:"on",value:function(e,t,n){var r=this;return this.each(function(a,o){a.addEventListener(e,t,n),r.events[o]&&r.events[o].on(e,t,n)}),this}},{key:"off",value:function(e,t,n){var r=this;return this.each(function(a,o){a.removeEventListener(e,t,n),r.events[o]&&r.events[o].off(e,t,n)}),this}},{key:"getBoundingClientRect",value:function(e){if(this.length!==0){try{var t=this.get(),n=t.getBoundingClientRect(),r=document.documentElement.clientTop,a=document.documentElement.clientLeft;return{top:n.top-r,bottom:n.bottom-r,left:n.left-a,right:n.right-a}}catch(o){console.error(o)}return e}}},{key:"removeAllEvents",value:function(){var e=this;return this.each(function(t,n){!e.events[n]||Object.keys(e.events[n].listeners).forEach(function(r){for(var a=e.events[n].listeners[r],o=0;o<a.length;o++)e.off(r,a[o]),e.events[n].off(r,a[o]),t.removeEventListener(r,a[o],!1)})}),this}},{key:"attributes",value:function(e,t){if(e===void 0){var n=this.get();if(!n)return{};for(var r={},a=n.attributes,o=a.length;o--;){var l=a[o];r[l.name]=l.value}return r}if(et(e)==="object"){for(var u in e){var c=e[u];this.attributes(u,c)}return this}if(t===void 0){var h=this.get();return this.length>0&&this.isElement()&&(h==null?void 0:h.getAttribute(e))||""}var v=e==="style"&&t==="";return this.each(function(g){var p=g;v?p.removeAttribute("style"):p.setAttribute(e,t.toString())}),this}},{key:"removeAttributes",value:function(e){return this.each(function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=t;n.removeAttribute(e)}}),this}},{key:"hasClass",value:function(e){if(this.length===0)return!1;var t=this.get();if(!t)return!1;for(var n=0,r=null,a=t.classList||{};r=a[n];){if(r===e)return!0;n++}return!1}},{key:"addClass",value:function(e){return this.each(function(t){var n=t;n.classList.add(e)}),this}},{key:"removeClass",value:function(e){return this.each(function(t){var n=t;n.classList.remove(e)}),this}},{key:"css",value:function(e,t){if(e===void 0)return Oi(this.attributes("style")||"");if(et(e)==="object"){for(var n in e){var r=e[n];this.css(n,r)}return this}if(t===void 0){if(this.length===0||this.isText())return"";var a=this.get();return a&&(a.style[Xs(e)]||Sm(this[0],e))||""}return this.each(function(o){var l=o;l.style[Xs(e)]=t.toString(),l.style.length===0&&l.removeAttribute("style")}),this}},{key:"width",value:function(){var e=this.css("width");if(e==="auto"){var t=this.get();e=t.offsetWidth.toString()}return e&&fo(e)||0}},{key:"height",value:function(){var e=this.css("height");if(e==="auto"){var t=this.get();e=t.offsetHeight.toString()}return e&&parseFloat(e)||0}},{key:"html",value:function(e){if(e!==void 0){var t=ri(e);return this.each(function(n){if(n.nodeType===Node.ELEMENT_NODE){for(var r=n.firstChild;r;){var a=r.nextSibling;n.removeChild(r),r=a}t.forEach(function(o){n.appendChild(o.cloneNode(!0))})}}),this}return this.length>0?this[0].innerHTML:""}},{key:"text",value:function(e){var t;return e!==void 0?(this.each(function(n){n.textContent=e}),this):this.length===0?"":((t=this.get())===null||t===void 0?void 0:t.textContent)||""}},{key:"show",value:function(e){return e===void 0&&(e=this.display||""),e==="none"&&(e=""),this.css("display")!=="none"?this:this.css("display",e)}},{key:"hide",value:function(){var e;return this.length===0?this:(this.display=(e=this.get())===null||e===void 0?void 0:e.style.display,this.css("display","none"))}},{key:"remove",value:function(){var e=this;return this.each(function(t,n){!t.parentNode||(t.parentNode.removeChild(t),delete e[n])}),this}},{key:"empty",value:function(){return this.each(function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.removeChild(t),t=n}}),this}},{key:"equal",value:function(e){return je(e)?this.get()===e:At(e)?this.get()===e.get():!1}},{key:"clone",value:function(e){var t=[];return this.each(function(n){t.push(n.cloneNode(e))}),new f(t)}},{key:"prepend",value:function(e){var t=ri(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){for(var a=t.length-1;a>=0;a--){var o=n?t[a].cloneNode(!0):t[a];r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)}}),this}},{key:"append",value:function(e){var t=ri(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){for(var a=0;a<t.length;a++){var o=n?t[a].cloneNode(!0):t[a];typeof e=="string"?r.append(o):r.appendChild(o)}}),this}},{key:"before",value:function(e){var t=ri(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){var a=r.parentNode;!a||t.forEach(function(o){n&&(o=o.cloneNode(!0)),a.insertBefore(o,r),r=o})}),this}},{key:"after",value:function(e){var t=ri(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){var a=r.parentNode;!a||t.forEach(function(o){n&&(o=o.cloneNode(!0)),r.nextSibling?(a.insertBefore(o,r.nextSibling),r=o):a.appendChild(o)})}),this}},{key:"replaceWith",value:function(e){var t=[],n=ri(e,this.context),r=typeof e=="string"&&/<.+>/.test(e);return this.each(function(a){var o=a.parentNode;if(!!o){var l=r?n[0].cloneNode(!0):n[0];o.replaceChild(l,a),t.push(l)}}),new f(t)}},{key:"getRoot",value:function(){return this.closest(Tr)}},{key:"traverse",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=function l(u){var c=u.isCard();if(!(c&&(!n||n==="editable"&&!u.isEditableCard())))for(var h=t?u.first():u.last();h;){var v=t?h.next():h.prev();r&&r(h);var g=e(h);if(g===!1)return;if(g!==!0){var p=g&&typeof g!="boolean";p&&(h=g),c=h.isCard(),c?n===!0?(p&&e(h),l(h)):n==="editable"&&h.isEditableCard()&&function(){var b=h.find(xt);b.each(function(y,k){var E=b.eq(k);E&&l(E)})}():(p&&e(h),l(h))}a&&a(h,v),h=v}};e(this),o(this)}},{key:"getChildByPath",value:function(e,t){var n=this.get();if(e.length===0)return n;for(var r=function(u){var c=0,h=_r(n.childNodes),v;try{for(h.s();!(v=h.n()).done;){var g=v.value;if(!(t&&!t(g))){if(c==u)return g;c++}}}catch(p){h.e(p)}finally{h.f()}},a=0;e[a]!==void 0;){var o=r(e[a]);if(!o)break;n=o,a++}return n}},{key:"getIndex",value:function(e){var t=this[0].parentNode;if(!t)return 0;var n=0,r=_r(t.childNodes),a;try{for(r.s();!(a=r.n()).done;){var o=a.value;if(!(e&&!e(o))){if(o===this[0])return n;n++}}}catch(l){r.e(l)}finally{r.f()}return-1}},{key:"findParent",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.closest(Tr),n=(e=t[0])!==null&&e!==void 0?e:t;if(this.length===0||!n.parentNode)return null;for(var r=this[0];r.parentNode!==n;){if(!r.parentNode)return null;r=r.parentNode}return new f(r)}},{key:"allChildren",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=[];return this.traverse(function(n){t.push(n)},void 0,e),t.shift(),t}},{key:"getViewport",value:function(){var e,t=this.window||{innerHeight:0,innerWidth:0},n=t.innerHeight,r=t.innerWidth,a=this.isText()?(e=this.parent())===null||e===void 0?void 0:e.get():this.get();if(!a)return{top:0,left:0,bottom:0,right:0};var o=a.getBoundingClientRect(),l=o.top,u=o.left,c=o.bottom,h=o.right;return{top:l,left:u,bottom:Math.min(c,n),right:Math.min(h,r)}}},{key:"inViewport",value:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=null;if(e.type!==Node.ELEMENT_NODE){if(!e.document)return!1;if(r=e.document.createElement("span"),e.next()){var a;(a=e[0].parentNode)===null||a===void 0||a.insertBefore(r,e[0].nextSibling)}else{var o;(o=e[0].parentNode)===null||o===void 0||o.appendChild(r)}e=new f(r)}var l=e.get();if(!l)return!0;var u=l.getBoundingClientRect(),c=u.top,h=u.left,v=u.right,g=u.bottom,p=this.getViewport();return r&&((t=r.parentNode)===null||t===void 0||t.removeChild(r)),n?c>0&&c<=p.bottom||g>0&&g<=p.bottom:c>0&&c>=p.top&&h>0&&h>=p.left&&g<=p.bottom&&v<=p.right}},{key:"scrollIntoView",value:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"nearest";if(typeof((t=e.document)===null||t===void 0?void 0:t.body.scrollIntoView)=="function"){var r,a=null;if(e.type!==Node.ELEMENT_NODE||e.name.toLowerCase()==="br"){var o;a=e.document.createElement("span"),a.innerHTML="&nbsp;",(o=e[0].parentNode)===null||o===void 0||o.insertBefore(a,e[0]),e=new f(a)}if(!this.inViewport(e)){var l;(l=e.get())===null||l===void 0||l.scrollIntoView({block:n,inline:n})}a&&((r=a.parentNode)===null||r===void 0||r.removeChild(a))}}}]),f}(),H=function(f,i,e){i===void 0&&(i=wt());var t=ri(f,i),n=new(e||Pm)(t,i||void 0);return je(f)&&f.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE&&(n.fragment=f),n},Fm=[{from:function(i,e,t){return!!t[He]||!!t[bt]},to:function(i,e,t){var n=t[ar],r=Ve({},t);t=Ce({type:t[Ot],name:(t[He]||t[bt]).toLowerCase(),editable:t[or]},qe,t[qe]);for(var a in r)a!==bt&&a.indexOf("data-")===0&&a.indexOf("data-card")!==0&&(t[a]=r[a]);n!==void 0&&(t.value=n);var o=H("<card />");for(var l in t)o.attributes(l,t[l]);return o}},{from:function(i,e,t){return i==="div"&&(!t[He]||!t[bt])&&t[Ae]!==ir},to:function(i,e,t){var n=H("<p />");n.css(e);for(var r in t)n.attributes(r,t[r]);return n}},{from:function(i){return[Wn,jn,Gn].includes(i)},to:function(i){return{node:H("<".concat(i," />")),replace:!0}}}],Sr,Nr,Dr,Rr,zm=[{type:"block",attributes:Ce({},qe,"*")},{name:"p",type:"block",allowIn:["$root"]},{name:"br",type:"inline",isVoid:!0},{name:jn,type:"inline",isVoid:!0},{name:Gn,type:"inline",isVoid:!0},{name:Wn,type:"inline",isVoid:!0},{name:"span",type:"mark",attributes:Ce({},Ae,{required:!0,value:["anchor","cursor","focus"]})},{name:"card",type:"inline",attributes:{name:{required:!0,value:/\w+/},type:{required:!0,value:"inline"},editable:"*",value:"*"}},{name:"span",type:"inline",attributes:(Sr={},Ce(Sr,He,{required:!0,value:/\w+/}),Ce(Sr,Ot,{required:!0,value:"inline"}),Ce(Sr,ar,"*"),Ce(Sr,or,"*"),Ce(Sr,"class","*"),Ce(Sr,"contenteditable","*"),Sr)},{name:"span",type:"inline",attributes:(Nr={},Ce(Nr,bt,{required:!0,value:/\w+/}),Ce(Nr,Ot,{required:!0,value:"inline"}),Ce(Nr,ar,"*"),Ce(Nr,or,"*"),Ce(Nr,"class","*"),Ce(Nr,"contenteditable","*"),Nr)},{name:"card",type:"block",attributes:{name:{required:!0,value:/\w+/},type:{required:!0,value:"block"},editable:"*",value:"*"}},{name:"div",type:"block",attributes:(Dr={},Ce(Dr,He,{required:!0,value:/\w+/}),Ce(Dr,Ot,{required:!0,value:"block"}),Ce(Dr,ar,"*"),Ce(Dr,or,"*"),Ce(Dr,"class","*"),Ce(Dr,"contenteditable","*"),Dr)},{name:"div",type:"block",attributes:(Rr={},Ce(Rr,bt,{required:!0,value:/\w+/}),Ce(Rr,Ot,{required:!0,value:"block"}),Ce(Rr,ar,"*"),Ce(Rr,or,"*"),Ce(Rr,"class","*"),Ce(Rr,"contenteditable","*"),Rr)}],$n="contenteditable",al={},Um=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[],r;if(e=e||t.length,e>t.length&&(e=t.length),i)for(r=0;r<i;r++)n[r]=t[0|Math.random()*e];else{var a;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",r=0;r<36;r++)n[r]||(a=0|Math.random()*16,n[r]=t[r==19?a&3|8:a])}return n.join("")},Qc=new Map,ef=function(f){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e="";if(typeof f!="string"){var t,n=(t=f[0])!==null&&t!==void 0?t:f;if(n.nodeType===Node.ELEMENT_NODE){var r=n,a=r.localName;e=a.substring(0,1),f=a;for(var o=r.attributes,l=o.length;l--;){var u=o[l];[qe,"id"].includes(u.name)||(f+="".concat(u.name,'="').concat(u.value,'"'))}}else{var c;f=(c=n.textContent)!==null&&c!==void 0?c:""}}var h=Qc.get(f);if(h)e=h;else{var v=tm(f);e=e+v.substr(0,4)+v.substr(v.length-3),Qc.set(f,e)}var g=e;if(i){var p=al[g]||0;return al[g]=p+1,"".concat(g,"-").concat(Um(8,48+al[g]))}return g},Vm=function(){function f(i){var e=this;be(this,f),this.editor=void 0,this.addBrForBlock=function(t){if(!t.isText()){var n=t.get().childNodes,r=0,a=!0,o=!1,l=t.name==="p",u=_r(n),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;if(a&&h.nodeType===Node.TEXT_NODE?a=!1:!l&&!o&&h.nodeType===Node.ELEMENT_NODE&&e.isBlock(h)&&(o=!0),h.nodeType===Node.ELEMENT_NODE&&[jn,Gn,Wn].indexOf(h.getAttribute(Ae)||"")<1&&r++,!a&&r>1)break}}catch(g){u.e(g)}finally{u.f()}if(l&&r===0){var v=document.createElement("br");t.each(function(g){g.appendChild(v.cloneNode())})}!o&&a&&e.isBlock(t)&&(n.length!==1||n[0].nodeName!=="BR")&&e.isEmptyWithTrim(t)&&(t.empty(),t.append(document.createElement("br")))}},this.editor=i}return ke(f,[{key:"isVoid",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema,n=typeof e=="string"?e:"";return je(e)?n=e.nodeName.toLowerCase():At(e)&&(n=e.name),t.find(function(r){return r.name===n&&r.isVoid===!0}).length>0}},{key:"isMark",value:function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema;return r.getTags("marks").includes(((t=(n=e.nodeName)===null||n===void 0?void 0:n.toLowerCase())!==null&&t!==void 0?t:e.name).toLowerCase())&&r.getType(e)==="mark"}},{key:"isInline",value:function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema;return r.getTags("inlines").includes((t=(n=e.nodeName)===null||n===void 0?void 0:n.toLowerCase())!==null&&t!==void 0?t:e.name)&&r.getType(e)==="inline"}},{key:"isBlock",value:function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema;return r.getTags("blocks").includes(((t=(n=e.nodeName)===null||n===void 0?void 0:n.toLowerCase())!==null&&t!==void 0?t:e.name).toLowerCase())&&r.getType(e)==="block"}},{key:"isNestedBlock",value:function(e){if(!this.isBlock(e))return!1;var t=e.length?e[0]:e;if(!t)return!1;for(var n=t.firstChild;n;){if(this.isBlock(n))return!1;n=n.nextSibling}return!0}},{key:"isRootBlock",value:function(e,t){var n;return!(!((n=e.parent())===null||n===void 0)&&n.isEditable())||!this.isNestedBlock(e)?!1:(t||this.editor.schema).find(function(r){return r.name===e.name}).every(function(r){if(r.type!=="block")return!1;var a=r.allowIn;return a?a.indexOf("$root")>-1:!0})}},{key:"isEmpty",value:function(e,t){var n,r;if(e.length>0&&e.isElement()){var a,o=e.attributes(),l=(a=e.fragment)!==null&&a!==void 0?a:e.get(),u=Array.from(l.querySelectorAll("".concat(yt,",").concat(Ri,",").concat(xt,",br")));if(o[He]||o[bt]||u.some(function(h){return h.hasAttribute(He)||h.hasAttribute(bt)})&&!u.some(function(h){return h.getAttribute(Ae)===ei})||e.name!=="br"&&this.isVoid(e)||u.filter(function(h){return h.localName==="br"}).length>1)return!1}var c=e.isText()?e[0].nodeValue||"":e.text();return c=(n=c)===null||n===void 0?void 0:n.replace(/\u200B/g,""),c=(r=c)===null||r===void 0?void 0:r.replace(/\r\n|\n/,""),c&&t&&(c=c.trim()),c===""}},{key:"isEmptyWithTrim",value:function(e){return this.isEmpty(e,!0)}},{key:"isEmptyWidthChild",value:function(e){if(e.length===0)return!0;if(e.isCard())return!1;if(e.isText())return this.isEmpty(e);var t=e[0].childNodes;if(t.length===0)return!0;for(var n=0;n<t.length;n++){var r=t[n];if(r.nodeType===Node.TEXT_NODE){if(r.data.replace(/\u200b/g,"")!=="")return!1}else if(r.nodeType===Node.ELEMENT_NODE&&(r.nodeName.toLowerCase()==="li"&&!this.editor.list.isEmptyItem(H(r))||r.hasAttribute(He)||!this.isEmptyWidthChild(H(r))))return!1}return!0}},{key:"isList",value:function(e){var t=typeof e=="string"?e:"";return je(e)?t=e.nodeName.toLowerCase():At(e)&&(t=e.name),["ul","ol"].indexOf(t)>-1}},{key:"isCustomize",value:function(e){var t=this.editor.list;switch(e.name){case"li":return e.hasClass(t.CUSTOMZIE_LI_CLASS);case"ul":return e.hasClass(t.CUSTOMZIE_UL_CLASS);default:return!1}}},{key:"unwrap",value:function(e){for(var t=e.first(),n=[];t;){var r=t.next();e.before(t),n.push(t),t=r}return e.remove(),n}},{key:"wrap",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this.editor.mark;if(je(e)&&(e=H(e)),t=this.clone(t,!1),e.isText())return t.append(this.clone(e,!1)),e.replaceWith(t);if(r&&this.isMark(t)){var o=this.clone(t,!1,!1);if(e.name===t.name){var l=e.attributes();delete l.style,delete l[qe],Object.keys(l).forEach(function(g){if(!t.attributes(g))t.attributes(g,l[g]);else{var p=t.attributes(g).split(",");p[g]!==void 0&&p.indexOf(p[g])<0&&p.push(p[g]),t.attributes(g,p.join(","))}});var u=e.css();Object.keys(u).forEach(function(g){t.css(g)||t.css(g,u[g])}),t.append(this.clone(e,!0,!1).children())}else t.append(this.clone(e,!0,!1));var c=t.allChildren();return c.forEach(function(g){!g.isText()&&n.isMark(g)&&a.compare(g,o)&&n.unwrap(g)}),e.replaceWith(t)}var h=e.parent(),v=this.clone(e,!1,!1);return e.after(v),t.append(e),h?v.replaceWith(t):t}},{key:"merge",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e.equal(t)){if(t.isText()){e.append(t),this.removeSide(e);return}var r=this.editor,a=r.block,o=r.mark,l=r.list,u=t,c=this.isList(e),h=this.isList(t.name);if(c&&!h){var v=e.find("li");if(v.length===0)return;e=H(v[v.length-1])}if(!c&&h){var g=t.find("li");g.length>0&&(t=H(g[0])),g[1]&&(u=H(g[0]))}if(this.isCustomize(e)){var p,b,y=e.first();if(!(!((p=y)===null||p===void 0)&&p.isCard())){var k=l.getPlugins(),E=l.getPluginNameByNode(e),_=k.find(function(N){return N.constructor.pluginName===E});_!=null&&_.cardName&&(l.addCardToCustomize(e,_.cardName),y=e.first())}if(this.isCustomize(t)&&!(!((b=y)===null||b===void 0)&&b.equal(t))){var T=t.first();(T==null?void 0:T.isCard())&&y.attributes(He)===T.attributes(He)&&T.remove()}}for(var x=e.last(),C=t.first(),S=a.findPlugin(e);C;){var R,z,F=C.next(),G=o.findPlugin(C);if(S&&G&&S.disableMark&&S.disableMark.indexOf(G.constructor.pluginName)>-1){var M=this.unwrap(C);M.forEach(function(N){e.append(N)})}else if(C.isText()&&/\u200b/.test(C.text())){var O=C.parent(),A=C.prev(),I=C.next();if(!O||!this.isMark(O)&&(A&&!this.isInline(A)||I&&!this.isInline(I))){C.remove(),C=I;continue}}else if(G&&((R=C.get())===null||R===void 0?void 0:R.childNodes.length)===1){var $=C.prev();(!$||$.isText())&&C.allChildren().forEach(function(N){var P,V=N.text();N.type===wt().TEXT_NODE&&!!V&&!(!((P=N.next())===null||P===void 0)&&P.isCursor())&&N.text(V.replace(/\u200b/,""))})}C.length>0&&!C.equal(e)&&!(!((z=C.parent())===null||z===void 0)&&z.equal(e))&&e.append(C),C=F}if(n&&u.remove(),x&&x.name==="br")for(var ie=x.next();ie;){if(ie.isCursor()){x.remove();break}ie=ie.next()}this.removeSide(e)}}},{key:"replace",value:function(e,t){for(var n,r,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=this.clone(t,!1,a),l=this.isCustomize(e)&&e.name==="li"&&((n=e.first())===null||n===void 0?void 0:n.isCard())?(r=e.first())===null||r===void 0?void 0:r.next():e.first();l;){var u=l.next();o.append(l),l=u}return e.isText()&&o.append(e.clone()),e.replaceWith(o)}},{key:"insertText",value:function(e,t){var n;if(!!Ne(this.editor)){var r=this.editor.change,a=t||r.range.toTrusty(),o=wt(a.startContainer);a.collapsed||r.delete(t);var l=o.createTextNode(e);return(n=this.insert(l,a))===null||n===void 0||n.handleBr(),t||r.apply(a),a}}},{key:"insert",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(At(e)){if(e.length===0)throw"Not found node";e=e[0]}var a=this.editor;if(!!Ne(a)){var o=a.change,l=a.block,u=a.schema,c=a.mark;t=t||o.range.get();var h=t.cloneRange().shrinkToTextNode(),v=h.startNode,g=h.startOffset,p=v.prev(),b=v.parent(),y=v.text()||"",k=y.substr(0,g);v.isText()&&/\u200b$/.test(k)&&y.length>1&&(p&&!this.isInline(p)||!p&&b&&!this.isInline(b))&&v.get().splitText(y.length-1).remove();var E=b==null?void 0:b.attributes(lt);if(!E&&v.isCard()&&t.setStartAfter(v),E&&b&&["left","right"].includes(E)){var _=a.card.find(b);_&&(E==="left"?t.setStartBefore(_.root):t.setStartAfter(_.root))}if(this.isBlock(e)){var T=t,x=T.commonAncestorNode;x.isText()&&(x=this.editor.block.closest(x));var C=null;if(this.isBlock(x)&&this.isEmpty(x))C=r?x:void 0;else{var S=!1;if(l.isFirstOffset(t,"start")&&(S=!0),C=l.split(t),S){var R;C=(R=C)===null||R===void 0?void 0:R.prev()}}var z=l.closest(t.startNode.isEditable()?t.cloneRange().shrinkToElementNode().shrinkToTextNode().startNode:t.startNode);if(!z.isCard()&&u.isAllowIn(z.name,e.nodeName.toLowerCase()))z.find("br").remove(),z.append(e);else{for(var F,G=z.parent();G&&this.isBlock(G)&&!z.isEditable()&&!u.isAllowIn(G.name,e.nodeName.toLowerCase());)z=G,G=z.parent();z.isEditable()&&((F=z.get())===null||F===void 0?void 0:F.childNodes.length)===0?z.append(e):this.isEmptyWidthChild(z)||l.isLastOffset(t,"start")?(z.after(e),this.isEmptyWidthChild(z)&&C&&z.remove()):(z.before(e),C&&this.isEmptyWidthChild(C)&&C.remove())}(e instanceof Element||e instanceof DocumentFragment)&&this.editor.nodeId.generate(e)}else{var M=l.closest(t.startNode.isEditable()?t.cloneRange().shrinkToElementNode().shrinkToTextNode().startNode:t.startNode),O=M?l.findPlugin(M):void 0;if(O){var A=H(e),I=function(N){if(n.isMark(N)){var P=c.findPlugin(N);if(!P)return;if(O.disableMark&&O.disableMark.indexOf(P.constructor.pluginName)>-1)return!0}return!1};if(A.allChildren().forEach(function(ie){I(ie)&&n.unwrap(ie)}),I(A)){var $=A.document.createDocumentFragment();A.children().each(function(ie){$.appendChild(ie)}),A.remove(),e=$.childNodes[$.childNodes.length-1],t.insertNode($)}else t.insertNode(e);if(A.length===0)return t}else t.insertNode(e)}return e.nodeType===Node.ELEMENT_NODE&&(e.hasAttribute(bt)||e.hasAttribute(He))?t.collapse(!1):t.select(e,!(this.isVoid(e)||e.nodeType===Node.TEXT_NODE)).shrinkToElementNode().collapse(!1)}}},{key:"setAttributes",value:function(e,t){var n=t.style;for(var r in t)if(r!=="style")if(r==="className"){var a=t[r];Array.isArray(a)?a.forEach(function(c){return e.addClass(c)}):e.addClass(a)}else e.attributes(r,t[r].toString());typeof n=="number"?n={}:typeof n=="string"&&(n=Oi(n)),n=n||{};var o=Object.keys(n);for(var l in n){var u=n[l];/^0(px|em)?$/.test(u.toString())&&(u=""),e.css(l,u.toString())}return(o.length===0||Object.keys(e.attributes("style")).length===0)&&e.removeAttributes("style"),e}},{key:"removeMinusStyle",value:function(e,t){if(e.isElement()){var n=e.css();if(n[t]){var r=parseInt(n[t]||"0",10)||0;r<0&&e.css(t,"")}}}},{key:"mergeChild",value:function(e){for(var t=this.editor,n=t.schema,r=t.list,a=n.getAllowInTags(),o=e.first();o;){for(var l=o.next();l&&o.name===l.name&&(a.indexOf(o.name)>-1&&!this.isList(o)||this.isList(o)&&r.isSame(o,l));){for(var u=l.next(),c=l.first();c;){var h=c.next();o.append(c),c=h}l.remove(),this.mergeChild(o),l=u}o=l}}},{key:"removeSide",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"br",n=e.first();(n==null?void 0:n.name)===t&&e.children().toArray().filter(function(a){return!a.isCursor()}).length>1&&n.remove();var r=e.last();(r==null?void 0:r.name)===t&&e.children().toArray().filter(function(a){return!a.isCursor()}).length>1&&r.remove()}},{key:"flat",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.editor.block,r=e.first(),a=e.fragment?H("<p />"):this.clone(e,!1);r;){var o=r.next();if(r.isBlockCard()||this.isNestedBlock(r))n.flat(r,t);else if(this.isBlock(r))r=this.flat(r,t);else{var l=this.clone(a,!1),u=l.name==="li";for(r.before(l);r;){var c,h;o=r.next();var v=r.name==="br"&&!u;if(v&&((c=r.parent())===null||c===void 0?void 0:c.isRoot())&&l.append(r),r.isText()){var g=r.text(),p=/^((\n|\r)+)/.exec(g),b=!1;if(p&&(g=g.substring(p[1].length),b=!0,g.length===0&&r.remove()),p=/((\n|\r)+)$/.exec(g),p){r.text(g.substr(0,p.index)),l.append(r);break}else b&&r.length>0&&r.text(g)}if(r.length>0&&l.append(r),!((h=o)===null||h===void 0)&&h.isText()){var y=o.text(),k=/^(\n|\r)+/.exec(y);if(k)break}if(v||!o||this.isBlock(o)||o.isBlockCard())break;r=o}this.removeSide(l),n.flat(l,t),this.addBrForBlock(l)}this.addBrForBlock(r),this.removeSide(r),r=o}return e.fragment&&(e=H(e.fragment)),r=e.first(),r||e.remove(),e}},{key:"normalize",value:function(e){return e=this.flat(e),this.mergeChild(e),e}},{key:"html",value:function(e,t){var n=this;if(t===void 0){var r;return e.length>0&&((r=e.get())===null||r===void 0?void 0:r.innerHTML)||""}return e.each(function(a){var o=a;o.innerHTML=t,n.editor.nodeId.generateAll(o)}),e}},{key:"clone",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=this.editor.nodeId,a=[];return e.each(function(o){var l=o.cloneNode(t),u=H(l);n||(r.generateAll(u,!0),r.isNeed(u)&&r.generate(u,!0)),a.push(l)}),H(a)}},{key:"getBatchAppendHTML",value:function(e,t){var n;if(e.length===0)return t;var r=t.startsWith("\\u")||t.startsWith("&#")?H(t,null):H(t);return e.forEach(function(a){a=a.clone(!1),a.append(r),r=a}),((n=r.get())===null||n===void 0?void 0:n.outerHTML)||""}},{key:"removeZeroWidthSpace",value:function(e){var t=this;e.traverse(function(n){var r=n[0];if(r.nodeType===Node.TEXT_NODE){var a=r.nodeValue;if((a==null?void 0:a.length)===2){var o=r.nextSibling,l=r.previousSibling;if(!(a.charCodeAt(1)===8203&&o&&o.nodeType===Node.ELEMENT_NODE&&[jn,Gn,Wn].indexOf(o.getAttribute(Ae)||"")>=0)){var u=n.parent();if(!(a.charCodeAt(1)===8203&&(!o&&u&&t.isInline(u)||o&&t.isInline(o)))&&!(a.charCodeAt(0)===8203&&(!l&&u&&t.isInline(u)||l&&t.isInline(l)))&&a.charCodeAt(0)===8203){var c,h=r.splitText(1);h.previousSibling&&((c=h.parentNode)===null||c===void 0||c.removeChild(h.previousSibling))}}}}})}}]),f}(),vo=function(){function f(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";be(this,f),this.range=void 0,this.editor=void 0,this.key="",this.anchor=null,this.focus=null,this.editor=i,this.range=e,this.key=t}return ke(f,[{key:"has",value:function(){return!!this.focus&&!!this.anchor}},{key:"create",value:function(){var e=this.range,t=e.commonAncestorNode,n=e.startNode,r=e.endNode;if(!(!t.isEditable()&&!t.inEditor())){var a=t.document;if(!!a){var o=t.closest(Tr);if(this.key)o.find('[data-anchor-id="'.concat(this.key,'"]')).remove(),o.find('[data-focus-id="'.concat(this.key,'"]')).remove(),o.find('[data-cursor-id="'.concat(this.key,'"]')).remove();else{var l=o.find(Ws);l.each(function(C,S){var R=l.eq(S);R&&!R.attributes("data-anchor-id")&&R.remove()});var u=o.find($s);u.each(function(C,S){var R=u.eq(S);R&&!R.attributes("data-focus-id")&&R.remove()});var c=o.find(co);c.each(function(C,S){var R=c.eq(S);R&&!R.attributes("data-cursor-id")&&R.remove()})}var h=n.closest(yt);if(h.length>0){var v=n.closest(Pt);v.length>0&&this.range.setStartBefore(h);var g=n.closest(Ft);g.length>0&&this.range.setStartAfter(h)}if(!n.equal(r)){var p=r.closest(yt);if(p.length>0){var b=r.closest(Pt);b.length>0&&this.range.setEndBefore(p);var y=r.closest(Ft);y.length>0&&this.range.setEndAfter(p)}}if(this.range.collapsed){var k=H(a.createElement("span"));k.attributes(Ae,Wn),this.key&&k.attributes("data-cursor-id",this.key),this.range.insertNode(k),this.anchor=k,this.focus=k;return}var E=this.range.cloneRange();E.collapse(!0);var _=H(a.createElement("span"));_.attributes(Ae,jn),this.key&&_.attributes("data-anchor-id",this.key),E.insertNode(_),this.range.setStartAfter(_);var T=this.range.cloneRange();T.collapse(!1);var x=H(a.createElement("span"));x.attributes(Ae,Gn),this.key&&x.attributes("data-focus-id",this.key),T.insertNode(x),this.anchor=_,this.focus=x}}}},{key:"move",value:function(){var e,t;if(!(!this.focus||!this.anchor)){if(this.key){var n,r,a=this.range.commonAncestorNode,o=a.closest(Tr);(!this.focus.inEditor()||!(!((n=this.focus.get())===null||n===void 0)&&n.isConnected))&&(this.focus=o.find("[data-".concat(this.focus.attributes(Ae),'-id="').concat(this.key,'"]'))),(!this.anchor.inEditor()||!(!((r=this.anchor.get())===null||r===void 0)&&r.isConnected))&&(this.anchor=o.find("[data-".concat(this.anchor.attributes(Ae),'-id="').concat(this.key,'"]')))}var l=this.editor.node;if(!((e=this.anchor.get())===null||e===void 0)&&e.isConnected||(this.anchor=this.range.commonAncestorNode.find("[".concat(Ae,'="anchor"]'))),!((t=this.focus.get())===null||t===void 0)&&t.isConnected||(this.focus=this.range.commonAncestorNode.find("[".concat(Ae,'="focus"]'))),this.anchor.equal(this.focus)){var u,c=this.anchor,h=c.parent();if(!h)return;l.removeZeroWidthSpace(h),h[0].normalize();var v=!1,g=c.prev(),p=c.next();if(g&&g.isCard()){var b=g.find(Ft);b.length>0&&(this.range.select(b,!0),this.range.collapse(!1),v=!0)}else if(p&&p.isCard()){var y=p.find(Pt);y.length>0&&(this.range.select(y,!0),this.range.collapse(!1),v=!0)}v||(this.range.setStartBefore(c[0]),this.range.collapse(!0)),Ks?(h[0].normalize(),c.remove()):(c.remove(),h[0].normalize()),h.name==="p"&&((u=h.get())===null||u===void 0?void 0:u.childNodes.length)===0&&h.append(H("<br />"));return}var k=this.anchor.parent();if(k&&(l.removeZeroWidthSpace(k),this.anchor.length>0&&this.range.setStartBefore(this.anchor),this.anchor.remove(),k[0].normalize()),k=this.focus.parent(),k){var E;if(l.removeZeroWidthSpace(k),this.focus.length>0&&this.range.setEndBefore(this.focus),this.focus.remove(),k[0].normalize(),k.name==="p"&&((E=k.get())===null||E===void 0?void 0:E.childNodes.length)===0&&k.append(H("<br />")),Zs){var _=window.getSelection();_==null||_.removeAllRanges(),_==null||_.addRange(this.range.base)}}}}},{key:"getNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"center",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){return!0},a=n?e.clone(!0):e;if(!this.focus||!this.anchor)return a;if(t==="left"||t==="center"){var o=t!=="center"?this.anchor:this.focus,l=H(this.key?"[data-".concat(o.attributes(Ae),'-id="').concat(this.key,'"]'):"[".concat(Ae,"=").concat(o.attributes(Ae),"]"),a.get());this.key||(l=l.toArray().find(function(g){return!g.attributes("data-".concat(o.attributes(Ae),"-id"))}));var u=!1;a.traverse(function(g){if(l&&g.equal(l)){var p,b=g.parent();l.remove(),(b==null?void 0:b.name)==="p"&&((p=b.get())===null||p===void 0?void 0:p.childNodes.length)===0&&b.append(H("<br />")),u=!0;return}u&&r(g)&&(g.attributes(Ae)!==o.attributes(Ae)||o.attributes(Ae)==="cursor")&&g.remove()},!0)}if(t==="right"||t==="center"){var c=t!=="center"?this.focus:this.anchor,h=H(this.key?"[data-".concat(c.attributes(Ae),'-id="').concat(this.key,'"]'):"[".concat(Ae,"=").concat(c.attributes(Ae),"]"),a.get());this.key||(h=h.toArray().find(function(g){return!g.attributes("data-".concat(c.attributes(Ae),"-id"))}));var v=!1;a.traverse(function(g){if(h&&g.equal(h)){var p,b=g.parent();h.remove(),(b==null?void 0:b.name)==="p"&&((p=b.get())===null||p===void 0?void 0:p.childNodes.length)===0&&b.append(H("<br />")),v=!0;return}v&&r(g)&&(g.attributes(Ae)!==c.attributes(Ae)||c.attributes(Ae)==="cursor")&&g.remove()},!1)}return a}}]),f}();vo.removeTags=function(f){return f.replace(/<anchor\s*\/>/gi,"").replace(/<focus\s*\/>/gi,"").replace(/<cursor\s*\/>/gi,"")};var Or=function(i,e,t){var n=je(i)?i:i[0];if(n.nodeType===Node.ELEMENT_NODE){var r=n.getAttribute(Ae)||"";if([Wn,jn,Gn].indexOf(r)>-1||!!n.getAttribute(uo)||r===Ni)return!0;var a=n.parentElement,o=(a==null?void 0:a.getAttribute(Ae))||"";if(r===ir||o===ir)return!1;var l=qi(n),u=a==null?void 0:a.getAttribute(un);if(u&&a&&(t==null||t.push(H(a))),!l&&a&&qi(a)&&!fa(a))return!0;if(e){if(l)return!1;var c=e.find(function(p){return p===i[0]});if(c)return c.__card_root&&(t==null||t.push(c.__card_root)),!0}var h=il(n,"".concat(yt,",").concat(Di),el);if(!h||!(h instanceof Element))return!1;if(h.getAttribute(Ae)===Ni||(h.getAttribute(un)&&(t==null||t.push(H(h))),!l&&qi(h)&&!fa(h)))return!0;if(!l||fa(n)||!a)return!1;var v=il(a,yt,el);if(!v||!(v instanceof Element))return!1;var g=v.getAttribute(un);if(g&&v&&(t==null||t.push(H(v))),v&&qi(v)&&!fa(v))return!0}return!1},tf=function(i,e){var t=je(i)?i:i[0];if(ni(t)||qi(t)&&["id","class","style",un,or].includes(e))return!0;var n=t.getAttribute(Vc);return!!(n==="*"||n&&n.split(",").some(function(r){return r.trim().toLowerCase()===e.toLowerCase()}))},Hm=function(i){for(var e=[],t=0;t<i.length;t++){var n=i[t],r=i[t+1];ol(n,r)?t++:e.push(n)}return e},ol=function(i,e){var t=i,n=i,r=e,a=e,o=i,l=i,u=e,c=e;return!i||!e?!1:t.li&&a.ld?Ye.exports.isEqual(t.li,a.ld)&&Ye.exports.isEqual(i.p,e.p):n.ld&&r.li?Ye.exports.isEqual(n.ld,r.li)&&Ye.exports.isEqual(i.p,e.p):o.si&&c.sd?Ye.exports.isEqual(o.si,c.sd)&&(Ye.exports.isEqual(i.p,e.p)||nf(i.p,e.p,o.si.length)||nf(e.p,i.p,o.si.length)):l.sd&&u.si?Ye.exports.isEqual(l.sd,u.si)&&Ye.exports.isEqual(i.p,e.p):!1},nf=function(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(i.length!==e.length)return!1;var n=e.slice();return n[n.length-1]=n[n.length-1]-t,Ye.exports.isEqual(i.slice(),n)},rf=function f(i){var e=document.createDocumentFragment(),t=null,n=0,r=null;for(typeof i[0]=="string"&&(t=i[0],n=1);n<i.length;n++)if(Array.isArray(i[n])){var a=i[n-1];if(a&&a.toString()==="[object Object]"&&Object.keys(a).includes(bt))continue;var o=f(i[n]);o&&e.appendChild(o)}else if(i[n].toString()==="[object Object]"){if(t){r=document.createElement(t);for(var l in i[n]){var u;(u=r)===null||u===void 0||u.setAttribute(Kc(l),Js(i[n][l]))}var c=Object.keys(i[n]);if(c.indexOf(He)>-1&&c.indexOf(bt)<0){var h,v;(h=r)===null||h===void 0||h.setAttribute(bt,i[n][He]),(v=r)===null||v===void 0||v.removeAttribute(He)}}}else if(typeof i[n]=="number"||typeof i[n]=="string"){var g=document.createTextNode(i[n].toString());e.appendChild(g)}return!r&&t&&(r=document.createElement(t)),r?(r.appendChild(e),r):e.childNodes[0]},jm=function(i,e){i instanceof Node||(i=i[0]);var t=i.childNodes;if(t.length!==0)for(var n=0;n<t.length;n++){var r=t.item(n);if(!!r){var a=Kn(r);a&&e.push(a)}}},Kn=function(i){var e;if(i instanceof Node||(i=i[0]),!Or(i)){var t=i,n=t.nodeValue;if(i instanceof Element){var r=i.attributes;e=[i.nodeName.toLowerCase()];for(var a={},o=0;r&&o<r.length;o++){var l=r[o],u=l.name,c=l.specified,h=l.value;c&&!tf(i,u)&&(u==="style"&&i instanceof HTMLElement?a.style=Wc(i.style.cssText||h):typeof h=="string"&&(a[u]=h))}return e.push(a),jm(i,e),e}else if(i instanceof Text)return String(n)}},af=function f(i,e){if(!Array.isArray(i)||i.length<1)return null;for(var t=1;t<i.length;t++)if(t===1){var n=i[t];if(et(n)==="object"&&e&&e(n))return{path:[],name:i[0],attributes:n,children:i.slice(t+1)}}else if(Array.isArray(i[t])){var r=f(i[t],e);if(r)return r.path.unshift(t),r}return null},Ge=function(){function f(i,e){var t=this;be(this,f),this.editor=void 0,this.base=void 0,this.toRange=function(){return t.base},this.collapse=function(n){return t.base.collapse(n),t},this.cloneRange=function(){return f.from(t.editor,t.base.cloneRange())},this.select=function(n,r){return r?t.base.selectNodeContents(At(n)?n[0]:n):t.base.selectNode(At(n)?n[0]:n),t},this.getText=function(){var n=t.cloneContents();return n.textContent},this.getClientRect=function(){var n=t.getClientRects().item(0);return n||(n=t.getBoundingClientRect()),n},this.enlargeFromTextNode=function(){var n=function(a,o,l){var u;if(a.nodeType===Node.TEXT_NODE){if(o===0)switch(l){case"start":t.setStartBefore(a);break;case"end":t.setEndBefore(a);break}else if(o===((u=a.nodeValue)===null||u===void 0?void 0:u.length))switch(l){case"start":t.setStartAfter(a);break;case"end":t.setEndAfter(a);break}}};return n(t.startContainer,t.startOffset,"start"),n(t.endContainer,t.endOffset,"end"),t},this.shrinkToTextNode=function(){var n=function(a,o,l){if(a.nodeType===Node.ELEMENT_NODE){var u=a.childNodes;if(u.length!==0){var c,h,v;if(o>0&&(c=u[o-1]),o<u.length&&(h=u[o]),c&&c.nodeType===Node.TEXT_NODE){var g;v=c,o=((g=v.nodeValue)===null||g===void 0?void 0:g.length)||0}if(h&&h.nodeType===Node.TEXT_NODE&&(v=h,o=0),!!v)switch(l){case"start":t.setStart(v,o);break;case"end":t.setEnd(v,o);break}}}};return n(t.startContainer,t.startOffset,"start"),n(t.endContainer,t.endOffset,"end"),t},this.enlargeToElementNode=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=t.enlargeFromTextNode(),o=t.editor.node,l=function(c,h,v){var g,p=H(c);if(!(p.type===Node.TEXT_NODE||!n&&o.isBlock(p)||p.isEditable())){var b;if(h===0){for(;!p.prev()&&(b=p.parent(),!(!b||!n&&o.isBlock(b)||!b.inEditor()||b.isEditable()||!r&&(!n&&b.isElement()||n&&o.isBlock(b))));)p=b;v?a.setStartBefore(p[0]):a.setEndBefore(p[0])}else if(h===((g=p.get())===null||g===void 0?void 0:g.childNodes.length)){for(;!p.next()&&(b=p.parent(),!(!b||!n&&o.isBlock(b)||!b.inEditor()||b.isEditable()||!r&&(!n&&b.isElement()||n&&o.isBlock(b))));)p=b;v?a.setStartAfter(p[0]):a.setEndAfter(p[0])}}};return l(a.startContainer,a.startOffset,!0),l(a.endContainer,a.endOffset,!1),t},this.shrinkToElementNode=function(){for(var n=t.editor.node,r,a;t.startContainer.nodeType===Node.ELEMENT_NODE&&(r=t.startContainer.childNodes[t.startOffset])&&(a=H(r))&&r.nodeType===Node.ELEMENT_NODE&&!a.isCursor()&&!n.isVoid(r)&&(!a.isCard()||a.isEditableCard()||a.find(Pt).length>0);)t.setStart(r,0);for(;t.endContainer.nodeType===Node.ELEMENT_NODE&&t.endOffset>0&&(r=t.endContainer.childNodes[t.endOffset-1])&&(a=H(r))&&r.nodeType===Node.ELEMENT_NODE&&!n.isVoid(r)&&!a.isCursor()&&(!a.isCard()||a.isEditableCard()||a.find(Ft).length>0);)t.setEnd(r,r.childNodes.length);return t},this.createSelection=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=new vo(t.editor,t,n);return r.create(),r},this.getSubRanges=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=[];return t.commonAncestorNode.traverse(function(o){if(o.isText()){var l,u=0,c=o.get(),h=((l=c.nodeValue)===null||l===void 0?void 0:l.length)||0,v=t.comparePoint(c,u),g=t.comparePoint(c,h),p=f.create(t.editor);if(v<0){if(g<0)return;g===0?p.setOffset(c,t.startOffset,h):p.setOffset(c,t.startOffset,t.endOffset)}else{if(v!==0||g<0)return;g===0?p.setOffset(c,u,h):p.setOffset(c,u,t.endOffset)}a.push(p)}else if(n&&o.isCard()&&!o.isEditableCard()){var b,y=t.editor.card.find(o);if(!y||r&&y.constructor.singleSelectable===!1)return;var k=y.getCenter(),E=(b=k.get())===null||b===void 0?void 0:b.parentNode;if(!E||!k.inEditor())return;var _=k.index(),T=o.get(),x=t.comparePoint(E,_),C=t.comparePoint(E,_+1),S=f.create(t.editor);if(x<0){if(C<0)return;C===0?S.setOffset(T,t.startOffset,_+1):S.setOffset(T,t.startOffset,t.endOffset)}else{if(x!==0||C<0)return;C===0?S.setOffset(E,_,_+1):S.setOffset(E,_,t.endOffset)}a.push(S)}}),a.length===0&&a.push(t),a},this.setOffset=function(n,r,a){return At(n)&&(n=n[0]),t.setStart(n,r),t.setEnd(n,a),t},this.findElements=function(){var n=t.startContainer,r=t.endContainer,a=t.startOffset,o=t.endOffset,l=t.collapsed,u=[];if(n!==r||l===!0||n.nodeType===Node.TEXT_NODE)return u;for(var c=n.childNodes,h=a;h<o;h++)u.push(c[h]);return u},this.inCard=function(){var n=t.startNode.closest(yt);return n&&n.length>0},this.getStartOffsetNode=function(){var n=t.startContainer,r=t.startOffset;return(n.nodeType===Node.ELEMENT_NODE||n.nodeType===Node.DOCUMENT_FRAGMENT_NODE)&&(n.childNodes[r]||n.childNodes[r-1])||n},this.getEndOffsetNode=function(){var n=t.endContainer,r=t.endOffset;return(n.nodeType===Node.ELEMENT_NODE||n.nodeType===Node.DOCUMENT_FRAGMENT_NODE)&&(n.childNodes[r]||n.childNodes[r-1])||n},this.scrollIntoView=function(){var n=t.endNode.get();ca&&n&&n.scrollIntoView&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},this.scrollRangeIntoView=function(){var n=t.getEndOffsetNode(),r=n.nodeType===Node.TEXT_NODE?n.parentNode:n,a=t.collapsed?r.getBoundingClientRect():t.getClientRect(),o=window.innerHeight;(a.bottom>=o||a.bottom<=0)&&r.scrollIntoView({block:"center"})},this.scrollIntoViewIfNeeded=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.editor.container,r=arguments.length>1?arguments[1]:void 0;if(t.collapsed)n.scrollIntoView(H(t.getEndOffsetNode()));else{var a=t.getStartOffsetNode(),o=t.getEndOffsetNode();H(a).scrollIntoView(r),H(o).scrollIntoView(r)}},this.containsCard=function(){var n=t.collapsed,r=t.commonAncestorNode;return!n&&(r.type!==3&&r.find(yt).length>0||r.closest(yt).length>0)},this.handleBr=function(n){var r,a=t.editor.list,o=t.editor.block.closest(t.commonAncestorNode);o.find("br").each(function(h){var v,g=H(h),p=g.prev(),b=g.next(),y=g.parent();if((!p||(y==null?void 0:y.hasClass(a.CUSTOMZIE_LI_CLASS))&&(y==null||(v=y.first())===null||v===void 0?void 0:v.equal(p)))&&b&&b.name!=="br"&&!b.isCursor()||!b&&p&&p.name!=="br"){var k;if(n&&p&&!((y==null?void 0:y.hasClass(a.CUSTOMZIE_LI_CLASS))&&(y==null||(k=y.first())===null||k===void 0?void 0:k.equal(g.prev()))))return;g.remove()}});var l=o.first(),u=o.children();if(!l||u.length===1&&o.hasClass(a.CUSTOMZIE_LI_CLASS)&&(l==null?void 0:l.isCard()))return o.append(H("<br />")),t;if(u.length===1&&l.isText()&&l.text().replace(/\r\n|\n|\t|\u200b/g,"").length===0)return o.html("<br />"),t;if(u.length===2&&o.hasClass(a.CUSTOMZIE_LI_CLASS)&&(l==null?void 0:l.isCard())&&["cursor","anchor","focus"].includes(((r=o.last())===null||r===void 0?void 0:r.attributes(Ae))||"")){var c;(c=o.first())===null||c===void 0||c.after("<br />")}return t},this.getPrevNode=function(){t.enlargeFromTextNode();var n=t.startNode,r=t.startOffset;if(!n.isText()){var a=n.children();if(a.length!==0)return a.eq(r-1)}},this.getNextNode=function(){t.enlargeFromTextNode();var n=t.endNode,r=t.endOffset;if(!n.isText()){var a=n.children();if(a.length!==0)return a.eq(r)}},this.editor=i,this.base=e}return ke(f,[{key:"collapsed",get:function(){return this.base.collapsed}},{key:"endOffset",get:function(){return this.base.endOffset}},{key:"startOffset",get:function(){return this.base.startOffset}},{key:"startContainer",get:function(){return this.base.startContainer}},{key:"endContainer",get:function(){return this.base.endContainer}},{key:"commonAncestorContainer",get:function(){return this.base.commonAncestorContainer}},{key:"cloneContents",value:function(){return this.base.cloneContents()}},{key:"deleteContents",value:function(){return this.base.deleteContents()}},{key:"extractContents",value:function(){return this.base.extractContents()}},{key:"getBoundingClientRect",value:function(){return this.base.getBoundingClientRect()}},{key:"getClientRects",value:function(){return this.base.getClientRects()}},{key:"insertNode",value:function(e){var t,n;At(e)&&(e=e[0]);var r=this.startNode;if(!H(e).isCursor()&&((t=r.get())===null||t===void 0?void 0:t.childNodes.length)===1&&((n=r.first())===null||n===void 0?void 0:n.name)==="br"){var a;(a=r.first())===null||a===void 0||a.remove()}else r.name==="br"&&r.remove();(e.nodeType===Node.TEXT_NODE||e.nodeName==="BR")&&r.isEditable()&&this.shrinkToElementNode().shrinkToTextNode(),(e instanceof Element||e instanceof DocumentFragment)&&this.editor.nodeId.generate(e),this.base.insertNode(e)}},{key:"isPointInRange",value:function(e,t){return At(e)&&(e=e[0]),this.base.isPointInRange(e,t)}},{key:"comparePoint",value:function(e,t){return At(e)&&(e=e[0]),this.base.comparePoint(e,t)}},{key:"setEnd",value:function(e,t){return At(e)&&(e=e[0]),this.base.setEnd(e,t)}},{key:"setEndAfter",value:function(e){if(At(e)&&(e=e[0]),!!e.parentNode)return this.base.setEndAfter(e)}},{key:"setEndBefore",value:function(e){if(At(e)&&(e=e[0]),!!e.parentNode)return this.base.setEndBefore(e)}},{key:"setStart",value:function(e,t){return At(e)&&(e=e[0]),this.base.setStart(e,t)}},{key:"setStartAfter",value:function(e){if(At(e)&&(e=e[0]),!!e.parentNode)return this.base.setStartAfter(e)}},{key:"setStartBefore",value:function(e){if(At(e)&&(e=e[0]),!!e.parentNode)return this.base.setStartBefore(e)}},{key:"toString",value:function(){return this.base.toString()}},{key:"startNode",get:function(){return H(this.base.startContainer)}},{key:"endNode",get:function(){return H(this.base.endContainer)}},{key:"commonAncestorNode",get:function(){return H(this.base.commonAncestorContainer)}},{key:"deepCut",value:function(){this.collapsed||this.extractContents();var e=this.startNode;if(!e.isEditable()){var t=e;if(t&&!t.isEditable()){for(var n=t.parent();n&&!n.isEditable();)t=n,n=n.parent();this.setEndAfter(t[0]);var r=this.extractContents();this.insertNode(r),this.collapse(!0)}}}},{key:"equal",value:function(e){return this.startContainer===e.startContainer&&this.startOffset===e.startOffset&&this.endContainer===e.endContainer&&this.endOffset===e.endOffset}},{key:"getRootBlock",value:function(){if(this.startNode.isEditable())return this.startNode.children().eq(this.startOffset);for(var e=this.startNode;((t=e)===null||t===void 0?void 0:t.parent())&&!e.parent().isEditable();){var t;e=e.parent()}return e}},{key:"filterPath",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=[];return function(r){var a=H(r);if(t&&["left","right","center","body"].includes(a.attributes(lt))){var o=e.editor.card.closest(a);return o&&(o==null?void 0:o.length)>0&&n.push(o),!0}return t&&a.isCard()&&n.includes(a)?!0:!Or(a)}}},{key:"toPath",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.container,r=this.cloneRange(),a=r.commonAncestorNode;if(!(!a.isRoot()&&!a.inEditor())){r.shrinkToElementNode().shrinkToTextNode();var o=function(u,c){var h,v=u.attributes(qe),g=v?0:-1,p=u.getPath(n,!((h=u.parent())===null||h===void 0)&&h.isRoot()?void 0:e.filterPath(t),function(b,y,k){if(b===-1)return v="",g=-1,[];v||(v=k.attributes(qe),g=y.length),y.unshift(b)});return g=p.length-g,p.push(c),{path:p,id:v,bi:g}};return{start:o(r.startNode,r.startOffset),end:o(r.endNode,r.endOffset)}}}}]),f}();Ge.create=void 0,Ge.from=void 0,Ge.fromPath=void 0,Ge.create=function(f){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,e=arguments.length>2?arguments[2]:void 0,t;return e?t=i.caretRangeFromPoint(e.x,e.y):t=i.createRange(),Ge.from(f,t)},Ge.from=function(f){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;if(!Wm(i)){var e=Gm(i)?i:i.getSelection();if(e&&e.rangeCount>0)i=e.getRangeAt(0);else return null}return new Ge(f,i)},Ge.fromPath=function(f,i){var e,t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f.container,a=i.start.path.slice(),o=i.end.path.slice(),l=a.pop(),u=o.pop(),c=function(E){for(var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.container.get(),T=_,x=0;x<E.length;x++){var C=E[x];C<0&&(C=0);for(var S=void 0,R=T.firstChild,z=0;R;)if(!(R instanceof Element)||!R.getAttribute(uo)&&R.getAttribute(Ae)!==Ni||n&&["left","right"].includes(R.getAttribute(lt)||"")){if(z===C||!R.nextSibling){S=R;break}z++,R=R.nextSibling}else R=R.nextSibling;if(!S)break;T=S}return T},h=function(E,_,T,x){if(T!==null){var C;if(x<0&&(x=0),T.nodeType===Node.ELEMENT_NODE&&x>T.childNodes.length&&(x=T.childNodes.length),T.nodeType===Node.TEXT_NODE&&x>(((C=T.nodeValue)===null||C===void 0?void 0:C.length)||0)){var S;x=((S=T.nodeValue)===null||S===void 0?void 0:S.length)||0}_[E](T,x)}},v=i.start.id?(e=r.get())===null||e===void 0?void 0:e.querySelector("[".concat(qe,'="').concat(i.start.id,'"]')):r.get(),g=c(i.start.bi>-1&&v instanceof Element?a.slice(i.start.bi):a,v instanceof Element?v:void 0),p=i.end.id?(t=r.get())===null||t===void 0?void 0:t.querySelector("[".concat(qe,'="').concat(i.end.id,'"]')):r,b=c(i.end.bi>-1&&p instanceof Element?o.slice(i.end.bi):o,p instanceof Element?p:void 0),y=Ge.create(f,document);return h("setStart",y,g,l===void 0?0:l),h("setEnd",y,b,u===void 0?0:u),y};var Gm=function(i){return i.getRangeAt!==void 0},Wm=function(i){return i.collapsed!==void 0},Li=function(i){return!!i&&i.base!==void 0};function cn(f,i){i===void 0&&(i={});var e=i.insertAt;if(!(!f||typeof document=="undefined")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=f:n.appendChild(document.createTextNode(f))}}var $m=`.data-drop-cursor {\r
	position: absolute;\r
	width: 2px;\r
	background-color: #347EFF;\r
}\r
\r
div.data-drag-image {\r
	background-color: #f9f9f9;\r
}`;cn($m);var Km=function(){function f(i,e){be(this,f),this.x=0,this.y=0,this.doc=document,this.range=void 0,this.caretRange=void 0,this.targetCard=void 0,this.caretCard=void 0,this.isCardLeftRange=!1,this.engine=void 0,this.options={className:"data-drop-cursor"},this.engine=i,this.options=Ve(Ve({},this.options),e)}return ke(f,[{key:"getRangeForPoint",value:function(){var e=this.doc,t=this.x,n=this.y;if(e.caretRangeFromPoint!==void 0){var r=Ge.create(this.engine,e,{x:t,y:n});if(r)return r}if(event&&event.rangeParent!==void 0){var a=Ge.create(this.engine,e);return a.setStart(event.rangeParent,event.rangeOffset),a.collapse(!0),a}}},{key:"getCard",value:function(){return this.targetCard||this.caretCard}},{key:"parseEvent",value:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="move");var t=this.engine.card;this.x=e.clientX,this.y=e.clientY;var n=H(e.target||[]);this.doc=n.document||document,this.targetCard=t.find(n),this.caretRange=this.getRangeForPoint(),this.caretCard=this.caretRange?t.find(this.caretRange.commonAncestorContainer):void 0}},{key:"getRange",value:function(){var e=this.caretRange,t=this.doc,n=this.x,r=this.getCard(),a;if(r&&r.root.length>0){a=Ge.create(this.engine,t);var o=r.root.getBoundingClientRect()||{left:0,right:0},l=o.left,u=o.right,c=(l+u)/2;a.select(r.root.get()),c<n?(a.collapse(!1),this.isCardLeftRange=!1):(a.collapse(!0),this.isCardLeftRange=!0)}return this.range=a||e,this.range}},{key:"getRect",value:function(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,r=this.isCardLeftRange,a=this.range,o=this.getCard();if(o&&o.root.length>0&&a){if(r){a.setEnd(a.commonAncestorContainer,a.endOffset+1);var l=a.getBoundingClientRect(),u=l.left,c=l.bottom,h=l.top;return a.setEnd(a.commonAncestorContainer,a.endOffset-1),{x:u-n,y:h,height:c-h}}a.setStart(a.commonAncestorContainer,a.startOffset-1);var v=a.getBoundingClientRect(),g=v.right,p=v.top,b=v.bottom;return a.setStart(a.commonAncestorContainer,a.startOffset+1),{x:g-n,y:p,height:b-p}}var y=(e=this.range)===null||e===void 0?void 0:e.getBoundingClientRect();if(((t=y)===null||t===void 0?void 0:t.height)===0){var k,E=(k=this.range)===null||k===void 0?void 0:k.startContainer;y=E.getBoundingClientRect()}var _=y||{},T=_.left,x=_.top,C=_.bottom;return{x:T,y:x,height:(C||0)-(x||0)}}},{key:"getCursor",value:function(){var e=this.options.className;return H("body > div.".concat(e))}},{key:"removeCursor",value:function(){this.getCursor().remove()}},{key:"setCursor",value:function(){this.removeCursor();var e=this.options.className,t=H('<div class="'.concat(e,'" />'));H(document.body).append(t)}}]),f}(),Zm=function(){function f(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};be(this,f),this.events={},this.globalEvents={},this.engine=void 0,this.isComposing=void 0,this.isSelecting=void 0,this.dragoverHelper=void 0,this.options=void 0,this.keydownRange=null,this.engine=i,this.isComposing=!1,this.isSelecting=!1,this.dragoverHelper=new Km(i),this.options=e}return ke(f,[{key:"isCardInput",value:function(e){for(var t=e.target?H(e.target):null;t;){if(t.isEditable())return!1;if(t.attributes(lt)==="center"||t.attributes(Ae)===Ni)return!0;var n=t.parent();if(!n)break;t=n}return!1}},{key:"onInput",value:function(e){var t=this,n=this.options.bindInput;if(!(n&&!n())){var r=null;this.onContainer("compositionstart",function(o){if(!t.engine.readonly){t.isCardInput(o)||t.engine.ot.startMutationCache();var l=t.engine,u=l.change,c=l.node,h=l.block,v=l.list,g=u.range.get().cloneRange().shrinkToTextNode().enlargeToElementNode();if(!g.collapsed){var p=h.closest(g.startNode),b=h.closest(g.endNode);if((c.isCustomize(p)||c.isCustomize(b))&&!p.equal(b)){var y;(y=v.backspaceEvent)===null||y===void 0||y.trigger(new KeyboardEvent(""))}}t.isComposing=!0}}),this.onContainer("compositionend",function(){t.engine.readonly||(t.isComposing=!1)}),this.onContainer("beforeinput",function(o){if(!t.engine.readonly){var l=t.engine,u=l.change,c=l.card,h=l.node,v=l.block,g=l.list;if(o.data==="@"){var p=t.engine.trigger("keydown:at",o);p===!1&&(t.engine.ot.submitMutationCache(),o.preventDefault())}u.rangePathBeforeCommand||u.cacheRangeBeforeCommand();var b=u.range.get(),y=b.cloneRange().shrinkToTextNode().enlargeToElementNode(),k=y.startNode;if(Zs&&k.name==="li"&&!h.isCustomize(k)){var E;((E=k.first())===null||E===void 0?void 0:E.name)!=="br"&&k.prepend("<br />")}if(jc&&k.name==="li"&&y.startOffset===1&&h.isCustomize(k)&&t.isComposing){var _=k.first(),T=_==null?void 0:_.next(),x=function(){var O=H("\u200B",null);_==null||_.after(O),y.setOffset(O,1,1),u.range.select(y),r=k};if(T!=null&&T.isText()){var C=T.text();/^\u200b/.test(C)||x()}else(T==null?void 0:T.name)==="br"&&T.remove(),x()}if(y.collapsed||(y.commonAncestorNode.attributes(lt)==="body"?c.remove(y.commonAncestorNode):(y.startNode.attributes(lt)==="body"&&c.remove(y.startNode),y.endNode.attributes(lt)==="body"&&c.remove(y.endNode))),!y.collapsed&&!t.isComposing){var S=v.closest(y.startNode),R=v.closest(y.endNode);if((h.isCustomize(S)||h.isCustomize(R))&&!S.equal(R)){var z;(z=g.backspaceEvent)===null||z===void 0||z.trigger(new KeyboardEvent("")),h.insertText(o.data||"")}}var F=o.inputType;t.isComposing&&!F.includes("Composition")&&t.engine.ot.submitMutationCache();var G=["format","history"];G.forEach(function(M){if(F.indexOf(M)===0){o.preventDefault();var O=F.substring(M.length).toLowerCase();t.engine.command.queryEnabled(O)&&t.engine.command.execute(O)}})}});var a=null;this.onContainer("input",function(o){t.engine.readonly||t.isCardInput(o)||(t.engine.isEmpty()?t.engine.showPlaceholder():t.engine.hidePlaceholder(),a&&clearTimeout(a),a=setTimeout(function(){if(!t.isComposing){if(jc&&r){var l=r.first(),u=l==null?void 0:l.next();if(u!=null&&u.isText()){var c=u.text();if(/^\u200b/.test(c)){var h=u.get();h==null||h.splitText(1),h==null||h.remove()}}var v=t.engine.change.range.get(),g=v.startNode,p=v.startOffset;if(v.collapsed&&(g==null?void 0:g.isText())){var b=g.text(),y=b.substring(p);/^\u200b/.test(y)&&(g.text(b.substring(0,p)+y.substring(1)),v.setOffset(g,p,p),t.engine.change.range.select(v))}r=null}e(o),t.engine.ot.submitMutationCache()}},10))})}}},{key:"onSelect",value:function(e){var t=this,n=this.options.bindSelect;n&&!n()||(this.onContainer(ca?"touchstart":"mousedown",function(r){t.isCardInput(r)||(t.isSelecting=!0)}),this.onDocument(ca?"touchend":"mouseup",function(r){!t.isSelecting||(t.isSelecting=!1,window.setTimeout(function(){return e(r)},10))}),this.onContainer("keydown",function(){var r=Ge.from(t.engine);t.keydownRange=r}),this.onContainer("keyup",function(r){if(!t.engine.readonly&&!t.isCardInput(r)&&(Le("left",r)||Le("right",r)||Le("up",r)||Le("down",r)||r.key==="Meta"||Le("shift+left",r)||Le("shift+right",r)||Le("shift+up",r)||Le("shift+down",r)||Le("ctrl+b",r)||Le("ctrl+f",r)||Le("ctrl+n",r)||Le("ctrl+p",r)||Le("ctrl+a",r)||Le("ctrl+e",r)||Le("home",r)||Le("end",r))){var a=Ge.from(t.engine);if(t.keydownRange&&a&&a.equal(t.keydownRange))return;t.isComposing||e(r)}}))}},{key:"onPaste",value:function(e){var t=this,n=this.options.bindPaste;if(!(n&&!n())){var r=!1;this.onContainer("keydown",function(a){t.engine.readonly||((!Le("mod",a)||!Le("shift",a)||!Le("v",a))&&(r=!1),(Le("mod+shift+v",a)||Le("mod+alt+shift+v",a))&&(r=!0))}),this.onDocument("paste",function(a){var o=t.engine.change.range.get();if(!!t.engine.container.contains(o.commonAncestorNode)&&!t.engine.readonly&&!t.isCardInput(a)){a.preventDefault();var l=t.engine.clipboard.getData(a),u=r;r=!1,e(Ve(Ve({},l),{},{isPasteText:u}))}})}}},{key:"onDrop",value:function(e){var t=this,n=this.options.bindDrop;if(!(n&&!n())){var r,a,o,l=function(c){if(!(!c.target||t.engine.readonly)){c.stopPropagation(),t.dragoverHelper.setCursor();var h=H(c.target),v=h.attributes("drag-card-trigger");if(r=t.engine.card.find(v||h),r){var g,p;if((g=r.toolbarModel)===null||g===void 0||g.hideCardToolbar(),a=r.find("img.data-drag-image"),a.length>0)a=t.engine.node.clone(a);else{a=H('<div class="data-drag-image" />');var b=r.root.get();b&&a.css({width:b.clientWidth+"px",height:b.clientHeight+"px"})}a.css({position:"absolute",top:"-99999px",right:"-99999px"}),H(document.body).append(a),(p=c.dataTransfer)===null||p===void 0||p.setDragImage(a[0],0,0)}}};this.onRoot("dragstart",l),this.onContainer("dragstart",l),this.onContainer("dragover",function(u){if(!t.engine.readonly){var c=t.dragoverHelper,h=c.getCursor();if(h.length!==0){c.parseEvent(u),o=c.getRange();var v=c.getRect();h.css({height:v.height+"px",top:Math.round(window.pageYOffset+(v.y||0))+"px",left:Math.round(window.pageXOffset+(v.x||0))+"px"})}else t.dragoverHelper.setCursor()}}),this.onContainer("dragleave",function(){t.dragoverHelper.removeCursor()}),this.onContainer("dragend",function(){t.dragoverHelper.removeCursor(),a&&(a.remove(),a=void 0)}),this.onContainer("drop",function(u){if(!t.engine.readonly){u.preventDefault(),t.dragoverHelper.removeCursor(),a&&(a.remove(),a=void 0);var c=u.dataTransfer,h=[];try{c&&c.items&&c.items.length>0?Array.from(c.items).forEach(function(g){if(g.kind==="file"){var p=g.getAsFile();p&&h.push(p)}}):c&&c.files&&c.files.length>0&&(h=Array.from(c.files))}catch{c&&c.files&&c.files.length>0&&(h=Array.from(c.files))}var v={event:u,range:o,card:r,files:h};e(v),r=void 0}})}}},{key:"onDocument",value:function(e,t,n){this.addEvent("document",e,t,n)}},{key:"onWindow",value:function(e,t,n){this.addEvent("window",e,t,n)}},{key:"onContainer",value:function(e,t,n){this.addEvent("container",e,t,n)}},{key:"onRoot",value:function(e,t,n){this.addEvent("root",e,t,n)}},{key:"addEvent",value:function(e,t,n,r){var a=this;if(this.globalEvents[e]||(this.globalEvents[e]=[]),!this.globalEvents[e].find(function(l){return l.type===t})){var o=function(){for(var u=a.events[e].filter(function(g){return g.type===t}),c,h=0;h<u.length;h++){var v;if(c=(v=u[h]).listener.apply(v,arguments),c===!1)break}return c};switch(e){case"container":this.engine.container.on(t,o);break;case"root":this.engine.root.on(t,o);break;case"document":document.addEventListener(t,o);break;case"window":window.addEventListener(t,o);break}this.globalEvents[e].push({type:t,listener:o})}this.events[e]||(this.events[e]=[]),r!==void 0?this.events[e].splice(r,0,{type:t,listener:n}):this.events[e].push({type:t,listener:n})}},{key:"destroy",value:function(){var e=this;Object.keys(this.globalEvents).forEach(function(t){var n=e.globalEvents[t];n.forEach(function(r){t==="window"?window.removeEventListener(r.type,r.listener):t==="document"?document.removeEventListener(r.type,r.listener):t==="container"?e.engine.container.off(r.type,r.listener):t==="root"&&e.engine.root.off(r.type,r.listener)})})}}]),f}(),of=function(){function f(i){be(this,f),this.source=void 0,this.source=i}return ke(f,[{key:"toHTML",value:function(){var e=ti(this.source);return e=e.replace(/\n/g,"</p><p>").replace(/<p><\/p>/g,"<p><br /></p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),e.indexOf("</p><p>")>=0&&(e="<p>".concat(e,"</p>")),e}}]),f}(),Ym=function(i){var e="";for(var t in i)if(t!=="style"){var n=ti(i[t]);e+=" ".concat(t,'="').concat(n,'"')}return e.trim()},Xm=function(i){var e="";for(var t in i){t=t.toLowerCase();var n=ti(i[t]);/^(padding|margin|text-indent)/.test(t)&&fo(n)===0||(t.endsWith("color")&&(n=tr(n).toHexString()),e+=" ".concat(t,": ").concat(n,";"))}return e.trim()},ur=function(){function f(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(be(this,f),this.root=void 0,this.editor=void 0,this.isNormalize=!0,this.editor=e,this.isNormalize=n,typeof i=="string"){var r;i=i.replace(/<a\s{0,1000}\/>/gi,"<a></a>"),i=i.replace(/<a(\s[^>]+?)\/>/gi,function(l,u){return"<a".concat(u,"></a>")}),i=(r=i)===null||r===void 0?void 0:r.replace(/<img .*>/gi,function(l){return l.replace(/on[a-zA-Z]{0,20}=/g,"notallow=")}),i=i.replace(/<p(>|\s+[^>]*>)/gi,"<paragraph$1").replace(/<\/p>/gi,"</paragraph>"),i=Qs(i);var a=new DOMParser().parseFromString(i,"text/html"),o=a.body.innerHTML.replace(/<paragraph(>|\s+[^>]*>)/gi,"<p$1").replace(/<\/paragraph>/gi,"</p>");this.root=H("<div>".concat(o,"</div>"))}else At(i)?this.root=i:this.root=H(i);t&&t(this.root)}return ke(f,[{key:"convert",value:function(e,t,n){for(var r=e.transform(t),a=[],o=this.editor.node,l=null;r;){var u,c=r,h=c.rule;a.push(h);var v=r.node,g=v.name,p=v.attributes,b=v.style;g!=="card"&&delete p[qe],delete p.id;var y=H("<".concat(g," />"));if(o.setAttributes(y,Ve(Ve({},p),{},{style:b})),(u=y.get())===null||u===void 0||u.append.apply(u,gt(t.get().childNodes)),t.isCard())return t.replaceWith(y),y;if(r.replace?(t.replaceWith(y),t=y):y.each(function(k){var E=t.get();E&&E instanceof Element&&E.append(k)}),(!l||l.length===0)&&(l=y),o.isBlock(y,n)){r=e.transform(y,function(k){return a.indexOf(k)<0});continue}r=e.transform(t,function(k){return a.indexOf(k)<0})}return l}},{key:"normalize",value:function(e,t,n){var r=this,a=this.editor.node,o=this.editor.inline;if(!this.isNormalize){if(!n)return;var l=e.find(yt);l.each(function(h,v){var g=l.eq(v);!g||r.convert(n,g,t)});var u=e.find("".concat(co,",").concat(Ws,",").concat($s));u.each(function(h,v){var g=u.eq(v);!g||r.convert(n,g,t)});return}var c=function(v){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"mark",p=v.attributes(),b=Oi(p.style||"");if(delete p.style,!(Object.keys(p).length===0&&Object.keys(b).length===0)){var y=Object.keys(p).length,k=Object.keys(b).length,E=v.clone();t.filter(v,p,b,!0),E.removeAttributes(qe);var _=Object.keys(p),T=0;_.forEach(function(R){p[R]&&(T++,E.removeAttributes(R))});var x=0,C=Object.keys(b);if(C.forEach(function(R){b[R]&&(x++,E.css(R,""))}),(T===y&&x===k||T===0&&x===0)&&t.getType(E)===g){v.before(E);var S=v.children();E.append(S.length>0?S:g==="block"?"<br />":H("\u200B",null)),v.remove(),v=E;return}return E.attributes("style").trim()===""&&E.removeAttributes("style"),E}};e.traverse(function(h){if(!(h[0]===e[0]||["style","script","meta"].includes(h.name))&&h.isElement()){var v=h.isCard();if(n&&(!t.getType(h)||v)){var g=r.convert(n,h,t);if(g)return v?!0:g}if(v)return;if(a.isMark(h,t)){var p=function(){var b=[],y=t.getRule(h);if(y){var k=function(){var E;b.push(y),((E=h.get())===null||E===void 0?void 0:E.childNodes.length)===0&&r.editor.mark.repairCursor(h);var _=c(h);if(!_)return{v:{v:void 0}};var T=t.getType(_,function(M){return M.name===_.name&&M.type==="mark"&&b.indexOf(M)<0});if(!T&&n){var x=r.convert(n,_,t);if(x&&x.length>0){var C=h.children();return x.append(C.length>0?C:H("\u200B",null)),h.append(_.length===0?x:_.children()),{v:{v:void 0}}}}for(var S=h;T==="mark";){for(var R=S.children(),z=_;;){var F=z.children();if(F.length>0)z=F;else break}if(z.append(R.length>0?R:H("\u200B",null)),S.append(_),S=_,_=c(_),!_)break;if(T=t.getType(_,function(M){return M.name===_.name&&M.type==="mark"&&b.indexOf(M)<0}),!T){if(n){var G=r.convert(n,_,t);if(G&&G.length>0){_=_.length>0?_.children():G,T="mark";continue}}break}if(y=t.getRule(_),!y)break;b.push(y)}}();if(et(k)==="object")return k.v}}();if(et(p)==="object")return p.v}else if(a.isInline(h))return o.flat(h,t)}})}},{key:"traverse",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=this.editor.node,l=e.first();l;){if(["style","script","meta"].includes(l.name)){l=l.next();continue}if(l.isElement()){var u=l.name,c=l.attributes(),h=Oi(c.style||"");if(delete c.style,["left","right"].indexOf(c[lt])>=0){l=l.next();continue}var v=!0,g=void 0;if(t&&c[Ae]!==ei)if(g=t.getType(l),g===void 0){var p,b;v=!1;var y=l.parent();if(y&&o.isBlock(y,t)&&((p=y.get())===null||p===void 0?void 0:p.childNodes.length)===1&&((b=l.get())===null||b===void 0?void 0:b.childNodes.length)===0){var k=H("<br />");l.before(k),l.remove(),l=k,u=k.name,c={},h={},v=!0}}else t.filter(l,c,h);if(c[lt]!=="center"&&r.onOpen&&v){var E=r.onOpen(l,u,c,h);if(E===!1){l=l.next();continue}}(u!=="card"||a)&&this.traverse(l,t,n,r,a),c[lt]!=="center"&&r.onClose&&v&&r.onClose(l,u,c,h)}else if(l.isText()){var _=l[0].nodeValue?ti(l[0].nodeValue):"";_===""&&o.isBlock(l.parent(),t||void 0)&&(l.prev()||(_=_.replace(/^[ \n]+/,"")),l.next()||(_=_.replace(/[ \n]+$/,"")));var T=l.prev(),x=l.next();T&&o.isBlock(T,t||void 0)&&x&&o.isBlock(x,t||void 0)&&_.trim()===""&&(_=_.trim()),r.onText&&r.onText(l,_)}l=l.next()}}},{key:"toValue",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=[],l=this.editor.node,u=this.root.clone(!0);t&&this.normalize(u,t,n),this.editor.trigger("parse:value-before",u),this.traverse(u,t,n,{onOpen:function(v,g,p,b){var y;if(e.editor.trigger("parse:value",v,p,b,o)===!1)return!1;if(o.push("<"),o.push(g),Object.keys(p).length>0&&o.push(" "+Ym(p)),Object.keys(b).length>0){var k=Xm(b);k!==""&&(o.push(' style="'),o.push(k),o.push('"'))}l.isVoid(g,t||void 0)&&((y=v.get())===null||y===void 0?void 0:y.childNodes.length)===0?o.push(" />"):o.push(">")},onText:function(v,g){r&&g.length>1&&(g=g.replace(/[\u00a0 ]+/g,function(p){var b=[];p=p.replace(/\u00a0/g," ");for(var y=0;y<p.length;y++)b[y]=y%2==0?p[y]:"\xA0";return b.join("")})),o.push(g)},onClose:function(v,g){l.isVoid(g,t||void 0)||o.push("</".concat(g,">"))}}),this.editor.trigger("parse:value-after",o),o.length>0&&/^\n+/g.test(o[0])&&(o[0]=o[0].replace(/^\n+/g,"")),o.length>0&&/\n+$/g.test(o[o.length-1])&&(o[o.length-1]=o[o.length-1].replace(/\n+$/g,""));var c=o.join("");return a?Qs(c):c}},{key:"toHTML",value:function(e,t){var n=H("<div />"),r=this.editor.container.css();return e&&t?(H(e).append(this.root).css(r),n.append(t)):n.append(this.root),this.editor.trigger("parse:html-before",this.root),this.editor.trigger("parse:html",n),this.editor.trigger("parse:html-after",n),n.html()}},{key:"toDOM",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=this.toValue(e,t,!1,!0),r=new DOMParser().parseFromString(n,"text/html"),a=r.createDocumentFragment(),o=r.body.childNodes;o.length>0;){var l=o[0];a.appendChild(l)}return a}},{key:"toText",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=this.root.clone(!0),o=[];return this.traverse(a,null,null,{onOpen:function(u,c){if(c==="br"&&o.push(`
`),r&&u.name==="li"){if(u.hasClass(e.editor.list.CUSTOMZIE_LI_CLASS))return;var h=u.parent(),v=h==null?void 0:h.css("listStyleType");if((h==null?void 0:h.name)==="ol"){var g=h[0].start,p=g||1;o.push("".concat(Yc(v,p),". ")),h.attributes("start",p+1)}else(h==null?void 0:h.name)==="ul"&&o.push(Yc(v)+" ")}},onText:function(u,c){c=Js(c),c=c.replace(/\u00a0/g," "),o.push(c)},onClose:function(u,c){if(c==="p"||e.editor.node.isBlock(u,t||e.editor.schema)){var h=Array.from(u.get().childNodes);if(h&&h.some(function(v){return v.nodeName==="BR"})||h.some(function(v){return e.editor.node.isBlock(v,t||e.editor.schema)}))return;o.push(`
`)}}},n),o.join("").trim()}}]),f}(),Jm=function(){function f(i,e){be(this,f),this.source=void 0,this.engine=void 0,this.schema=void 0,this.source=i,this.engine=e,this.schema=this.engine.schema.clone()}return ke(f,[{key:"parser",value:function(){var e=this,t=this.engine.conversion.clone();this.engine.trigger("paste:schema",this.schema);var n=new ur(this.source,this.engine,function(r){e.engine.trigger("paste:origin",r)});return n.toDOM(this.schema,t)}},{key:"getDefaultStyle",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine.container,t={color:tr(e.css("color")).toHexString(),"background-color":tr(e.css("background-color")).toHexString(),"font-size":e.css("font-size")};return t}},{key:"elementNormalize",value:function(e){var t=this,n=this.getDefaultStyle(),r=this.engine,a=r.inline,o=r.list,l=this.engine.node,u=this.engine.mark,c=this.engine.block,h=[];H(e).traverse(function(v){var g,p,b,y=v.parent();if(!(!y||v.isCard()||v.fragment===e)){if(v.isText()){var k=v.text();if(/\u200b/.test(k)){var E=!0,_=v.next(),T=v.prev(),x=v.parent();(x&&l.isMark(x,t.schema)||x&&l.isInline(x,t.schema)||_&&l.isInline(_,t.schema)||T&&l.isInline(T,t.schema))&&(E=!1),E&&(k=k.replace(/\u200b/g,""),v.text(k))}else if(/^\n$/.test(k)){if(l.isList(y)){v.remove();return}var C=v.next();C&&l.isBlock(C)&&v.remove()}if(l.isList(y)){var S=v.next(),R=v.prev(),z=function(ze,Be){if(l.isCustomize(ze)){var vr=ze.first();if(vr&&vr.isCard()){var en=vr.attributes(He)||vr.attributes(bt);en&&o.addCardToCustomize(Be,en)}}},F=null;return(S==null?void 0:S.name)==="li"?(F=S.clone(),z(S,F)):(R==null?void 0:R.name)==="li"?(F=R.clone(),z(R,F)):F=H("<li></li>"),v.before(F),F.append(v),F}return}var G=v.css();for(var M in n){var O=G[M];!O||(M.endsWith("color")&&(O=tr(O).toHexString()),O.toLowerCase()===n[M].toLowerCase()&&v.css(M,""))}var A=t.schema.getType(v);if(!A){var I=v.first();return l.unwrap(v),I}l.removeMinusStyle(v,"text-indent"),l.isList(v)&&v.css("padding-left","");var $=v.attributes();for($.style&&$.style.trim()===""&&v.removeAttributes("style");v.name==="span"&&l.isEmpty(v);){var ie=v.children();if(ie.length>0)break;if(y=v.parent(),v.remove(),!y||(v=y,y=v.parent(),!y))return;A=void 0,$=void 0}if($||($=v.attributes()),!$[bt]){var N=A?A==="block":l.isBlock(v,t.schema),P=l.isVoid(v,t.schema),V=l.isBlock(y,t.schema);if(N&&$["data-type"]!=="p"&&!P&&!V&&l.html(v)===""){v.remove();return}if($["data-type"]==="p"&&v.removeAttributes("data-type"),N&&((g=y)===null||g===void 0?void 0:g.name)==="p"){var W;l.unwrap(y),y=v.parent(),((W=y)===null||W===void 0?void 0:W.fragment)===e&&(y=void 0),V=y?l.isBlock(y,t.schema):!1}var Y=y?l.isList(y):!1;if(v.name==="li"&&y&&!Y){var Q=H("<ul />");v.before(Q),Q.append(v);return}if(l.isList(v)&&y&&l.isList(y)){var re=[],te=[],J=!0,ne=y.children().toArray(),ae=y.clone(),fe=function(){var ze,Be;return((ze=(Be=ae.get())===null||Be===void 0?void 0:Be.childNodes.length)!==null&&ze!==void 0?ze:0)>0?(J?re.push(ae):te.push(ae),ae=y.clone(),!0):!1};ne.forEach(function(Ke,ze){if(!!Ke){if(J&&Ke.equal(v)){ne.length-1===ze?(fe(),te.push(v)):(ze===0||fe(),re.push(v)),J=!1;return}if(Ke.name==="li"){ae.append(Ke);return}else fe();J?re.push(Ke):te.push(Ke)}}),fe();var pe=y.attributes(o.INDENT_KEY)||"0";v.attributes(o.INDENT_KEY,pe),o.addIndent(v,1);var ge=y;return re.forEach(function(Ke){var ze,Be=H(Ke);!Be||((ze=Be.get())===null||ze===void 0?void 0:ze.childNodes.length)===0||(ge.after(Be),ge=Be)}),te.forEach(function(Ke){var ze,Be=H(Ke);!Be||((ze=Be.get())===null||ze===void 0?void 0:ze.childNodes.length)===0||(ge.after(Be),ge=Be)}),y.remove(),v||void 0}if(v.name!=="li"&&Y){if(v.name==="br"){v.remove();return}var ye=H("<li />");v.before(ye),ye.append(v);return}if(l.isList(v)&&((p=y)===null||p===void 0?void 0:p.name)==="li"){var L,K,U,le,he,ve,xe=(L=y)===null||L===void 0?void 0:L.parent();if(!xe){l.unwrap(y);return}var Se=xe.clone(),me=xe.clone(),_e=!0,Xe=xe.children().toArray();Xe.forEach(function(Ke){if(!!Ke){if(_e&&Ke.equal(y)){_e=!1;return}_e?Se.append(Ke):me.append(Ke)}});var at=(K=y)===null||K===void 0||(U=K.parent())===null||U===void 0?void 0:U.hasClass("data-list"),Dt=(le=y)===null||le===void 0?void 0:le.children(),qt=null,Jt=null;Dt.each(function(Ke,ze){var Be=Dt.eq(ze);if(!(!Be||l.isEmptyWithTrim(Be)&&!l.isVoid(Be))){var vr=l.isList(Be),en=Se[Se.length-1];if(vr){var Ta,yl=((Ta=H(en))===null||Ta===void 0?void 0:Ta.attributes(o.INDENT_KEY))||"0";Be.attributes(o.INDENT_KEY,yl),o.addIndent(Be,1),Se[Se.length]=Be[0],qt=null;return}else if(l.isBlock(Ke,t.schema)){var So=Se.length;Se[So]=Be[0],Se[So+1]=Se.clone()[0],qt=null;return}if(!qt){var Ui;qt=H(at?'<li class="'.concat(o.CUSTOMZIE_LI_CLASS,'" />'):"<li />");var ui=(Ui=H(en))===null||Ui===void 0?void 0:Ui.last();ui?ui==null||ui.after(qt):H(en).append(qt)}qt.append(Ke),Jt||(Jt=qt)}}),(he=y)===null||he===void 0||he.remove();var Ut=xe;return Se.each(function(Ke){var ze,Be=H(Ke);!Be||((ze=Be.get())===null||ze===void 0?void 0:ze.childNodes.length)===0||(Ut.after(Be),Ut=Be)}),me.each(function(Ke){var ze,Be=H(Ke);!Be||((ze=Be.get())===null||ze===void 0?void 0:ze.childNodes.length)===0||(Ut.after(Be),Ut=Be)}),xe.remove(),((ve=Jt)===null||ve===void 0?void 0:ve.next())||Se.next()||void 0}if(v.name==="p"&&Y){var Yn=H("<li />");return l.replace(v,Yn),Yn}if(N&&!P&&l.html(v).trim()===""&&(l.isRootBlock(v,t.schema)||v.name==="li")&&l.html(v,"<br />"),N&&((b=y)===null||b===void 0?void 0:b.name)==="li"){var Nn,Dn,Rn=(Nn=(Dn=v.get())===null||Dn===void 0?void 0:Dn.childNodes)!==null&&Nn!==void 0?Nn:[];if(v.name==="p"){var On=v.next();Rn.length===0&&!On&&v.append("<br />");var hn=v.first();return On&&On.name==="p"&&v.append("<br />"),l.unwrap(v),hn}else{var Wt=y.parent();if(!Wt)return;for(var qn=Wt.clone(),Vt=Wt.clone(),li=y.prev();li;)qn.prepend(li),li=y.prev();for(var Fr=y.next();Fr;)Vt.append(Fr),Fr=y.next();for(var hr=y.clone(),Ln=y.clone(),ft=v.prev();ft;)hr.prepend(ft),ft=v.prev();for(var Qt=v.next();Qt;)Ln.append(Qt),Qt=v.next();Wt.after(v),hr.first()&&qn.append(hr),Ln.first()&&Vt.prepend(Ln),qn.first()&&Wt.before(qn),Vt.first()&&v.after(Vt),Wt.remove();return}}if(!N&&l.isInline(v)&&!v.isCard()&&!P){var In=v.allChildren().some(function(Ke){return l.isVoid(Ke,t.schema)});l.isEmptyWithTrim(v)&&!In?v.remove():a.repairCursor(v)}l.removeSide(v);var kt=y,bl=function Ke(ze){if(kt&&!kt.fragment&&l.isBlock(ze,t.schema)&&l.isBlock(kt,t.schema)&&!t.schema.isAllowIn(kt.name,ze.name)){var Be=ze.children();l.unwrap(ze),Be.each(function(vr,en){Ke(Be.eq(en))})}};for(bl(v);v.length>0&&kt&&!kt.fragment&&l.isBlock(v,t.schema)&&!l.isBlock(kt,t.schema);){var Mi=v.clone();l.unwrap(v),kt.before(Mi),Mi.append(kt),v=Mi,kt=v.parent()}var ya=l.isMark(v,t.schema);if(v.length>0&&ya){var wo=c.closest(v);if(!wo.equal(v)){var wa,Pi=u.findPlugin(v),ka=c.findPlugin(wo);if(Pi&&(ka==null||(wa=ka.disableMark)===null||wa===void 0?void 0:wa.includes(Pi.name))){var Ea=v.first();return l.unwrap(v),Ea||void 0}}}if(ya){var ko=u.findPlugin(v),Eo=h.concat();if(Eo.pop(),ko){var xa=Eo.find(function(Ke){var ze;return((ze=Ke.plugin)===null||ze===void 0?void 0:ze.name)===ko.name&&Ke.node.length>0});if(xa){var Ca;((Ca=xa.node.get())===null||Ca===void 0?void 0:Ca.childNodes.length)===1?l.unwrap(xa.node):l.unwrap(v);return}}}if(kt=y,v.length>0&&kt&&l.isMark(kt,t.schema)&&ya){var _a,xo=u.findPlugin(kt),Co=(_a=h[h.length-1])===null||_a===void 0?void 0:_a.plugin;if(xo&&Co&&Co.mergeLeval>xo.mergeLeval){var Fi=kt.clone(!1),Aa=kt.children().toArray(),_o=Fi.clone(),Ao=Fi.clone(),To=!0,zi=-1;if(Aa.forEach(function(Ke,ze){if(Ke.equal(v)){var Be=v.children();Fi.append(Be),v.append(Fi),To=!1,zi=ze}else To?_o.append(Ke):Ao.append(Ke)}),zi>0&&kt.before(_o),zi<Aa.length-1&&kt.after(Ao),zi>-1)return kt.before(v),kt.remove(),h.splice(h.length-2,1),v}}}}},void 0,void 0,function(v){if(l.isMark(v)){var g=u.findPlugin(v);v.is_mark=!0,h.push({plugin:g,node:v})}},function(v){v.is_mark&&h.pop()})}},{key:"normalize",value:function(){var e=this,t=this.engine.node,n=this.parser();this.elementNormalize(n);var r=this.engine.change.range.get(),a=r.commonAncestorNode,o=this.engine.inline.closest(a);if(a.inEditor()&&!o.isCard()&&t.isInline(o,this.schema))return this.removeElementNodes(H(n)),n;if(a.inEditor()&&a.isText()&&r.startContainer===r.endContainer){var l=a[0].nodeValue,u=l==null?void 0:l.substr(0,r.startOffset),c=l==null?void 0:l.substr(r.endOffset);if(/\[.*?\]\($/.test(u||"")&&/^\)/.test(c||""))return this.removeElementNodes(H(n)),n}H(n).traverse(function(p){var b;if(p.fragment!==n){var y=(b=p.get())===null||b===void 0?void 0:b.firstChild;if(p.length>0&&p[0].parentNode&&e.engine.trigger("paste:each",p),p.isText()){var k=p.text();if(/^(\r|\n)+$/.test(k)){var E,_=p.prev(),T=p.next();(_&&!t.isBlock(_)||T&&!t.isBlock(T)||_&&t.isBlock(_)&&T&&t.isBlock(T)||((E=p.parent())===null||E===void 0?void 0:E.name)==="p")&&p.remove()}var x=/((\n)+)/.exec(k);if(x&&x.index>0&&x.index<k.length-1){var C=p.get().splitText(x.index),S=C.splitText(x[0].length);p.after(C),C.after(S),p.text()||p.remove()}}else p.name==="pre"&&p.find(Ri).length>0&&t.unwrap(p);if(p.length===0&&y)return H(y)}}),this.engine.trigger("paste:each-after",H(n));var h=t.normalize(H(n));h.fragment&&(n=h.fragment),n.normalize();var v=H(n),g=v.find("ul,ol");return g.each(function(p,b){var y=g.eq(b);y&&t.isList(y)&&e.engine.list.addStart(y)}),this.engine.nodeId.generateAll(H(n),!0),n}},{key:"removeElementNodes",value:function(e){var t=this,n=e.allChildren();n.forEach(function(r){r.isElement()&&t.engine.node.unwrap(r)})}}]),f}(),Nt;(function(f){f.INLINE="inline",f.BLOCK="block"})(Nt||(Nt={}));var Ii;(function(f){f.CARD_CHANGE="card_change",f.CLICK="click",f.MOUSE_DOWN="mouse_down"})(Ii||(Ii={}));var sf;(function(f){f.NONE="none",f.BACKGROUND="background",f.BORDER="border"})(sf||(sf={}));var ii=Yr("lastePasteRange"),Qm=function(){function f(i){be(this,f),this.engine=void 0,Object.defineProperty(this,ii,{writable:!0,value:void 0}),this.prevSelection=null,this.engine=i}return ke(f,[{key:"repairInput",value:function(e,t){var n=t,r=n.commonAncestorNode,a=this.engine.card.find(r),o=this.engine,l=o.node,u=o.mark,c=o.change;if(a&&a.type===Nt.INLINE)if(a.isLeftCursor(r)){var h=r.closest(Pt),v=h.text().replace(/\u200B/g,"");v&&(v=ti(v),t.setStartBefore(a.root),t.collapse(!0),l.html(h,"&#8203;"),l.insertText(v,t),c.apply(t))}else if(a.isRightCursor(r)){var g=r.closest(Ft),p=g.text().replace(/\u200B/g,"");if(p){p=ti(p);var b=a.root.next(),y=a.queryMarks?a.queryMarks(!0):[];if(y.length>0){var k=y[y.length-1];k.append(p);for(var E=y.length-2;E>=0;E--)k=y[E].append(k);a.root.after(k),t.select(k,!0).collapse(!1)}else b&&(b.isText()||l.isMark(b))?(t.select(b,!0).collapse(!0),l.insertText(p,t)):(t.setEndAfter(a.root),t.collapse(!1),l.insertText(p,t));l.html(g,"&#8203;"),c.apply(t)}}else c.range.toTrusty(t);var _=t.cloneRange().shrinkToTextNode(),T=_.startNode,x=_.startOffset,C=T.parent();if(T.isText()&&C&&l.isMark(C)){var S=T.get(),R=T.text();if(x===R.length&&e.data&&e.inputType.indexOf("insert")===0){for(var z=C,F=[];z&&l.isMark(z);){var G,M,O=u.findPlugin(z);O&&!O.followStyle&&F.push(z),z=z.parent();var A=(G=z)===null||G===void 0?void 0:G.parent();if(((M=z)===null||M===void 0?void 0:M.next())&&A&&l.isMark(A))break}var I=T.next();if(F.forEach(function(ne,ae){if(C.equal(ne)&&I){F.splice(ae,1);return}for(var fe=ne.next(),pe=ne;!fe&&pe;){var ge=pe.parent();if(ge&&l.isBlock(ge))break;fe=(ge==null?void 0:ge.next())||null,pe=ge}for(var ye=fe;ye&&!ye.isText();){if(l.isMark(ye)&&u.compare(ye,ne)){F.splice(ae,1);break}ye=ye.first()}}),F.length>0){var $=S.splitText(R.length-e.data.length);$.remove(),l.isEmpty(C)&&C.remove(),u.unwrap(F.map(function(ne){return ne.clone()})),l.insertText(R.substr(R.length-e.data.length)),u.merge(),t=c.range.get().cloneRange().shrinkToTextNode(),T=t.startNode,x=t.startOffset,S=T.get(),R=T.text()}}else if(e.data&&x===e.data.length&&e.inputType.indexOf("insert")===0){for(var ie=C,N=[];ie&&l.isMark(ie);){var P,V,W=u.findPlugin(ie);W&&!W.followStyle&&N.push(ie),ie=ie.parent();var Y=(P=ie)===null||P===void 0?void 0:P.parent();if(((V=ie)===null||V===void 0?void 0:V.prev())&&Y&&l.isMark(Y))break}var Q=T.prev();N.forEach(function(ne,ae){if(C.equal(ne)&&Q){N.splice(ae,1);return}for(var fe=ne.prev(),pe=ne;!fe&&pe;){var ge=pe.parent();if(ge&&l.isBlock(ge))break;fe=(ge==null?void 0:ge.prev())||null,pe=ge}for(var ye=fe;ye&&!ye.isText();){if(l.isMark(ye)&&u.compare(ye,ne)){N.splice(ae,1);break}ye=ye.last()}}),N.length>0&&(S.splitText(e.data.length),S.remove(),l.isEmpty(C)&&C.remove(),u.unwrap(N.map(function(ne){return ne.clone()})),l.insertText(e.data===""?"\xA0":e.data),u.merge(),t=c.range.get().cloneRange().shrinkToTextNode(),T=t.startNode,x=t.startOffset,S=T.get(),R=T.text())}R.length>0&&/^\u200B$/g.test(R.substr(0,1))&&(S.splitText(1),S.remove())}var re=T.prev();if(T.isText()&&re&&l.isMark(re)){var te=T.get(),J=T.text();J.length>0&&/^\u200B$/g.test(J.substr(0,1))&&(te.splitText(1),te.remove())}}},{key:"handleSelectionChange",value:function(){var e,t,n,r,a=this,o=this.engine,l=o.change,u=o.container,c=o.card;if(!l.isComposing()){var h=u.window,v=h==null?void 0:h.getSelection();if(!(((e=this.prevSelection)===null||e===void 0?void 0:e.anchorNode)===(v==null?void 0:v.anchorNode)&&((t=this.prevSelection)===null||t===void 0?void 0:t.anchorOffset)===(v==null?void 0:v.anchorOffset)&&((n=this.prevSelection)===null||n===void 0?void 0:n.focusNode)===(v==null?void 0:v.focusNode)&&((r=this.prevSelection)===null||r===void 0?void 0:r.focusOffset)===(v==null?void 0:v.focusOffset))&&(this.prevSelection=v?{anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}:null,v&&v.anchorNode)){var g=Ge.from(this.engine,v);if(!g.commonAncestorNode.inEditor(u))return;l.onSelect();var p=g.containsCard()||g.commonAncestorNode.closest(yt).length>0&&g.startNode.closest("".concat(Pt,",").concat(Ft,",").concat(Di)).length===0,b=g.collapsed;if(!b){var y=g.startNode,k=g.endNode,E=g.startOffset,_=g.endOffset,T=y.isElement()&&!y.isCard()?y.children().eq(E):y,x=k.isElement()&&!k.isCard()?k.children().eq(_-1):k;T&&x&&T.isCard()&&T.equal(x)&&(b=!0)}c.each(function(C){var S=C.getCenter();if(S&&S.length>0){var R=v.containsNode?v.containsNode(S[0]):!1;if(!R&&p&&v.focusNode){var z=a.engine.card.find(v.focusNode);z&&(b=!v.anchorNode||z.root.contains(v.anchorNode),b&&C.root.equal(z.root)&&(R=!0)),R&&b&&(p=!1)}var F=C.constructor.autoSelected;C.select(R&&(!b||F!==!1))}})}}}},{key:"init",value:function(){var e=this,t=this.engine,n=t.change,r=t.card,a=t.clipboard;n.event.onInput(function(c){var h=n.range.get();e.repairInput(c,h),n.range.select(h),n.onSelect(h),n.change()}),n.event.onDocument("selectionchange",function(){e.handleSelectionChange()}),n.event.onSelect(function(c){var h=n.range.get();h.startNode.closest(Tr).length!==0&&(h.collapsed&&h.containsCard()&&n.range.toTrusty(h),n.range.select(h),!Ga("shift+left",c)&&!Ga("shift+right",c)&&!Ga("shift+up",c)&&!Ga("shift+down",c)&&r.activate(h.commonAncestorNode),n.onSelect(h))}),n.event.onDocument("mousedown",function(c){if(!!c.target){var h=H(c.target);if(h.closest("body").length!==0&&!(h.closest(".am-view").length>0)){for(var v=h;v;){var g=v.attributes(Ae);if(g&&[ir,ei].indexOf(g)<0)return;v=v.parent()}r.activate(h,Ii.MOUSE_DOWN,c)}}}),n.event.onDocument("copy",function(c){var h=n.range.get();!e.engine.container.contains(h.commonAncestorNode)||a.write(c)}),n.event.onDocument("cut",function(c){var h=n.range.get();if(!(!e.engine.container.contains(h.commonAncestorNode)||e.engine.readonly)){var v=a.write(c,void 0);v&&(c.stopPropagation(),a.cut(),n.change())}});var o=function(h){n.cacheRangeBeforeCommand();var v=ho(e.engine,"zero");v.enable(["paragraph","html_inline","newline"]);var g=v.parse(h,{});if(g.length!==0)return console.log(g),tl(e.engine,v,g)},l=function(){var c=xn(ht.mark(function h(v){var g,p,b;return ht.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(p=o(v),p!==null){k.next=3;break}return k.abrupt("return");case 3:if(b=function(){e.engine.history.saveOp(),n.cacheRangeBeforeCommand(),e.paste(p,ct(e,ii)[ii],void 0,!1)},((g=e.engine.options.markdown)===null||g===void 0?void 0:g.mode)==="confirm"){k.next=7;break}return b(),k.abrupt("return");case 7:e.engine.messageConfirm("markdown",e.engine.language.get("checkMarkdown","title")).then(function(){b()}).catch(function(E){E&&e.engine.messageError("markdown",E)});case 8:case"end":return k.stop()}},h)}));return function(v){return c.apply(this,arguments)}}();n.event.onPaste(function(c){var h=c.html,v=c.text,g=c.files,p=c.isPasteText,b="";if(g.length===0)if(p){var y="";v?y=v:h&&(y=new ur(h,e.engine).toText()),b=new of(y).toHTML()}else h&&h.indexOf('<meta name="source" content="aomao" />')>-1||h?b=h:v&&(b=new of(v).toHTML());if(e.engine.trigger("paste:event",c,b)!==!1&&g.length===0){n.cacheRangeBeforeCommand(),e.paste(b);var k=e.engine.options.markdown||{};if(k.mode!==!1)if(k.check)k.check(v!=null?v:"",h!=null?h:"").then(function(G){G&&l(G)});else{if(!v)return;if(!h){setTimeout(function(){l(v)},0);return}var E=v.split(/\r\n|\n/)||"",_=0,T=0,x=!1,C=new DOMParser().parseFromString(h,"text/html"),S=C.querySelectorAll("li"),R=[];S.forEach(function(G){var M,O,A=(M=G.textContent)!==null&&M!==void 0?M:"";(((O=G.parentElement)===null||O===void 0?void 0:O.nodeName)==="OL"||/\d\.\s+/.test(A))&&R.push(A)});for(var z=0;z<E.length;z++){var F=E[z];if(!!F.trim()){if(F.startsWith("```")){x?x=!1:(x=!0,T++,_++);continue}x||(_++,/^(#|\*|-|\+|\[ \]|\[x\]|>){1}\s+/.test(F)?T++:/^\d\.\s+/.test(F)?!R.includes(F)&&!R.includes(F.replace(/^\d\./,"").trim())&&T++:(/^(---|\*\*\*|\+\+\+)/.test(F)||/(\*|~|\^|_|\`|\]\(https?:\/\/)/.test(F))&&T++)}}T>0&&(_===0||T/_>.5)&&setTimeout(function(){l(v)},0)}}});var u=function(h){return!h||r.closest(h.commonAncestorContainer)};n.event.onDrop(function(c){var h=c.event,v=c.range,g=c.card,p=c.files;if(g){if(h.preventDefault(),u(v))return;var b=g.constructor,y=b.cardName,k=g.getValue();e.engine.card.remove(g.root),n.range.select(v),e.engine.card.insert(y,k)}if(p.length>0){if(h.preventDefault(),u(v))return;n.range.select(v),e.engine.trigger("drop:files",p)}})}},{key:"paste",value:function(e,t,n){var r=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4?arguments[4]:void 0,l=this.engine.change,u=new Jm(e,this.engine).normalize();this.engine.trigger("paste:before",u),o?o(u,t,void 0,a):l.insert(u,t,function(c){var h;r.engine.trigger("paste:insert",c);var v=c.cloneRange(),g=v.endNode,p="";g.isCard()&&((h=g.get())===null||h===void 0?void 0:h.childNodes.length)===0&&(v.setEndAfter(g),p=g.attributes(qe)),ct(r,ii)[ii]=v,c.collapse(!1);var b=c.startNode.closest("".concat(yt,",").concat(Ri));if(b.length>0){var y=b.attributes();(y[un]||y[bt])&&c.setStartAfter(b)}var k=c.createSelection();r.engine.card.render(void 0,function(E){if(k.move(),p){var _=r.engine.container.find('[data-id="'.concat(p,'"]'));_.length>0&&(v.setEndAfter(_),ct(r,ii)[ii]=v)}c.scrollRangeIntoView(),l.range.select(c),n&&n(E),r.engine.trigger("paste:after")})},a)}}]),f}(),ai=Yr("lastBlurRange"),da=Yr("otpions"),e0=function(){function f(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};be(this,f),this.engine=void 0,Object.defineProperty(this,ai,{writable:!0,value:void 0}),Object.defineProperty(this,da,{writable:!0,value:void 0}),this.engine=i,ct(this,da)[da]=e}return ke(f,[{key:"setLastBlurRange",value:function(e){e!=null&&e.commonAncestorNode.inEditor()?ct(this,ai)[ai]=e:ct(this,ai)[ai]=void 0}},{key:"toTrusty",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.get(),t=e.commonAncestorNode;!t.isEditable()&&!t.inEditor()&&e.select(this.engine.container,!0).shrinkToElementNode().collapse(!1);var n=e.cloneRange();if(n.collapse(!0),this.setCardRang(n),(!e.startNode.equal(n.startNode)||e.startOffset!==n.startOffset)&&e.setStart(n.startContainer,n.startOffset),n=e.cloneRange(),n.collapse(!1),this.setCardRang(n),(!e.endNode.equal(n.endNode)||e.endOffset!==n.endOffset)&&e.setEnd(n.endContainer,n.endOffset),e.collapsed){n=e.cloneRange(),n.enlargeFromTextNode();var r=H(n.startContainer),a=n.startOffset;this.engine.node.isInline(r)&&a===0&&e.setStartBefore(r[0]),this.engine.node.isInline(r)&&a===r[0].childNodes.length&&e.setStartAfter(r[0]),e.collapse(!0)}return e}},{key:"setCardRang",value:function(e){var t=this,n=e.startNode,r=e.startOffset,a=this.engine.card,o=a.find(n);if(o){var l=o.getCenter().get();if(l&&(!n.isElement()||n[0].parentNode!==o.root[0]||n.attributes(lt))){var u=function(){var h=Ge.create(t.engine);return h.select(l,!0),h.comparePoint(n,r)<0};if(o.type==="inline"){e.select(o.root),e.collapse(u());return}u()?a.focusPrevBlock(o,e,!0):a.focusNextBlock(o,e,!0)}}}},{key:"get",value:function(){var e=this.engine.container,t=e.window,n=Ge.from(this.engine,t,!1);return n||(n=Ge.create(this.engine,t.document).select(e,!0).shrinkToElementNode().collapse(!1)),n}},{key:"select",value:function(e){var t,n,r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=this.engine,l=o.container,u=o.inline,c=o.node,h=o.change,v=l.window,g=v==null?void 0:v.getSelection();if(!h.isComposing()){if(e.collapsed){var p,b,y,k,E=e.startNode,_=e.startOffset;if((E.isElement()&&_===1&&((p=E.get())===null||p===void 0?void 0:p.childNodes.length)===1||_===2&&((b=E.get())===null||b===void 0?void 0:b.childNodes.length)===2&&((y=E.first())===null||y===void 0?void 0:y.isCard()))&&((k=E.last())===null||k===void 0?void 0:k.name)==="br"&&(e.setStart(E,_-1),e.collapse(!0)),E.isText()){var T=E.parent();(T==null?void 0:T.attributes(lt))==="right"&&_===0?(e.setStart(E,1),e.collapse(!0)):(T==null?void 0:T.attributes(lt))==="left"&&_===1&&(e.setStart(E,0),e.collapse(!0))}}var x=e.cloneRange().shrinkToTextNode(),C=x.startNode,S=x.endNode,R=x.startOffset,z=x.endOffset,F=C.prev(),G=S.next();if(F&&!F.isCard()&&!c.isVoid(F)&&c.isInline(F)){var M=C.text();/^\u200B/g.test(M)&&R===0&&(e.setStart(S,R+1),e.collapsed&&e.collapse(!0))}if(G&&!G.isCard()&&!c.isVoid(G)&&c.isInline(G)){var O=S.text();/\u200B$/g.test(O)&&z===O.length&&(e.setEnd(S,z-1),e.collapsed&&e.collapse(!1))}var A=u.closest(C);if(!A.isCard()&&c.isInline(A)&&!c.isVoid(A)){var I,$;if(C.isText()&&!C.prev()&&((I=C.parent())===null||I===void 0?void 0:I.equal(A))&&R===0){var ie=C.text();/^\u200B/g.test(ie)&&(e.setStart(C,R+1),e.collapsed&&e.collapse(!0))}if(S.isText()&&!S.next()&&(($=S.parent())===null||$===void 0?void 0:$.equal(A))){var N=S.text();z===N.length&&/\u200B$/g.test(N)&&(e.setEnd(S,z-1),e.collapsed&&e.collapse(!1))}}if(C=e.startNode,S=e.endNode,C.isText()||S.isText()){var P=e.cloneRange().enlargeFromTextNode();C=P.startNode,S=P.endNode}var V=C.children();c.isCustomize(C)&&R===0&&e.setStart(C,1),c.isCustomize(S)&&z===0&&e.setEnd(S,1);var W=this.engine.ot.isStopped();if(C.name==="p"&&!W){if(V.length===0)C.append("<br />");else if(!_m&&V.length>1&&V[V.length-2].nodeName!=="BR"&&V[V.length-1].nodeName==="BR"){var Y=C.last();Y==null||Y.remove()}}!e.collapsed&&!W&&S.name==="p"&&((t=S.get())===null||t===void 0?void 0:t.childNodes.length)===0&&S.append("<br />");var Q=C.children();if(c.isList(C)&&!W&&(Q.length===0||Q[0].nodeName==="BR")){var re=H("<p><br /></p>");this.engine.nodeId.create(re),C.before(re),C.remove(),C=re}if(C.name==="li"&&!W){var te;if(c.isCustomize(C)&&!(!((te=C.first())===null||te===void 0)&&te.isCard())){var J,ne,ae=(J=C.parent())===null||J===void 0?void 0:J.children().toArray().find(function(le){var he;return(he=le.first())===null||he===void 0?void 0:he.isCard()}),fe=ae==null||(ne=ae.first())===null||ne===void 0?void 0:ne.attributes(He);fe?this.engine.list.addCardToCustomize(C,fe):this.engine.list.unwrapCustomize(C)}if(V.length===0)C.append("<br />");else if(!c.isCustomize(C)&&V.length>1&&V[V.length-2].nodeName!=="BR"&&V[V.length-1].nodeName==="BR"){var pe;(pe=C.last())===null||pe===void 0||pe.remove()}else if(c.isCustomize(C)&&V.length===1)C.append("<br />");else if(c.isCustomize(C)&&V.length>2&&V[V.length-2].nodeName!=="BR"&&V[V.length-1].nodeName==="BR"){var ge;(ge=C.last())===null||ge===void 0||ge.remove()}}if(!e.collapsed&&S.name==="li"&&!W){var ye=S.children();if(ye.length===0)S.append("<br />");else if(!c.isCustomize(S)&&ye.length>1&&ye[ye.length-2].nodeName!=="BR"&&ye[ye.length-1].nodeName==="BR"){var L;(L=C.last())===null||L===void 0||L.remove()}else if(c.isCustomize(S)&&ye.length===1)S.append("<br />");else if(c.isCustomize(S)&&ye.length>2&&ye[ye.length-2].nodeName!=="BR"&&ye[ye.length-1].nodeName==="BR"){var K;(K=C.last())===null||K===void 0||K.remove()}}C.isEditable()&&!W&&((n=C.get())===null||n===void 0?void 0:n.childNodes.length)===0&&!this.engine.ot.isStopped&&C.html("<p><br /></p>"),g&&(e.collapsed||g.rangeCount>0&&!e.equal(g.getRangeAt(0)))&&((r=e.startNode.get())===null||r===void 0?void 0:r.isConnected)&&(g.removeAllRanges(),g.addRange(e.toRange()));var U=ct(this,da)[da].onSelect;U&&a&&U(e)}}},{key:"focus",value:function(e){var t,n=this,r=ct(this,ai)[ai]||this.get();e!==void 0&&r.select(this.engine.container,!0).shrinkToElementNode().collapse(e),this.select(r);var a=r.commonAncestorNode.closest(xt);if(a==null||(t=a.get())===null||t===void 0||t.focus(),a.length>0&&!this.engine.container.equal(a)){var o,l=new MouseEvent("mousedown");(o=this.engine.container.get())===null||o===void 0||o.dispatchEvent(l),setTimeout(function(){var u,c=new MouseEvent("mouseup");(u=n.engine.container.get())===null||u===void 0||u.dispatchEvent(c)},0)}}},{key:"blur",value:function(){var e,t,n=this.get();(e=n.commonAncestorNode.closest(xt).get())===null||e===void 0||e.blur(),(t=this.engine.container.get())===null||t===void 0||t.blur(),this.engine.trigger("blur")}}]),f}(),An=Yr("nativeEvent"),t0=function(){function f(i){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};be(this,f),this.engine=void 0,this.options=void 0,this.changeTimer=null,this.event=void 0,this.valueCached=null,this.onChange=void 0,this.onRealtimeChange=void 0,this.onSelect=void 0,this.onSetValue=void 0,this.rangePathBeforeCommand=void 0,this.marks=[],this.blocks=[],this.inlines=[],this.changeTrigger=[],this.range=void 0,Object.defineProperty(this,An,{writable:!0,value:void 0}),this.options=t,this.engine=i,this.event=new Zm(i,{}),this.onChange=this.options.onChange||function(){},this.onRealtimeChange=this.options.onRealtimeChange||function(){};var n=null;this.onSelect=function(r){var a,o,l,u,c=i.mark,h=i.block,v=i.inline;r=r||e.range.get(),!(((a=n)===null||a===void 0?void 0:a.startContainer)===r.startContainer&&((o=n)===null||o===void 0?void 0:o.startOffset)===r.startOffset&&((l=n)===null||l===void 0?void 0:l.endContainer)===r.endContainer&&((u=n)===null||u===void 0?void 0:u.endOffset)===r.endOffset)&&(n={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},e.marks=c.findMarks(r),e.blocks=h.findBlocks(r),e.inlines=v.findInlines(r),e.options.onSelect&&e.options.onSelect())},this.onSetValue=this.options.onSetValue||function(){},this.range=new e0(i,{onSelect:function(a){e.onSelect(a)}}),ct(this,An)[An]=new Qm(i)}return ke(f,[{key:"init",value:function(){ct(this,An)[An].init()}},{key:"_change",value:function(){if(!this.isComposing()){this.engine.card.gc();var e=this.changeTrigger.length===2?"both":this.changeTrigger[0]==="remote"?"remote":"local";this.onChange(e),this.changeTrigger=[]}}},{key:"change",value:function(e,t){var n=this,r=e?"remote":"local",a=void 0;if(e)t==null||t.forEach(function(g){if(a=g.closest(xt),a&&a.length>0){var p=n.engine.card.find(a,!0);p!=null&&p.onChange&&(p==null||p.onChange(r,a))}});else{var o=this.range.get(),l=o.startNode;if(l.inEditor())a=l.closest(xt);else{var u=l.closest(Di),c=u.attributes(Hc);if(c){var h;a=(h=this.engine.card.find(c))===null||h===void 0?void 0:h.root.closest(xt)}}if(a&&a.length>0){var v=this.engine.card.find(a,!0);v!=null&&v.onChange&&(v==null||v.onChange(r,a))}else t==null||t.forEach(function(g){if(a=g.closest(xt),a&&a.length>0){var p=n.engine.card.find(a,!0);p!=null&&p.onChange&&(p==null||p.onChange(r,a))}})}this.onRealtimeChange(r),this.changeTrigger.indexOf(r)<0&&this.changeTrigger.push(r),this.clearChangeTimer(),this.changeTimer=setTimeout(function(){n._change()},50)}},{key:"clearChangeTimer",value:function(){this.changeTimer&&clearTimeout(this.changeTimer)}},{key:"isComposing",value:function(){return this.event.isComposing}},{key:"isSelecting",value:function(){return this.event.isSelecting}},{key:"initValue",value:function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.engine.container,o=a.html(),l="<p><br /></p>";if(!(o===l||(((t=a.get())===null||t===void 0?void 0:t.childNodes.length)||0)>0)){var u=o||l,c=H(u);((n=c.get())===null||n===void 0?void 0:n.childNodes.length)===0&&c.html("<br />"),a.empty().append(c);var h=e||this.range.get();!e&&r&&(h.select(c,!0).collapse(!1),this.apply(h))}}},{key:"setValue",value:function(e,t,n){var r=this.range.get(),a=this.engine,o=a.schema,l=a.conversion,u=a.container,c=a.history,h=a.mark,v=a.card;if(e==="")this.engine.container.html(e),this.initValue(void 0,!1),n&&n(0);else{var g=new ur(e,this.engine,function(E){h.removeEmptyMarks(E),E.allChildren("editable").forEach(function(_){t&&t(_)})},!1);u.html(g.toValue(o,l,!1,!0)),v.render(void 0,function(E){n&&n(E)});var p=u.find(co),b=new vo(this.engine,r);p.length>0&&(b.anchor=p,b.focus=p);var y=u.find(Ws),k=u.find($s);y.length>0&&k.length>0&&(b.anchor=y,b.focus=k),b.anchor&&b.focus&&(b.move(),this.range.select(r),this.onSelect()),this.onSetValue(),c.clear()}this.change()}},{key:"setHtml",value:function(e,t){var n=this,r=this.engine,a=r.card,o=r.container;ct(this,An)[An].paste(e,void 0,t,!0,function(l,u,c,h){o.empty().append(l),a.render(void 0,function(v){n.initValue(void 0,!1),n.engine.trigger("paste:after"),t&&t(v)}),n.change()})}},{key:"setMarkdown",value:function(e,t){var n=this,r=ho(this.engine,"zero");r.enable(["paragraph","html_inline","newline"]);var a=r.parse(e,{});if(a.length!==0){var o=tl(this.engine,r,a);o||(o=e);var l=this.engine,u=l.card,c=l.container;ct(this,An)[An].paste(o,void 0,t,!0,function(h,v,g,p){c.empty().append(h),u.render(void 0,function(b){n.initValue(void 0,!1),n.engine.trigger("paste:after"),t&&t(b)}),n.change()})}}},{key:"getOriginValue",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine.container,n=this.engine,r=n.schema,a=n.conversion;return new ur(((e=t.get())===null||e===void 0?void 0:e.outerHTML)||"",this.engine,void 0,!1).toValue(r,a)}},{key:"getValue",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t;if(e.ignoreCursor||this.isComposing())t=this.getOriginValue();else{var n,r=this.range.get(),a,o=this.engine.container.clone(!0);if(!r.inCard()){var l=r.toPath(!0);if(!l)return this.getOriginValue();r=Ge.fromPath(this.engine,l,!0,o),a=r.createSelection()}t=this.getOriginValue(o),(n=a)===null||n===void 0||n.move()}return t}},{key:"cacheRangeBeforeCommand",value:function(){this.rangePathBeforeCommand=this.range.get().toPath()}},{key:"getRangePathBeforeCommand",value:function(){var e=this.rangePathBeforeCommand;return this.rangePathBeforeCommand=void 0,e}},{key:"isEmpty",value:function(){var e=this.engine,t=e.container,n=e.node,r=e.schema,a=r.getAllowInTags(),o=t.children();return o.length===0||o.length===1&&n.isEmpty(t)&&!t.allChildren().some(function(l){return a.includes(l.name)})}},{key:"combinText",value:function(){Rm(this.engine.container)}},{key:"apply",value:function(e){this.combinText();var t=this.engine,n=t.inline,r=t.mark,a=t.nodeId;if(e){var o=e.createSelection("change-apply");n.findInlines(e).forEach(function(l){return n.repairCursor(l)}),r.findMarks(e).forEach(function(l){return r.repairCursor(l)}),o.move(),e.shrinkToTextNode(),this.range.select(e)}this.change(),a.generateAll(this.engine.container)}},{key:"insert",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=this.engine,l=o.block,u=o.list,c=o.card,h=o.schema,v=o.mark,g=o.inline,p=this.engine.node;t=t||this.range.toTrusty();var b=l.closest(t.startNode),y=l.closest(t.endNode),k=y[0]===b[0],E=l.isLastOffset(t,"end"),_=h.getCanMergeTags(),T=h.getAllowInTags(),x=b.closest(_.join(",")),C=t.collapsed,S=e.childNodes,R=H(e.firstChild||[]),z=function(){var me,_e=H(e),Xe=_e.first(),at=t.cloneRange().shrinkToElementNode().shrinkToTextNode(),Dt=at.startNode;if(Dt.inEditor()&&Xe&&Xe.name==="p"&&!(Xe.length===1&&((me=Xe.first())===null||me===void 0?void 0:me.name)==="br")){if(Dt.name==="p"&&p.isEmptyWidthChild(Dt)){var qt=Xe.css();Dt.css(qt)}p.unwrap(Xe)}};if(!C)this.delete(t,k||!E,a),p.isEmptyWidthChild(t.startNode)&&t.shrinkToElementNode().shrinkToTextNode(),z();else if(z(),t.startNode.isText()){var F=g.closest(t.startNode),G=t.startNode.text();F.length===0&&!F.equal(t.startNode)&&/^\u200B/.test(G)&&t.startNode.text(G.substr(1))}var M=void 0,O=function(me){M&&M.node[0].isConnected&&(me.shrinkToElementNode().setStart(M.node,M.offset),me.enlargeToElementNode()),l.merge(me),u.merge(void 0,me),v.merge(me),g.flat(me),r&&r(me),n.apply(me)};if(p.isList(t.startNode)||t.startNode.closest("li").length>0){var A=t.startNode.children();M={node:t.startNode,offset:A.length===1&&A[0].nodeName==="BR"?0:t.startOffset},u.insert(e,t),O(t);return}if(!R[0]){O(t);return}if(!p.isBlock(R)){if(t.shrinkToElementNode(),S.length>0){var I=t.startNode.children();M={node:t.startNode,offset:I.length===1&&I[0].nodeName==="BR"?0:t.startOffset}}var $=R.next(),ie=R,N=p.insert(R,t);for(N&&(t=N);$&&!p.isBlock($);){t.startContainer.nodeType===Node.TEXT_NODE&&t.enlargeToElementNode().collapse(!1);var P=$.next();ie.after($),ie=$,$=P}if(ie!==R&&t.select(ie,!0).collapse(!1),S.length===0){O(t);return}}var V=t.cloneRange().enlargeToElementNode(!0).collapse(!1),W=V.startContainer.childNodes[t.startOffset===0?0:t.startOffset-1],Y=V.startContainer.childNodes[t.startOffset];if(S.length!==0){var Q=H(S[S.length-1]);if(Q.name==="br"&&(Q.remove(),Q=H(S[S.length-1])),!M){var re=t.startNode.children();M={node:t.startNode,offset:re.length===1&&re[0].nodeName==="BR"?0:t.startOffset}}for(var te=H(S[0]),J=null,ne=[];te&&te.length>0;){p.removeSide(te);var ae=te.next();if(ae||(Q=te),ne.push(te),J?J.after(te):p.insert(te,t,!0),!this.engine.node.isBlock(te)&&!(ae!=null&&ae.isText())?(J&&t.select(te,!0).collapse(!1),J=null):J=te,ae||t.select(te,!0).collapse(!1),M&&!M.node[0].isConnected){var fe=te.parent();fe&&(M={node:fe,offset:te.index()})}te=ae}x[0]&&ne.forEach(function(Se){_.indexOf(Se.name)<0&&Se.closest(x.name).length===0&&p.wrap(Se,p.clone(x,!1,!1))});var pe=c.find(t.startNode);pe&&pe.focus(t,!1)}var ge=function(me){var _e=me.first();if(!_e||!p.isBlock(_e))return me;for(;T.indexOf(_e?_e.name:"")>-1;)_e=_e.first();return _e},ye=function(me){var _e=me.last();if(!_e||!p.isBlock(_e))return me;for(;T.indexOf(_e?_e.name:"")>-1;)_e=_e.last();return _e},L=function(me,_e){if(!(me.isCard()||R.isCard())){var Xe=_e.parent(),at=me.parent(),Dt=Xe&&!Xe.isEditable()&&at&&!at.isEditable()&&Xe.name===at.name;return _e.name==="p"&&Dt||me.name===_e.name&&Dt&&!(me.name==="li"&&!u.isSame(me.parent(),_e.parent()))}},K=function(me){for(;!me.isEditable();){var _e=me.parent();if(me.remove(),!_e||!p.isEmpty(_e))break;me=_e}},U=function(me,_e){if(me.name===_e.name&&me.name==="p"){var Xe=_e.attributes();Xe[qe]&&delete Xe[qe],me.attributes(Xe)}p.isEmptyWidthChild(me)&&!p.isEmptyWidthChild(_e)&&(me.get().innerHTML=""),p.isCustomize(me)===p.isCustomize(_e)&&u.unwrapCustomize(_e)};if(W){var le=ge(H(W.nextSibling||[])),he=ye(H(W));he.name==="p"&&le.name!==he.name&&L(he,le)&&(U(he,le),p.merge(he,le,!1),K(le))}if(Y){var ve=ye(H(Y.previousSibling||[])),xe=ge(H(Y));ve&&L(ve,xe)&&(p.merge(ve,xe,!1),K(xe))}O(t)}},{key:"paste",value:function(e,t,n){ct(this,An)[An].paste(e,t,n,!0)}},{key:"delete",value:function(e,t){var n,r,a,o,l,u,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=e||this.range.toTrusty();if(h.collapsed){this.isEmpty()&&this.initValue(h),e||this.apply(h);return}var v=this.engine,g=v.mark,p=v.inline,b=v.card,y=this.engine.node,k=this.engine.block,E=h.cloneRange();E.collapse(!0);var _=c?g.findMarks(E):[];h.enlargeToElementNode();var T=k.closest(h.cloneRange().shrinkToElementNode().shrinkToTextNode().enlargeToElementNode().startNode);if(!T.inEditor()&&!T.isRoot()){this.isEmpty()&&this.initValue(h),e||this.apply(h);return}if(T.isRoot()){for(var x=T.children().eq(h.startOffset);!((C=x)===null||C===void 0)&&C.isCard();){var C,S=x.equal(h.endNode)||x.contains(h.endNode),R=x.next()||void 0,z=b.find(x);if(z?b.removeNode(z):x.remove(),S){x=void 0;break}x=R}if(!x){this.isEmpty()&&this.initValue(h),e||this.apply(h);return}T=x}var F=h.endNode,G=h.endOffset,M=!k.closest(h.startNode).equal(k.closest(F)),O=p.closest(F);if(O.length>0&&((n=F.parent())===null||n===void 0?void 0:n.equal(O))&&F.isText()){var A=F.text();G===A.length-1&&h.setEndAfter(O)}var I=h.cloneRange().shrinkToElementNode().shrinkToTextNode().getEndOffsetNode();h.extractContents();var $=h.startNode;if($.isEditable()&&((r=$.get())===null||r===void 0?void 0:r.childNodes.length)===0&&($.html("<p><br /></p>"),this.engine.nodeId.generate($)),h.collapse(!0),$=h.shrinkToElementNode().shrinkToTextNode().enlargeToElementNode().startNode,$.isText()||!T.inEditor()){this.isEmpty()&&this.initValue(h),e||this.apply(h);return}var ie=!1;if(M&&((a=$.get())===null||a===void 0?void 0:a.childNodes.length)===0){var N,P,V,W,Y=h.createSelection();$.remove(),((N=Y.anchor)===null||N===void 0||(P=N.get())===null||P===void 0?void 0:P.isConnected)&&((V=Y.focus)===null||V===void 0||(W=V.get())===null||W===void 0?void 0:W.isConnected)&&Y.move(),ie=!0,$=h.startNode}var Q=T,re=I&&I.isConnected?$:null,te=((o=$.get())===null||o===void 0?void 0:o.childNodes.length)===0;if(!te&&$.length>0&&$.inEditor()){var J,ne;$[0].childNodes.length===1&&((J=$[0].firstChild)===null||J===void 0?void 0:J.nodeType)===Node.ELEMENT_NODE&&y.isCustomize($)&&((ne=$.first())===null||ne===void 0?void 0:ne.isCard())&&(te=!0)}if(te&&y.isBlock($)&&$.inEditor()){var ae=y.getBatchAppendHTML(_,"<br />");$.isEditable()&&(ae="<p>".concat(ae,"</p>")),$.append(H(ae));var fe=$.find("br"),pe=fe.parent();pe&&y.isMark(pe)&&y.replace(fe,H("\u200B",null)),h.select($,!0).shrinkToElementNode().shrinkToTextNode(),h.collapse(!1),this.isEmpty()&&this.initValue(h),e||this.apply(h);return}var ge=function K(U,le,he,ve){var xe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(y.isBlock(le)&&!y.isVoid(le)&&!le.isCard()){U.select(le,!0),U.collapse(!1);var Se=U.shrinkToElementNode().shrinkToTextNode().createSelection(),me=he.parent();for(y.merge(le,he);me&&y.isBlock(me)&&y.isEmpty(me);)me.remove(),me=me.parent();Se.move(),U.enlargeToElementNode(!0);var _e=U.getPrevNode(),Xe=U.getNextNode(),at=U.startNode;!_e&&!Xe&&y.isBlock(at)&&(at.append(H(y.getBatchAppendHTML(ve,"<br />"))),U.select(at.find("br"),!0),U.collapse(!1)),_e&&Xe&&!_e.isCard()&&!Xe.isCard()&&xe&&K(U,_e,Xe,ve)}};if(Q&&re&&re.length>0&&y.isBlock(Q)&&y.isBlock(re)&&!Q.equal(re)&&!(!((l=Q.parent())===null||l===void 0)&&l.equal(re))&&re.inEditor()&&ge(h,Q,re,_,t),$.children().each(function(K){var U=H(K);!y.isVoid(U)&&U.isElement()&&y.html(U)===""&&U.remove(),y.isInline(U)&&p.repairCursor(U)}),y.isList($)&&y.isEmpty($)&&$.remove(),E=h.cloneRange().shrinkToTextNode(),E.startNode.isText()&&/^\u200B/g.test(E.startNode.text())&&E.startOffset===0){var ye=E.startNode.prev();ye&&this.engine.node.isInline(ye)&&(h.select(ye,!0),h.collapse(!1))}if(y.isBlock($)&&((u=$.get())===null||u===void 0?void 0:u.childNodes.length)===0&&$.html("<br />"),ie){var L;y.isBlock(Q)&&((L=Q.get())===null||L===void 0?void 0:L.childNodes.length)===0&&Q.html("<br />"),Q.inEditor()&&h.select(Q,!0).collapse(!1)}this.isEmpty()&&this.initValue(h),e||this.apply(h)}},{key:"unwrap",value:function(e){var t=this.engine.block,n=this.range.get();if(e=e||t.closest(n.startNode),!!e.inEditor()){var r=n.createSelection();this.engine.node.unwrap(e),r.move(),this.range.select(n)}}},{key:"mergeAfterDelete",value:function(e){var t,n,r=this.engine,a=r.block,o=r.card,l=r.list,u=r.mark,c=this.engine.node,h=this.range.get();e=e||a.closest(h.startNode);var v=e.children();if(v.length===0){e.append(H("<br />")),this.apply(h);return}var g=e.first();if(v.length>1&&(g==null?void 0:g.name)==="br"){g==null||g.remove();return}var p=e.prev();if(!p){var b=e.parent();(b==null?void 0:b.inEditor())&&!(b!=null&&b.isEditable())&&this.unwrap(e);return}if(p.isCard()){(v.length===1&&(g==null?void 0:g.name)==="br"||c.isEmpty(e))&&e.remove();var y=o.find(p);if(y){o.focus(y);return}}if(c.isVoid(p)){p.remove();return}if(c.isRootBlock(p)&&c.isEmpty(p)){p.remove();return}if(p.isText()){var k=H("<p />");p.before(k),k.append(p),p=k}if(c.isList(p)&&(p=p.last()),v.length===1&&(g==null?void 0:g.name)==="br")g==null||g.remove();else if(p&&((t=p.get())===null||t===void 0?void 0:t.childNodes.length)===1&&((n=p.first())===null||n===void 0?void 0:n.name)==="br"){var E;(E=p.first())===null||E===void 0||E.remove()}if(!p||p.isText())this.unwrap(e);else{var _=h.createSelection();c.merge(p,e),_.move(),this.range.select(h),u.merge(),l.merge()}}},{key:"destroy",value:function(){this.event.destroy(),this.clearChangeTimer()}}]),f}(),n0=`.data-tooltip {\r
	font-size: 14px;\r
	font-variant: tabular-nums;\r
	line-height: 1.5;\r
	color: rgba(0, 0, 0, 0.65);\r
	-webkit-box-sizing: border-box;\r
	box-sizing: border-box;\r
	margin: 0;\r
	padding: 0;\r
	list-style: none;\r
	position: absolute;\r
	z-index: 1060;\r
	display: block;\r
	visibility: visible;\r
	max-width: 320px;\r
	word-wrap:break-word;\r
    top: 0;\r
}\r
\r
.data-tooltip-hidden {\r
	opacity: 0;\r
	visibility: hidden;\r
	transition: opacity 0.3s ease-in-out;\r
}\r
\r
.data-tooltip-active {\r
	opacity: 1;\r
	visibility: visible;\r
}\r
\r
.data-tooltip-placement-top,.data-tooltip-placement-topLeft,.data-tooltip-placement-topRight {\r
	padding-bottom: 8px;\r
}\r
\r
.data-tooltip-placement-right,.data-tooltip-placement-rightTop,.data-tooltip-placement-rightBottom {\r
	padding-left: 8px;\r
}\r
\r
.data-tooltip-placement-bottom,.data-tooltip-placement-bottomLeft,.data-tooltip-placement-bottomRight {\r
	padding-top: 8px;\r
}\r
\r
.data-tooltip-placement-left,.data-tooltip-placement-leftTop,.data-tooltip-placement-leftBottom {\r
	padding-right: 8px;\r
}\r
\r
.data-tooltip-inner {\r
	padding: 6px 8px;\r
	color: #fff;\r
	text-align: left;\r
	text-decoration: none;\r
	background-color: rgba(0, 0, 0, 0.75);\r
	border-radius: 4px;\r
	-webkit-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r
	word-wrap: break-word;\r
}\r
\r
.data-tooltip-arrow {\r
	position: absolute;\r
	width: 0;\r
	height: 0;\r
	border-color: transparent;\r
	border-style: solid;\r
}\r
\r
.data-tooltip-placement-top .data-tooltip-arrow,.data-tooltip-placement-topLeft .data-tooltip-arrow,.data-tooltip-placement-topRight .data-tooltip-arrow {\r
	bottom: 3px;\r
	border-width: 5px 5px 0;\r
	border-top-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-top .data-tooltip-arrow {\r
	left: 50%;\r
	margin-left: -5px;\r
}\r
\r
.data-tooltip-placement-topLeft .data-tooltip-arrow {\r
	left: 16px;\r
}\r
\r
.data-tooltip-placement-topRight .data-tooltip-arrow {\r
	right: 16px;\r
}\r
\r
.data-tooltip-placement-right .data-tooltip-arrow,.data-tooltip-placement-rightTop .data-tooltip-arrow,.data-tooltip-placement-rightBottom .data-tooltip-arrow {\r
	left: 3px;\r
	border-width: 5px 5px 5px 0;\r
	border-right-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-right .data-tooltip-arrow {\r
	top: 50%;\r
	margin-top: -5px;\r
}\r
\r
.data-tooltip-placement-rightTop .data-tooltip-arrow {\r
	top: 8px;\r
}\r
\r
.data-tooltip-placement-rightBottom .data-tooltip-arrow {\r
	bottom: 8px;\r
}\r
\r
.data-tooltip-placement-left .data-tooltip-arrow,.data-tooltip-placement-leftTop .data-tooltip-arrow,.data-tooltip-placement-leftBottom .data-tooltip-arrow {\r
	right: 3px;\r
	border-width: 5px 0 5px 5px;\r
	border-left-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-left .data-tooltip-arrow {\r
	top: 50%;\r
	margin-top: -5px;\r
}\r
\r
.data-tooltip-placement-leftTop .data-tooltip-arrow {\r
	top: 8px;\r
}\r
\r
.data-tooltip-placement-leftBottom .data-tooltip-arrow {\r
	bottom: 8px;\r
}\r
\r
.data-tooltip-placement-bottom .data-tooltip-arrow,.data-tooltip-placement-bottomLeft .data-tooltip-arrow,.data-tooltip-placement-bottomRight .data-tooltip-arrow {\r
	top: 3px;\r
	border-width: 0 5px 5px;\r
	border-bottom-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-bottom .data-tooltip-arrow {\r
	left: 50%;\r
	margin-left: -5px;\r
}\r
\r
.data-tooltip-placement-bottomLeft .data-tooltip-arrow {\r
	left: 16px;\r
}\r
\r
.data-tooltip-placement-bottomRight .data-tooltip-arrow {\r
	right: 16px;\r
}`;cn(n0);var r0=function(i){return`
    <div `.concat(Ae,'="tooltip" class="data-tooltip data-tooltip-placement-').concat(i.placement,` data-tooltip-hidden" style="transform-origin: 50% 45px 0px;">
        <div class="data-tooltip-content">
            <div class="data-tooltip-arrow"></div>
            <div class="data-tooltip-inner" data-role="tooltip"></div>
        </div>
    </div>`)},sl=function(){function f(){be(this,f)}return ke(f,null,[{key:"show",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{placement:"top"};f.hide();var r=H(r0(n));typeof t=="string"?r.find("[data-role=tooltip]").html(t):r.find("[data-role=tooltip]").append(t);var a=H(document.body);a.append(r);var o=r.get(),l=(o==null?void 0:o.clientWidth)||0,u=(o==null?void 0:o.clientHeight)||0,c=e.get(),h=c.clientWidth,v=c.getBoundingClientRect(),g=Math.round(window.pageXOffset+v.left+h/2-l/2),p=Math.round(window.pageYOffset+v.top-u-2);n.placement==="bottom"&&(p+=v.height+u+2),r.css({left:g+"px",top:p+"px"}),r.addClass("data-tooltip-active")}},{key:"hide",value:function(){H("div[".concat(Ae,"=tooltip]")).remove()}}]),f}(),i0=`.data-toolbar {\r
	position: absolute;\r
	opacity: 0;\r
	visibility: hidden;\r
	width: auto;\r
	line-height: 26px;\r
	display: flex;\r
	flex-direction: row;\r
	font-size: 14px;\r
	font-weight: normal;\r
	text-indent: 0;\r
	-webkit-user-select: none;\r
	-moz-user-select: none;\r
	 -ms-user-select: none;\r
	     user-select: none;\r
    z-index: 127;\r
}\r
\r
.data-toolbar-active {\r
	opacity: 1;\r
	visibility: visible;\r
}\r
\r
.data-toolbar-block {\r
	top: auto;\r
	bottom: -46px;\r
	left: -1px;\r
	right: auto;\r
	height: 40px;\r
}\r
\r
.data-toolbar-btn {\r
	line-height: 26px;\r
	min-width: 28px;\r
	display: inline-block;\r
	text-align: center;\r
	color: #595959;\r
	transition: background-color 0.3s ease-in-out;\r
	cursor: pointer;\r
}\r
\r
.data-toolbar-btn-disabled,.data-toolbar-btn-disabled:hover {\r
	background-color: transparent;\r
	box-shadow: none;\r
	cursor: not-allowed;\r
}\r
\r
.data-toolbar-group {\r
	border: 1px solid rgba(226, 226, 226, 0.84);\r
    border-radius: 4px;\r
    box-shadow: 0px 2px 4px 0px rgb(225 225 225 / 50%);\r
    background: #fff;\r
    position: relative;\r
    display: inline-flex;\r
    padding: 5px;\r
    align-items: center;\r
}\r
\r
.data-toolbar-item {\r
	position: relative;\r
	display: inline-block;\r
	line-height: 26px;\r
	text-align: left;\r
	color: #595959;\r
	flex: 0 0 auto;\r
    font-size: 12px;\r
    cursor: pointer;\r
}\r
\r
.data-toolbar-item:not(.data-toolbar-item-input):hover, .data-toolbar-item.active:not(.data-toolbar-item-input){\r
    background-color: #f4f4f4;\r
    border-radius: 2px;\r
}\r
\r
.data-toolbar-item > * {\r
    font-size: 12px !important;\r
}\r
\r
.data-toolbar-item[disabled] {\r
	opacity: 0.5;\r
	cursor: not-allowed;\r
}\r
\r
.data-toolbar-item-split {\r
	width: 1px;\r
	height: 16px;\r
	line-height: 16px;\r
	margin: 6px 4px;\r
	border-left: 1px solid #e8e8e8;\r
	display: inline-block;\r
}\r
\r
.data-toolbar-item-dropdown-active {\r
	opacity: 1;\r
	visibility: visible;\r
	transform: translateY(0px);\r
}\r
\r
.data-toolbar-item-input {\r
	display: flex;\r
    margin: 0 4px;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input {\r
    width: 46px;\r
    line-height: 12px;\r
    font-size: 12px;\r
    outline: none;\r
    border: 1px solid #dadada;\r
    border-radius: 4px;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input::-moz-selection {\r
    color: inherit;\r
    background:transparent\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input::selection {\r
    color: inherit;\r
    background:transparent\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input:focus::-moz-selection\r
{\r
    color: #fff;\r
    background: #1890ff;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input:focus::selection\r
{\r
    color: #fff;\r
    background: #1890ff;\r
}\r
\r
.data-toolbar-item-dropdown .dropdown-container {\r
	display: none;\r
	position: absolute;\r
	padding: 8px 0;\r
	top: 100%;\r
	margin-top: 6px;\r
	border-radius: 2px;\r
	background-color: #fff;\r
	box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\r
    z-index: 99999;\r
}\r
\r
.data-toolbar-item-dropdown .dropdown-container.show {\r
	display: block;\r
}\r
\r
.data-toolbar-dropdown-item {\r
	padding: 2px 16px;\r
	margin: 0;\r
	white-space: nowrap;\r
	line-height: 26px;\r
	color: #404040;\r
	cursor: pointer;\r
    display: block;\r
}\r
\r
.data-toolbar-dropdown-item:hover {\r
	background-color: #f5f5f5;\r
}\r
\r
.data-toolbar-dropdown-switch {\r
	display: flex;\r
	align-items: center;\r
}\r
\r
.data-toolbar-dropdown-switch .data-toolbar-dropdown-item-content {\r
	flex: 1;\r
    margin-right: 4px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn {\r
    margin: 0;\r
    padding: 0;\r
    color: #595959;\r
    font-size: 14px;\r
    font-variant: tabular-nums;\r
    line-height: 1.5;\r
    list-style: none;\r
    -webkit-font-feature-settings: "tnum";\r
    font-feature-settings: "tnum";\r
    position: relative;\r
    display: inline-block;\r
    -webkit-box-sizing: border-box;\r
    box-sizing: border-box;\r
    vertical-align: middle;\r
    background-color: rgba(0,0,0,.25);\r
    border: 0;\r
    border-radius: 100px;\r
    cursor: pointer;\r
    -webkit-transition: all .2s;\r
    transition: all .2s;\r
    -webkit-user-select: none;\r
    -moz-user-select: none;\r
    -ms-user-select: none;\r
    user-select: none;\r
    min-width: 28px;\r
    height: 16px;\r
    line-height: 16px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked {\r
    background-color: #347EFF\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle {\r
    top: 2px;\r
    left: 2px;\r
    width: 12px;\r
    height: 12px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle, .data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\r
    position: absolute;\r
    -webkit-transition: all .2s ease-in-out;\r
    transition: all .2s ease-in-out;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-handle {\r
    left: calc(100% - 14px);\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\r
    top: 0;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    background-color: #fff;\r
    border-radius: 9px;\r
    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    content: "";\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-inner {\r
    display: block;\r
    margin: 0 5px 0 18px;\r
    font-size: 12px;\r
    color: #fff;\r
    -webkit-transition: margin .2s;\r
    transition: margin .2s;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-inner {\r
    margin: 0 18px 0 5px;\r
}\r
.data-toolbar-switch {\r
	display: flex;\r
	align-items: center;\r
    padding: 0 4px;\r
    cursor: pointer;\r
    width: -webkit-max-content;\r
    width: -moz-max-content;\r
    width: max-content;\r
}\r
\r
.data-toolbar-switch:hover {\r
    background-color: #f4f4f4;\r
    border-radius: 2px;\r
}\r
\r
.data-toolbar-switch .switch-content {\r
	flex: 1;\r
    margin-right: 4px;\r
}\r
\r
.data-toolbar-switch .switch-btn {\r
    margin: 0;\r
    padding: 0;\r
    color: #595959;\r
    font-size: 14px;\r
    font-variant: tabular-nums;\r
    line-height: 1.5;\r
    list-style: none;\r
    -webkit-font-feature-settings: "tnum";\r
    font-feature-settings: "tnum";\r
    position: relative;\r
    display: inline-block;\r
    -webkit-box-sizing: border-box;\r
    box-sizing: border-box;\r
    vertical-align: middle;\r
    background-color: rgba(0,0,0,.25);\r
    border: 0;\r
    border-radius: 100px;\r
    cursor: pointer;\r
    -webkit-transition: all .2s;\r
    transition: all .2s;\r
    -webkit-user-select: none;\r
    -moz-user-select: none;\r
    -ms-user-select: none;\r
    user-select: none;\r
    min-width: 28px;\r
    height: 16px;\r
    line-height: 16px;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked {\r
    background-color: #347EFF\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle {\r
    top: 2px;\r
    left: 2px;\r
    width: 12px;\r
    height: 12px;\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle, .data-toolbar-switch .switch-btn .switch-handle:before {\r
    position: absolute;\r
    -webkit-transition: all .2s ease-in-out;\r
    transition: all .2s ease-in-out;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked .switch-handle {\r
    left: calc(100% - 14px);\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle:before {\r
    top: 0;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    background-color: #fff;\r
    border-radius: 9px;\r
    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    content: "";\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-inner {\r
    display: block;\r
    margin: 0 5px 0 18px;\r
    font-size: 12px;\r
    color: #fff;\r
    -webkit-transition: margin .2s;\r
    transition: margin .2s;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked .switch-inner {\r
    margin: 0 18px 0 5px;\r
}`;cn(i0);var go="ot-user-background",ha="ot-user-cursor",lf="ot-user-cursor-card",Bi="ot-card-mask",va="ot-user-cursor-trigger",uf="ot-user-cursor-trigger-active",a0=function(){function f(i){be(this,f),this.engine=void 0,this.root=void 0,this.hideCursorInfoTimeoutMap=void 0,this.engine=i,this.root=i.root,this.hideCursorInfoTimeoutMap={}}return ke(f,[{key:"destroy",value:function(){var e,t=(e=this.engine.scrollNode)!==null&&e!==void 0?e:this.root;t.find(".".concat(go)).remove(),t.find(".".concat(ha)).remove(),t.find(".".concat(Bi)).remove()}},{key:"getRectWithRange",value:function(e,t){var n,r=t.getClientRect(),a=(n=e.get())===null||n===void 0?void 0:n.getBoundingClientRect();return new DOMRect(r.left-((a==null?void 0:a.left)||0),r.top-((a==null?void 0:a.top)||0),r.right-r.left,r.bottom-r.top)}},{key:"isWrapByRange",value:function(e){var t=e.cloneRange().collapse(!0).getClientRect(),n=e.cloneRange().collapse(!1).getClientRect();return t.bottom!==n.bottom}},{key:"drawSubRang",value:function(e,t,n,r){for(var a=n.startOffset,o=n.startNode,l=n.endNode,u=n.startOffset,c=n.endOffset,h=n.getClientRect().top,v=a;u<c;){n.setStart(n.commonAncestorContainer,u),n.setEnd(n.commonAncestorContainer,u+1);var g=n.getClientRect();if(g.top>h||u===c-1){n.setStart(n.commonAncestorContainer,v),v=u,h=g.top;var p=this.getRectWithRange(e,n);t.clearRect(p),t.drawRect(Ve(Ve({},p.toJSON()),r))}u++}n.setStart(o,a),n.setEnd(l,c)}},{key:"drawBackground",value:function(e,t){var n,r,a,o,l=this,u=this.engine.card,c=t.uuid,h=t.color,v=tr(h);v.setAlpha(.3);var g,p=v.toRgbString(),b=((n=this.engine.scrollNode)!==null&&n!==void 0?n:this.root).find(".".concat(go,"[").concat(lr,'="').concat(c,'"]'));if(b&&b.length>0)b.attributes(nl,h.toString()),g=b[0].__canvas,g.clear();else{var y;b=H('<div class="'.concat(go,'" ').concat(lr,'="').concat(c,'" ').concat(nl,'="').concat(h,'" />')),((y=this.engine.scrollNode)!==null&&y!==void 0?y:this.root).append(b),g=new ym({container:b.get()}),b[0].__canvas=g}b.css({position:"absolute",top:0,left:0,"pointer-events":"none"}),b[0].__range=e.cloneRange();var k=(r=this.engine.scrollNode)!==null&&r!==void 0?r:this.root,E=((a=k.get())===null||a===void 0?void 0:a.clientWidth)||k.width(),_=this.root.height();g.resize(E,_);var T=u.find(e.commonAncestorNode,!0);T&&!T.isCenter(e.commonAncestorNode)&&(T=void 0);var x={fill:p},C=e.getSubRanges();if(((o=T)===null||o===void 0?void 0:o.isEditable)&&T.drawBackground){var S=T.drawBackground(b,e,g);if(S===!1)return[e];if(S)if(Array.isArray(S))C=S;else return S.x<0&&(g.resize(E-S.x,_),b.css("left","".concat(S.x,"px")),S.x=0),g.clearRect(S),g.drawRect(Ve(Ve({},S.toJSON()),x)),[e]}else if(T)return[e];return C.forEach(function(R){if(l.isWrapByRange(R))l.drawSubRang(b,g,R,x);else{var z=l.getRectWithRange(b,R);g.clearRect(z),g.drawRect(Ve(Ve({},z.toJSON()),x))}}),C}},{key:"getNodeRect",value:function(e,t){var n,r=e.parent();if(e.isCard()&&(r==null?void 0:r.hasClass(this.engine.list.CUSTOMZIE_LI_CLASS))&&(r==null||(n=r.first())===null||n===void 0?void 0:n.equal(e))&&e.next()&&(e=e.next()),e.isElement()&&(t=e.get().getBoundingClientRect()),e.isText()){var a=Ge.create(this.engine).cloneRange();a.select(e,!0),t=a.getClientRect()}return t}},{key:"getCursorRect",value:function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,a=((t=this.root.get())===null||t===void 0?void 0:t.getBoundingClientRect())||{top:0,left:0};if(Li(e)){var o=e,l=o.startNode;o.shrinkToElementNode();var u=o.getClientRect();if(l.isElement()&&u.height===0){var c=H(l[0].childNodes[o.startOffset]);c&&c.length>0?u=this.getNodeRect(c,u):(c=l.first(),c&&c.length>0&&(u=this.getNodeRect(c,u)))}var h=u.top-(a.top||0),v=u.left-(a.left||0)-r,g=u.height;return{top:h+"px",left:v+"px",height:g>0?g+"px":-1,elementHeight:u.height||0}}var p=e,b=fo(p.css("outline-width")),y=((n=p.get())===null||n===void 0?void 0:n.getBoundingClientRect())||{top:0,left:0,height:0},k=y.top-a.top-1,E=y.left-a.left;return b&&(k-=b+1,E-=2),{left:E+"px",top:k+"px",height:0,elementHeight:y.height||0}}},{key:"setCursorRect",value:function(e,t){if(t.height!==-1){if(t.height===0){e.css(t),e.addClass(lf);return}e.css(t),e.removeClass(lf)}else e.remove()}},{key:"showCursorInfo",value:function(e,t){var n=t.uuid,r=t.color;this.hideCursorInfoTimeoutMap[n]&&clearTimeout(this.hideCursorInfoTimeoutMap[n]);var a=e.find(".".concat(va)),o=e.css("background-color");e.attributes("data-old-background-color",o),a.addClass("".concat(uf)),e.css("background-color",r),a.css("background-color",r)}},{key:"hideCursorInfo",value:function(e){var t=e.find(".".concat(va)),n=e.attributes("data-old-background-color");t.removeClass("".concat(uf)),e.css("background-color",n),t.css("background-color",n)}},{key:"drawCursor",value:function(e,t,n){var r=this,a=t.uuid,o=t.name,l=t.color,u=this.getCursorRect(e),c=this.root.children(".".concat(ha,"[").concat(lr,'="').concat(a,'"]'));if(c&&c.length>0)this.setCursorRect(c,u);else{var h=`
            <div class="`.concat(ha,'" ').concat(lr,'="').concat(a,`">
                <div class="`).concat(va,'">').concat(ti(o||""),`</div>
            </div>`);c=H(h);var v=c.find(".".concat(va));if(u.elementHeight===0){var g=0,p=function E(){g++,u=r.getCursorRect(e),u.elementHeight<20&&g<=50?setTimeout(function(){E()},20):r.setCursorRect(c,u)};p()}else this.setCursorRect(c,u);c.on("mouseenter",function(){return r.showCursorInfo(c,t)});var b=!0;c.on("transitionstart",function(){b=!1}),c.on("transitionend",function(){b=!0}),c.on("mouseleave",function(){b&&r.hideCursorInfo(c)}),c.css("background-color",l),v.css("background-color",l),this.root.append(c)}if(c&&c[0]){c.css("z-index","");var y=this.engine.card.components.find(function(E){return E.isMaximize});if(y){var k=this.engine.card.closest(Li(e)?e.startNode:e,!0);(!k||!y.root.equal(k))&&c.css("z-index",120)}return c[0].__target=Li(e)?e.toPath(!0):e,n===!1||(this.showCursorInfo(c,t),this.hideCursorInfoTimeoutMap[a]&&clearTimeout(this.hideCursorInfoTimeoutMap[a]),this.hideCursorInfoTimeoutMap[a]=setTimeout(function(){r.hideCursorInfo(c)},2e3)),c}}},{key:"drawCard",value:function(e,t,n){var r,a,o=this,l=this.engine.language,u=((r=this.root.get())===null||r===void 0?void 0:r.getBoundingClientRect())||{left:0,top:0,width:0,height:0},c=((a=e.get())===null||a===void 0?void 0:a.getBoundingClientRect())||{left:0,top:0,width:0,height:0},h=this.root.children(".".concat(Bi,"[").concat(lr,'="').concat(n.uuid,'"]'));if(h&&h.length>0){h[0].__node=e[0],h.css({left:c.left-u.left+"px",top:c.top-u.top+"px"});return}if(h=H('<div class="'.concat(Bi,'" ').concat(lr,'="').concat(n.uuid,'" />')),h[0].__node=e[0],c.height===0){var v=0,g=function p(){var b;v++,c=((b=e.get())===null||b===void 0?void 0:b.getBoundingClientRect())||{left:0,top:0,width:0,height:0},c.height<20&&v<=50?setTimeout(function(){p()},20):h.css({left:c.left-u.left+"px",top:c.top-u.top+"px",width:c.width+"px",height:c.height+"px"})};g()}else h.css({left:c.left-u.left+"px",top:c.top-u.top+"px",width:c.width+"px",height:c.height+"px"});h.on("mouseenter",function(){o.showCursorInfo(t,n),sl.show(h,l.get("card","lockAlert").toString(),{placement:"bottomLeft"})}),h.on("mousemove",function(p){var b=H("div[".concat(Ae,"=tooltip]"));b.css({left:p.pageX-16+"px",top:p.pageY+32+"px"})}),h.on("mouseleave",function(){o.hideCursorInfo(t),sl.hide()}),h.on("click",function(p){p.preventDefault(),p.stopPropagation()}),h.on("mousedown",function(p){p.preventDefault(),p.stopPropagation()}),this.root.append(h)}},{key:"setCardSelectedByOther",value:function(e,t){var n=t||{},r=n.uuid,a=n.color;if(a){var o=tr(a);o.setAlpha(.3);var l=o.toRgbString(),u;return e.selectedByOther||(u=e.onSelectByOther(!0,{color:a,rgb:l})),e.selectedByOther=r,u}e.selectedByOther&&e.onSelectByOther(!1),e.selectedByOther=!1}},{key:"setCardActivatedByOther",value:function(e,t){if(!e.isEditable){var n=t||{},r=n.uuid,a=n.color;if(a){var o=tr(a);o.setAlpha(.3);var l=o.toRgbString(),u;return e.activatedByOther||(u=e.onActivateByOther(!0,{color:a,rgb:l})),e.activatedByOther=r,u}e.activatedByOther&&e.onActivateByOther(!1),e.activatedByOther=!1}}},{key:"drawRange",value:function(e,t,n){var r=this,a=this.engine.card,o=t.uuid,l=e,u=l.commonAncestorNode,c=a.find(u);c&&!c.isCenter(u)&&(c=void 0);var h=[];if(a.each(function(x){x.isEditable||(!c||!x.root.equal(c.root))&&(x.activatedByOther===o&&r.setCardActivatedByOther(x),h.push(o))}),h.length>0){var v,g;(v=this.root.get())===null||v===void 0||(g=v.querySelectorAll(h.map(function(x){return".".concat(Bi,"[").concat(lr,'="').concat(x,'"]')}).join(",")))===null||g===void 0||g.forEach(function(x){var C;(C=x.parentNode)===null||C===void 0||C.removeChild(x),sl.hide()})}if(c&&!c.isEditable){var p=this.setCardActivatedByOther(c,t)||c.root,b=c.constructor.collab;if(b===void 0||b===!0){var y=this.drawCursor(p,t,n);y&&this.drawCard(p,y,t),this.drawBackground(e,t)}}else{if(c){this.drawBackground(e,t);return}a.each(function(x){var C=x.getCenter();if(C&&C.length>0){if(x.isEditable&&C.contains(e.startNode)&&C.contains(e.endNode)&&(e.startNode.closest(xt).length>0||e.endNode.closest(xt).length>0)){r.setCardSelectedByOther(x);return}e.isPointInRange(C.get(),0)?r.setCardSelectedByOther(x,t):x.selectedByOther===o&&r.setCardSelectedByOther(x)}});var k=a.getSingleSelectedCard(e);if(k){if(k.isEditable){var E=k.getCenter();if(E.contains(e.startNode)&&E.contains(e.endNode)&&(e.startNode.closest(xt).length>0||e.endNode.closest(xt).length>0))return}var _=this.setCardSelectedByOther(k,t)||k.root;this.drawCursor(_,t,n)}else{e.shrinkToElementNode();var T=this.drawBackground(e,t);e.collapsed||(T.forEach(function(x){x.collapsed||(e=x)}),e.shrinkToElementNode(),e.collapse(!1)),this.drawCursor(e,t,n)}}}},{key:"updateBackgroundPosition",value:function(){var e,t,n,r=this;(e=(t=(n=this.engine.scrollNode)===null||n===void 0?void 0:n.get())!==null&&t!==void 0?t:this.root.get())===null||e===void 0||e.querySelectorAll(".".concat(go)).forEach(function(a){var o=H(a),l=a.__range,u=o.attributes(lr),c=o.attributes(nl);r.drawBackground(l,{uuid:u,color:c})})}},{key:"updateCursorPosition",value:function(){var e,t=this;(e=this.root.get())===null||e===void 0||e.querySelectorAll(".".concat(ha)).forEach(function(n){var r=H(n),a=n.__target;if(!a){r.remove();return}if(a.name||(a=Ge.fromPath(t.engine,a,!0)),a.startContainer||H(a).closest("body").length!==0){var o=t.getCursorRect(a);t.setCursorRect(r,o)}else r.remove()})}},{key:"updateCardPosition",value:function(){var e,t,n=((e=this.root.get())===null||e===void 0?void 0:e.getBoundingClientRect())||{left:0,top:0};(t=this.root.get())===null||t===void 0||t.querySelectorAll(".".concat(Bi)).forEach(function(r){var a,o=r.__node;if(o!=null&&o.isConnected){var l=o.getBoundingClientRect();r.style.left=l.left-n.left+"px",r.style.top=l.top-n.top+"px"}else(a=r.parentNode)===null||a===void 0||a.removeChild(r)})}},{key:"updatePosition",value:function(){this.updateBackgroundPosition(),this.updateCursorPosition(),this.updateCardPosition()}},{key:"updateBackgroundAlpha",value:function(e){var t,n=this.getCursorRect(e);(t=this.root.get())===null||t===void 0||t.querySelectorAll(".".concat(ha)).forEach(function(r){var a=r.querySelector(".".concat(va)),o=r.style.left,l=r.style.top,u=tr(r.style.backgroundColor);n.left===o&&n.top===l?u.setAlpha(.3):u.setAlpha(1);var c=u.toRgbString();r.style.backgroundColor=c,a&&(a.style.backgroundColor=c)})}},{key:"render",value:function(e,t,n){var r=e.path,a=e.uuid,o=e.active;if(r){var l=Ge.fromPath(this.engine,r,!0);this.drawRange(l,t,o||n)}else this.remove(a)}},{key:"remove",value:function(e){var t,n,r,a=this,o=(t=(n=(r=this.engine.scrollNode)===null||r===void 0?void 0:r.get())!==null&&n!==void 0?n:this.root.get())===null||t===void 0?void 0:t.querySelector("[".concat(lr,'="').concat(e,'"]'));if(o){var l;if(o.classList.contains(Bi)){var u=o.__node,c=u?this.engine.card.find(u):null;c&&!c.isEditable&&c.activatedByOther===e&&this.setCardActivatedByOther(c)}(l=o.parentNode)===null||l===void 0||l.removeChild(o)}this.engine.card.each(function(h){h.isEditable||h.selectedByOther!==e||a.setCardSelectedByOther(h)})}}]),f}(),o0=function(f){rt(e,f);var i=it(e);function e(t){var n;return be(this,e),n=i.call(this),n.engine=void 0,n.prevRange=null,n.rangeColoring=void 0,n.currentRangePath=void 0,n.data=new Map,n.current=null,n.handleScroll=function(r){var a,o=(a=n.engine.container.get())===null||a===void 0?void 0:a.childNodes;if(!!o){var l=_r(n.data),u;try{for(l.s();!(u=l.n()).done;){var c,h,v=Ai(u.value,2),g=v[0],p=v[1];if(g!==((c=n.current)===null||c===void 0?void 0:c.uuid)&&!((h=p.path)===null||h===void 0)&&h.start.id){var b=p.path.start.path[0],y=o.item(b);if(y&&r.equal(y)){n.rangeColoring.updatePosition();break}}}}catch(k){l.e(k)}finally{l.f()}}},n.handleMouseDown=function(){n.engine.container.on("mouseup",n.handleMouseUp),n.engine.container.on("mousemove",n.emitSelectChange)},n.handleMouseUp=function(){n.engine.container.off("mouseup",n.handleMouseUp),n.engine.container.off("mousemove",n.emitSelectChange),n.emitSelectChange()},n.observer=null,n.emitSelectChange=function(){var r,a,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!n.engine.change.isComposing()){var l=n.engine.change.range.get();(r=n.observer)===null||r===void 0||r.disconnect();var u=n.engine.card.find(l.commonAncestorContainer,!0);if(u!=null&&u.getSelectionNodes){var c=n.getCardResizeRange(u);c&&(l=c.cloneRange(),n.observer=new ResizeObserver(function(){if(c=n.getCardResizeRange(u),c)n.prevRange={startContainer:c.startContainer,endContainer:c.endContainer,startOffset:c.startOffset,endOffset:c.endOffset},n.onSelectionChange(c,!0,o);else{var h;(h=n.observer)===null||h===void 0||h.disconnect()}}),n.observer.observe(u.root.get()))}((a=n.prevRange)===null||a===void 0?void 0:a.startContainer)===l.startContainer&&n.prevRange.endContainer===l.endContainer&&n.prevRange.startOffset===l.startOffset&&n.prevRange.endOffset===l.endOffset||(!l.commonAncestorNode.isRoot()&&!l.commonAncestorNode.inEditor()?(n.current&&n.removeAttirbute(n.current.uuid),n.prevRange=null):(n.prevRange={startContainer:l.startContainer,endContainer:l.endContainer,startOffset:l.startOffset,endOffset:l.endOffset},n.onSelectionChange(l,!1,o)))}},n.engine=t,n.rangeColoring=new a0(t),t.container.on("keyup",n.emitSelectChange),t.container.on("mousedown",n.handleMouseDown),t.on("scroll",n.handleScroll),n}return ke(e,[{key:"getCardResizeRange",value:function(n){if(n!=null&&n.getSelectionNodes){var r=n.getSelectionNodes();if(r.length>0){var a,o=Ge.create(this.engine);o.setStart(r[0],0);var l=r[r.length-1];return o.setEnd(l,l.isText()?l.text().length:((a=l.get())===null||a===void 0?void 0:a.childNodes.length)||0),o}}return null}},{key:"setCurrent",value:function(n){this.current=n}},{key:"setAttribute",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=this.data.get(n.uuid);if(n.force||!Ye.exports.isEqual(o||{},n)){var l;this.data.set(n.uuid,Object.assign({},n,{active:!o})),n.uuid===((l=this.current)===null||l===void 0?void 0:l.uuid)?(a===!0&&this.rangeColoring.updatePosition(),this.emit("change",n)):this.rangeColoring.render(n,r)}}},{key:"removeAttirbute",value:function(n){var r;!this.data.has(n)||(this.data.delete(n),n===((r=this.current)===null||r===void 0?void 0:r.uuid)?this.emit("change",{uuid:n,remove:!0}):this.rangeColoring.remove(n))}},{key:"getAttribute",value:function(n){return this.data.get(n)}},{key:"onSelectionChange",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!!this.current){var o=this.engine.card;n=n.cloneRange();var l=o.active;if(l&&!l.isEditable){var u=l.getCenter();if(Or(l.root)){var c=l.root.prev();c?n.select(c,!0).collapse(!1):(n.setStartBefore(l.root),n.collapse(!0))}else u&&u.length>0&&n.select(u.get(),!0)}if(!l&&!n.collapsed){var h=this.engine.card.find(n.startNode,!0);h&&h.type===Nt.BLOCK&&n.setStart(h.getCenter().parent(),1);var v=this.engine.card.find(n.endNode,!0);v&&v.type===Nt.BLOCK&&n.setEnd(v.getCenter().parent(),1)}var g=n.toPath(!0);this.currentRangePath=n.toPath();var p=this.getAttribute(this.current.uuid);this.setAttribute(Object.assign({},p,{path:g,uuid:this.current.uuid,force:r}),this.current,a),this.rangeColoring.updateBackgroundAlpha(n)}}},{key:"destory",value:function(){this.engine.container.off("keyup",this.emitSelectChange),this.engine.container.off("mousedown",this.handleMouseDown),this.engine.off("scroll",this.handleScroll)}}]),e}(Ti.exports.EventEmitter2),cf=function(f){rt(e,f);var i=it(e);function e(t){var n;return be(this,e),n=i.call(this),n.engine=void 0,n.type=null,n.data=void 0,n.engine=t,n.create(),n}return ke(e,[{key:"create",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine?Kn(this.engine.container):[];this.data=n}},{key:"apply",value:function(n,r){if(n.length>0)try{this.data=Si.type.apply(this.data,n),r&&r(void 0)}catch(o){var a;r?r(o):(a=this.engine)===null||a===void 0||a.messageError("ot",o)}}},{key:"submitOp",value:function(n,r,a){this.apply(n,a)}},{key:"destroy",value:function(){delete this.data}}]),e}(Ti.exports.EventEmitter2),s0=function(){function f(i){var e=this;be(this,f),this.engine=void 0,this.getElementFromPath=function(t,n){At(t)&&(t=t[0]);var r=n[0];if(r===$e.ATTRIBUTE)return{startNode:t,startOffset:r,endNode:t,endOffset:r};var a=r-$e.ELEMENT;if(t instanceof Element&&t.hasAttribute(un)){var o=e.engine.card,l=o.find(t);l&&(l.getCenter().empty(),o.renderComponent(l))}var u=[];t.childNodes.forEach(function(v){Or(v)||u.push(v)});var c=u[a],h=n[1];return n.length===1||h===$e.TAG_NAME||h===$e.ATTRIBUTE||c instanceof Text?{startNode:c,startOffset:a,endNode:t,endOffset:h||0}:e.getElementFromPath(c,n.slice(1))},this.engine=i}return ke(f,[{key:"fromRemoteAttr",value:function(e){var t;if(!!e){var n=e.id,r=e.leftText,a=e.rightText,o=(t=this.engine.container.get())===null||t===void 0?void 0:t.querySelector("[".concat(qe,'="').concat(n,'"]'));if(!!o){var l=o.textContent||"";if(l==="")return{container:o,offset:0};if(l!=null&&l.startsWith(r)){for(var u=o.firstChild,c=r.length;u&&(u.nodeType!==3||(((h=u.textContent)===null||h===void 0?void 0:h.length)||0)<c);){var h,v;if((((v=u.textContent)===null||v===void 0?void 0:v.length)||0)<c){var g;c-=((g=u.textContent)===null||g===void 0?void 0:g.length)||0,u=u.nextSibling}else u=u.firstChild}return{container:u,offset:c}}if(l!=null&&l.endsWith(a)){for(var p,b,y=a.length,k=o.lastChild;k&&(k.nodeType!==3||(((E=k.textContent)===null||E===void 0?void 0:E.length)||0)<y);){var E,_;if(((_=k.textContent)===null||_===void 0?void 0:_.length)||0<y){var T,x;y-=((T=k)===null||T===void 0||(x=T.textContent)===null||x===void 0?void 0:x.length)||0,k=k.previousSibling}else k=k.lastChild}return{container:k,offset:((p=k)===null||p===void 0||(b=p.textContent)===null||b===void 0?void 0:b.length)||0-y}}for(var C=0;l[C]===r[C];)C++;for(var S=o.firstChild;S&&(S.nodeType!==3||(((R=S.textContent)===null||R===void 0?void 0:R.length)||0)<C);){var R,z;if(((z=S.textContent)===null||z===void 0?void 0:z.length)||0<C){var F;C-=((F=S.textContent)===null||F===void 0?void 0:F.length)||0,S=S.nextSibling}else S=S.firstChild}return{container:S,offset:C}}}}},{key:"getSideText",value:function(e,t){var n=this.engine.block.closest(e);if(n.length>0){var r=n.attributes(qe),a=Ge.create(this.engine),o=Ge.create(this.engine);return a.setStart(n[0],0),a.setEnd(e[0],t),o.setStart(e[0],t),o.setEnd(n[0],n[0].childNodes.length),{id:r,leftText:a.toString(),rightText:o.toString()}}}},{key:"setAttribute",value:function(e,t,n,r,a){var o=this.engine.card,l=this.getElementFromPath(e,t),u=l.startNode,c=H(u);if(c&&c.length>0&&!c.isRoot()){var h;if(n=Kc(n),r=Js(r),(h=c.get())===null||h===void 0||h.setAttribute(n,r),c.isCard()){var v=o.find(c);if(!v)return;v.isEditable||o.reRender(v),v.isEditable&&v.onChange&&v.onChange(a?"remote":"local",c)}}return c}},{key:"removeAttribute",value:function(e,t,n){var r=this.getElementFromPath(e,t),a=r.startNode,o=H(a);if(o.length>0&&!o.isRoot()){var l;(l=o.get())===null||l===void 0||l.removeAttribute(n)}return o}},{key:"insertNode",value:function(e,t,n,r){var a=this.engine,o=this.getElementFromPath(e,t),l=o.startNode,u=o.endNode,c=H(l),h=H(u);if(h.length>0&&!c.isRoot()&&(!e.isCard()||e.isEditableCard()&&(c.length===0||c.closest(xt).isEditable()))){var v=typeof n=="string"?document.createTextNode(n):rf(n);if(c&&c.parent()){var g;(g=h.get())===null||g===void 0||g.insertBefore(v,c.get())}else{var p;(p=h.get())===null||p===void 0||p.insertBefore(v,null)}var b=H(v);return b.isCard()&&b.attributes(un,r?"remote":"true"),a.card.render(b),b}}},{key:"deleteNode",value:function(e,t,n){var r=this.engine.card,a=this.getElementFromPath(e,t),o=a.startNode,l=H(o);if(l.length>0&&!l.isRoot()){var u=l.parent();return l.isCard()?n?r.removeRemote(l):r.remove(l,!1):l.remove(),u!=null&&u.isRoot()?void 0:u}}},{key:"insertText",value:function(e,t,n,r){var a=this.getElementFromPath(e,t),o=a.startNode,l=a.endNode,u=H(o);if(!(o&&!u.isText())){var c=o&&o.nodeValue?o.nodeValue:"",h=c.substring(0,n)+r+c.substring(n);if(o&&o.parentNode===l)o.nodeValue=h;else if(h){var v,g=document.createTextNode(h);((v=l.firstChild)===null||v===void 0?void 0:v.nodeName)==="BR"&&l.firstChild.remove(),l.insertBefore(g,l.firstChild)}return u}}},{key:"deleteText",value:function(e,t,n,r){var a=this.getElementFromPath(e,t),o=a.startNode,l=H(o);if(!!l.isText()){var u=o&&o.nodeValue?o.nodeValue:"",c=u.substring(0,n)+u.substring(n+r.length);return o.nodeValue=c,l}}},{key:"handleOperation",value:function(e,t){var n=e.p,r,a;if(n.length!==0){var o=this.engine.container;if("id"in e&&e.id&&e.bi&&e.bi>-1){var l=this.engine.container.find("[".concat(qe,'="').concat(e.id,'"]'));l.length>0&&l.inEditor()&&(o=l,n=n.slice(e.bi))}return("si"in e||"sd"in e)&&(a=n[n.length-1],n=n.slice(0,-1)),("oi"in e||"od"in e)&&(r=n[n.length-1].toString(),n=n.slice(0,-1)),"oi"in e?this.setAttribute(o,n,r,e.oi,t):"od"in e?this.removeAttribute(o,n,r):"sd"in e?this.deleteText(o,n,a,e.sd):"si"in e?this.insertText(o,n,a,e.si):"ld"in e?this.deleteNode(o,n,t):"li"in e?this.insertNode(o,n,e.li,t):void 0}}},{key:"handleRemoteOperations",value:function(e){var t=this;try{var n=this.getRangeRemotePath(),r=[];return e.forEach(function(a){var o=t.handleOperation(a,!0);o&&r.push(o)}),n&&this.engine.isFocus()&&this.setRangeByRemotePath(n),this.engine.change.change(!0,r),r}catch(a){return this.engine.messageError("ot",a),[]}}},{key:"handleSelfOperations",value:function(e){var t=this,n=[];return e.forEach(function(r){var a=t.handleOperation(r);a&&n.push(a)}),this.engine.change.change(!1,n),n}},{key:"setRangeAfterOp",value:function(e){var t=this.engine,n,r=e.p;("si"in e||"sd"in e)&&(n=r[r.length-1],r=r.slice(0,-1)),("oi"in e||"od"in e)&&(r=r.slice(0,-1));var a=this.engine.container;if("id"in e&&e.id&&e.bi&&e.bi>-1){var o=this.engine.container.find("[".concat(qe,'="').concat(e.id,'"]'));o.inEditor()&&(a=o,r=r.slice(e.bi))}var l=this.getElementFromPath(a,r),u=l.startNode,c=l.endNode,h=Ge.create(this.engine);if("si"in e||"sd"in e){var v=u.data===""?c:u,g=e,p=n+(g.si?g.si.length:0);h.setOffset(v,p,p),t.change.range.select(h);return}h.select(u||c.lastChild||c,!0).shrinkToElementNode().collapse(!1),t.change.range.select(h)}},{key:"getRangeRemotePath",value:function(){try{var e;if(((e=window.getSelection())===null||e===void 0?void 0:e.rangeCount)===0)return;var t=Ge.from(this.engine);if(!t||t.inCard())return;t.startNode.isRoot()&&t.shrinkToElementNode();var n=t.startNode,r=t.startOffset,a=t.endNode,o=t.endOffset;return{start:this.getSideText(n,r),end:this.getSideText(a,o)}}catch(l){this.engine.messageError("ot",l);return}}},{key:"setRangeByRemotePath",value:function(e){try{var t,n=window.getSelection(),r=n?(t=Ge.from(this.engine,n))===null||t===void 0?void 0:t.cloneRange():void 0;if(!r)return;var a=e.start,o=e.end,l,u;a&&(l=this.fromRemoteAttr(a)),o&&(u=this.fromRemoteAttr(o)),l&&l.container&&r.setStart(l.container,l.offset),u&&u.container&&r.setEnd(u.container,u.offset),this.engine.change.range.select(r,!1)}catch(c){this.engine.messageError("ot",c)}}},{key:"setRangeByPath",value:function(e){if(e){var t=e.start,n=e.end;if(t&&n){var r=t.path[t.path.length-1],a=n.path[n.path.length-1],o=t.path.slice(),l=n.path.slice();o.pop(),l.pop();var u=this.engine,c=u.container,h=u.change,v=t.id?c.find("[".concat(qe,'="').concat(t.id,'"]')).get():c.getChildByPath(o,function(T){return!Or(H(T))});if(!v)return;var g=n.id?c.find("[".concat(qe,'="').concat(n.id,'"]')).get():c.getChildByPath(l,function(T){return!Or(H(T))});if(!g)return;var p=function(x,C){if(x.nodeType===wt().TEXT_NODE){var S=x.textContent||"";return S.length<C?S.length:C}else{var R=x.childNodes;return R.length<C?R.length:C}};try{var b=h.range.get();if(v.nodeName==="BR"||this.engine.node.isVoid(v)?b.select(v).collapse(!1):(b.setStart(v,p(v,r)),b.setEnd(g,p(g,a))),!b.collapsed){var y=this.engine.card.find(b.startNode,!0),k=this.engine.card.find(b.endNode,!0);if(y&&k&&(y==null?void 0:y.root.equal(k.root))){var E=b.startNode.closest(xt);E.length===0&&(E=b.startNode.find(xt));var _=b.endNode.closest(xt);_.length===0&&(_=b.endNode.find(xt)),E.length>0&&_.length>0&&!E.equal(_)&&b.collapse(!0)}}h.range.select(b),b.scrollRangeIntoView()}catch(T){this.engine.messageError("ot",T)}}}}}]),f}(),l0=function(f){rt(e,f);var i=it(e);function e(t,n){var r;return be(this,e),r=i.call(this),r.engine=void 0,r.doc=void 0,r.dmp=void 0,r.cacheNodes=[],r.cacheTransientElements=void 0,r.timer=null,r.lineStart=!1,r.handleFirstLineText=function(a,o,l,u,c){var h=[],v=c[0],g=typeof v=="string",p=a==="root"?"":a,b=a==="root"?-1:o;if(g&&u!==v)for(var y=r.textToOps(l,v,u),k=0;k<y.length;k++)h.push(Object.assign({},y[k],{id:p,bi:b}));for(var E=c.length-1;E>=(g?1:0);E--){var _=c[E],T=l.concat();T[T.length-1]=E+$e.ELEMENT,h.push({id:p,bi:b,p:T,ld:_})}return g||h.push({id:p,bi:b,p:l,li:u}),h},r.isLoadingCard=function(a){if(a.length>$e.ATTRIBUTE&&!Array.isArray(a[1])&&et(a[1])==="object"){var o=a[$e.ATTRIBUTE],l=o[He],u=o[Ot],c=o[qe];if(l&&u&&c){var h,v=(h=r.engine.container.get())===null||h===void 0?void 0:h.querySelector("[".concat(qe,'="').concat(c,'"]'));if(v!=null&&v.getAttribute(un))return!0}}return!1},r.handleChildren=function(a,o,l,u,c){var h=[],v=a==="root"?"":a,g=a==="root"?-1:o;if(r.isLoadingCard(c))return[];if(u.length===0)for(var p=0;p<c.length;p++)h.push({id:a,bi:g,p:l.concat(p+$e.ELEMENT),li:c[p]});else if(c.length===0)for(var b=u.length-1;b>=0;b--)h.push({id:v,bi:g,p:l.concat(b+$e.ELEMENT),ld:u[b]});else if(c.length===1&&typeof c[0]=="string")h.push.apply(h,gt(r.handleFirstLineText(a,g,l.concat($e.ELEMENT),c[0],u)));else if(c.every(function(M){return Array.isArray(M)?M[$e.ATTRIBUTE][qe]:!1})&&u.every(function(M){return Array.isArray(M)?M[$e.ATTRIBUTE][qe]:!1})){for(var y=function(O){var A=u[O],I=c.find(function($){return $[$e.ATTRIBUTE][qe]===A[$e.ATTRIBUTE][qe]});I||(h.push({id:v,bi:g,p:l.concat(O+$e.ELEMENT),ld:A}),u.splice(O,1))},k=u.length-1;k>=0;k--)y(k);for(var E=function(O){var A=c[O],I=u.find(function(P){return P[$e.ATTRIBUTE][qe]===A[$e.ATTRIBUTE][qe]});if(!I)h.push({id:a,bi:g,p:l.concat(O+$e.ELEMENT),li:A}),u.splice(O,0,A);else if(!Ye.exports.isEqual(A,I)){var $=A[$e.ATTRIBUTE],ie=I[$e.ATTRIBUTE],N=l.concat(O+$e.ELEMENT);if(h.push.apply(h,gt(r.handleAttributes(a,g,N,ie,$))),r.isLoadingCard(A))return"continue";h.push.apply(h,gt(r.handleChildren(a,g,N,I.slice($e.ELEMENT),A.slice($e.ELEMENT))))}},_=0;_<c.length;_++)var T=E(_)}else{if(u.length>c.length)for(var x=u.length-1;x>=c.length;x--)h.push({id:v,bi:g,p:l.concat(x+$e.ELEMENT),ld:u[x]});for(var C=0;C<c.length;C++){var S=c[C],R=u[C];if(!R)h.push({id:a,bi:g,p:l.concat(C+$e.ELEMENT),li:S});else if(!Ye.exports.isEqual(S,R))if(typeof S!="string"&&et(S)===et(R)&&S[$e.TAG_NAME]===R[$e.TAG_NAME]){var z=S[$e.ATTRIBUTE],F=R[$e.ATTRIBUTE],G=l.concat(C+$e.ELEMENT);if(h.push.apply(h,gt(r.handleAttributes(a,g,G,F,z))),r.isLoadingCard(S))continue;h.push.apply(h,gt(r.handleChildren(a,g,G,R.slice($e.ELEMENT),S.slice($e.ELEMENT))))}else h.push({id:v,bi:g,p:l.concat(C+$e.ELEMENT),ld:R}),h.push({id:a,bi:g,p:l.concat(C+$e.ELEMENT),li:S})}}return h},r.findCardForDoc=function(a,o,l){var u=af(a,function(v){return v["data-card-key"]===o?l?l(v):!0:!1});if(u){var c=u.attributes,h=u.children;return{attributes:c,rendered:Array.isArray(h)&&Array.isArray(h[2])&&Array.isArray(h[2][2])}}},r.engine=t,r.doc=n.doc,r.dmp=new ua.exports.diff_match_patch,r}return ke(e,[{key:"setDoc",value:function(n){this.doc=n}},{key:"textToOps",value:function(n,r,a){var o=[],l=this.dmp.patch_make(r,a);return Object.keys(l).forEach(function(u){var c=l[u],h=c.start1;c.diffs.forEach(function(v){var g=Ai(v,2),p=g[0],b=g[1];if(p!==ua.exports.DIFF_DELETE)if(p!==ua.exports.DIFF_INSERT)p===ua.exports.DIFF_EQUAL&&(h+=b.length);else{var y=[];o.push({si:b,p:y.concat(gt(n),[h])})}else{var k=[];o.push({sd:b,p:k.concat(gt(n),[h])})}})}),o}},{key:"handleAttributes",value:function(n,r,a,o,l){var u=[],c=n==="root"?"":n,h=n==="root"?-1:r;return Object.keys(l).forEach(function(v){var g=l[v],p=[].concat(gt(a),[$e.ATTRIBUTE,v]);if(!o.hasOwnProperty(v)&&g!==o[v]){u.push({id:c,bi:h,p,oi:g});return}var b=o[v];g!==b&&u.push({id:c,bi:h,p,od:b,oi:g})}),Object.keys(o).forEach(function(v){l.hasOwnProperty(v)||u.push({id:c,bi:h,p:a.concat($e.ATTRIBUTE,v),od:o[v]})}),u}},{key:"handleMutations",value:function(n){var r,a=this,o=[],l=(r=this.doc)===null||r===void 0?void 0:r.data;if(!(!l||n.length===0)){for(var u=function(p){var b=n.at(p);if(!b)return"continue";var y=b.type,k=b.target;if(y==="attributes"&&(b.attributeName&&tf(k,b.attributeName)||k instanceof Element&&ni(k))||(k instanceof Text&&(k=k.parentElement),!k||!k.isConnected||!(k instanceof Element)||Or(k)))return"continue";var E=k instanceof Element&&ni(k);if(E)return o=[k],"break";if(o.length===0||!o.includes(k)&&o.every(function(x){return!x.contains(k)})){for(var _=o.length,T=0;T<_;T++)k.contains(o[T])&&(o.splice(T,1),_--,T--);o.push(k)}},c=0;c<n.length;c++){var h=u(c);if(h!=="continue"&&h==="break")break}if(o.length!==0){var v=[];o.forEach(function(g){v.push.apply(v,gt(a.diff(g,l)))}),v.length>0&&this.emit("ops",v)}}}},{key:"diff",value:function(n){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:((r=this.doc)===null||r===void 0?void 0:r.data)||[],o=[];if(!n.isConnected)return[];var l=ni(n)?"root":n.getAttribute(qe);if(!l){var u=this.engine.block.closest(H(n),function(E){return!!E.attributes(qe)}).get();if(!(u instanceof Element))return[];n=u,l=n.getAttribute(qe)}if(!l)return[];var c=Kn(n);if(!c)return[];var h=l==="root",v=af(a,function(E){return h?!0:E[qe]===l});if(!v)return[];var g=v.path;if(l!=="root"){var p=c[$e.ATTRIBUTE],b=v.attributes;o.push.apply(o,gt(this.handleAttributes(l,g.length,g,b,p)))}if(this.isLoadingCard(c))return o;var y=c.slice(2),k=v.children;return o.push.apply(o,gt(this.handleChildren(h?"":l,h?-1:g.length,g,k,y))),o}}]),e}(Ti.exports.EventEmitter2),u0={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},c0=function(f){rt(e,f);var i=it(e);function e(t,n){var r;return be(this,e),r=i.call(this),r.node=void 0,r.engine=void 0,r.doc=void 0,r.isStopped=void 0,r.observer=void 0,r.producer=void 0,r.isCache=!1,r.cache=[],r.node=t,r.isStopped=!0,r.engine=n.engine,r.doc=n.doc,r.producer=new l0(r.engine,{doc:r.doc}),r.observer=new MutationObserver(function(a){if(r.isCache){var o;(o=r.cache).push.apply(o,gt(a))}!r.isStopped&&!r.isCache&&r.producer.handleMutations(a)}),r.producer.on("ops",function(a){r.onChange(a)}),r}return ke(e,[{key:"setDoc",value:function(n){this.doc=n,this.producer.setDoc(n)}},{key:"start",value:function(){this.isStopped&&(this.observer.observe(this.node[0],u0),this.isStopped=!1)}},{key:"stop",value:function(){this.isStopped||(this.observer.disconnect(),this.isStopped=!0)}},{key:"startCache",value:function(){this.isCache||(this.cache=[],this.isCache=!0)}},{key:"submitCache",value:function(){var n=this;this.isCache&&setTimeout(function(){n.engine.change.isComposing()||(n.isCache=!1,n.cache=n.cache.map(function(r){return r.type==="characterData"&&r.target.nodeType===document.TEXT_NODE&&(r["text-data"]=r.target.textContent),r}),n.cache.length>0&&n.producer.handleMutations(n.cache),n.cache=[])},20)}},{key:"destroyCache",value:function(){var n=this;this.isCache&&setTimeout(function(){n.isCache=!1,n.cache=[]},20)}},{key:"getCaches",value:function(){return this.cache}},{key:"onChange",value:function(n){this.isStopped||this.emit("onChange",n)}},{key:"diff",value:function(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine.container.get();return this.producer.diff(r,(n=this.doc)===null||n===void 0?void 0:n.data)}}]),e}(Ti.exports.EventEmitter2),f0=`.ot-user-cursor {\r
	position: absolute;\r
	z-index: 125;\r
	width: 2px;\r
}\r
\r
.ot-user-cursor-trigger {\r
	position: absolute;\r
	top: -5px;\r
	left: -2px;\r
	border-radius: 100%;\r
	color: #ffffff;\r
	width: 6px;\r
	height: 6px;\r
	font-size: 0;\r
	overflow: hidden;\r
	transition: all 0.1s linear;\r
}\r
\r
.ot-user-cursor-trigger-active {\r
	top: -17px;\r
	border-radius: 2px;\r
	color: #ffffff;\r
	font-size: 10px;\r
	line-height: 18px;\r
	height: 18px;\r
	width: auto;\r
	padding: 0 3px;\r
	white-space: nowrap;\r
}\r
\r
.ot-card-mask {\r
	position: absolute;\r
	z-index: 10;\r
	background: transparent;\r
	cursor: not-allowed;\r
}\r
\r
.ot-user-background {\r
  z-index: 120;\r
}\r
\r
.ot-user-cursor-card {\r
	position: absolute;\r
}\r
\r
.ot-user-cursor-card .ot-user-cursor-trigger {\r
	display: none;\r
}\r
\r
.ot-user-cursor-card .ot-user-cursor-trigger-active {\r
	position: absolute;\r
	display: block;\r
	top: -19px;\r
	left: 0;\r
	border-radius: 2px;\r
	color: #ffffff;\r
	font-size: 10px;\r
	line-height: 18px;\r
	height: 18px;\r
	width: auto;\r
	padding: 0 3px;\r
	white-space: nowrap;\r
}`;cn(f0);var d0=function(f){rt(e,f);var i=it(e);function e(t){var n;return be(this,e),n=i.call(this),n.engine=void 0,n.members=void 0,n.currentMember=void 0,n.clientId=void 0,n.selection=void 0,n.consumer=void 0,n.mutation=void 0,n.doc=null,n.isRemote=!1,n.colors=["#597EF7","#73D13D","#FF4D4F","#9254DE","#36CFC9","#FFA940","#F759AB","#40A9FF"],n.handleChange=function(r){var a=n.engine.trigger("opsChange",r);a&&(r=a),n.submitOps(r),n.engine.history.handleSelfOps(r.filter(function(o){return!o.nl&&!o.p.includes(bt)})),n.engine.trigger("ops",r),r.find(function(o){return("od"in o||"oi"in o)&&o.p.includes(ar)})&&n.engine.change.change(!1)},n.engine=t,n.members=[],n.selection=new o0(t),n.consumer=new s0(t),n.mutation=new c0(t.container,{engine:t}),n.mutation.on("onChange",n.handleChange),n.clientId=Gc(8),n}return ke(e,[{key:"initLocal",value:function(){var n;this.doc||(this.stopMutation(),this.doc=new cf(this.engine),(n=this.mutation)===null||n===void 0||n.setDoc(this.doc),this.engine.readonly||this.startMutation())}},{key:"initRemote",value:function(n,r,a){var o,l=this,u=!this.doc||this.doc.type===null;this.stopMutation(),u||this.doc.destroy(),this.isRemote=!0,this.doc=n,(o=this.mutation)===null||o===void 0||o.setDoc(n),this.syncValue(r),n.on("op",function(c,h){if(l.clientId!==h.toString()){var v=Hm(c);v.length>0&&(l.apply(v),l.engine.history.handleRemoteOps(v))}}),this.selection.removeAllListeners(),this.selection.on("change",function(c){a&&a(c)}),this.engine.readonly||this.startMutation(),u&&this.emit("load")}},{key:"submitOps",value:function(n){var r=this;if(!!this.doc){n.forEach(function(l){var u;l.uid=(u=r.currentMember)===null||u===void 0?void 0:u.uuid});var a=new cf,o=JSON.parse(JSON.stringify(this.doc.data));a.create(o),a.submitOp(n,null,function(l){if(a.destroy(),!!r.doc){if(l){r.engine.messageError("ot","If there is an error in the collaborative structure, the content of the server will be reset, and the current history will also be cleared.",l,n,o),r.engine.history.clear();for(var u=[],c=r.doc.data,h=c.length-1;h>1;h--){var v=c[h];u.push({bi:-1,id:"",ld:v,p:[h],nl:void 0})}for(var g=[],p=Kn(r.engine.container)||[],b=2;b<p.length;b++){var y=p[b];g.push({bi:-1,id:"",li:y,p:[b],nl:void 0})}r.doc.submitOp(u.concat(g),{source:r.clientId}),r.selection.emitSelectChange(!0);return}r.doc.submitOp(n,{source:r.clientId},function(k){if(k){var E,_;r.engine.messageError("ot","SubmitOps Error:",k,"OPS:",n,"DATA:",(E=r.doc)===null||E===void 0?void 0:E.data),(_=r.doc)===null||_===void 0||_.destroy()}r.selection.emitSelectChange(!0)})}})}}},{key:"diff",value:function(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine.container.get();return((n=this.mutation)===null||n===void 0?void 0:n.diff(r))||[]}},{key:"apply",value:function(n){this.stopMutation(),this.consumer.handleRemoteOperations(n),this.selection.emitSelectChange(),this.startMutation()}},{key:"syncValue",value:function(n){var r=this,a=this.doc,o=this.engine;if(!!a){if(a.type&&Array.isArray(a.data)&&a.data.length>2){this.engine.setJsonValue(a.data);return}n&&o.setValue(n),a.on("create",function(){var l=Kn(o.container);a.submitOp([{p:[],oi:l}],{source:r.clientId})})}}},{key:"startMutation",value:function(){this.mutation&&this.mutation.start()}},{key:"stopMutation",value:function(){this.mutation&&this.mutation.stop()}},{key:"isStopped",value:function(){var n,r;return(n=(r=this.mutation)===null||r===void 0?void 0:r.isStopped)!==null&&n!==void 0?n:!1}},{key:"startMutationCache",value:function(){this.mutation&&this.mutation.startCache()}},{key:"submitMutationCache",value:function(){this.mutation&&this.mutation.submitCache()}},{key:"destroyMutationCache",value:function(){this.mutation&&this.mutation.destroyCache()}},{key:"getCaches",value:function(){var n;return((n=this.mutation)===null||n===void 0?void 0:n.getCaches())||[]}},{key:"getColors",value:function(){return this.colors}},{key:"setColors",value:function(n){this.colors=n}},{key:"setMemberColor",value:function(n){var r=n.index||this.members.length+1;r=(r-1)%this.colors.length,n.color=this.colors[r]}},{key:"getMembers",value:function(){return Ye.exports.cloneDeep(this.members)}},{key:"setMembers",value:function(n){var r=this;n=Ye.exports.cloneDeep(n),n.forEach(function(a){r.setMemberColor(a)}),this.members=n}},{key:"addMember",value:function(n){n=Ye.exports.cloneDeep(n),this.setMemberColor(n),this.members.find(function(r){return r.uuid===n.uuid})||this.members.push(n)}},{key:"removeMember",value:function(n){n=Ye.exports.cloneDeep(n),n.uuid&&(this.members=this.members.filter(function(r){return r.uuid!==n.uuid}),this.selection.removeAttirbute(n.uuid))}},{key:"setCurrentMember",value:function(n){n=Ye.exports.cloneDeep(n),this.setMemberColor(n);var r=this.members.find(function(a){return a.uuid===n.uuid});!r||(this.currentMember=r,this.selection.setCurrent(r))}},{key:"getCurrentMember",value:function(){return this.currentMember}},{key:"renderSelection",value:function(n){var r=this;Array.isArray(n)||(n=[n]),n.forEach(function(a){if(!(r.currentMember&&a.uuid===r.currentMember.uuid)){var o=r.members.find(function(l){return l.uuid===a.uuid});"remove"in a||!o?r.selection.removeAttirbute(a.uuid):r.selection.setAttribute(a,o)}})}},{key:"destroy",value:function(){var n,r;this.doc&&this.doc.destroy(),this.selection.destory(),(n=this.mutation)===null||n===void 0||n.off("onChange",this.handleChange),(r=this.mutation)===null||r===void 0||r.destroyCache(),this.stopMutation(),this.mutation=null}}]),e}(Ti.exports.EventEmitter2),cr=Yr("selfWaiting"),h0=function(){function f(i){var e=this;be(this,f),this.actionOps=[],this.engine=void 0,this.currentAction={},this.currentActionIndex=0,this.filterEvents=[],this.selfEvents=[],Object.defineProperty(this,cr,{writable:!0,value:void 0}),this.lazySave=Ye.exports.debounce(function(){e.saveOp()},200),this.handlePath=function(t,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(h){return!Or(H(h))},l=e.engine.container.find("[".concat(qe,'="').concat(n,'"]'));if(l.length>0&&l.inEditor()){var u,c=l.getPath(e.engine.container,!((u=l.parent())===null||u===void 0)&&u.isRoot()?void 0:o);return(a?c.map(function(h){return h+2}):c).concat(t.slice(r))}return t},this.engine=i}return ke(f,[{key:"reset",value:function(){this.actionOps=[],this.currentAction={},this.currentActionIndex=0}},{key:"onFilter",value:function(e){this.filterEvents.push(e)}},{key:"onSelf",value:function(e){this.selfEvents.push(e)}},{key:"hasUndo",value:function(){return!!this.getUndoOp()}},{key:"hasRedo",value:function(){return!!this.getRedoOp()}},{key:"undo",value:function(){this.saveOp();var e=this.getUndoOp();if(e){var t=!1;this.engine.ot.stopMutation();try{var n=this.engine.ot;n.submitOps(e.ops||[]),n.consumer.handleSelfOperations(e.ops),this.currentActionIndex--,t=!0}catch(r){this.reset(),this.engine.messageError("history-undo",r)}this.engine.isEmpty()&&this.engine.change.initValue(),t&&(this.engine.change.getRangePathBeforeCommand(),this.engine.ot.consumer.setRangeByPath(e.startRangePath),this.engine.change.change(),this.engine.trigger("undo")),this.engine.ot.startMutation()}}},{key:"redo",value:function(){this.saveOp();var e=this.getRedoOp();if(e){var t=!1;this.engine.ot.stopMutation();try{var n=this.engine.ot;n.submitOps(e.ops||[]),n.consumer.handleSelfOperations(e.ops),this.currentActionIndex++,t=!0}catch(r){this.reset(),this.engine.messageError("history-redo",r)}t&&(this.engine.change.getRangePathBeforeCommand(),this.engine.ot.consumer.setRangeByPath(e.rangePath),this.engine.change.change(),this.engine.trigger("redo")),this.engine.ot.startMutation()}}},{key:"clear",value:function(){var e=this;setTimeout(function(){e.reset()},10)}},{key:"saveOp",value:function(){this.currentAction&&this.currentAction.ops&&this.currentAction.ops.length>0&&(this.currentAction.self&&(this.currentAction.rangePath=this.getCurrentRangePath(),this.currentAction.id=Gc(8),this.actionOps.splice(this.currentActionIndex),this.actionOps.push(this.currentAction),this.currentActionIndex=this.actionOps.length,this.engine.trigger("historyChange")),this.currentAction={},this.engine.change.getRangePathBeforeCommand())}},{key:"handleSelfOps",value:function(e){var t,n=this;!((t=this.currentAction)===null||t===void 0)&&t.self||this.saveOp();var r=!1;if(e.forEach(function(o){if(r=!0,n.filterEvents.some(function(c){return c(o)})){var l;n.actionOps.length>0&&!o.nl&&((l=n.actionOps[n.actionOps.length-1].ops)===null||l===void 0||l.push(o))}else{n.currentAction.self=!0,n.currentAction.ops||(n.currentAction.ops=[]),n.currentAction.startRangePath||(n.currentAction.startRangePath=n.getRangePathBeforeCommand());var u=n.currentAction.ops[n.currentAction.ops.length-1];u&&ol(o,u)?n.currentAction.ops.pop():n.currentAction.ops.push(o)}}),r){var a=void 0;if(this.selfEvents.some(function(o){return a=o(e),a!==void 0}),ct(this,cr)[cr])return;typeof a=="boolean"?a?this.saveOp():this.currentAction={}:et(a)==="object"?(ct(this,cr)[cr]=a,a.then(function(o){o?n.saveOp():n.currentAction={}}).finally(function(){return ct(n,cr)[cr]=void 0})):a===void 0&&this.lazySave()}}},{key:"handleRemoteOps",value:function(e){var t=this;this.currentAction.self&&!ct(this,cr)[cr]&&this.saveOp();var n=this.engine.change.range.get();this.actionOps.forEach(function(r){var a;if((a=r.ops)===null||a===void 0||a.forEach(function(g){g.id&&g.bi!==void 0&&(g.p=t.handlePath(g.p,g.id,g.bi))}),r.rangePath){var o=r.rangePath,l=o.start,u=o.end;l.id&&l.bi!==void 0&&(l.path=t.handlePath(l.path,l.id,l.bi,!1,n.filterPath(!0))),u.id&&u.bi!==void 0&&(u.path=t.handlePath(u.path,u.id,u.bi,!1,n.filterPath(!0)))}if(r.startRangePath){var c=r.startRangePath,h=c.start,v=c.end;h.id&&h.bi!==void 0&&(h.path=t.handlePath(h.path,h.id,h.bi,!1,n.filterPath(!0))),v.id&&v.bi!==void 0&&(v.path=t.handlePath(v.path,v.id,v.bi,!1,n.filterPath(!0)))}}),e.forEach(function(r){t.currentAction.ops||(t.currentAction.ops=[]);var a=t.currentAction.ops[t.currentAction.ops.length-1];a&&ol(r,a)?t.currentAction.ops.pop():t.currentAction.ops.push(r),t.actionOps.some(function(o,l){var u,c=(u=o.ops)===null||u===void 0?void 0:u.some(function(b){return Si.type.canOpAffectPath(r,b.p)});if(c){for(var h=[o],v=function(y){var k,E=t.actionOps[y],_=(k=E.ops)===null||k===void 0?void 0:k.some(function(S){var R;return(R=o.ops)===null||R===void 0?void 0:R.some(function(z){return Si.type.canOpAffectPath(S,z.p)})});if(_){var T;h.push(E);var x=y+1,C=t.actionOps[x];C&&((T=C.ops)===null||T===void 0?void 0:T.some(function(S){var R;return(R=E.ops)===null||R===void 0?void 0:R.some(function(z){return Si.type.canOpAffectPath(S,z.p)})}))&&h.push(C)}},g=l+1;g<t.actionOps.length;g++)v(g);var p=t.actionOps.filter(function(b){return h.find(function(y){return y.id===b.id})===void 0});return t.actionOps=p,t.currentActionIndex=t.actionOps.length,c}return!1})})}},{key:"getUndoOp",value:function(){var e=this.currentActionIndex-1;if(this.actionOps[e]){var t=Ye.exports.cloneDeep(this.actionOps[e]),n=Ye.exports.findLastIndex(this.actionOps,function(a){return a.id==t.id});n!==-1?t=this.actionOps[n]:n=e;var r=Si.type.invert(t.ops||[]);r.forEach(function(a,o){var l=(t.ops||[])[r.length-o-1];a.id=l.id,a.bi=l.bi});try{return{self:!0,ops:r,id:t.id,type:"undo",rangePath:t.rangePath,startRangePath:t.startRangePath}}catch(a){this.engine.messageError("history-undo-op",a)}}}},{key:"getRedoOp",value:function(){var e=this.currentActionIndex;if(this.actionOps[e]){var t=Ye.exports.cloneDeep(this.actionOps[e]),n=[];t.type==="undo"?(n=Si.type.invert(t.ops||[]),n.forEach(function(r,a){var o=(t.ops||[])[n.length-a-1];r.id=o.id,r.bi=o.bi})):n=t.ops;try{return{self:!0,ops:n,id:t.id,type:"redo",rangePath:t.rangePath,startRangePath:t.startRangePath}}catch(r){this.engine.messageError("history-redo-op",r)}}}},{key:"getCurrentRangePath",value:function(){var e=this.engine,t=e.ot,n=e.change,r=t.selection.currentRangePath;return r||n.range.get().toPath()}},{key:"getRangePathBeforeCommand",value:function(){return this.engine.change.getRangePathBeforeCommand()||this.getCurrentRangePath()}}]),f}(),v0=function(){function f(i){var e=this;be(this,f),this.engine=void 0,this.disabled=!1,this.engine=i,this.engine.container.on("keydown",function(t){return e.trigger(t)})}return ke(f,[{key:"match",value:function(e){var t=this;Object.keys(this.engine.plugin.components).every(function(n){var r=t.engine.plugin.components[n];if(r.hotkey){var a=r.hotkey(e),o=!1,l=[];if(typeof a=="string"&&Le(a,e)?o=!0:Array.isArray(a)?a.some(function(c){if(typeof c=="string"){if(Le(c,e))return o=!0,l=[],!0}else{var h=c.key,v=c.args;if(Le(h,e))return o=!0,l=Array.isArray(v)?v:[v],!0}return!1}):et(a)==="object"&&Le(a.key,e)&&(o=!0,l=Array.isArray(a.args)?a.args:[a.args]),o){var u;return e.preventDefault(),(u=t.engine.command).execute.apply(u,[n].concat(gt(l))),!1}}return!0})}},{key:"trigger",value:function(e){this.disabled||this.match(e)}},{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"destroy",value:function(){this.engine.container.off("keydown",this.trigger)}}]),f}(),zt=function(){function f(i){be(this,f),this.type="keydown",this.hotkey="",this.listeners=[],this.engine=void 0,this.engine=i}return ke(f,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"unshiftOn",value:function(e){this.listeners.unshift(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"trigger",value:function(e){for(var t=0;t<this.listeners.length;t++){var n=this.listeners[t],r=n(e);if(r===!1)break}}},{key:"destroy",value:function(){this.listeners=[]}}]),f}(),g0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey="backspace",t}return ke(e,[{key:"trigger",value:function(n){var r=this.engine,a=r.change,o=r.container,l=a.range.get();if(a.cacheRangeBeforeCommand(),a.isEmpty()){n.preventDefault(),o.empty(),a.initValue();return}var u=l.commonAncestorNode,c=this.engine.card.find(u,!0),h=c!=null&&c.isEditable?c!=null&&c.getSelectionNodes?c.getSelectionNodes():[]:[];if(h.length>0){h.forEach(function(M){M.html("<p></br ></p>")}),a.apply(l.cloneRange().select(h[0],!0).collapse(!0));return}var v=l.startNode,g=l.startOffset;if(v.isEditable()){var p=v[0].childNodes[g-1],b=H(p);if(b.name==="br"){n.preventDefault(),b.remove(),a.apply(l);return}}for(var y=!0,k=0;k<this.listeners.length;k++){var E=this.listeners[k];if(y=E(n),y===!1)break}if(y===!1){this.engine.scrollNode&&l.scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode);return}if(l.collapsed){var x,C=void 0;if(this.engine.node.isBlock(v)){var S=v[0].childNodes[g-1];C=H(S)}else v.name==="br"&&(C=v);if(((x=C)===null||x===void 0?void 0:x.name)==="br"){var R=C.prev(),z=C.next(),F=z==null?void 0:z.next(),G=R==null?void 0:R.prev();(R==null?void 0:R.name)!=="br"&&(z==null?void 0:z.name)==="br"&&(F==null?void 0:F.name)!=="br"?(n.preventDefault(),C.remove(),z.remove(),a.apply(l.shrinkToTextNode())):(z==null?void 0:z.name)!=="br"&&(R==null?void 0:R.name)==="br"&&(G==null?void 0:G.name)!=="br"&&(n.preventDefault(),C.remove(),R.remove(),a.apply(l.shrinkToTextNode()))}}else{n.preventDefault();var _=v.prev();(_==null?void 0:_.name)==="br"&&_.remove(),a.delete(l);var T=l.startNode.prev();(T==null?void 0:T.isCard())&&T.find(xm).length===0&&T.remove(),a.apply(l),this.engine.scrollNode&&l.scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode);return}}}]),e}(zt),p0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey="delete",t}return ke(e,[{key:"getNext",value:function(n){return H(n).isEditable()?null:n.nextSibling?n.nextSibling:n.parentNode===null?null:this.getNext(n.parentNode)}},{key:"getRange",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(H(n).isEditable())return null;if(!r){var a=this.getNext(n);if(!a)return null;n=a}for(;n;){var o=H(n);if(o.attributes(He)){if(!n.ownerDocument)return null;var l=Ge.create(this.engine,n.ownerDocument);return l.setStartAfter(n),l.collapse(!0),l}if(this.engine.node.isBlock(o)){if(!n.ownerDocument)return null;var u=Ge.create(this.engine,n.ownerDocument);return u.select(o,!0).collapse(!0),u}if(o.name==="br"){var c;if(((c=n.parentNode)===null||c===void 0?void 0:c.childNodes.length)===1||!n.ownerDocument)return null;var h=Ge.create(this.engine,n.ownerDocument);return h.setStartAfter(n),h.collapse(!0),h}if(n.nodeType===Node.TEXT_NODE){if(n.data.length===0)return this.getRange(n);if(!n.ownerDocument)return null;var v=Ge.create(this.engine,n.ownerDocument);return v.setStart(n,1),v.collapse(!0),v}if(n.childNodes.length===0)return this.getRange(n);n=n.childNodes[0]}return null}},{key:"trigger",value:function(n){var r=this.engine.change;r.cacheRangeBeforeCommand();var a=r.range.get();if(!a.collapsed){n.preventDefault(),r.delete();return}var o=this.engine.card.find(a.startNode),l=!1,u;if(o){if(o.isLeftCursor(a.startNode)){n.preventDefault(),this.engine.card.select(o),r.delete();return}if(!o.isRightCursor(a.startNode))return;u=o.root[0]}else if(a.endContainer.nodeType===Node.TEXT_NODE){if(a.endContainer.data.length>a.endOffset){n.preventDefault();var c=a.cloneRange();c.setEnd(a.endContainer,a.endOffset+1),r.range.select(c),r.delete(),r.range.select(r.range.get().shrinkToTextNode());return}u=a.endContainer}else{if(a.endContainer.nodeType!==Node.ELEMENT_NODE)return;if(a.endContainer.childNodes.length===0)u=a.endContainer;else if(a.endOffset===0){var h;(a.endContainer.childNodes.length!==1||((h=a.endContainer.firstChild)===null||h===void 0?void 0:h.nodeName)!=="BR")&&(l=!0),u=a.endContainer.childNodes[a.endOffset]}else u=a.endContainer.childNodes[a.endOffset-1]}var v=this.getRange(u,l);if(v){n.preventDefault();var g=a.startOffset;g===1&&a.startContainer.childNodes.length===1&&a.startContainer.childNodes[0].nodeName==="BR"&&(g=0),v.setStart(a.startContainer,g),r.range.select(v),r.delete()}for(var p=0;p<this.listeners.length;p++){var b=this.listeners[p],y=b(n);if(y===!1)break}}}]),e}(zt),m0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey="enter",t}return ke(e,[{key:"trigger",value:function(n){var r=this.engine.change;r.cacheRangeBeforeCommand();var a=r.range.get(),o=this.engine.block.closest(a.endNode);o.isEditable()&&this.engine.block.wrap("<p />");for(var l=0;l<this.listeners.length;l++){var u=this.listeners[l],c=u(n);if(c===!1)break}this.engine.scrollNode&&this.engine.change.range.get().scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode),this.engine.trigger("select")}}]),e}(zt),b0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey="tab",t}return ke(e,[{key:"trigger",value:function(n){var r=this.engine.node;n.preventDefault(),r.insertText("    ")}}]),e}(zt),y0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey="shift+tab",t}return e}(zt),w0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey="shift+enter",t}return ke(e,[{key:"trigger",value:function(n){var r=this.engine,a=r.change,o=r.inline,l=r.block;n.preventDefault(),a.cacheRangeBeforeCommand();var u=a.range.get();if(u.startNode.closest("li").length===0){var c;(c=this.engine.typing.getHandleListener("enter","keydown"))===null||c===void 0||c.trigger(n);return}else{var h=H("<br />");if(o.insert(h,u),l.isLastOffset(u,"end")){var v,g;if((!h.next()||((v=h.next())===null||v===void 0?void 0:v.name)!=="br")&&(!h.prev()||((g=h.prev())===null||g===void 0?void 0:g.name)!=="br")){var p=h.clone();h.after(p),u.select(p).collapse(!1)}}}for(var b=0;b<this.listeners.length;b++){var y=this.listeners[b],k=y(n);if(k===!1)break}a.apply(u),this.engine.scrollNode&&this.engine.change.range.get().scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode)}}]),e}(zt),k0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey=function(o){return o.key===" "},t}return e}(zt),E0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey=function(o){return o.key==="/"||Le("/",o)||o.keyCode===229&&o.code==="Slash"},t}return e}(zt),x0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey="mod+a",t}return e}(zt),C0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey=function(o){return Le("left",o)||Le("shift+left",o)||Le("ctrl+a",o)||Le("ctrl+b",o)},t}return e}(zt),_0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keydown",t.hotkey=function(o){return Le("right",o)||Le("shift+right",o)||Le("ctrl+e",o)||Le("ctrl+f",o)},t}return e}(zt),A0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey=function(o){return Le("up",o)||Le("ctrl+p",o)},t}return e}(zt),T0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey=function(o){return Le("down",o)||Le("ctrl+n",o)},t}return e}(zt),S0=[{name:"default",handle:zt},{name:"enter",handle:m0,triggerName:"keydown:enter"},{name:"backspace",handle:g0,triggerName:"keydown:backspace"},{name:"delete",handle:p0,triggerName:"keydown:backspace"},{name:"tab",handle:b0,triggerName:"keydown:tab"},{name:"shift-tab",handle:y0,triggerName:"keydown:shift-tab"},{name:"shift-enter",handle:w0,triggerName:"keydown:shift-enter"},{name:"space",handle:k0,triggerName:"keydown:space"},{name:"slash",handle:E0,triggerName:"keydown:slash"},{name:"all",handle:x0,triggerName:"keydown:all"},{name:"left",handle:C0,triggerName:"keydown:left"},{name:"right",handle:_0,triggerName:"keydown:right"},{name:"up",handle:A0,triggerName:"keydown:up"},{name:"down",handle:T0,triggerName:"keydown:down"}],ga=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keyup",t}return e}(zt),N0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey="enter",t}return e}(ga),D0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.type="keyup",t.hotkey="backspace",t}return ke(e,[{key:"trigger",value:function(n){var r=this.engine.change;if(r.isEmpty()){n.preventDefault();return}for(var a=!0,o=0;o<this.listeners.length;o++){var l=this.listeners[o];if(a=l(n),a===!1)break}}}]),e}(ga),R0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey="tab",t}return e}(ga),O0=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.hotkey=function(o){return o.key===" "},t}return e}(ga),q0=[{name:"default",handle:ga},{name:"enter",handle:N0,triggerName:"keyup:enter"},{name:"backspace",handle:D0,triggerName:"keyup:backspace"},{name:"tab",handle:R0,triggerName:"keyup:tab"},{name:"space",handle:O0,triggerName:"keyup:space"}],L0=function(){function f(i){var e=this;be(this,f),this.engine=void 0,this.handleListeners=[],this.bindKeydown=function(n){var r=e.engine,a=r.readonly,o=r.card;if(a){Le("mod+a",n)&&n.preventDefault();return}n.target&&o.find(H(n.target))||e.trigger("keydown",n)},this.bindKeyup=function(n){var r=e.engine,a=r.readonly,o=r.card;a||n.target&&o.find(H(n.target))||e.trigger("keyup",n)},this.engine=i,S0.concat(q0).forEach(function(n){e.addHandleListener(n.name,n.handle,n.triggerName)});var t=i.container;t.on("keydown",this.bindKeydown),t.on("keyup",this.bindKeyup)}return ke(f,[{key:"addHandleListener",value:function(e,t,n,r){this.handleListeners.push({name:e,handle:new t(this.engine),triggerName:n,triggerParams:r})}},{key:"getHandleListener",value:function(e,t){var n;return(n=this.handleListeners.find(function(r){return r.name===e&&r.handle.type===t}))===null||n===void 0?void 0:n.handle}},{key:"removeHandleListener",value:function(e,t){for(var n=0;n<this.handleListeners.length;n++)if(this.handleListeners[n].name===e&&this.handleListeners[n].handle.type===t){this.handleListeners[n].handle.destroy(),this.handleListeners.splice(n,1);break}}},{key:"trigger",value:function(e,t){var n=this,r=this.handleListeners.filter(function(o){var l=o.handle;return l.type===e}).some(function(o){var l=o.name,u=o.handle,c=o.triggerName,h=o.triggerParams;if(l==="default"||!u.hotkey)return!1;if(typeof u.hotkey=="function"?u.hotkey(t):Le(u.hotkey,t)){var v,g=[t];return typeof h=="function"&&(g=h(n.engine,t)),(!c||(v=n.engine).trigger.apply(v,[c].concat(gt(g)))!==!1)&&u.trigger(t),!0}return!1});if(r===!1&&this.engine.trigger(e+":default",t)!==!1){var a;(a=this.getHandleListener("default",e))===null||a===void 0||a.trigger(t)}}},{key:"destroy",value:function(){var e=this.engine.container;this.handleListeners=[],e.off("keydown",this.bindKeydown),e.off("keyup",this.bindKeyup)}}]),f}(),ll="data-placeholder",ff="am-engine-placeholder",I0=function(){function f(i,e){var t=this;be(this,f),this.options=void 0,this.node=void 0,this._focused=!1,this._setFocus=function(){t._focused=!0},this._setBlur=function(){t._focused=!1},this.handleClick=function(r){var a=t.options,o=a.engine,l=a.autoAppend,u=a.autoPrepend;if(r.target&&!o.readonly&&Ne(o)){var c,h,v,g=H(r.target);if(!g.isEditable())return;var p=H("<p><br /></p>"),b=g.closest("".concat(xt,",").concat(Tr)),y=b.first();y||o.change.initValue(void 0,!0,g);var k=b.last(),E=!1;if(u!==!1&&y&&r.offsetY<(((c=y.get())===null||c===void 0?void 0:c.offsetTop)||0)&&!o.node.isEmptyWidthChild(y)?(b.prepend(p),E=!0):l!==!1&&k&&r.offsetY>(((h=k.get())===null||h===void 0?void 0:h.offsetTop)||0)+(((v=k.get())===null||v===void 0?void 0:v.clientHeight)||0)&&!o.node.isEmptyWidthChild(k)&&(b.append(p),E=!0),E){var _=o.change.range.get();_.select(p,!0).collapse(!1),o.change.apply(_)}}},this.handleFocus=function(){var r=t.options.engine;t.triggerFoucs(),!r.ot.isStopped()&&r.isEmpty()&&r.change.initValue()},this.focusTimeout=null,this.triggerFoucs=function(){var r=t.options.engine;t.focusTimeout&&clearTimeout(t.focusTimeout),t.focusTimeout=setTimeout(function(){if(!t._focused){var a=r.change.range.get();(a.commonAncestorNode.isRoot(r.container)||a.commonAncestorNode.inEditor(r.container))&&(r.change.range.setLastBlurRange(),r.trigger("focus"))}},0)},this.onInput=function(r){var a=t.options.engine;if(!a.readonly&&!(r.target&&a.card.find(H(r.target)))){var o=a.change.range.get();o.handleBr(!0)}},this.onRealtimeChange=function(){var r=t.options.engine;r.isEmpty()?r.showPlaceholder():r.hidePlaceholder()},this.blurTimeout=null,this.docMouseDown=function(r){if(!!r.target){var a=H(r.target),o=t.options.engine;if(t._focused&&a.closest(Di).length===0&&!a.inEditor(o.container)){t.blurTimeout&&clearTimeout(t.blurTimeout);var l=o.change.range.get();t.blurTimeout=setTimeout(function(){var u=o.change.range.get();u.commonAncestorNode.inEditor(o.container)||(o.change.range.setLastBlurRange(l),o.trigger("blur"))},0)}}},this.node=H(i),this.options=e,this._init(),this._focused=document.activeElement!==null&&this.node.equal(document.activeElement);var n=e.engine;n.on("blur",this._setBlur),n.on("focus",this._setFocus)}return ke(f,[{key:"_init",value:function(){var e,t=this,n=this.options,r=n.lang,a=n.tabIndex,o=n.className;this.node.attributes((e={},Ce(e,$n,"true"),Ce(e,"role","textbox"),Ce(e,"autocorrect",r==="en-US"?"on":"off"),Ce(e,"autocomplete","off"),Ce(e,"spellcheck",r==="en-US"?"true":"false"),Ce(e,"data-gramm","false"),e)),a!==void 0&&this.node.attributes("tabindex",a),this.node.hasClass(Gs)||this.node.addClass(Gs),ca&&this.node.addClass(wm),o!==void 0&&(Array.isArray(o)?o:o.split(/\s+/)).forEach(function(l){l.trim()!==""&&t.node.addClass(l)})}},{key:"init",value:function(){var e=this.options,t=e.engine,n=e.autoAppend,r=e.autoPrepend;this.node.on("input",this.onInput),t.on("realtimeChange",this.onRealtimeChange),n!==!1&&r!==!1&&this.node.on("click",this.handleClick),document.addEventListener("mousedown",this.docMouseDown),this.node.on(ca?"touchstart":"mousedown",this.triggerFoucs),this.node.on("focus",this.handleFocus)}},{key:"isFocus",value:function(){return this._focused}},{key:"getNode",value:function(){return this.node}},{key:"setReadonly",value:function(e){this.node.attributes($n,e?"false":"true")}},{key:"showPlaceholder",value:function(){var e=this.options.placeholder;e&&(this.node.attributes(Ce({},ll,e)),this.node.addClass(ff))}},{key:"hidePlaceholder",value:function(){this.node.removeAttributes(ll),this.node.removeClass(ff)}},{key:"destroy",value:function(){var e=this,t=this.options,n=t.className,r=t.engine;r.on("blur",this._setBlur),r.on("focus",this._setFocus),r.off("realtimeChange",this.onRealtimeChange),document.removeEventListener("mousedown",this.docMouseDown),this.node.removeAttributes($n),this.node.removeAttributes("role"),this.node.removeAttributes("autocorrect"),this.node.removeAttributes("autocomplete"),this.node.removeAttributes("spellcheck"),this.node.removeAttributes("data-gramm"),this.node.removeAttributes("tabindex"),this.node.removeAttributes(ll),this.options.className&&(Array.isArray(n)?n:(n||"").split(/\s+/)).forEach(function(a){a.trim()!==""&&e.node.removeClass(a)}),r.card.closest(this.node)&&this.node.removeClass(Gs),this.node.removeAllEvents()}}]),f}(),B0=function(){function f(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};be(this,f),this.data={},this.locale="zh-CN",this.locale=i,this.data=e}return ke(f,[{key:"add",value:function(e){this.data=Ye.exports.merge(this.data,e)}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function a(){for(var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0,u=o;u<t.length;u++){var c=l[t[u]];return et(c)==="object"?a(u+1,c):c||""}return l};return r(0,this.data[this.locale])}}]),f}(),M0={dnd:{title:"Drag to reposition"},copy:{title:"Copy",success:"Copied successfully",error:"Copy error"},delete:{title:"Delete"},copyAnchor:{title:"Copy anchor link"},link:{placeholder:"Please enter a link or anchor and press Enter to confirm",save:"Apply",edit:"Change",delete:"Remove link",open:"Open link",text:"link"},copyContent:{title:"copy content"},maximize:{title:"Maximize",back:"Back to document"},expand:{title:"Embedded preview"},collapse:{title:"Compact display"},card:{lockAlert:"Please wait for the other user to finish editing"},preferences:{title:"Preferences"},download:{title:"Download"},more:{title:"More"},checkMarkdown:{title:"It is detected that the paste content conforms to the Markdown syntax. Do you need to do style conversion?"},searchEmtpy:{title:"No matching card"}},P0={dnd:{title:"\u62D6\u52A8\u8C03\u6574\u4F4D\u7F6E"},copy:{title:"\u590D\u5236",success:"\u590D\u5236\u6210\u529F",error:"\u590D\u5236\u5931\u8D25"},delete:{title:"\u5220\u9664"},copyAnchor:{title:"\u590D\u5236\u951A\u70B9\u94FE\u63A5"},link:{placeholder:"\u8BF7\u8F93\u5165\u94FE\u63A5\u6216\u951A\u70B9\uFF0C\u56DE\u8F66\u786E\u8BA4",save:"\u4FDD\u5B58",edit:"\u7F16\u8F91",delete:"\u53D6\u6D88\u94FE\u63A5",open:"\u6253\u5F00\u94FE\u63A5",text:"\u94FE\u63A5"},copyContent:{title:"\u590D\u5236\u5185\u5BB9"},maximize:{title:"\u6700\u5927\u5316",back:"\u8FD4\u56DE\u6587\u6863"},expand:{title:"\u5D4C\u5165\u9884\u89C8"},collapse:{title:"\u7D27\u51D1\u5C55\u793A"},card:{lockAlert:"\u8BF7\u7B49\u5F85\u5BF9\u65B9\u7F16\u8F91\u5B8C\u6BD5\u540E\uFF0C\u518D\u8FDB\u5165\u7F16\u8F91"},preferences:{title:"\u8BBE\u7F6E"},download:{title:"\u4E0B\u8F7D"},more:{title:"\u66F4\u591A"},checkMarkdown:{title:"\u68C0\u6D4B\u5230\u7C98\u8D34\u5185\u5BB9\u7B26\u5408 Markdown \u8BED\u6CD5\uFF0C\u662F\u5426\u9700\u8981\u8F6C\u6362\uFF1F"},searchEmtpy:{title:"\u65E0\u5339\u914D\u5361\u7247"}},F0={"en-US":M0,"zh-CN":P0},z0=function f(i,e){be(this,f),this.editor=void 0,this.options=void 0,this.kind="plugin",this.name=this.constructor.pluginName,this.disabled=void 0,this.editor=i,this.options=e||{};var t=this.options.disabled;this.disabled=t};z0.pluginName=void 0;var U0=function(i){return i.kind==="element"},df=function(i){return i.kind==="block"},V0=function(i){return i.kind==="inline"},H0=`.am-engine ol, .am-engine-view ol, .am-engine ul, .am-engine-view ul {\r
    margin: 0 0 0 3px;\r
    padding: 0;\r
    list-style: none;\r
}\r
\r
.am-engine ol ul,.am-engine-view ol ul,.am-engine ul ul,.am-engine-view ul ul,.am-engine ol ol,.am-engine-view ol ol,.am-engine ul ol,.am-engine-view ul ol {\r
	margin-left: 0;\r
}\r
\r
.am-engine ol ul li,.am-engine-view ol ul li,.am-engine ul ul li,.am-engine-view ul ul li,.am-engine ol ol li,.am-engine-view ol ol li,.am-engine ul ol li,.am-engine-view ul ol li {\r
	margin-left: 2em;\r
}\r
\r
.am-engine ol ol[data-indent-new="0"],.am-engine-view ol ol[data-indent-new="0"],.am-engine ul ol[data-indent-new="0"],.am-engine-view ul ol[data-indent-new="0"],.am-engine ol ol[data-indent-new="3"],.am-engine-view ol ol[data-indent-new="3"],.am-engine ul ol[data-indent-new="3"],.am-engine-view ul ol[data-indent-new="3"],.am-engine ol ol[data-indent-new="6"],.am-engine-view ol ol[data-indent-new="6"],.am-engine ul ol[data-indent-new="6"],.am-engine-view ul ol[data-indent-new="6"] {\r
	list-style-type: decimal;\r
}\r
\r
.am-engine ol ol[data-indent-new="1"],.am-engine-view ol ol[data-indent-new="1"],.am-engine ul ol[data-indent-new="1"],.am-engine-view ul ol[data-indent-new="1"],.am-engine ol ol[data-indent-new="4"],.am-engine-view ol ol[data-indent-new="4"],.am-engine ul ol[data-indent-new="4"],.am-engine-view ul ol[data-indent-new="4"],.am-engine ol ol[data-indent-new="7"],.am-engine-view ol ol[data-indent-new="7"],.am-engine ul ol[data-indent-new="7"],.am-engine-view ul ol[data-indent-new="7"] {\r
	list-style-type: lower-alpha;\r
}\r
\r
.am-engine ol ol[data-indent-new="2"],.am-engine-view ol ol[data-indent-new="2"],.am-engine ul ol[data-indent-new="2"],.am-engine-view ul ol[data-indent-new="2"],.am-engine ol ol[data-indent-new="5"],.am-engine-view ol ol[data-indent-new="5"],.am-engine ul ol[data-indent-new="5"],.am-engine-view ul ol[data-indent-new="5"],.am-engine ol ol[data-indent-new="8"],.am-engine-view ol ol[data-indent-new="8"],.am-engine ul ol[data-indent-new="8"],.am-engine-view ul ol[data-indent-new="8"] {\r
	list-style-type: lower-roman;\r
}\r
\r
.am-engine ol ul[data-indent-new="3"],.am-engine-view ol ul[data-indent-new="3"],.am-engine ul ul[data-indent-new="3"],.am-engine-view ul ul[data-indent-new="3"],.am-engine ol ul[data-indent-new="6"],.am-engine-view ol ul[data-indent-new="6"],.am-engine ul ul[data-indent-new="6"],.am-engine-view ul ul[data-indent-new="6"] {\r
	list-style-type: disc;\r
}\r
\r
.am-engine ol ul[data-indent-new="1"],.am-engine-view ol ul[data-indent-new="1"],.am-engine ul ul[data-indent-new="1"],.am-engine-view ul ul[data-indent-new="1"],.am-engine ol ul[data-indent-new="4"],.am-engine-view ol ul[data-indent-new="4"],.am-engine ul ul[data-indent-new="4"],.am-engine-view ul ul[data-indent-new="4"],.am-engine ol ul[data-indent-new="7"],.am-engine-view ol ul[data-indent-new="7"],.am-engine ul ul[data-indent-new="7"],.am-engine-view ul ul[data-indent-new="7"] {\r
	list-style-type: circle;\r
}\r
\r
.am-engine ol ul[data-indent-new="2"],.am-engine-view ol ul[data-indent-new="2"],.am-engine ul ul[data-indent-new="2"],.am-engine-view ul ul[data-indent-new="2"],.am-engine ol ul[data-indent-new="5"],.am-engine-view ol ul[data-indent-new="5"],.am-engine ul ul[data-indent-new="5"],.am-engine-view ul ul[data-indent-new="5"],.am-engine ol ul[data-indent-new="8"],.am-engine-view ol ul[data-indent-new="8"],.am-engine ul ul[data-indent-new="8"],.am-engine-view ul ul[data-indent-new="8"] {\r
	list-style-type: square;\r
}\r
\r
.am-engine li,.am-engine-view li {\r
	margin-left: 23px;\r
    position: relative;\r
}\r
\r
.am-engine ol,.am-engine-view ol,.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"] {\r
	list-style-type: decimal;\r
}\r
\r
.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"] {\r
	list-style-type: lower-alpha;\r
}\r
\r
.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"] {\r
	list-style-type: lower-roman;\r
}\r
\r
.am-engine ul,.am-engine-view ul,.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\r
	list-style-type: disc;\r
}\r
\r
.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\r
	list-style-type: circle;\r
}\r
\r
.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\r
	list-style-type: square;\r
}\r
\r
.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"] {\r
	padding-left: 2em;\r
}\r
\r
.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"] {\r
	padding-left: 4em;\r
}\r
\r
.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"] {\r
	padding-left: 6em;\r
}\r
\r
.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"] {\r
	padding-left: 8em;\r
}\r
\r
.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"] {\r
	padding-left: 10em;\r
}\r
\r
.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\r
	padding-left: 12em;\r
}\r
\r
.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\r
	padding-left: 14em;\r
}\r
\r
.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\r
	padding-left: 16em;\r
}\r
\r
.am-engine .data-list,.am-engine-view .data-list {\r
	color: #262626;\r
	text-indent: 0;\r
}\r
\r
.am-engine .data-list-item,.am-engine-view .data-list-item {\r
    line-height: inherit;\r
    position: relative;\r
    list-style: none;\r
    text-indent: 0;\r
}`;cn(H0);var ul=function(i){return i.kind==="mark"},j0=function(){function f(i){be(this,f),this.data={},this.components={},this.editor=void 0,this.editor=i}return ke(f,[{key:"init",value:function(e,t){var n=this;e.forEach(function(r){n.data[r.pluginName]=r;var a=new r(n.editor,t[r.pluginName]);n.components[r.pluginName]=a,a.init&&a.init()})}},{key:"add",value:function(e,t){if(this.data[e.pluginName]=e,t=Ve({},t),Ne(this.editor)){var n=new e(this.editor,t);n.init&&n.init(),this.components[e.pluginName]=n}}},{key:"findPlugin",value:function(e){var t=this.components[e];if(!!t)return t}},{key:"findElementPlugin",value:function(e){var t=this.findPlugin(e);if(!!t&&U0(t))return t}},{key:"findMarkPlugin",value:function(e){var t=this.findPlugin(e);if(!!t&&ul(t))return t}},{key:"findInlinePlugin",value:function(e){var t=this.findPlugin(e);if(!!t&&V0(t))return t}},{key:"findBlockPlugin",value:function(e){var t=this.findPlugin(e);if(!!t&&df(t))return t}},{key:"each",value:function(e){var t=this;Object.keys(this.data).forEach(function(n,r){e&&e(n,t.data[n],r)})}},{key:"destroy",value:function(){var e=this;Object.keys(this.components).forEach(function(t){var n=e.components[t];n.destroy&&n.destroy()})}}]),f}(),G0=function(){function f(i){be(this,f),this.editor=void 0,this.editor=i}return ke(f,[{key:"queryEnabled",value:function(e){var t=this.editor.plugin.components[e];return!t||t.disabled||(!Ne(this.editor)||this.editor.readonly||!this.editor.isFocus())&&t.disabled!==!1?!1:this.editor.card.active?!!((ul(t)||t.kind==="plugin")&&this.editor.card.active.executeMark||this.editor.card.active.isEditable):!0}},{key:"queryState",value:function(e){var t=this.editor.plugin.components[e];if(t&&t.queryState)try{for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.queryState(r)}catch(o){this.editor.messageError("command-query",o)}}},{key:"handleExecuteBefore",value:function(){var e;if(Ne(this.editor)){e=this.editor.change;var t=e.range.get();if(!t.commonAncestorNode.isRoot()&&!t.commonAncestorNode.inEditor()){var n=t.commonAncestorNode.closest(Di),r=void 0;if(n.length>0){var a=n.attributes(Hc);if(a){var o=this.editor.card;r=o.find(a),r&&o.select(r)}}r||this.editor.focus()}e.cacheRangeBeforeCommand()}return e}},{key:"execute",value:function(e){var t=this.editor.plugin.components[e];if(t&&t.execute){for(var n,r=this.handleExecuteBefore(),a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];(n=this.editor).trigger.apply(n,["beforeCommandExecute",e].concat(o));try{var u,c=t.execute.apply(t,o);return r==null||r.combinText(),r==null||r.onSelect(),(u=this.editor).trigger.apply(u,["afterCommandExecute",e].concat(o)),c}catch(h){this.editor.messageError("command-execute",h)}}}},{key:"executeMethod",value:function(e,t){var n=this.editor.plugin.components[e];if(n&&n[t])try{for(var r=Ne(this.editor)?this.editor.change:null,a=arguments.length,o=new Array(a>2?a-2:0),l=2;l<a;l++)o[l-2]=arguments[l];var u=n[t].apply(n,o);return r==null||r.combinText(),u}catch(c){this.editor.messageError("command-excute-method",c)}}}]),f}(),W0=["blocks","inlines","marks","globals"],$0=function(){function f(){be(this,f),this._all=[],this._typeMap={},this._invalidKeys=[],this._tagMap={blocks:[],inlines:[],marks:[]},this.data={blocks:[],inlines:[],marks:[],globals:{}}}return ke(f,[{key:"add",value:function(e){var t=this;e=Ye.exports.cloneDeep(e),Array.isArray(e)||(e=[e]),e.forEach(function(u){K0(u)?(u.attributes&&Object.keys(u.attributes).forEach(function(c){!t.data.globals[u.type]||(c==="style"?Object.keys(u.attributes.style).forEach(function(h){t.data.globals[u.type][c]&&t.data.globals[u.type][c][h]===u.attributes.style[h]&&delete u.attributes.style[h]}):t.data.globals[u.type][c]===u.attributes[c]&&delete u.attributes[c])}),u.type==="block"?t.data.blocks.push(u):u.type==="inline"?t.data.inlines.push(u):u.type==="mark"&&t.data.marks.push(u)):t.data["".concat(u.type,"s")]&&(t.data.globals[u.type]=Ye.exports.merge(Object.assign({},t.data.globals[u.type]),u.attributes))}),this.updateTagMap();var n=function(c){var h=c.attributes||{},v=h.style||{},g=0,p=0;return Object.keys(h).forEach(function(b){var y=h[b];cl(y)&&y.required&&g++}),Object.keys(v).forEach(function(b){var y=v[b];cl(y)&&y.required&&p++}),[g,p]},r=this.data,a=r.blocks,o=r.marks,l=r.inlines;this._all=[].concat(gt(a),gt(o),gt(l)).sort(function(u,c){var h=n(u),v=Ai(h,2),g=v[0],p=v[1],b=n(c),y=Ai(b,2),k=y[0],E=y[1];return g>k?-1:g===k?p===E?0:p>E?-1:1:1})}},{key:"updateTagMap",value:function(){var e=this;this._tagMap.marks=[],this.data.marks.forEach(function(t){e._tagMap.marks.includes(t.name)||e._tagMap.marks.push(t.name)}),this._tagMap.blocks=[],this.data.blocks.forEach(function(t){e._tagMap.blocks.includes(t.name)||e._tagMap.blocks.push(t.name)}),this._tagMap.inlines=[],this.data.inlines.forEach(function(t){e._tagMap.inlines.includes(t.name)||e._tagMap.inlines.push(t.name)})}},{key:"getTags",value:function(e){return this._tagMap[e]}},{key:"remove",value:function(e){var t=this._all.findIndex(function(r){return Ye.exports.isEqual(r,e)});t>-1&&this._all.splice(t,1);var n=this.data["".concat(e.type,"s")];n&&(t=n.findIndex(function(r){return Ye.exports.isEqual(r,e)}),t>-1&&n.splice(t,1)),this._typeMap={},this.updateTagMap()}},{key:"clone",value:function(){var e=new f;return e._all=Ye.exports.cloneDeep(this._all),e._typeMap=Ye.exports.cloneDeep(this._typeMap),e._tagMap=Ye.exports.cloneDeep(this._tagMap),e.data=Ye.exports.cloneDeep(this.data),e}},{key:"find",value:function(e){var t=this,n=[];return W0.forEach(function(r){if(r!=="globals"){var a=t.data[r].filter(e);n.push.apply(n,gt(a))}}),n}},{key:"getType",value:function(e,t){var n=je(e)?e:e[0];if(!(!n||n.nodeType!==Node.ELEMENT_NODE)){var r=n.getAttribute(qe);if(r?r=r.split("-")[0]:r=ef(n,!1),!this._invalidKeys.includes(r)){if(!!this._typeMap[r]&&(!t||t(this._typeMap[r])))return this._typeMap[r].type;var a=this.getRule(n,t);return a?this._typeMap[r]=a:this._invalidKeys.push(r),a==null?void 0:a.type}}}},{key:"getRule",value:function(e,t){var n=this,r=je(e)?e:e[0];return t=t||function(a){return a.name===r.localName},this._all.find(function(a){return t(a)&&n.checkNode(r,a.attributes)})}},{key:"checkNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=je(e)?e:e[0];for(var r in t){var a;if(r!=="style"){var o=t;if(!o[r]||!this.checkValue(o,r,(a=n.getAttribute(r))!==null&&a!==void 0?a:void 0))return!1}}var l=Oi(n.getAttribute("style")||""),u=t.style||{};for(var c in u)if(!u[c]||!this.checkValue(u,c,l[c]))return!1;return!0}},{key:"checkValue",value:function(e,t,n,r){if(!e[t])return!1;var a=e[t];if(cl(a)){if(n===void 0)return!a.required;a=a.value}else if(!r||n===void 0)return!0;if(typeof a=="string"&&a.charAt(0)==="@")switch(a){case"@number":a=/^-?\d+(\.\d+)?$/;break;case"@length":a=/^-?\d+(\.\d+)?(\w*|%)$/;break;case"@color":a=/^(rgb(.+?)|#\w{3,6}|\w+)$/i;break;case"@url":a=Dm;break}return typeof a=="string"?a==="*"?!0:t==="class"?(n||"").split(/\s+/).some(function(o){return o.trim()===a}):a===n:Array.isArray(a)?t==="class"?(n||"").split(/\s+/).every(function(o){return o.trim()===""?!0:a.indexOf(o.trim())>-1}):a.indexOf(n)>-1:et(a)==="object"&&typeof a.test=="function"?t==="class"?(n||"").split(/\s+/).every(function(o){return o.trim()===""?!0:a.test(o.trim())}):a.test(n||""):typeof a=="function"?a(n):!0}},{key:"filterStyles",value:function(e,t,n){var r=this;Object.keys(e).forEach(function(a){var o;(!(!((o=t.attributes)===null||o===void 0)&&o.style)||!r.checkValue(t.attributes.style,a,e[a],!0))&&(n&&n(a,e[a]),delete e[a])})}},{key:"filterAttributes",value:function(e,t,n){var r=this;Object.keys(e).forEach(function(a){(!t.attributes||!r.checkValue(t.attributes,a,e[a],!0))&&(n&&n(a,e[a]),delete e[a])})}},{key:"filter",value:function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=this.getRule(e);if(!!a){var o=this.data.globals,l=o[a.type]?a.type:void 0,u=Object.assign({},a,{attributes:Ye.exports.merge({},a.attributes,l?o[l]:{})});this.filterAttributes(t,u,r?function(c){return e.removeAttributes(c)}:void 0),this.filterStyles(n,u,r?function(c){return e.css(c,"")}:void 0)}}},{key:"closest",value:function(e){var t=this,n=e;return this.data.blocks.forEach(function(r){if(r.name===e){var a=r;a.allowIn&&(a.allowIn.forEach(function(o){t.isAllowIn(o,n)&&(n=o)}),n=t.closest(n))}}),n}},{key:"isAllowIn",value:function(e,t){return e==="p"?!1:this.data.blocks.some(function(n){if(n.name===t){var r=n;if(r.allowIn&&r.allowIn.indexOf(e)>-1)return!0}})}},{key:"addAllowIn",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"p",n=this.data.blocks.find(function(r){return r.name===t});n.allowIn||(n.allowIn=[]),n.allowIn.includes(e)||n.allowIn.push(e)}},{key:"getAllowInTags",value:function(){var e=[];return this.data.blocks.forEach(function(t){var n=t;n.allowIn&&n.allowIn.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),e}},{key:"getCanMergeTags",value:function(){var e=[];return this.data.blocks.forEach(function(t){var n=t;n.canMerge===!0&&e.indexOf(n.name)<0&&e.push(n.name)}),e}}]),f}(),cl=function(i){return i.required!==void 0},K0=function(i){return!!i.name},Z0=function(){function f(i){be(this,f),this.editor=void 0,this.data=[],this.editor=i}return ke(f,[{key:"getData",value:function(){return this.data}},{key:"clone",value:function(){var e=Ye.exports.cloneDeep(this.data),t=new f(this.editor);return t.data=e,t}},{key:"add",value:function(e,t){this.data.push({from:e,to:t})}},{key:"transform",value:function(e,t){var n=e.name,r=e.attributes(),a=Oi(r.style||""),o=!1;delete r.style,e.isCursor()&&(n=r[Ae].toLowerCase(),r={},a={});var l=this.data.find(function(u){if(!(t&&!t(u))){var c=u.from,h=u.to,v=!1;if(typeof c=="string")v=c===n;else if(typeof c=="function")v=c(n,a,r);else{var g=Object.keys(c);v=g.indexOf(n)>=0&&g.some(function(k){var E=c[k];return Object.keys(E.style||{}).every(function(_){var T=E.style[_];return!!a[_]&&Array.isArray(T)?T.indexOf(a[_])>-1:T===a[_]})&&Object.keys(E.attributes||{}).every(function(_){var T=E.attributes[_];return!!a[_]&&Array.isArray(T)?T.indexOf(a[_])>-1:T===a[_]})})}if(v)if(typeof h=="string")n=h,a={},r={};else{var p=typeof h=="function"?h(n,a,r):h,b=p;if(p.hasOwnProperty("replace")){var y=p;b=y.node,o=y.replace}n=b.name,a=b.css(),r=b.attributes()}return v}});return l?{rule:l,node:{name:n,style:a,attributes:r},replace:o}:void 0}}]),f}(),Y0=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"insertNewline",value:function(e,t,n){var r=this.engine.change,a=H("<p><br /></p>");this.engine.nodeId.generate(a),n?t.root.before(a):t.root.after(a),e.select(a,!0),e.collapse(!1),r.range.select(e)}},{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.card,a=n.range.get(),o=r.find(a.startNode);if(!o)return!0;if(o.type===Nt.INLINE){var l=a.startNode.closest(Pt);l.length>0&&(a.select(o.root),a.collapse(!0),n.range.select(a));var u=a.startNode.closest(Ft);u.length>0&&(a.select(o.root),a.collapse(!1),n.range.select(a))}else{var c=a.startNode.closest(Pt);if(c.length>0){e.preventDefault();var h=o.root.prev();return!h||h.isCard()?(r.focusPrevBlock(o,a,!0),n.range.select(a)):this.insertNewline(a,o,!0),!1}var v=a.startNode.closest(Ft);if(v.length>0){e.preventDefault();var g=o.root.next();return!g||g.isCard()?(r.focusNextBlock(o,a,!0),n.range.select(a)):this.insertNewline(a,o,!1),!1}}return!0}}]),f}(),X0=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"focusPrevBlock",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=this.engine.change,r=n.range.get();e=e||this.engine.block.closest(r.startNode);var a=e.prev();if(!!a){if(a.isCard()){var o=this.engine.card.find(a);o&&o.focus(r);return}if(this.engine.node.isList(a)&&(a=a.last()),!!a){if(t&&this.engine.node.isEmptyWithTrim(a)){a.remove();return}r.select(a,!0),r.collapse(!1),n.range.select(r.shrinkToTextNode())}}}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get().cloneRange().shrinkToElementNode().shrinkToTextNode();if(!!n.collapsed){var r=this.engine.card.find(n.startNode);if(!r){var a=n.getPrevNode(),o=a==null?void 0:a.parent();if(!e.isDelete&&a&&a.isCard()&&(!o||!this.engine.node.isCustomize(o))){e.preventDefault();var l=n.cloneRange();return l.setStartBefore(a),l.collapse(!0),this.engine.card.remove(a),t.range.select(l.shrinkToTextNode()),l.handleBr(),!1}return!0}if(e.isDelete)return!0;if(r.type===Nt.INLINE){var u=n.startNode.closest(Pt);if(u.length>0){var c=r.root.prev();if(c){var h=this.engine.card.find(c);if(h)return this.engine.card.remove(h.id),n.handleBr(),!1;n.select(r.root).collapse(!0)}else return e.preventDefault(),t.mergeAfterDelete(),!1;t.range.select(n)}var v=n.startNode.closest(Ft);if(v.length>0){e.preventDefault();var g=n.cloneRange();return g.setStartBefore(r.root),g.collapse(!0),this.engine.card.remove(r.id),t.range.select(g.shrinkToTextNode()),g.handleBr(),!1}}else{var p=n.startNode.closest(Pt);if(p.length>0){var b;return e.preventDefault(),!((b=r.root.parent())===null||b===void 0)&&b.inEditor()?t.unwrap(r.root.parent()):this.focusPrevBlock(r.root,!0),!1}var y=n.startNode.closest(Ft);if(y.length>0)return e.preventDefault(),this.focusPrevBlock(r.root),this.engine.card.remove(r.id,!1),t.isEmpty()&&t.initValue(),!1}return this.engine.trigger("keydown:backspace",e)!==!1}}}]),f}(),J0=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"inline",value:function(e,t){var n=this.engine.change,r=n.range.get().cloneRange(),a=e.constructor.singleSelectable,o=r.commonAncestorNode.closest(Pt);if(o.length>0){var l=e.root.prev();return l?(r.setStartBefore(e.root[0]),r.collapse(!0)):e.focus(r,!0),n.range.select(r),!0}var u=r.commonAncestorNode.closest(Ft),c=o.length===0&&u.length===0;if(u.length>0||c){if(t.preventDefault(),c){var h;e.select(!1),(h=e.toolbarModel)===null||h===void 0||h.hide(),e.activate(!1)}else if(r.collapsed){var v=this.engine.card.find(r.startNode);if(v&&v.onSelectLeft)return v.onSelectLeft(t)}if(!c&&a!==!1)this.engine.card.select(e,t);else{var g;e.focus(r,!0),e.select(!1),(g=e.toolbarModel)===null||g===void 0||g.hide(),n.range.select(r)}return!1}return!0}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=o.commonAncestorNode.closest(Pt);if(l.length>0){var u=e.root.prev();return u?(t.preventDefault(),a.focusPrevBlock(e,o,!1),r.range.select(o),!1):void 0}var c=o.commonAncestorNode.closest(Ft),h=l.length===0&&c.length===0;if(h){var v;e.select(!1),(v=e.toolbarModel)===null||v===void 0||v.hide(),e.activate(!1)}if(c.length>0){if(o.collapsed){var g=a.find(o.startNode);if(g&&g.onSelectLeft)return g.onSelectLeft(t)}return t.preventDefault(),a.select(e,t),!1}if(a.getSingleSelectedCard(o)){var p;return t.preventDefault(),e.focus(o,!0),e.select(!1),(p=e.toolbarModel)===null||p===void 0||p.hide(),r.range.select(o),!1}return!0}},{key:"fincPrevCard",value:function(e){if(!e.collapsed)return null;var t=e.startNode,n=e.startOffset;if(t.isText()&&n===0){var r=t.prevElement();if(r&&r.isCard())return this.engine.card.find(r)}return null}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get(),r=this.engine.card.getSingleCard(n);if(!r){var a=this.fincPrevCard(n);return a?(e.preventDefault(),a.focus(n,!1),t.range.select(n),!1):!0}return Le("shift+left",e)?!1:r.type===Nt.INLINE?this.inline(r,e):this.block(r,e)}}]),f}(),Q0=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"inline",value:function(e,t){var n=this.engine.change,r=n.range.get(),a=e.constructor.singleSelectable,o=r.commonAncestorNode.closest(Pt),l=r.commonAncestorNode.closest(Ft),u=o.length===0&&l.length===0;if(o.length>0||u){if(t.preventDefault(),u){var c;e.select(!1),e.activate(!1),(c=e.toolbarModel)===null||c===void 0||c.hide()}else if(r.collapsed){var h=this.engine.card.find(r.startNode);if(h&&h.onSelectRight)return h.onSelectRight(t)}if(!u&&a!==!1)this.engine.card.select(e,t);else{var v;e.focus(r,!1),e.select(!1),(v=e.toolbarModel)===null||v===void 0||v.hide(),n.range.select(r)}return!1}if(l.length>0){var g=e.root.next();g?(r.setEndAfter(e.root[0]),r.collapse(!1)):e.focus(r,!1),n.range.select(r)}return!0}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=o.commonAncestorNode.closest(Pt);if(l.length>0){if(o.collapsed){var u=this.engine.card.find(o.startNode);if(u&&u.onSelectRight)return u.onSelectRight(t)}return t.preventDefault(),a.select(e,t),!1}var c=o.commonAncestorNode.closest(Ft),h=l.length===0&&c.length===0;if(h){var v;e.select(!1),(v=e.toolbarModel)===null||v===void 0||v.hide(),e.activate(!1)}if(c.length>0){var g=e.root.next();return g?(t.preventDefault(),a.focusNextBlock(e,o,!1),r.range.select(o),!1):void 0}if(this.engine.card.getSingleSelectedCard(o)){var p;return t.preventDefault(),e.focus(o,!1),e.select(!1),(p=e.toolbarModel)===null||p===void 0||p.hide(),r.range.select(o),!1}return!0}},{key:"fincNextCard",value:function(e){if(!e.collapsed)return null;var t=e.startNode,n=e.startOffset;if(t.isText()){var r=t.text();if(r.length===n){var a=t.nextElement();if(a&&a.isCard())return this.engine.card.find(a)}}return null}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get(),r=this.engine.card.getSingleCard(n);if(!r){var a=this.fincNextCard(n);return a?(e.preventDefault(),a.focus(n,!0),t.range.select(n),!1):!0}if(!Le("shift+right",e))return r.type===Nt.INLINE?this.inline(r,e):this.block(r,e)}}]),f}(),eb=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"inline",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=e.root.prev();if(l)return t.preventDefault(),a.focusPrevBlock(e,o,!1),r.range.select(o),!1}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=e.root.prev();if(l)return t.preventDefault(),a.focusPrevBlock(e,o,!1),r.range.select(o),!1}},{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.card,a=t.block,o=n.range.get();if(o.collapsed){var l=a.closest(o.startNode),u=l.prev();if(u!=null&&u.isCard()){var c=r.find(u);if(c&&c.onSelectUp)return c.onSelectUp(e)}}var h=r.getSingleCard(o);if(!h)return!0;if(!Le("shift+up",e))return h.type===Nt.INLINE?this.inline(h,e):this.block(h,e)}}]),f}(),tb=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"inline",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=e.root.next();if(l)return t.preventDefault(),a.focusNextBlock(e,o,!1),r.range.select(o),!1}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=e.root.next();if(l)return t.preventDefault(),a.focusNextBlock(e,o,!1),r.range.select(o),!1}},{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.block,a=t.card,o=n.range.get(),l=a.getSingleCard(o);if(o.collapsed){var u=r.closest(o.startNode),c=u.next();if(c!=null&&c.isCard()){var h=a.find(c);if(h&&h.onSelectDown)return h.onSelectDown(e)}}return!l||Le("shift+down",e)?!0:l.type===Nt.INLINE?this.inline(l,e):this.block(l,e)}}]),f}(),nb=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"block",value:function(e,t){var n=this.engine,r=n.change,a=n.card,o=r.range.get(),l=o.commonAncestorNode.closest(Pt);if(l.length>0)return!t.metaKey&&!t.ctrlKey&&(a.focusPrevBlock(e,o,!0),r.range.select(o)),!0;var u=o.commonAncestorNode.closest(Ft);return u.length>0&&!t.metaKey&&!t.ctrlKey&&(a.focusNextBlock(e,o,!0),r.range.select(o)),!0}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get(),r=this.engine.card.getSingleCard(n);return r&&r.type===Nt.BLOCK?this.block(r,e):!0}}]),f}(),rb=`.am-engine .card-selected [data-card-element="center"].data-card-background-selected {\r
    background: rgba(27, 162, 227, 0.2);\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected {\r
    outline: 2px solid #1890FF;\r
    border-radius: 2px;\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected::-moz-selection {\r
    background: transparent;\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected::selection {\r
    background: transparent;\r
}\r
\r
.am-engine-view [data-card-element="center"] .data-card-loading,.am-engine [data-card-element="center"] .data-card-loading {\r
    display: inline-block;\r
    font-style: normal;\r
    vertical-align: -0.125em;\r
    text-align: center;\r
    text-transform: none;\r
    line-height: 0;\r
    text-rendering: optimizeLegibility;\r
    -webkit-font-smoothing: antialiased;\r
    margin-right: 5px;\r
    padding: 16px;\r
    width: 100%;\r
}\r
\r
.am-engine-view [data-card-element="center"] .data-card-loading .data-card-spin,.am-engine [data-card-element="center"] .data-card-loading .data-card-spin {\r
    display: inline-block;\r
    -webkit-animation: loadingCircle 1s infinite linear;\r
    animation: loadingCircle 1s infinite linear;\r
}`;cn(rb);var ib=function(){function f(i){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;be(this,f),this.classes=void 0,this.components=void 0,this.lazyRender=void 0,this.asyncComponents=[],this.editor=void 0,this.renderTimeout=void 0,this.renderAsyncComponents=xn(ht.mark(function n(){return ht.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.renderTimeout&&clearTimeout(e.renderTimeout),e.renderTimeout=setTimeout(function(){var o=e.asyncComponents.concat();o.forEach(function(){var l=xn(ht.mark(function u(c){var h,v;return ht.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:(c.root.length===0||e.editor.root.inViewport(c.root,!0)&&e.editor.trigger("card:async-render-component",c)!==!1)&&(e.asyncComponents.splice(e.asyncComponents.findIndex(function(b){return b===c}),1),c.root.length>0&&c.loading&&(c.destroy&&c.destroy(),c.getCenter().empty(),e.renderComponent(c),Ne(e.editor)&&e.editor.readonly&&!e.editor.ot.isRemote&&(!((h=e.editor.ot.doc)===null||h===void 0)&&h.type?e.editor.ot.doc.data=Kn(e.editor.container):(v=e.editor.ot.doc)===null||v===void 0||v.create(Kn(e.editor.container)))));case 1:case"end":return p.stop()}},u)}));return function(u){return l.apply(this,arguments)}}())},50);case 2:case"end":return a.stop()}},n)})),this.classes={},this.components=[],this.editor=i,this.lazyRender=t}return ke(f,[{key:"active",get:function(){return this.components.find(function(e){return e.activated})}},{key:"length",get:function(){return this.components.length}},{key:"init",value:function(e){var t=this,n,r,a=this.editor;if(Ne(a)){var o,l,u,c,h,v,g,p=a.typing,b=new Y0(a);(o=p.getHandleListener("enter","keydown"))===null||o===void 0||o.on(function(C){return b.trigger(C)});var y=new X0(a);(l=p.getHandleListener("backspace","keydown"))===null||l===void 0||l.on(function(C){return y.trigger(C)});var k=new J0(a);(u=p.getHandleListener("left","keydown"))===null||u===void 0||u.on(function(C){return k.trigger(C)});var E=new Q0(a);(c=p.getHandleListener("right","keydown"))===null||c===void 0||c.on(function(C){return E.trigger(C)});var _=new eb(a);(h=p.getHandleListener("up","keydown"))===null||h===void 0||h.on(function(C){return _.trigger(C)});var T=new tb(a);(v=p.getHandleListener("down","keydown"))===null||v===void 0||v.on(function(C){return T.trigger(C)});var x=new nb(a);(g=p.getHandleListener("default","keydown"))===null||g===void 0||g.on(function(C){return x.trigger(C)})}e.forEach(function(C){t.classes[C.cardName]=C}),this.lazyRender&&(window.addEventListener("resize",this.renderAsyncComponents),(n=this.editor.scrollNode)===null||n===void 0||(r=n.get())===null||r===void 0||r.addEventListener("scroll",this.renderAsyncComponents),window.addEventListener("scroll",this.renderAsyncComponents),this.editor.on("card:async-render",this.renderAsyncComponents))}},{key:"add",value:function(e){this.classes[e.cardName]=e}},{key:"each",value:function(e){this.components.every(function(t,n){return!(e&&e(t,n)===!1)})}},{key:"closest",value:function(e,t){if(je(e)&&(e=H(e)),!e.isCard()){var n=e.closest(yt,function(r){if(!(r&&t?H(r).isRoot():H(r).isEditable()))return r.parentNode||void 0});if(!n||n.length===0)return;e=n}return e}},{key:"find",value:function(e,t){if(typeof e!="string"){var n=this.closest(e,t);if(!n)return;e=n}var r=function(l){je(l)&&(l=H(l));var u=l.attributes(ar);return Zc(u)},a=this.components.filter(function(o){return typeof e=="string"?o.id===e:o.root.name!==(je(e)?e.nodeName.toString().toLowerCase():e.name)?!1:o.root.equal(e)||o.id===r(e).id});if(a.length!==0)return a[0]}},{key:"findBlock",value:function(e){if(je(e)&&(e=H(e)),!!e.get()){var t=e.parent();if(!!t){var n=this.find(t);if(!!n)return n.type===Nt.BLOCK?n:this.findBlock(n.root)}}}},{key:"getSingleCard",value:function(e){var t=this.find(e.commonAncestorNode);return t||(t=this.getSingleSelectedCard(e)),t}},{key:"getSingleSelectedCard",value:function(e){var t=e.findElements(),n=t[0];if(t.length===1&&n){var r=H(n);if(r.isCard())return this.find(r)}}},{key:"insertNode",value:function(e,t){var n=t.type==="inline",r=this.editor;!e.collapsed&&Ne(r)&&r.change.delete(e),this.gc();var a=r.inline,o=r.block,l=r.node,u=[];if(n){if(Ne(r)&&t.executeMark){u=r.change.marks.map(function(y){return y.clone()});var c=r.card.find(e.startNode);if(c!=null&&c.queryMarks){var h;(h=u).push.apply(h,gt(c.queryMarks()))}}a.insert(t.root,e)}else o.insert(t.root,e,function(y){for(var k=y.parent();k&&!k.isEditable();){y=k;var E=k.parent();if(E&&l.isBlock(E))k=E;else break}return y},!0);this.components.push(t),t.focus(e);var v=t.root.parent();!n&&v&&v.inEditor()&&l.isBlock(v)&&o.unwrap(v,e);for(var g=arguments.length,p=new Array(g>2?g-2:0),b=2;b<g;b++)p[b-2]=arguments[b];return this.renderComponent.apply(this,[t].concat(p)),t.didInsert&&t.didInsert(),u.forEach(function(y){t.executeMark(y,!0)}),t}},{key:"removeNode",value:function(e){e.destroy&&e.destroy(),this.removeComponent(e),e.root.remove()}},{key:"updateNode",value:function(e,t){e.destroy&&e.destroy();var n=e.getCenter();n==null||n.empty(),e.setValue(t);for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];this.renderComponent.apply(this,[e].concat(a)),e.didUpdate&&e.didUpdate()}},{key:"replaceNode",value:function(e,t,n){var r=this.classes[t];if(!r)throw"".concat(t,": This card does not exist");var a=(n==null?void 0:n.type)||r.cardType,o=e.attributes(qe),l=Qs("<card ".concat(o!=null?o:"".concat(qe,'="').concat(o,'"'),' type="').concat(a,'" name="').concat(t,'" value="').concat(Nm(n),'"></card>')),u=H(l);return e.before(u),u.append(e),u}},{key:"activate",value:function(e,t,n){var r=this.editor;if(!(!Ne(r)||r.readonly)){var a=e.getRoot();if(!a.get()||r.container.equal(a)){var o=this.find(e),l=e.closest(xt);if(!o&&l.length>0){var u=l.parent();o=u?this.find(u):void 0}var c=o?this.findBlock(o.root):void 0;if(c&&(o=c),o&&o.isCursor(e))if(l.length>0){var h=l.parent();o=h?this.find(h):void 0}else o=void 0;var v=o&&this.active&&this.active.root.equal(o.root);if(this.active&&!v){var g;(g=this.active.toolbarModel)===null||g===void 0||g.hide(),this.active.select(!1),this.active.activate(!1)}if(o){if(o.activatedByOther)return;if(v)o.isEditable?o.select(!1):t===Ii.MOUSE_DOWN&&e.name!=="input"&&o.root.find(".data-drag-image").length===0&&(n==null||n.preventDefault());else{var p;o.constructor.singleSelectable!==!1&&(t!==Ii.CLICK||Ne(this.editor))&&this.select(o,n),!o.isEditable&&o.constructor.autoSelected!==!1&&o.select(!o.isEditable),o.activate(!0),(p=o.toolbarModel)===null||p===void 0||p.show(n)}r.change.onSelect()}}else if(this.active){var b;(b=this.active.toolbarModel)===null||b===void 0||b.hide(),this.active.select(!1),this.active.activate(!1)}}}},{key:"select",value:function(e,t){var n=this.editor;if(!!Ne(n)&&e.constructor.singleSelectable!==!1&&(e.type!==Nt.BLOCK||!e.activated)){var r=n.change.range.get().cloneRange();if(r.startNode.closest(xt).length>0&&(!t||t instanceof MouseEvent&&(!t.target||!this.closest(t.target,!1)))||e.isEditable||e.isMaximize)return;t==null||t.preventDefault();var a=e.root,o=a.parent(),l=o.children().toArray().findIndex(function(u){return u.equal(a)});r.setStart(o,l),r.setEnd(o,l+1),n.change.range.select(r)}}},{key:"focus",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=this.editor;if(!!Ne(n)){var r=n.change,a=n.container,o=n.scrollNode,l=r.range.get();e.focus(l,t),r.range.select(l),this.activate(l.startNode,Ii.MOUSE_DOWN),r.onSelect(),o&&l.scrollIntoViewIfNeeded(a,o)}}},{key:"insert",value:function(e,t){if(!Ne(this.editor))throw"Engine not found";for(var n=this.create(e,{value:t}),r=this.editor.change,a=r.range.toTrusty(),o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];var c=this.insertNode.apply(this,[a,n].concat(l));return r.change(),c}},{key:"update",value:function(e,t){if(!!Ne(this.editor)){var n=this.editor.change,r=this.find(e);if(r){for(var a=arguments.length,o=new Array(a>2?a-2:0),l=2;l<a;l++)o[l-2]=arguments[l];this.updateNode.apply(this,[r,t].concat(o));var u=n.range.get();r.focus(u,!1),n.change()}}}},{key:"replace",value:function(e,t,n){this.remove(e.root);for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return this.insert.apply(this,[t,n].concat(a))}},{key:"remove",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!!Ne(this.editor)){var n=this.editor,r=n.change,a=n.list,o=n.node,l=r.range.get(),u=this.find(e);if(!!u){u.type===Nt.INLINE?(l.setEndAfter(u.root[0]),l.collapse(!1)):this.focusPrevBlock(u,l,t);var c=u.root.parent();this.removeNode(u),a.addBr(l.startNode),c&&o.isEmpty(c)&&!this.editor.ot.isStopped&&(c.isEditable()?(o.html(c,"<p><br /></p>"),l.select(c,!0),l.shrinkToElementNode(),l.collapse(!1)):(o.html(c,"<br />"),l.select(c,!0),l.collapse(!1))),t?r.apply(l):(r.range.select(l),r.change())}}}},{key:"removeRemote",value:function(e){if(!!Ne(this.editor)){var t=this.editor.node,n=this.find(e);if(!!n){var r=n.root.parent();this.removeNode(n),r&&t.isEmpty(r)&&!this.editor.ot.isStopped&&(r.isEditable()?t.html(r,"<p><br /></p>"):t.html(r,"<br />"))}}}},{key:"create",value:function(e,t){var n,r=this.classes[e];if(!r)throw"".concat(e,": This card does not exist");var a=(t==null||(n=t.value)===null||n===void 0?void 0:n.type)||r.cardType;if(["inline","block"].indexOf(a)<0)throw"".concat(e,': the type of card must be "inline", "block"');t!=null&&t.root&&t.root.empty();var o=new r({editor:this.editor,value:t==null?void 0:t.value,root:t==null?void 0:t.root});o.root.attributes(Ot,a),o.root.attributes(He,e),o.root.attributes(un,"true");var l=a===Nt.INLINE?"span":"div",u=H("<".concat(l," ").concat(o.isEditable?Vc+"='*'":"","/>"));u.attributes(lt,"center");var c=H("<".concat(l," ").concat(lt,'="body" />'));return c.append(u),o.root.append(c),this.createCursor(o),a===Nt.BLOCK&&this.editor.nodeId.generate(o.root),o.init(),o}},{key:"createCursor",value:function(e){var t=e.constructor,n=t.focus!==void 0?t.focus:Ne(this.editor)&&!this.editor.readonly,r=e.getCenter();r.removeAttributes($n),e.root.removeAttributes($n);var a=e.findByKey("left"),o=e.findByKey("right");n?(r.attributes($n,"false"),a||r.before(H("<span ".concat(lt,'="left" ').concat(uo,'="true">&#8203;</span>'))),o||r.after(H("<span ".concat(lt,'="right" ').concat(uo,'="true">&#8203;</span>')))):(a==null||a.remove(),o==null||o.remove(),e.root.attributes($n,"false"))}},{key:"reRender",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.length===0&&(n=this.components),n.forEach(function(a){a.destroy&&a.destroy(),e.createCursor(a),a.init(),e.renderComponent(a)})}},{key:"render",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.lazyRender,a=e?e.isCard()?e:e.find("".concat(Ri)):this.editor.container.find(Ri);this.gc();var o=[],l=[],u=a.toArray();u.forEach(function(h){l.find(function(g){return g.equal(h)})||l.push(h);var v=h.find("".concat(yt,",").concat(Ri)).toArray();v.forEach(function(g){if(!g.equal(h)){var p=l.findIndex(function(b){return b.equal(g)});p>-1&&l.splice(p,1)}})}),l.forEach(function(h){var v=h.attributes(),g=v[bt],p=v[He],b=g||p;if(n.classes[b]){var y=v[ar],k;p&&(k=n.find(h),k&&k.root.equal(h)&&(k.destroy&&k.destroy(),n.removeComponent(k)),h.attributes(un,"true"),v[un]="true",h.empty()),k=n.create(b,{value:Zc(y),root:p?h:void 0}),Object.keys(v).forEach(function(E){(E.indexOf("data-")===0&&E.indexOf("data-card")!==0||E===un)&&k.root.attributes(E,v[E])}),g&&(h.replaceWith(k.root),h.remove()),n.components.push(k),o.push(k),g&&k.root.removeAttributes(bt)}});var c=!1;o.forEach(function(h){if(r&&h.constructor.lazyRender){if(h.beforeRender){var v=h.beforeRender(),g=h.getCenter();v!==void 0&&g.append(typeof v=="string"?H(v):v)}c=!0,n.asyncComponents.push(h)}else n.renderComponent(h)}),t&&t(o.length),c&&this.renderAsyncComponents()}},{key:"renderComponent",value:function(e){for(var t=this,n=e.getCenter(),r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var l=e.render.apply(e,a);l!==void 0&&n.append(typeof l=="string"?H(l):l),e.contenteditable.length>0&&(n.find(e.contenteditable.join(",")).each(function(u){var c=H(u);c.attributes($n)!==void 0&&c.attributes($n,!Ne(t.editor)||t.editor.readonly?"false":"true"),c.attributes(Ae,ei),Ne(t.editor)&&t.editor.normalize(c)}),this.render(n)),e.didRender()}},{key:"removeComponent",value:function(e){var t=this;this.each(function(n,r){if(n.root.equal(e.root))return t.components.splice(r,1),!1})}},{key:"gc",value:function(){for(var e=0;e<this.components.length;e++){var t=this.components[e];(!t.root[0]||t.root.closest("body").length===0)&&(t.destroy&&t.destroy(),this.components.splice(e,1),e--)}}},{key:"destroy",value:function(){var e,t;this.gc(),window.removeEventListener("resize",this.renderAsyncComponents),(e=this.editor.scrollNode)===null||e===void 0||(t=e.get())===null||t===void 0||t.removeEventListener("scroll",this.renderAsyncComponents),window.removeEventListener("scroll",this.renderAsyncComponents),this.editor.off("card:async-render",this.renderAsyncComponents)}},{key:"focusPrevBlock",value:function(e,t,n){if(!Ne(this.editor))throw"Engine not initialized";var r;if(e.type==="inline"){var a=this.editor.block.closest(e.root);a.isEditable()?r=e.root.prevElement():r=a.prevElement()}else r=e.root.prevElement();if(n){if(!r||r.attributes(He)){var o=H("<p><br /></p>");e.root.before(o),t.select(o,!0),t.collapse(!1),this.editor.nodeId.generate(o);return}}else{if(!r)return;if(r.attributes(He)){var l;(l=this.editor.card.find(r))===null||l===void 0||l.focus(t,!1);return}}t.select(r,!0).shrinkToElementNode().shrinkToTextNode().collapse(!1)}},{key:"focusNextBlock",value:function(e,t,n){if(!Ne(this.editor))throw"Engine not initialized";var r;if(e.type==="inline"){var a=this.editor.block.closest(e.root);a.isEditable()?r=e.root.nextElement():r=a.nextElement()}else r=e.root.nextElement();if(n){if(!r||r.attributes(He)){var o=H("<p><br /></p>");e.root.after(o),t.select(o,!0),t.collapse(!1),this.editor.nodeId.generate(o);return}}else{if(!r)return;if(r.attributes(He)){var l;(l=this.editor.card.find(r))===null||l===void 0||l.focus(t,!0);return}}t.select(r,!0).shrinkToElementNode().shrinkToTextNode().collapse(!0)}}]),f}(),fr=Yr("rules"),ab=function(){function f(i){be(this,f),this.schema=void 0,Object.defineProperty(this,fr,{writable:!0,value:{}}),this.schema=i}return ke(f,[{key:"init",value:function(){ct(this,fr)[fr]=this.getRules()}},{key:"getRules",value:function(){var e={};return this.schema.data.blocks.forEach(function(t){e[t.name]||(e[t.name]=[]),e[t.name].push(t)}),e}},{key:"create",value:function(e){je(e)&&(e=H(e));var t=ef(e);return e.attributes(qe,t),t}},{key:"generateAll",value:function(e){var t,n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=ct(this,fr)[fr],o=Object.keys(a).join(",");At(e)&&e.fragment&&(e=e.fragment);var l=je(e)?e:e.get();if(!(!l||l.nodeType===Node.TEXT_NODE)){var u=(t=je(e)?H(e):e)===null||t===void 0?void 0:t.find(o);u.each(function(c,h){var v=u.eq(h);!v||!r&&v.attributes(qe)||n.generate(v,r)})}}},{key:"generate",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(je(e)&&(e=H(e)),!e.isText()){var r=ct(this,fr)[fr],a=r[e.name];if(!(!a||a.length===0||!a.some(function(u){return t.schema.checkNode(e,u.attributes)}))){var o=e.closest("".concat(yt,",").concat(Di),el);if(!(o.length>0&&o.attributes(Ae)===Ni)&&!(!e.isCard()&&o.length>0&&o.isCard()&&!o.isEditableCard())){if(!n){var l=e.attributes(qe);if(l)return l}return this.create(e)}}}}},{key:"isNeed",value:function(e){var t=this,n=ct(this,fr)[fr],r=n[e.name];return!(!r||r.length===0||!r.some(function(a){return t.schema.checkNode(e,a.attributes)}))}}]),f}(),ob=function(i){return!!i.dataTransfer},sb=function(){function f(i){be(this,f),this.editor=void 0,this.editor=i}return ke(f,[{key:"getData",value:function(e){var t,n=ob(e)?e.dataTransfer:e.clipboardData,r=n==null?void 0:n.getData("text/html"),a=n==null?void 0:n.getData("text"),o=[];try{(n==null?void 0:n.items)&&n.items.length>0?Array.from(n.items).forEach(function(l){var u=l.kind==="file"?l.getAsFile():null;if(u!==null){var c;u.type&&u.type.indexOf("image/png")>-1&&!u.lastModified&&(u=new File([u],"image.png",{type:u.type})),u.ext=(c=a)===null||c===void 0?void 0:c.split(".").pop()}u&&o.push(u)}):(n==null?void 0:n.files)&&n.files.length>0&&(o=Array.from(n.files))}catch{(n==null?void 0:n.files)&&n.files.length>0&&(o=Array.from(n.files))}return r===""&&a&&/^.+\.\w+$/.test(a)&&o.length>0?a="":a===""&&r&&/^(<meta.+?>)?<img.+?>$/.test(r)&&o.length>0?r="":(r||a)&&o.length>0&&!(!((t=r)===null||t===void 0)&&t.startsWith("<img"))&&(r||!/^https(s)?:/.test(a||""))&&(o=[]),{html:r,text:a,files:o}}},{key:"write",value:function(e,t){var n,r,a=this.editor.getSelectionData(t);if(!!a){var o=a.html,l=a.text;return e==null||e.preventDefault(),e==null||(n=e.clipboardData)===null||n===void 0||n.setData("text/html",'<meta name="source" content="aomao" />'+o),e==null||(r=e.clipboardData)===null||r===void 0||r.setData("text",l),a}}},{key:"copy",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(typeof e=="string")return mm(e,{format:/<[^>]+>/g.test(e)?"text/html":"text/plain"});var r=this.editor,a=window.getSelection(),o=a&&Ge.from(r,a)||Ge.create(r),l=o.cloneRange(),u=H('<div class="'.concat(km,'" ').concat(Ae,'="').concat(ir,'">&#8203;</div>'));u.css({position:"fixed",top:0,clip:"rect(0, 0, 0, 0)"});var c=function(){u.remove(),a==null||a.removeAllRanges(),a==null||a.addRange(l.toRange())};u.on("copy",function(p){p.stopPropagation(),t.write(p,o),c()}),H(document.body).append(u),u.append(r.node.clone(H(e),!0)),n&&u.traverse(function(p){p.equal(u)||r.trigger("copy",p)}),u.append(H("&#8203;",null));var h=u.first(),v=u.last();o.select(u,!0),o.setStartAfter(h),o.setEndBefore(v),a==null||a.removeAllRanges(),a==null||a.addRange(o.toRange());var g=!1;try{if(g=document.execCommand("copy"),!g)throw"Copy failed"}catch(p){this.editor.messageError("copy","The copy command was not executed successfully ",p),c()}return g}},{key:"cut",value:function(){var e=Ge.from(this.editor);if(!(!e||!Ne(this.editor))){var t=e.commonAncestorNode,n=this.editor.change;n.cacheRangeBeforeCommand(),n.delete(e);for(var r=this.editor.node.isList(t)?t:t.find("ul,ol"),a=0;a<r.length;a++){var o,l=H(r[a]),u=l.find("li");u.each(function(c){if(c.innerText===""||Zs&&c.innerText===`
`){var h;(h=c.parentNode)===null||h===void 0||h.removeChild(c)}}),((o=l.get())===null||o===void 0?void 0:o.childNodes.length)===0&&l.remove()}n.range.select(e)}}}]),f}(),lb=function f(i,e,t,n){var r=void 0,a=void 0,o=/\[\]$/;if(Array.isArray(e))for(a=0;a<e.length;a++){var l=e[a];t||o.test(i)?n(i,l):f(i+"["+((typeof l=="undefined"?"undefined":et(l))==="object"?a:"")+"]",l,t,n)}else if(e.toString()==="[object Object]")for(r in e)e.hasOwnProperty(r)&&f(i+"["+r+"]",e[r],t,n);else n(i,e)},hf=function(i,e){return i+(/\?/.test(i)?"&":"?")+e},ub=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=void 0,n=[],r=function(l,u){typeof u=="function"?u=u():u==null&&(u=""),n[n.length]=encodeURIComponent(l)+"="+encodeURIComponent(u)};if(Array.isArray(i))for(var a=0;a<i.length;a++)r(i[a].name,i[a].value);else for(t in i)i.hasOwnProperty(t)&&lb(t,i[t],e,r);return n.join("&").replace(/%20/g,"+")},vf=function(i){return typeof FormData!="undefined"&&i instanceof FormData},cb=/^http/,fb=/(^\w+):\/\//,db=/^(20\d|1223)$/,po="readyState",gf="Content-Type",pf="X-Requested-With",pa="XMLHttpRequest",mo="XDomainRequest",qr={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:pa,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:function(i){return i}},fl=function(){function f(i){var e;be(this,f),this.options=void 0,this.headNode=void 0,this.request=void 0,this.isAborted=!1,this.isTimeout=!1,this.timeout=void 0,this.callbackData=void 0,this.callbackPrefix="request_"+new Date,this.uuid=0,this.promise=void 0,this.__resolve=void 0,this.__reject=void 0,typeof i=="string"&&(i={url:i});var t=i,n=t.url;Ye.exports.startsWith(n,"//")&&(n=window.location.protocol+n),this.options=Ve(Ve(Ve({},qr),i),{},{url:n,context:i.context||window,doc:i.doc||wt(),jsonpCallback:i.jsonpCallback||"callback",method:i.method||"GET"}),this.headNode=(e=this.options.doc)===null||e===void 0?void 0:e.getElementsByTagName("head")[0],this.initPromise(),this.init()}return ke(f,[{key:"initPromise",value:function(){var e=this;this.promise=new Promise(function(t,n){e.__resolve=t,e.__reject=n}).catch(function(){})}},{key:"init",value:function(){var e=this,t=function(){var o;e.isTimeout=!0,(o=e.request)===null||o===void 0||o.abort()};this.timeout&&clearTimeout(this.timeout),this.timeout=void 0,this.options.timeout&&(this.timeout=setTimeout(t,this.options.timeout));var n=function(o,l){e.triggerError(o,l)},r=function(o){e.triggerSuccess(o)};this.getRequest(r,n).then(function(a){e.request=a})}},{key:"abort",value:function(){var e;(e=this.request)===null||e===void 0||e.abort()}},{key:"defaultXHR",value:function(){var e=this.options,t=e.context,n=e.crossOrigin;if(!!t)if(n===!0){var r=t[pa]?new t[pa]:null;if(r&&"withCredentials"in r)return r;if(t[mo])return new t[mo];throw new Error("Browser does not support cross-origin requests")}else return t[pa]?new t[pa]:new t.ActiveXObject("Microsoft.XMLHTTP")}},{key:"succeed",value:function(){var e,t,n,r=this.options,a=r.url,o=r.context,l=fb.exec(a),u=l?l[1]:"";return u||(u=(o==null?void 0:o.location.protocol)||""),cb.test(u)?db.test(((e=this.request)===null||e===void 0||(t=e.status)===null||t===void 0?void 0:t.toString())||""):!!(!((n=this.request)===null||n===void 0)&&n.response)}},{key:"noop",value:function(){}},{key:"handleReadyState",value:function(e,t){if(this.isAborted)return t("Request is aborted",this.request);if(this.isTimeout)return t("Request is aborted: timeout",this.request);this.request&&this.request[po]===4&&(this.request.onreadystatechange=this.noop,this.succeed()?e(this.request):t(this.request.statusText,this.request))}},{key:"setHeaders",value:function(e,t){t.Accept=t.Accept||qr.accept[this.options.type||"*"],!this.options.crossOrigin&&!t[pf]&&(t[pf]=qr.requestedWith),!t[gf]&&!vf(this.options.data)&&(t[gf]=this.options.contentType||qr.contentType),Object.keys(t).forEach(function(n){e.setRequestHeader(n,t[n])})}},{key:"setCredentials",value:function(e){typeof this.options.withCredentials!="undefined"&&typeof e.withCredentials!="undefined"&&(e.withCredentials=!!this.options.withCredentials)}},{key:"generalCallback",value:function(e){this.callbackData=e}},{key:"getCallbackPrefix",value:function(e){return this.callbackPrefix+"_"+e}},{key:"handleJsonp",value:function(e,t,n){var r=this,a,o=this.options,l=o.jsonpCallback,u=o.jsonpCallbackName,c=o.doc,h=o.context;if(!(!c||!h)){var v=this.uuid++,g=l||"callback",p=u||this.getCallbackPrefix(v),b=new RegExp("((^|\\?|&)"+g+")=([^&]+)"),y=e.match(b),k=c.createElement("script"),E=0,_=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return y?y[3]==="?"?e=e.replace(b,"$1="+p):p=y[3]:e=hf(e,g+"="+p),h[p]=this.generalCallback,k.type="text/javascript",k.src=e,k.async=!0,typeof k.onreadystatechange!="undefined"&&!_&&(k.htmlFor=k.id="_request_"+v),k.onload=k.onreadystatechange=function(){var T;return k[po]&&k[po]!=="complete"&&k[po]!=="loaded"||E?!1:(k.onload=k.onreadystatechange=null,k.onclick&&k.onclick(),t(r.callbackData),r.callbackData=void 0,(T=r.headNode)===null||T===void 0||T.removeChild(k),E=1,!0)},(a=this.headNode)===null||a===void 0||a.appendChild(k),{abort:function(){var x;k.onload=k.onreadystatechange=null,n("Request is aborted: timeout"),r.callbackData=void 0,(x=r.headNode)===null||x===void 0||x.removeChild(k),E=1}}}}},{key:"getRequest",value:function(){var i=xn(ht.mark(function t(n,r){var a,o,l=this,u,c,h,v,g,p,b,y,k,E,_,T,x,C;return ht.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(u=((a=this.options.method)===null||a===void 0?void 0:a.toUpperCase())||"GET",c=this.options,h=c.processData,v=c.traditional,g=c.type,p=c.context,b=c.xhr,y=c.async,k=c.before,p){R.next=4;break}return R.abrupt("return",Promise.resolve(void 0));case 4:if(E=this.options.url,_=this.options.data,typeof _!="function"){R.next=10;break}return R.next=9,_();case 9:_=R.sent;case 10:if((((o=this.options.contentType)===null||o===void 0?void 0:o.indexOf("json"))||-1)>-1&&et(_)==="object"&&(_=JSON.stringify(_)),_=h!==!1&&_&&typeof _!="string"&&!vf(_)?ub(_,v||qr.traditional):_||null,T=void 0,x=!1,(g==="jsonp"||u==="GET")&&_&&(E=hf(E,_),_=null),g!=="jsonp"){R.next=17;break}return R.abrupt("return",Promise.resolve(this.handleJsonp(E,n,r)));case 17:if(C=this.options.headers||{},typeof C!="function"){R.next=22;break}return R.next=21,C();case 21:C=R.sent;case 22:if(T=(typeof b=="function"?b(this.options):b)||this.defaultXHR(),T){R.next=25;break}return R.abrupt("return");case 25:return T.open(u,E,y!==!1),this.setHeaders(T,C),this.setCredentials(T),p[mo]&&T instanceof p[mo]?(T.onload=n,T.onerror=function(){r("http error",T)},T.onprogress=this.noop,x=!0):T.onreadystatechange=function(){l.handleReadyState(n,r)},k&&k(T),x?setTimeout(function(){var z;(z=T)===null||z===void 0||z.send(_)},200):T.send(_),R.abrupt("return",Promise.resolve(T));case 32:case"end":return R.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"getType",value:function(e){if(!!e){if(e.match("json"))return"json";if(e.match("javascript"))return"js";if(e.match("text"))return"html";if(e.match("xml"))return"xml"}}},{key:"triggerSuccess",value:function(e){var t=this.options,n=t.dataFilter,r=t.context,a=t.success;if(!!r){var o=this.options.type,l=(n||qr.dataFilter)(e.responseText,o);o||(o=e&&this.getType(e.getResponseHeader("Content-Type")));var u=o!=="jsonp"?this.request:e;try{u.responseText=l}catch{}if(l)switch(o){case"json":try{u=r.JSON.parse(l)}catch{return this.triggerError("Could not parse JSON in response",u)}break;case"html":u=l;break;case"xml":u=u.responseXML&&u.responseXML.parseError&&u.responseXML.parseError.errorCode&&u.responseXML.parseError.reason?null:u.responseXML;break}a&&a(u),this.triggerComplete(u),this.__resolve&&this.__resolve(u)}}},{key:"triggerError",value:function(e,t){var n=this.options.error,r=new Error(e);r.xhr=t,n&&n(r),this.triggerComplete(r),this.__reject&&this.__reject(r)}},{key:"triggerComplete",value:function(e){var t=this.options.complete;this.timeout&&clearTimeout(this.timeout),this.timeout=void 0,t&&t(e)}},{key:"retry",value:function(){this.initPromise(),this.init()}},{key:"then",value:function(e,t){var n;return(n=this.promise)===null||n===void 0?void 0:n.then(e,t)}},{key:"always",value:function(e){var t;return(t=this.promise)===null||t===void 0?void 0:t.then(e,e)}},{key:"fail",value:function(e){var t;return(t=this.promise)===null||t===void 0?void 0:t.then(void 0,e)}},{key:"catch",value:function(e){return this.fail(e)}}]),f}();fl.setup=function(f){Object.keys(f).forEach(function(i){qr[i]&&(qr[i]=f[i])})};var mf={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["cvs"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]},hb=function(i){if(typeof i=="string"){var e;return(e=i.split(".").pop())!==null&&e!==void 0?e:""}var t=mf[i.type]?mf[i.type][0]:"";if(!t&&"name"in i){var n;t=(n=i.name.split(".").pop())!==null&&n!==void 0?n:""}return t},vb=function(){function f(i){be(this,f),this.options=void 0,this.uploadingFiles=[],this.options=i}return ke(f,[{key:"createUid",value:function(e){return Date.now()+"-"+e}},{key:"request",value:function(){var i=xn(ht.mark(function t(n,r){var a,o;return ht.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:a=0;case 1:if(!(a<n.length)){u.next=12;break}return o=n[a],o.uid||(o.uid=this.createUid(a)),u.next=6,this.handleBefore(o,n);case 6:if(u.t0=u.sent,u.t0!==!1){u.next=9;break}n.splice(a,1);case 9:a++,u.next=1;break;case 12:this.upload(n,r);case 13:case"end":return u.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()},{key:"upload",value:function(){var i=xn(ht.mark(function t(n){var r=this,a,o=arguments;return ht.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:a=o.length>1&&o[1]!==void 0?o[1]:"file",n.forEach(function(){var c=xn(ht.mark(function h(v){var g,p,b,y,k,E,_,T,x,C;return ht.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(g=new FormData,g.append(a,v,v.name),v.data&&Object.keys(v.data).forEach(function(z){g.append(z,v.data[z])}),p=r.options,b=p.url,y=p.onUploading,k=p.onSuccess,E=p.onError,_=p.withCredentials,T=p.crossOrigin,x=p.headers,C=r.options.data,typeof C!="function"){R.next=9;break}return R.next=8,C();case 8:C=R.sent;case 9:return C&&Object.keys(C).forEach(function(z){g.append(z,C[z])}),R.next=12,new fl({xhr:function(){var F=new window.XMLHttpRequest;return F.upload.addEventListener("progress",function(G){G.lengthComputable&&y&&y(v,{percent:parseInt((G.loaded/G.total*100).toString(),10)})},!1),F},url:b,data:g,contentType:r.options.contentType,type:r.options.type||"json",withCredentials:_,crossOrigin:T,headers:x,success:function(F){k&&k(F,v)},error:function(F){E&&E(F,v)},method:"POST",processData:!0});case 12:case"end":return R.stop()}},h)}));return function(h){return c.apply(this,arguments)}}());case 2:case"end":return u.stop()}},t)}));function e(t){return i.apply(this,arguments)}return e}()},{key:"handleBefore",value:function(){var i=xn(ht.mark(function t(n,r){var a=this,o,l,u,c,h,v;return ht.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=n.type,l=n.uid,u=n.name,c=n.size,h=hb(n),v=this.options.onBefore,p.t0=v,!p.t0){p.next=9;break}return p.next=7,v(n);case 7:p.t1=p.sent,p.t0=p.t1===!1;case 9:if(!p.t0){p.next=11;break}return p.abrupt("return",!1);case 11:return p.abrupt("return",new Promise(function(b,y){var k=new FileReader;k.addEventListener("load",function(){a.uploadingFiles[l]={uid:l,src:k.result,name:u,size:c,type:o,ext:h},r.every(function(E){return!!a.uploadingFiles[E.uid]})?Promise.all(gt(r.map(function(E){return new Promise(function(){var _=xn(ht.mark(function T(x){return ht.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!a.options.onReady){S.next=3;break}return S.next=3,a.options.onReady(a.uploadingFiles[E.uid],E);case 3:x(!0);case 4:case"end":return S.stop()}},T)}));return function(T){return _.apply(this,arguments)}}())}))).then(function(){b(!0)}):b(!0)},!1),k.addEventListener("error",function(){y(!1)}),k.readAsDataURL(n)}));case 12:case"end":return p.stop()}},t,this)}));function e(t,n){return i.apply(this,arguments)}return e}()}]),f}(),gb=function(){function f(){be(this,f)}return ke(f,[{key:"ajax",value:function(e){return new fl(e)}},{key:"upload",value:function(e,t,n){return new vb(e).request(t,n)}},{key:"getFiles",value:function(e){var t=e||{},n=t.event,r=t.accept,a=t.multiple;r=r||"*",a=et(a)===void 0?100:a;var o=document.createElement("input");o.type="file",o.accept=r,o.style.display="none",o.multiple=a!==!1;var l=function u(){o.remove(),document.removeEventListener("mousedown",u)};return new Promise(function(u){var c=function h(){for(var v=[],g=0;g<(((p=o.files)===null||p===void 0?void 0:p.length)||0);g++){var p;if(typeof a=="number"&&g>a)break;v.push(o.files[g])}o.removeEventListener("change",h),l(),u(v)};o.addEventListener("change",c),document.body.appendChild(o),n||(n=document.createEvent("MouseEvents"),n.initEvent("click",!0,!0));try{if(o.dispatchEvent)o.dispatchEvent(n);else if(o.fireEvent)o.fireEvent(n);else throw"";document.addEventListener("mousedown",l)}catch{o.removeEventListener("change",c),l(),u([])}})}}]),f}(),bf=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"trigger",value:function(e,t){var n=this.engine,r=n.change,a=n.command,o=n.list,l=n.node,u=r.range.get(),c=this.engine.block;if(u.collapsed){var h=c.closest(u.startNode);if(h.name==="li"&&o.isFirst(u))return e.isDelete||(e.preventDefault(),a.execute(o.getPluginNameByNode(h))),!1}else{var v=u.startNode,g=u.endNode,p=c.closest(v),b=c.closest(g);if(p.name==="li"||b.name==="li"){e.preventDefault();var y=u.cloneRange(),k=v.first(),E=v.isCard()?v:k;if(E!=null&&E.isCard()&&o.isEmptyItem(p)){var _,T=p.parent();p.remove(),T&&l.isCustomize(T)&&((_=T.get())===null||_===void 0?void 0:_.childNodes.length)===0&&T.remove()}var x=p.name==="li"?p.parent():null,C=b.name==="li"?b.parent():null;if(p.name==="li"&&o.isFirst(u)&&y.setStartBefore(p),b.name==="li"&&c.isLastOffset(u,"end")&&y.setEndAfter(b),r.delete(y,t),p.inEditor()&&!p.equal(b)&&b.inEditor()&&b.name==="li"){y.shrinkToElementNode().shrinkToTextNode();var S=y.createSelection();p.append(b.children()),b.remove(),S.move()}if(p.name==="li"){var R;l.isCustomize(p)&&((R=p.get())===null||R===void 0?void 0:R.childNodes.length)===0&&p.remove()}var z=function(I){if(l.isList(I)){var $,ie=(($=I.get())===null||$===void 0?void 0:$.childNodes)||[];if(ie.length==0)I.remove();else if(ie.length===1){var N=I.first();N!=null&&N.isCursor()&&(I.after(N),I.remove())}}};return x&&x.length>0&&l.isList(x)&&z(x),C&&C.length>0&&l.isList(C)&&z(C),o.addBr(p),p.equal(b)||o.addBr(b),u.setStart(y.startContainer,y.startOffset),u.collapse(!0),o.merge(),r.isEmpty()&&r.initValue(u),r.apply(u),!1}}if(!!c.isFirstOffset(u,"start")){var F=c.closest(u.startNode);if(l.isList(F)){var G=F.first();if(!G||G.isText())return e.preventDefault(),r.mergeAfterDelete(F),!1;F=G,u.setStart(F[0],0),u.collapse(!0),r.range.select(u)}if(F.name==="li"){var M;if(l.isCustomize(F))return;e.preventDefault();var O=F.closest("ul");return!((M=F.parent())===null||M===void 0)&&M.isEditable()?(r.mergeAfterDelete(F),!1):(O.length>0?a.execute(o.getPluginNameByNode(O)):r.unwrap(F),!1)}return!0}}}]),f}(),pb=function(){function f(i){be(this,f),this.engine=void 0,this.backspace=void 0,this.engine=i,this.backspace=new bf(i)}return ke(f,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.command,a=t.list,o=n.range.get();o.shrinkToElementNode();var l=this.engine.block.closest(o.startNode),u=this.engine.block.closest(o.endNode);if(l.name==="li"||u.name==="li"){o.collapsed||(this.backspace.trigger(e,l.name!==u.name),o=n.range.get()),e.preventDefault();var c=a.getPluginNameByNode(l);if(a.isLast(o)&&a.isFirst(o))r.execute(c);else{this.engine.block.split(),o=n.range.get();var h=this.engine.block.closest(o.endNode),v=a.getPlugins().find(function(b){return c===b.constructor.pluginName});if(!v)return;if(v.cardName){var g=h.prev();g&&(a.addCardToCustomize(g,v.cardName),a.addBr(g)),a.addCardToCustomize(h,v.cardName),a.addBr(h);var p=h.next();p&&(a.addCardToCustomize(p,v.cardName),a.addBr(p))}a.merge(void 0,o),a.addBr(o.startNode.closest("ul")),o.setStart(h,this.engine.node.isCustomize(h)?1:0),o.collapse(!0).shrinkToTextNode(),n.apply(o)}return o.scrollIntoView(),!1}return!0}}]),f}(),mb=function(){function f(i){be(this,f),this.editor=void 0,this.CUSTOMZIE_UL_CLASS="data-list",this.CUSTOMZIE_LI_CLASS="data-list-item",this.INDENT_KEY="data-indent",this.STYLE_POSITION_NAME="list-style-position",this.STYLE_POSITION_VALUE="inside",this.backspaceEvent=void 0,this.editor=i}return ke(f,[{key:"init",value:function(){var e=this;if(Ne(this.editor)){var t,n,r=new pb(this.editor);(t=this.editor.typing.getHandleListener("enter","keydown"))===null||t===void 0||t.on(function(a){return r.trigger(a)}),this.backspaceEvent=new bf(this.editor),(n=this.editor.typing.getHandleListener("backspace","keydown"))===null||n===void 0||n.on(function(a){var o;return(o=e.backspaceEvent)===null||o===void 0?void 0:o.trigger(a)})}}},{key:"isEmptyItem",value:function(e){var t=e.children().toArray().filter(function(r){return!r.isCursor()}),n=this.editor.node;return e.name==="li"&&(n.isEmpty(e)||(t.length===1?n.isCustomize(e)&&t[0].isCard()||t[0].name==="br":t.length===2&&n.isCustomize(e)&&!!t[0].isCard()&&t[1].name==="br"))}},{key:"isSame",value:function(e,t){if(e.name!==t.name)return!1;var n=this.editor.node;if(n.isCustomize(e)!==n.isCustomize(t))return!1;var r=parseInt(e.attributes(this.INDENT_KEY),10)||0,a=parseInt(t.attributes(this.INDENT_KEY),10)||0;return r===a}},{key:"isSpecifiedType",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ul",n=arguments.length>2?arguments[2]:void 0,r=this.editor.node,a=!0;return e.forEach(function(o){var l;if(!(["li","p"].indexOf(o.name)===-1&&(o.name===t||o.find(t).length>0)))switch(o.name){case"li":if(n){var u,c,h=o.first();!((u=h)===null||u===void 0)&&u.isCursor()&&(h=h.next()),a=a&&r.isCustomize(o)&&(((c=h)===null||c===void 0?void 0:c.attributes(He))||"")===n}else a=a&&!r.isCustomize(o);break;case"p":o.parent()&&((l=o.parent())===null||l===void 0?void 0:l.name)!=="li"&&(a=!1);break;default:a=!1;break}}),a}},{key:"getPlugins",value:function(){var e=this,t=[];return Object.keys(this.editor.plugin.components).forEach(function(n){var r=e.editor.plugin.components[n];r.isCurrent&&t.push(r)}),t}},{key:"getPluginNameByNode",value:function(e){var t=this,n=e.name,r=function(o){var l="";return t.getPlugins().some(function(u){if(u.isCurrent(o))return l=u.constructor.pluginName,!0}),l};return this.editor.node.isCustomize(e)?r(e):n==="li"&&e.parent()?r(e.parent()):""}},{key:"getPluginNameByNodes",value:function(e){for(var t="",n=0;n<e.length;n++){var r=e[n],a=r.parent(),o="";switch(r.name){case"li":case"ul":case"ol":o=this.getPluginNameByNode(e[n]);break;case"p":if(a&&a.name==="li")o=this.getPluginNameByNode(a);else return"";break;default:if(this.editor.node.isBlock(r)&&r.find("ul,ol").length>0)break;return""}if(t&&o&&t!==o)return"";t=o}return t}},{key:"unwrapCustomize",value:function(e){if(this.editor.node.isCustomize(e))switch(e.name){case"li":if(this.editor.node.isCustomize(e)){var t=e.first();t!=null&&t.isCard()&&t.remove()}return e.removeAttributes("class"),e;case"ul":return e.removeAttributes("class"),e;default:return e}return e}},{key:"unwrap",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H("<p />"),r=0,a=this.editor,o=a.node,l=a.schema,u=l.data.globals.block||{},c=u.style||{};e.forEach(function(h){if(t.unwrapCustomize(h),o.isList(h)&&(r=parseInt(h.attributes(t.INDENT_KEY),10)||0,o.unwrap(h)),h.name==="li"){var v=o.clone(n,!1,!1);r!==0&&v.css("text-indent",r*2+"em"),h.removeAttributes(t.INDENT_KEY);var g=h.attributes();Object.keys(g).forEach(function(b){b!==qe&&b!=="id"&&u[b]&&v.attributes(b,g[b])});var p=h.css();p["text-align"]&&t.addAlign(v,p["text-align"]),delete p["text-align"],p[t.STYLE_POSITION_NAME]="",Object.keys(p).forEach(function(b){c[b]||(p[b]="")}),v.css(p),o.replace(h,v)}})}},{key:"normalize",value:function(e){if(!Ne(this.editor))return[];var t=this.editor,n=t.change,r=t.block,a=t.node;e=e||n.range.get();var o=r.getBlocks(e),l=[];o.forEach(function(c,h){var v=c.parent();if(c.name==="p"){if((v==null?void 0:v.name)==="li"){h===0&&l.push(v),a.unwrap(c);return}if(v&&["ul","ol"].indexOf(v.name)>-1){c=a.replace(c,H("<li />")),l.push(c);return}}if(c.name==="li"&&(v==null?void 0:v.name)==="li"){h===0&&l.push(v),a.unwrap(c);return}if(["ul","ol"].indexOf(c.name)>-1&&(v==null?void 0:v.name)==="li"){a.unwrap(c);return}l.push(c)});var u=e.endNode.closest("li");return l.some(function(c){return c[0]===u[0]})||l.push(u),l}},{key:"split",value:function(e){if(!!Ne(this.editor)){var t=this.editor,n=t.change,r=t.node,a=e||n.range.toTrusty(),o=this.normalize(e);if(o.length>0&&(o[0].name==="li"||o[o.length-1].name==="li")){var l=a.createSelection(),u=o[0],c=o[o.length-1],h=[],v=[],g,p;if(u.prev()){g=u.parent();for(var b=0;o[b]&&o[b].name==="li";)h.push(o[b]),b+=1}if(c.next()){p=c.parent();for(var y=c.next();y&&y.name==="li";)v.push(y),y=y.next()}var k;v.length>0&&p&&(k=r.clone(p,!1,!1),v.forEach(function(T){var x;(x=k)===null||x===void 0||x.append(T[0])}),p.after(k));var E;if(h.length>0&&g&&(E=r.clone(g,!1,!1),h.forEach(function(T){var x;(x=E)===null||x===void 0||x.append(T[0])}),g.after(E)),g&&p&&p.equal(g)&&g.name==="ol"){var _=(parseInt(g.attributes("start"),10)||1)+g.find("li").length;k.attributes("start",_)}l.move()}e||n.apply(a)}}},{key:"merge",value:function(e,t){var n=this;if(!!Ne(this.editor)){var r=this.editor,a=r.change,o=r.block,l=r.node,u=t||a.range.toTrusty(),c=u.cloneRange(),h=e?void 0:c.shrinkToElementNode().createSelection();if(e=e||o.getBlocks(u),e.forEach(function(g){if(g=g.closest("ul,ol"),!!l.isList(g)){var p=g.prev(),b=g.next();p&&n.isSame(p,g)&&(l.merge(p,g),g=p),b&&n.isSame(b,g)&&l.merge(g,b)}}),e=o.getBlocks(u),e.length>0){var v=e[0].closest("ul,ol");this.addStart(v)}h==null||h.move(),!t&&h!==void 0&&a.apply(c)}}},{key:"addStart",value:function(e){if(!!Ne(this.editor)){var t=this.editor,n=t.change,r=t.node;if(!e){var a=this.editor.block.getBlocks(n.range.get());if(a.length===0)return;e=a[0].closest("ul,ol")}if(!(!e||!r.isList(e))){for(var o=parseInt(e.attributes(this.INDENT_KEY),10)||0,l=[],u=o,c=e.prev();c&&r.isList(c);){if(c.name==="ol"){var h=parseInt(c.attributes(this.INDENT_KEY),10)||0,v=parseInt(c.attributes("start"),10)||1,g=c.find("li").length;if(h===0){l[h]=v+g;break}h<=u&&(u=h,l[h]=l[h]||v+g)}else u=parseInt(c.attributes(this.INDENT_KEY),10)||0;c=c.prev()}for(var p=e;p;){if(r.isList(p)){var b=parseInt(p.attributes(this.INDENT_KEY),10)||0,y=parseInt(p.attributes("start"),10),k=p.find("li").length;if(p.name==="ol"){var E=l[b];b>0?(E=E||1,E>1?p.attributes("start",E):p.removeAttributes("start"),l[b]=E+k):E&&E!==y?(E>1?p.attributes("start",E):p.removeAttributes("start"),l[b]=E+k):(l[b]=(y||1)+k,l=l.slice(0,b+1))}}else l=[];var _=p.next();if(!_)break;p=_}}}}},{key:"addIndent",value:function(e,t,n){if(this.editor.node.isList(e)){var r=this.getIndent(e);t=r+(t<0?-1:1),n&&t>n&&(t=n),t<1?e.removeAttributes(this.INDENT_KEY):e.attributes(this.INDENT_KEY,t)}}},{key:"getIndent",value:function(e){return this.editor.node.isList(e)&&parseInt(e.attributes(this.INDENT_KEY),10)||0}},{key:"addAlign",value:function(e,t){if(e.name==="li")if(t&&t!=="left")["center","right"].indexOf(t)>-1&&e.css(Ce({},this.STYLE_POSITION_NAME,this.STYLE_POSITION_VALUE)),e.css({"text-align":t});else{var n;e.css((n={},Ce(n,this.STYLE_POSITION_NAME,""),Ce(n,"text-align",""),n))}}},{key:"addCardToCustomize",value:function(e,t,n){var r,a;if(je(e)&&(e=H(e)),e.name==="li"){var o=e.first();if(!((o==null?void 0:o.isBlockCard())||(o==null?void 0:o.isCard())&&o.attributes(He)===t)){var l=this.editor.card,u=l.create(t,{value:n}),c=Ge.create(this.editor),h=H("<br />");if(((r=(a=e.get())===null||a===void 0?void 0:a.childNodes.length)!==null&&r!==void 0?r:0)>0){var v;(v=e.first())===null||v===void 0||v.before(h)}else e.append(h);c.select(h,!0),l.insertNode(c,u);var g=e.last();return(g==null?void 0:g.name)==="br"&&g.remove(),u}}}},{key:"addReadyCardToCustomize",value:function(e,t,n){if(je(e)&&(e=H(e)),e.name==="li"){var r=e.first();if(!((r==null?void 0:r.isBlockCard())||(r==null?void 0:r.isCard())&&r.attributes(He)===t)){var a=H("<span />");return e.prepend(a),this.editor.card.replaceNode(a,t,n),a}}}},{key:"addBr",value:function(e){var t=this,n=this.editor.node;if(n.isList(e))e.find("li").each(function(u){t.addBr(H(u))});else if(n.isCustomize(e)){for(var r=e.last();!((a=r)===null||a===void 0)&&a.isCursor();){var a;r=r.prev()}if(r){var o=e.children();if(o.length===1&&r.isCard()){e.append(H("<br />"));return}if(o.length>2&&r.name==="br"){var l;((l=r.prev())===null||l===void 0?void 0:l.name)!=="br"&&r.remove();return}for(;r;){if(r.equal(e.first())&&(r.isCard()||r.text()==="")){e.append(H("<br />"));return}if(r.type===Node.TEXT_NODE){if(r.text()!=="")return;r=r.prev()}else if(r.type===Node.ELEMENT_NODE){if(!n.isMark(r)||r.text()!=="")return;r=e.prev()}else r=r.prev()}}else e.append(H("<br />"))}}},{key:"insert",value:function(e,t){var n,r,a,o=this;if(!(!Ne(this.editor)||e.childNodes.length===0)){var l=this.editor,u=l.change,c=l.node,h=l.block,v=t||u.range.toTrusty();v.collapsed||u.delete(v,!0,!0);var g=v.cloneRange().shrinkToElementNode(),p=g.startNode,b=g.startOffset,y=p;if(c.isList(p)&&(y=p.children().eq(b)),y=(n=y)===null||n===void 0?void 0:n.closest("li",function(ft){return c.isBlock(ft)&&ft.nodeName!=="LI"?void 0:ft.parentElement||void 0}),!(((r=y)===null||r===void 0?void 0:r.length)===0||((a=y)===null||a===void 0?void 0:a.name)!=="li")){v.shrinkToElementNode().shrinkToTextNode(),h.split(v);var k=v.createSelection("list-insert");this.split(v);var E=function(Qt){h.merge(Qt),o.merge(void 0,Qt),k==null||k.move(),t||u.apply(Qt)},_=H(e).toArray().some(function(ft){return c.isBlock(ft)})?H(e.childNodes[0]):H("<p></p>").append(H(e)),T=v.startNode.closest("ul,ol");if(!T||!c.isList(T)){E(v);return}var x=v.startNode.closest("li");if(c.isCustomize(T)){var C,S,R=(C=T.prev())===null||C===void 0||(S=C.first())===null||S===void 0?void 0:S.first();if(R){var z=this.editor.card.find(R);z&&this.addCardToCustomize(x,z.name,z.getValue())}}var F=!c.isList(_)||this.isSame(T,_);if(F){for(var G,M;c.isBlock(_);){var O=_.first();if(O&&c.isBlock(O)){_=O;continue}break}var A=(G=x.parent())===null||G===void 0||(M=G.prev())===null||M===void 0?void 0:M.last();if((A==null?void 0:A.name)==="li"){var I=A==null?void 0:A.children();if(I==null||I.each(function(ft,Qt){var In;ft.nodeName==="BR"&&((In=I.eq(Qt))===null||In===void 0||In.remove())}),c.isCustomize(_)){var $;($=_.first())===null||$===void 0||$.remove()}if(_.isBlockCard()){var ie;(ie=A.parent())===null||ie===void 0||ie.after(_)}else A==null||A.append(c.isBlock(_)?_.children():_),A&&this.addBr(A),c.isBlock(_)&&_.remove()}}else{var N,P,V=(N=x.parent())===null||N===void 0||(P=N.prev())===null||P===void 0?void 0:P.last();if(V&&(c.isEmpty(V)||this.isEmptyItem(V))){var W,Y,Q;V.remove(),((W=V.parent())===null||W===void 0||(Y=W.get())===null||Y===void 0?void 0:Y.childNodes.length)===0&&((Q=V.parent())===null||Q===void 0||Q.remove())}}if(e.childNodes.length===0){var re=x.parent();if(_.isBlockCard()){if(re){var ae;this.isEmptyItem(x)&&((ae=re.get())===null||ae===void 0?void 0:ae.childNodes.length)===1&&re.remove();var fe=[re],pe=_.prev();pe&&c.isList(pe)&&fe.push(pe),this.merge(fe)}}else{var te,J;if(c.isCustomize(x)){var ne;(ne=x.first())===null||ne===void 0||ne.remove()}x.find("br").remove(),re==null||(te=re.prev())===null||te===void 0||(J=te.last())===null||J===void 0||J.append(x.children()),re==null||re.remove()}E(v);return}var ge=v.startNode.closest("li").parent();if(!ge){E(v);return}for(var ye=e.childNodes.length,L=H(e.childNodes[ye-1]),K=(!c.isList(L)||this.isSame(T,L))&&!L.isBlockCard(),U=!1,le=0;le<e.childNodes.length;le++){var he=H(e.childNodes[le]);if(c.isList(e.childNodes[le])&&!this.isSame(T,he)||he.isBlockCard()){U=!0;break}}for(var ve=ge.prev(),xe=ve?[ve]:[],Se=0;Se<(K&&!U?ye-1:ye);Se++){var me=H(e.childNodes[0]);if(c.isList(me)){var _e;if(((_e=me.get())===null||_e===void 0?void 0:_e.childNodes.length)===0){me.remove();continue}ge.before(me),xe.push(me)}else{if(U){ge==null||ge.before(me);continue}if(c.isBlock(me)&&me.allChildren().forEach(function(ft){ft.type!==wt().TEXT_NODE&&c.isBlock(ft)&&c.unwrap(ft)}),c.isCustomize(ge)){var Xe,at=(Xe=ge.first())===null||Xe===void 0?void 0:Xe.first();if(at&&at.isCard()){var Dt=at.attributes(He)||at.attributes("name"),qt=this.toCustomize(me,Dt);qt&&(Array.isArray(qt)?qt:[qt]).forEach(function(ft){ge==null||ge.before(ft)})}}else{var Jt=this.toNormal(me,ge.name);(Array.isArray(Jt)?Jt:[Jt]).forEach(function(ft){o.editor.node.isList(ft)&&(ge==null||ge.before(ft))})}}}if(xe.length>0&&this.merge(xe),!F&&c.isEmptyWidthChild(ge)&&ge.remove(),e.childNodes.length===0){if(c.isEmpty(x)||this.isEmptyItem(x)){var Ut,Yn,Nn,Dn,Rn=(Ut=x.parent())===null||Ut===void 0?void 0:Ut.prev();x.find("br").remove(),c.isCustomize(x)&&((Yn=x.first())===null||Yn===void 0||Yn.remove()),Rn&&c.isList(Rn)?(Nn=Rn.last())===null||Nn===void 0||Nn.append(x.children()):Rn&&Rn.append(x.children()),(Dn=x.parent())===null||Dn===void 0||Dn.remove()}E(v);return}for(;c.isBlock(L);){var On=L.last();if(On&&c.isBlock(On)){L=On;continue}break}var hn=x;if(hn){var Wt;if(!(!((Wt=L.parent())===null||Wt===void 0)&&Wt.fragment))for(var qn=hn,Vt=L.prev();Vt&&Vt.length>0;){var li=Vt.prev();qn.before(Vt),qn=Vt,Vt=li}if(L.name==="br")L.remove();else{var Fr=L.children();if(Fr.each(function(ft,Qt){var In;ft.nodeName==="BR"&&((In=Fr.eq(Qt))===null||In===void 0||In.remove())}),c.isCustomize(hn)){var hr;if(c.isCustomize(L)){var Ln=L.first();Ln!=null&&Ln.isCard()&&Ln.remove()}(hr=hn.first())===null||hr===void 0||hr.after(c.isBlock(L)?L.children():L)}else hn.prepend(c.isBlock(L)?L.children():L);this.addBr(hn),c.isBlock(L)&&L.remove()}}E(v)}}}},{key:"blockToItem",value:function(e,t,n,r){var a=H("<li></li>"),o=this.editor,l=o.node,u=o.schema;if(!l.isList(t))return t;var c=fo(e.css("text-indent"))/2,h=u.data.globals.block||{},v=e.attributes();Object.keys(v).forEach(function(b){b!==qe&&b!=="id"&&h.name&&a.attributes(b,v[b])});var g=h.style||{},p=e.css();return p["text-align"]&&this.addAlign(a,p["text-align"]),delete p["text-align"],delete p[this.STYLE_POSITION_NAME],Object.keys(p).forEach(function(b){g[b]||delete p[b]}),a.css(p),e=l.replace(e,a),n&&(e.addClass(this.CUSTOMZIE_LI_CLASS),this.addCardToCustomize(e,n,r)),c&&t.attributes(this.INDENT_KEY,c),l.wrap(e,t)}},{key:"toCustomize",value:function(e,t,n){var r=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"ul",o=this.editor.node;if(Array.isArray(e)){var l=[];return e.forEach(function(h){o.isCustomize(h)&&r.unwrapCustomize(h),l=l.concat(r.toCustomize(h,t,n,a))}),l}else{var u=H("<".concat(a,' class="').concat(this.CUSTOMZIE_UL_CLASS,'"/>'));switch(e.name){case"li":return e.addClass(this.CUSTOMZIE_LI_CLASS),this.addCardToCustomize(e,t,n),e;case"ul":case"ol":return u.attributes(e.attributes()),e=o.replace(e,u),e;default:if(e.name==="p"||o.isNestedBlock(e)&&!e.isBlockCard()){var c;if(((c=e.parent())===null||c===void 0?void 0:c.name)==="li")return o.unwrap(e),e;e=this.blockToItem(e,u,t,n)}return e}}}},{key:"toNormal",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ul",r=arguments.length>2?arguments[2]:void 0,a=this.editor.node;if(Array.isArray(e)){var o=[];return e.forEach(function(c){var h=t.toNormal(c,n,r);o=o.concat(h)}),o}else{this.unwrapCustomize(e);var l=H("<".concat(n," />"));switch(e.name){case"li":case n:return e;case"ol":case"ul":return l.attributes(e.attributes()),l.name==="ul"&&l.removeAttributes("start"),e=a.replace(e,l),e;default:if(e.name==="p"||a.isNestedBlock(e)&&!e.isBlockCard()){var u;if(((u=e.parent())===null||u===void 0?void 0:u.name)==="li")return a.unwrap(e),e;e=this.blockToItem(e,l),r&&e.attributes("start",r)}return e}}}},{key:"isFirst",value:function(e){var t=e.startNode,n=e.startOffset,r=e.cloneRange(),a=t.name==="li"?t:t.closest("li");if(!a[0])return!1;r.select(a,!0),r.setEnd(t[0],n);var o=r.cloneContents();if(!o.firstChild)return!0;var l=H(o.firstChild),u=H(o.lastChild||[]);if(o.childNodes.length===1&&l.name==="br"||o.childNodes.length===1&&a.hasClass(this.CUSTOMZIE_LI_CLASS)&&l.isCard())return!0;var c=this.editor.node;if(o.childNodes.length===2&&a.hasClass(this.CUSTOMZIE_LI_CLASS)&&l.isCard()&&c.isEmpty(u))return!0;var h=H("<div />");return h.append(o),c.isEmpty(h)}},{key:"isLast",value:function(e){var t=e.endNode,n=e.endOffset,r=e.cloneRange(),a=t.name==="li"?t:t.closest("li");if(!a[0])return!1;r.select(a,!0),r.setStart(t,n);var o=r.cloneContents();if(!o.firstChild)return!0;var l=H(o.firstChild),u=H(o.lastChild||[]);if(o.childNodes.length===1&&l.name==="br"||o.childNodes.length===1&&a.hasClass(this.CUSTOMZIE_LI_CLASS)&&l.isCard())return!0;var c=this.editor.node;if(o.childNodes.length===2&&a.hasClass(this.CUSTOMZIE_LI_CLASS)&&l.isCard()&&c.isEmpty(u))return!0;var h=H("<div />");return h.append(o),this.editor.node.isEmpty(h)}}]),f}(),bb=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.node,a=t.block,o=n.range.get(),l=o.cloneRange().shrinkToTextNode(),u=l.collapsed,c=l.endNode,h=l.startNode,v=l.startOffset,g=l.endOffset;if(u){var p=a.closest(h);if(p.length>0&&r.isEmpty(p))return}if(c.type===Node.TEXT_NODE||h.type===Node.TEXT_NODE){if(!u){var b=c.parent();if(b&&c.type===Node.TEXT_NODE&&r.isMark(b)){var y=c.text(),k=y.substr(g);if(!/^\u200b$/.test(k))return!0;o.setEnd(c,g+1)}return!0}var E=h.parent();if(E&&h.type===Node.TEXT_NODE&&r.isMark(E)){if(v<1)return!0;var _=h.text(),T=_.substr(v-1,1);if(!/^\u200b$/.test(T))return!0;if(v===1){var x=E.prev();if(x&&!r.isEmpty(x)){var C=o.cloneRange().select(x,!0).shrinkToTextNode().collapse(!1),S=C.startNode,R=C.startOffset;o.setStart(S,R-1)}else if(!x&&r.isEmpty(E)){var z=E.parent(),F=E.getIndex();E.remove(),z&&o.setStart(z,F<=0?0:F-1)}}else o.setStart(h,v-1);return!0}if(E=h.prev()||void 0,E&&h.type===Node.TEXT_NODE&&r.isMark(E)){var G=h.text(),M=G.substr(v-1,1);if(!/^\u200b$/.test(M))return!0;if(v===1){var O=o.cloneRange().select(E,!0).shrinkToTextNode().collapse(!1),A=O.startNode,I=O.startOffset;o.setStart(A,I-1)}else o.setStart(h,v>0?v-1:0)}}return!0}}]),f}(),yb=function(){function f(i){var e=this;be(this,f),this.editor=void 0,this.pluginCaches=new Map,this.findSameParent=function(t,n){var r=e.editor.node;if(r.isMark(t)){var a=void 0;if(e.compare(t,n,!0))return!0;if(a=t.parent())return e.findSameParent(a,n)}return!1},this.editor=i}return ke(f,[{key:"init",value:function(){var e=this,t=this.editor;if(Ne(t)){var n,r=new bb(t);(n=t.typing.getHandleListener("backspace","keydown"))===null||n===void 0||n.on(function(a){return r.trigger(a)}),t.on("keydown:space",function(a){return e.triggerMarkdown(a)})}}},{key:"triggerMarkdown",value:function(e){var t,n=this.editor;if(!(!Ne(n)||((t=n.options.markdown)===null||t===void 0?void 0:t.mode)===!1)){var r=n.change,a=r.range.get();if(!(!a.collapsed||r.isComposing())){var o=a.cloneRange().shrinkToTextNode(),l=o.startNode,u=o.startOffset,c=l.type===Node.TEXT_NODE?l:l.children().eq(u-1);if(!!c){var h=a.toPath(),v=c.type===Node.TEXT_NODE?c.text().substr(0,u):c.text(),g=ho(this.editor,"zero"),p=g.renderer,b=g.options,y=g.parseInline(v,{});if(y.length!==0){var k=!1,E="";if(y.forEach(function(S){var R="",z=S.children||[];z.forEach(function(F,G){var M=F.type,O=n.trigger("markdown-it-token",{token:S,markdown:g,callback:function(I){R+=I}});if(O===!1){k=!0;return}!k&&M!=="text"&&(k=!0),typeof p.rules[M]!="undefined"?R+=p.rules[M](z,G,b,{},p):R+=p.renderToken(z,G,b)}),E+=R}),k){var _=this.editor.node;e.preventDefault(),a.setStart(c[0],0),a.setEnd(c[0],u),r.paste(E,a),r.rangePathBeforeCommand=h,a.collapse(!1),a.enlargeToElementNode();var T=H(E),x=T.last(),C=T.eq(T.length-1);(_.isMark(T)||x&&_.isMark(x)||C&&_.isMark(C))&&_.insertText("\xA0",a),r.range.select(a)}return!k}}}}}},{key:"findPlugin",value:function(e){var t=this.editor,n=t.node,r=t.plugin,a=t.schema;if(!(e.length===0||!n.isMark(e))){var o=e.get().cloneNode(),l=o.outerHTML,u=this.pluginCaches.get(l);if(u)return u;for(var c in r.components){var h=r.components[c];if(ul(h)&&e.name===h.tagName){var v=h.schema();if(Array.isArray(v)?v.find(function(g){return a.checkNode(e,g.attributes)}):a.checkNode(e,v.attributes))return this.pluginCaches.set(l,h),h}}return u}}},{key:"closest",value:function(e){for(var t=this.editor.node,n=e.parent();n&&!n.isEditable()&&!t.isBlock(n);){if(t.isMark(n))return n;var r=n.parent();if(!r)break;n=r}return e}},{key:"closestNotMark",value:function(e){for(;(this.editor.node.isMark(e)||e.isText())&&!e.isEditable();){var t=e.parent();if(!t)break;e=t}return e}},{key:"compare",value:function(e,t,n){if(e.name!==t.name)return!1;var r=e.attributes();delete r.style,delete r[qe];var a=t.attributes();delete a.style,delete a[qe];var o=e.css(),l=t.css();delete r.class,delete a.class;var u=e.get().className.trim(),c=t.get().className.trim(),h=u!==""?u.split(/\s+/):[],v=c!==""?c.split(/\s+/):[],g=this.editor.schema,p=g.find(function(y){return y.name===e.name}),b=function(k){for(var E=0;E<p.length;E++){var _=p[E];if(_.attributes&&g.checkValue(_.attributes,"class",k.join(" ").trim()))return _.attributes.class.toString()}return k.join(" ").trim()};return n||(h=h.length>0?[b(h)]:[],v=v.length>0?[b(v)]:[]),!(Object.keys(r).length!==Object.keys(a).length||!Object.keys(r).every(function(y){return n?r[y]===a[y]:!!a[y]})||Object.keys(o).length!==Object.keys(l).length||!Object.keys(o).every(function(y){return n?o[y]===l[y]:!!l[y]})||h.length!==v.length||!h.every(function(y){return v.indexOf(y)!==-1}))}},{key:"contain",value:function(e,t){var n=t.attributes(),r=n.style||{};delete n.style;var a=e.attributes(),o=a.style||{};return delete a.style,Object.keys(n).every(function(l){return!!a[l]})&&Object.keys(r).every(function(l){return!o[l]})}},{key:"unwrapEmptyMarks",value:function(e,t){var n=this.editor.node,r=e.allChildren();r.forEach(function(a){if(n.isEmpty(a)&&n.isMark(a)&&(!t||t(a))){var o=a.children();o.length===1&&o.isText()?a.remove():n.unwrap(a)}})}},{key:"splitOnCollapsed",value:function(e,t,n){var r=this;if(!!e.collapsed){e.enlargeFromTextNode(),e.shrinkToElementNode();var a=e.startNode,o=a.parent(),l=a.isCard()?a:a.closest(yt),u=this.editor.node;if((l.length===0||l.attributes(Ot)!=="inline")&&(u.isMark(a)||o&&u.isMark(o))){var c,h=this.closestNotMark(a),v=e.createSelection(),g=v.getNode(h,"left"),p=void 0,b=void 0,y=[];if(n){je(n)&&(n=H(n));var k=n.getPath(h.get()),E=h.clone(!0);y=k.slice(1),b=H(E.getChildByPath(k.slice(0,1))),p=v.getNode(E,"right",!1)}else p=v.getNode(h,"right");this.unwrapEmptyMarks(g,function(te){return!te.isCursor()}),this.unwrapEmptyMarks(p,function(te){t&&!Array.isArray(t)&&(t=[t]);var J=!t||t.length===0||!te.isCard()&&t.some(function(ne){return r.compare(te,ne)});return J});var _=h.children();_.each(function(te,J){var ne=_.eq(J);ne!=null&&ne.isCard()||ne==null||ne.remove()});var T=void 0,x=function(J){J.each(function(ne,ae){var fe=J.eq(ae);if(fe!=null&&fe.isCard()){T=T?T.next():h.first(),T&&(J[ae]=T[0]);return}T?(T.after(ne),T=fe):(T=fe,h.prepend(ne))})},C=g.children(),S=C.toArray();x(C);var R=p.children(),z=R.toArray();b&&(n=(c=z.find(function(te){return te.equal(b)}))===null||c===void 0?void 0:c.getChildByPath(y)),x(R),z=R.toArray();var F=H("\u200B",null);if(S.length===1&&S[0].name==="br"&&(S[0].remove(),S.splice(0,1)),z.length===1&&z[0].name==="br"&&(z[0].remove(),z.splice(0,1)),z.filter(function(te){return!te.isCursor()}).length>0){for(var G=z[0],M=0;M<z.length-1&&(G=z[M],!!G.isCursor());M++);if(u.isEmpty(G)){for(var O=G.first();O&&!O.isText();)G=O,O=O.first();G.isText()?G.before(F):G.prepend(F)}else{var A=u.isMark(a)?a:a.parent(),I=F;t&&!Array.isArray(t)&&(t=[t]);for(var $=function(){var J=A.clone();if(!t.some(function(ae){return r.compare(J,ae)})){var ne=F.equal(I);I=u.wrap(I,J),ne&&(F=I.first())}A=A.parent()};t&&t.length>0&&A&&u.isMark(A);)$();G.before(I)}e.select(F).collapse(!1)}else if(S.filter(function(te){return!te.isCursor()}).length>0){var ie=S[S.length-1];ie.after(F),e.select(F).collapse(!1)}else e.select(h,!0).collapse(!0);var N=!1;h.children().each(function(te){var J=H(te);if(J.isText()){var ne=te.textContent,ae=(ne==null?void 0:ne.replace(/\u200b+/g,"\u200B"))||"";if(ne!==ae&&(te.textContent=ae),N){var fe=J.next(),pe=J.parent();(!fe&&pe&&!u.isInline(pe)||fe&&!u.isInline(fe))&&ae.startsWith("\u200B")?(ae=ae.substring(1),ae?te.textContent=ae:J.remove()):N=!1}ae.endsWith("\u200B")&&(N=!0)}else N=!1});var P=u;if(F[0].parentNode){var V=F[0],W=null,Y=0,Q=function(J,ne){for(var ae=function(le){return ne?le.previousSibling:le.nextSibling};J;){if(J.nodeType!==V.nodeType)return;var fe=ae(J);if(J.textContent===W){var pe;if(fe&&P.isInline(fe)||!fe&&J.parentNode&&P.isInline(J.parentNode))break;(pe=J.parentNode)===null||pe===void 0||pe.removeChild(J),J=fe}else{var ge,ye;if(ne)for(;W&&((L=J.textContent)===null||L===void 0?void 0:L.endsWith(W));){var L;if(fe&&P.isInline(fe)||!fe&&J.parentNode&&P.isInline(J.parentNode))break;J.textContent=J.textContent.substring(0,J.textContent.length-Y)}else for(;W&&((K=J.textContent)===null||K===void 0?void 0:K.startsWith(W));){var K;if(fe&&P.isInline(fe)||!fe&&J.parentNode&&P.isInline(J.parentNode))break;J.textContent=J.textContent.substring(W.length)}if(((ge=J.textContent)===null||ge===void 0?void 0:ge.length)!==0)return;(ye=J.parentNode)===null||ye===void 0||ye.removeChild(J),J=fe}}};if(V.nodeType===Node.TEXT_NODE){var re=V.textContent;W=re,Y=W.length,Q(V.previousSibling,!0),Q(V.nextSibling,!1)}}}return n}}},{key:"splitOnExpanded",value:function(e,t){if(!e.collapsed){e.enlargeToElementNode(),e.shrinkToElementNode();var n=e.startNode,r=e.endNode,a=n.isCard()?n:n.closest(yt),o=r.isCard()?r:r.closest(yt);if(!(a.length>0&&a.attributes(Ot)==="inline"||o.length>0&&o.attributes(Ot)==="inline")){var l=this.closestNotMark(n),u=this.closestNotMark(r);if(!l.equal(u)){var c=e.cloneRange();c.collapse(!0);var h=e.cloneRange();h.collapse(!1);var v=void 0,g=c.startOffset,p=h.endOffset;l.contains(u)?(v=this.splitOnCollapsed(c,t,h.endNode),e.setStart(c.startContainer,c.startOffset),v&&h.setOffset(v,p,p),this.splitOnCollapsed(h,t),e.setEnd(h.startContainer,h.startOffset)):(v=this.splitOnCollapsed(h,t,c.startNode),e.setEnd(h.startContainer,h.startOffset),v&&c.setOffset(v,g,g),this.splitOnCollapsed(c,t),e.setStart(c.startContainer,c.startOffset));return}var b=this.editor.node,y=n.parent(),k=b.isMark(n)||y&&b.isMark(y),E=r.parent(),_=b.isMark(r)||E&&b.isMark(E);if(!k&&!_)return;var T=e.commonAncestorNode;T.isText()&&(T=T.parent());var x=this.closestNotMark(T),C=e.createSelection(),S=C.getNode(x,"left"),R=C.getNode(x),z=C.getNode(x,"right");this.unwrapEmptyMarks(S),this.unwrapEmptyMarks(z);var F=x.children();F.each(function(ie,N){var P=F.eq(N);P!=null&&P.isCard()||P==null||P.remove()});var G=void 0,M=function(N){N.each(function(P,V){var W=N.eq(V);if(W!=null&&W.isCard()){G=G?G.next():x.first(),G&&(N[V]=G[0]);return}G?(G.after(P),G=W):(G=W,x.prepend(P))})},O=S.children();M(O);var A=R.children(),I=A.toArray();M(A);var $=z.children();M($),e.setStartBefore(I[0][0]),e.setEndAfter(I[I.length-1][0])}}}},{key:"split",value:function(e,t){if(!!Ne(this.editor)){var n=this.editor.change,r=e||n.range.toTrusty(),a=wt(r.startContainer),o=r.collapsed;if((typeof t=="string"||!Array.isArray(t)&&t&&je(t))&&(t=H(t,a)),o)this.splitOnCollapsed(r,t);else{var l=r.createSelection("mark-split");this.splitOnExpanded(r,t),l.move()}e||n.apply(r)}}},{key:"wrapByNode",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.findPlugin(t),a=this.editor.node;if(a.isMark(e)){var o;((o=e.get())===null||o===void 0?void 0:o.childNodes.length)===0&&e.html("&#8203;");for(var l=e,u=l.children().toArray(),c=this.findPlugin(l),h=!1;a.isMark(l)&&u.filter(function(A){return!A.isCursor()}).length===1&&r&&c&&r.mergeLeval<=c.mergeLeval;){var v=u.find(function(A){return!A.isCursor()});if(a.isMark(v))l=v,u=l.children().toArray();else if(v.isText())l=v;else break;if(r.name===c.name){h=!0;break}c=this.findPlugin(l)}a.removeZeroWidthSpace(l);var g=l.parent();if(l.isText()||h){for(var p=!1;g&&a.isMark(g);){if(this.compare(g.clone(),t,!0)){p=!0;break}else if(g.children().toArray().filter(function(A){return!A.isCursor()}).length===1){var b=this.findPlugin(g);if(r&&r===b&&r.combineValueByWrap===!0){a.wrap(g,t,!0),p=!0;break}else if(r&&r===b){a.unwrap(g),p=!1;break}}g=g.parent()}if(p)return!1}var y=l.allChildren();return y.forEach(function(A){if(A.type!==wt().TEXT_NODE&&a.isMark(A)){var I=n.findPlugin(A);I===r&&!(r!=null&&r.combineValueByWrap)&&a.unwrap(A)}}),a.wrap(l,t)}else if(e.name==="br"){var k=e.parent();if(k&&this.editor.node.isBlock(k)){var E=t.clone(!0);return E.html("&#8203;"),a.replace(e,E),E}}else if(e.isCard()){var _=this.editor.card.find(e);if(_&&_.executeMark)return _.executeMark(t,!0)}else if(e.isText()&&!a.isEmpty(e)){a.removeZeroWidthSpace(e);for(var T=e.parent(),x=!1;T&&a.isMark(T);){if(this.compare(T.clone(),t,!0)){x=!0;break}else if(T.children().toArray().filter(function(A){return!A.isCursor()}).length===1){var C=this.findPlugin(T);if(r&&r===C&&r.combineValueByWrap===!0){a.wrap(T,t,!0),x=!0;break}else if(r&&r===C){var S=a.unwrap(T),R=S.find(function(A){return!A.isCursor()&&a.isMark(A)});R?T=R:S.length>0&&(T=S[0].parent()),x=!1;break}}var z=T.parent();if(z&&a.isMark(T))T=z;else break}if(x)return!1;for(var F=e.parent(),G=F?this.findPlugin(F):void 0,M=!1,O=function(){M=!0;var I=F.children().toArray(),$=F.clone();I.forEach(function(ie){ie.isCursor()||ie.type===3&&/^\u200b$/.test(ie.text()||"")||(e.equal(ie)||ie.contains(e)?e=a.wrap(a.replace(e,$),t):(ie=a.wrap(ie,$),a.wrap(ie,t)))}),a.unwrap(F),F=n.closest(e)};F&&a.isMark(F)&&r&&G&&r.mergeLeval>G.mergeLeval;)O();return M||a.wrap(e,t),e}}},{key:"wrap",value:function(e,t){var n=this,r=Ne(this.editor)?this.editor.change:void 0;if(!(!t&&!r)){var a=this.editor.node,o=t||r.range.toTrusty(),l=wt(o.startContainer);if(typeof e=="string"||je(e)?e=H(e,l):e=e,!!a.isMark(e)){var u=o.commonAncestorNode;u.type===Node.TEXT_NODE&&(u=u.parent());var c=this.editor.card.find(u,!0),h=c==null?void 0:c.isEditable,v=h?c!=null&&c.getSelectionNodes?c.getSelectionNodes():[]:[u];v.length===0&&(h=!1,v.push(u));var g=a,p=this.findPlugin(e);if(o.collapsed&&(!h||!(c!=null&&c.getSelectionNodes)||v.length===1)){e.children().toArray().filter(function(O){return!O.isCursor()}).length===0&&e.append(l.createTextNode("\u200B"));var b=o.shrinkToTextNode(),y=b.startNode,k=y.parent(),E=[],_=!1;if(y.isText()){for(var T=!1;k&&g.isMark(k);){var x;if(this.compare(k.clone(),e,!0)){T=!0;break}var C=this.findPlugin(k);if(((x=k.get())===null||x===void 0?void 0:x.childNodes.length)===1){if(p&&p===C&&p.combineValueByWrap===!0){g.wrap(k,e,!0),T=!0;break}else if(p&&p===C){if(this.split(o),o.collapsed)for(var S=k.parent();S&&g.isMark(S);)e=g.wrap(e,S),S=S.parent();T=!1;break}}p&&(!C||p.mergeLeval>C.mergeLeval)?E.push(k.clone(!1)):!_&&E.length>0&&(E.push(e.clone(!1)),_=!0),k=k.parent()}if(T)return}if(E.length>0){var R=E[0];R.append(e.children());for(var z=1;z<E.length;z++)R=g.wrap(R,E[z]);e=_?R:g.wrap(R,e),this.split(o)}g.insert(e,o),this.merge(o),o.handleBr(),t||r==null||r.apply(o);return}h||(this.split(o),u=o.commonAncestorNode,u.type===Node.TEXT_NODE&&(u=u.parent()),v[0]=u);var F=h?void 0:o.createSelection();if(F&&!F.anchor&&!F.focus){t||r==null||r.apply(o);return}var G=!!h;if(v.forEach(function(O){O.traverse(function(A){if(e=e,h||!A.equal(F==null?void 0:F.anchor)){if(G){if(!h&&A.equal(F==null?void 0:F.focus))return G=!1,!1;var I=g.isMark(A),$=n.wrapByNode(A,e,p);if($&&typeof $!="boolean"&&I){var ie;if(!h&&(F==null?void 0:F.focus)&&$.find('[data-element="'.concat(F.focus.attributes(Ae),'"]')).equal(F.focus))return G=!1,!1;if((F==null?void 0:F.focus)&&((ie=$.next())===null||ie===void 0?void 0:ie.equal(F.focus)))return G=!1,!1}if(typeof $!="undefined")return!0}}else G=!0},!0,"editable")}),F==null||F.move(),h){var M=[];v.forEach(function(O){O.allChildren().forEach(function(A){A.isElement()&&a.isMark(A)&&M.push(A)})}),this.mergeMarks(M)}else this.merge(o);t||r==null||r.apply(o)}}}},{key:"mergeMarks",value:function(e){var t=this,n=this.editor.node;e.forEach(function(r){var a=r.prev(),o=r.next(),l=r.parent();if(l&&t.findSameParent(l,r)){n.unwrap(r);return}a&&t.compare(a,r,!0)&&(n.merge(a,r),r=a),o&&t.compare(o,r,!0)&&n.merge(r,o);var u=[],c=r.children();c.each(function(h,v){var g=c.eq(v);g&&!g.isCursor()&&n.isMark(g)&&u.push(g)}),u.length>0&&t.mergeMarks(u)})}},{key:"merge",value:function(e){if(!!Ne(this.editor)){var t=this.editor.change,n=e||t.range.toTrusty(),r=this.findMarks(n);if(r.length!==0){var a=n.shrinkToElementNode().createSelection();this.mergeMarks(r),a.move(),n.handleBr(),e||t.apply(n)}}}},{key:"unwrapByNodes",value:function(e,t){var n=this,r=this.editor.node;e.forEach(function(a){t=t,!t||!a.isCard()&&(Array.isArray(t)?t:[t]).some(function(o){return n.compare(a,o)})?r.unwrap(a):t?(Array.isArray(t)?t:[t]).forEach(function(o){var l,u=o.css();Object.keys(u).forEach(function(h){a.css(h,"")});var c=(l=o.get())===null||l===void 0?void 0:l.className.split(/\s+/);c&&function(){for(var h=n.editor.schema,v=h.find(function(b){return b.name===a.name}),g=function(y){var k=v[y];c.forEach(function(E){E=E.trim(),E!==""&&k.attributes&&h.checkValue(k.attributes,"class",E)&&a.removeClass(E)})},p=0;p<v.length;p++)g(p)}()}):(a.removeAttributes("class"),a.removeAttributes("style"))})}},{key:"unwrap",value:function(e,t){var n=this;if(!!Ne(this.editor)){var r=this.editor,a=r.change,o=r.node,l=t||a.range.toTrusty(),u=wt(l.startContainer)||document;e!==void 0&&!Array.isArray(e)&&(typeof e=="string"||je(e))&&(e=H(e,u));var c=l.commonAncestorNode;c.type===Node.TEXT_NODE&&(c=c.parent());var h=this.editor.card.find(c,!0),v=h==null?void 0:h.isEditable,g=v?h!=null&&h.getSelectionNodes?h.getSelectionNodes():[]:[c];if(g.length===0&&(v=!1,g.push(c)),v||(this.split(l,l.collapsed?e:void 0),c=l.commonAncestorNode,c.type===Node.TEXT_NODE&&(c=c.parent()),g[0]=c),l.collapsed&&(!v||!(h!=null&&h.getSelectionNodes)||g.length===1)){t||a.apply(l);return}var p=v?void 0:l.createSelection("mark-unwrap");if(p&&!p.has()){this.merge(l),t||a.apply(l);return}var b=[],y=!!v;if(g.forEach(function(E){E.traverse(function(_){if(!(!v&&(_.isText()||!(p!=null&&p.anchor)))){if(v||(p==null?void 0:p.anchor)&&!_.equal(p.anchor)){if(y&&(v||!_.equal(p==null?void 0:p.focus))){if(o.isMark(_)&&!_.isCard()&&(v||l.isPointInRange(_,0)))b.push(_);else if(_.isCard()){var T=n.editor.card.find(_);T&&T.executeMark&&(Array.isArray(e)?e:[e]).forEach(function(R){T.executeMark(R,!1)})}}}else if(!v&&(y=!0,(p==null?void 0:p.anchor)&&_.equal(p.anchor)&&!p.anchor.prev()))for(var x=p.anchor.parent();x&&!x.isCard()&&o.isMark(x);){var C,S;if(b.push(x),x=x.parent(),x&&((C=(S=x.get())===null||S===void 0?void 0:S.childNodes.length)!==null&&C!==void 0?C:0)>1)break}}},!0,"editable")}),this.unwrapByNodes(b,e),p==null||p.move(),v){var k=[];g.forEach(function(E){E.allChildren().forEach(function(_){_.isElement()&&o.isMark(_)&&k.push(_)})}),this.mergeMarks(k)}else this.merge(l);t||a.apply(l)}}},{key:"insert",value:function(e,t){var n;if(!!Ne(this.editor)){var r=this.editor,a=r.change,o=r.node,l=t||a.range.toTrusty();if(typeof e=="string"||je(e)){var u=wt(l.startContainer);e=H(e,u)}l.collapsed||a.delete(l),(n=o.insert(e,l))===null||n===void 0||n.handleBr().select(e).collapse(!1),t||a.apply(l)}}},{key:"findMarks",value:function(e){var t=this,n=e.cloneRange();if(n.startNode.isRoot()&&n.shrinkToElementNode(),!n.startNode.inEditor()||this.editor.card.find(n.startNode))return[];var r=this.editor.node,a=function(M,O){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!!O.collapsed){var I=O.startNode,$=O.startOffset,ie=I.findParent();if(!!ie){var N=O.cloneRange();if(N.select(ie,!0),A){N.setEnd(I,$),N.enlargeFromTextNode(),N.enlargeToElementNode(!0);var P=I.get().childNodes,V=N.endNode,W=N.endOffset,Y=V.get().childNodes,Q=Y.item(W),re=P.item($)||P.item($-1);if(!M&&V.type===Node.ELEMENT_NODE&&Q&&r.isBlock(Q)&&(I.type!==Node.ELEMENT_NODE||!!re&&!r.isBlock(re)))return;N.select(ie,!0),N.setStart(V,W),N.shrinkToElementNode(),N.shrinkToTextNode(),O.setStart(N.startContainer,N.startOffset),O.collapse(!0)}else{N.setStart(I,$),N.enlargeFromTextNode(),N.enlargeToElementNode(!0);var te=I.get().childNodes,J=N.startNode,ne=N.startOffset,ae=J.get().childNodes,fe=ae.item(ne),pe=te.item($)||te.item($-1);if(!M&&J.type===Node.ELEMENT_NODE&&fe&&r.isBlock(fe)&&(I.type!==Node.ELEMENT_NODE||pe&&!r.isBlock(pe)))return;N.select(ie,!0),N.setEnd(J,ne),N.shrinkToElementNode(),N.shrinkToTextNode(),O.setEnd(N.endContainer,N.endOffset),O.collapse(!1)}}}};if(!n.collapsed){var o=n.cloneRange(),l=n.cloneRange();o.collapse(!0),l.collapse(!1),a(!0,o,!0),a(!0,l),n.setStart(o.startContainer,o.startOffset),n.setEnd(l.startContainer,l.startOffset)}a(!1,n);var u=n.startContainer,c=n.startOffset,h=n.endContainer,v=n.endOffset,g=u,p=h;u.nodeType===Node.ELEMENT_NODE&&u.childNodes[c]&&(g=u.childNodes[c]||u),h.nodeType===Node.ELEMENT_NODE&&v>0&&h.childNodes[v-1]&&(p=h.childNodes[v-1]||u),n.collapsed&&(g=p);var b=function(M,O){M.push(O)},y=r,k=function(M){for(var O=[];M&&!(M.type===Node.ELEMENT_NODE&&M.isEditable());){if(y.isMark(M)&&!M.attributes(He)&&!M.attributes(lt))O.push(M);else if(M.isCard()){var A=t.editor.card.find(M);A!=null&&A.queryMarks&&O.push.apply(O,gt(A.queryMarks()))}var I=M.parent();if(!I)break;M=I}return O},E=k(H(g)),_=n.commonAncestorNode,T=this.editor.card.find(_,!0),x=T==null?void 0:T.isEditable,C=x?T!=null&&T.getSelectionNodes?T.getSelectionNodes():[]:[_];if(C.length===0&&(x=!1,C.push(_)),(!n.collapsed||x)&&(k(H(p)).forEach(function(G){return b(E,G)}),u!==h||x)){var S=!1,R=!1;C.forEach(function(G){G.traverse(function(M){if(R)return!1;if(M[0]!==u){if(S){if(M[0]===h)return R=!0,!1;if(y.isMark(M)&&!M.attributes(He)&&!M.attributes(lt))b(E,M);else if(M.isCard()){var O=t.editor.card.find(M);O!=null&&O.queryMarks&&O.queryMarks().forEach(function(A){b(E,A)})}}}else S=!0},!0,"editable")})}for(var z=0;z<E.length;z++)for(var F=z+1;F<E.length;F++)E[z][0]==E[F][0]&&(E.splice(F,1),F--);return E}},{key:"removeEmptyMarks",value:function(e,t){if(!(e.length===0||e.isEditable()||e.isCard()||e.attributes(Ae))){var n=this.editor.node;if(!e.attributes(Ae)){var r,a,o=e.parent();if(((r=e.get())===null||r===void 0?void 0:r.childNodes.length)===1&&((a=e.first())===null||a===void 0?void 0:a.attributes(Ae))){n.isMark(e)?(e.before(e.first()),e.remove(),o&&this.removeEmptyMarks(o,!0)):t&&n.isBlock(e)&&e.prepend("<br />");return}var l=n.html(e);(l===""||l==="\u200B")&&(n.isMark(e)?(e.remove(),o&&this.removeEmptyMarks(o,!0)):t&&n.isBlock(e)&&n.html(e,"<br />"))}}}},{key:"repairCursor",value:function(e){var t=this.editor.node;e=je(e)?H(e):e;var n=t.isMark(e);if(n&&!e.isCursor()){var r=e.children();r.each(function(h,v){var g,p=r.eq(v);if((p==null?void 0:p.isText())&&!(!((g=p.next())===null||g===void 0)&&g.isCursor())){var b=p.text();if(b.length===1&&/\u200b/.test(b)){p.remove();return}p.text(b.replace(/\u200b/g,""))}});var a=e.children().toArray().filter(function(h){return!h.isCursor()});a.length<2&&(a.length===0||a.length===1&&a[0].isText()&&a[0].text().length===0)&&(a.length>0&&a[0].remove(),e.prepend(H("\u200B",null)));var o=e.next(),l=o==null?void 0:o.next();o&&l&&o.isText()&&/^\u200b$/g.test(o.text())&&!t.isInline(l)&&o.remove();var u=e.prev(),c=u==null?void 0:u.prev();u&&c&&u.isText()&&/^\u200b$/g.test(u.text())&&!t.isInline(c)&&u.remove()}}}]),f}(),wb=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"trigger",value:function(e){var t=this.engine,n=t.change;t.mark;var r=t.inline,a=t.node,o=n.range.get(),l=o.cloneRange().shrinkToTextNode(),u=l.collapsed,c=l.endNode,h=l.startNode,v=l.startOffset;if(c.type===Node.TEXT_NODE||h.type===Node.TEXT_NODE){if(!u){var g=r.closest(c);if(a.isInline(g)&&!g.isCard()&&a.isEmpty(g)){if(v>1)return!0;var p=c.prev(),b=c.parent();if(b&&a.isInline(b)){if(p)return!0;var y=c.text(),k=y.substr(0,v);if(!/^\u200b$/.test(k))return!0;var E=g.next(),_=E==null?void 0:E.text();if(E&&E.isText()&&_&&/^\u200b/.test(_))return o.setEnd(E,1),!1}}return a.isInline(g)&&!g.isCard()&&setTimeout(function(){r.repairCursor(g)},100),!0}var T=r.closest(h);if(a.isInline(T)){if(T.isCard()||v>1)return!0;var x=h.prev(),C=h.parent();if(C&&a.isInline(C)){if(x)return!0;var S=h.text(),R=S.substr(0,v);if(!/\u200b$/.test(R))return!0}else if(v===0){for(;!x&&C&&!a.isInline(C);){var z;x=C.prev(),C=(z=C)===null||z===void 0?void 0:z.parent()}if(x&&!x.isText()||x&&!/\u200b$/.test(x.text()))return!0}else return!0;var F=T.prev(),G=F==null?void 0:F.text();if(F&&F.isText()&&G&&/\u200b$/.test(G)){if(o.setStart(F,G.length-1),a.isEmpty(T)){var M=T.next(),O=M==null?void 0:M.text();M&&M.isText()&&O&&/^\u200b/.test(O)&&o.setEnd(M,1)}else o.collapse(!0);return n.range.select(o),!1}return!0}else{var A=h.prev(),I=h.parent(),$=void 0;if(A){if(a.isInline(A)&&!A.isCard()){var ie=h.text(),N=ie.substr(0,v);if(!/^\u200b$/.test(N))return!0;$=A}}else if(v===0){for(;!A&&I&&!a.isBlock(I);){var P;A=I.prev(),I=(P=I)===null||P===void 0?void 0:P.parent()}if(A&&!A.isText())return!0;if(A){if(!/^\u200b$/.test(A.text()))return!0;if(A=A.prev(),A&&a.isInline(A))$=A;else return!0}}else return!0;if($){var V=$.last(),W=V==null?void 0:V.text();if(V&&V.isText()&&W&&/\u200b$/.test(W))return e.preventDefault(),o.setStart(V,W.length-1),o.collapse(!0),n.range.select(o),!1}}}return!0}}]),f}(),kb=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.inline,a=t.node,o=n.range.get().cloneRange().shrinkToTextNode(),l=o.startNode,u=o.startOffset,c=this.engine.card.getSingleCard(o);if(!c&&l.type===Node.TEXT_NODE){var h=r.closest(l);if(a.isInline(h)){if(h.isCard())return;if(u>1)return!0;var v=l.prev(),g=l.parent();if(g&&a.isInline(g)){if(v)return!0;var p=l.text(),b=p.substr(0,u);if(!/^\u200b$/.test(b))return!0}else if(u===0){for(;!v&&g&&!a.isInline(g);){var y;v=g.prev(),g=(y=g)===null||y===void 0?void 0:y.parent()}if(v&&!v.isText()||v&&!/^\u200b$/.test(v.text()))return!0}else return!0;var k=h.prev(),E=k==null?void 0:k.text();if(k&&k.isText()&&E&&/\u200b$/.test(E)){e.preventDefault();var _=o.cloneRange(),T=_.collapsed;return o.setStart(k,E.length-1),T&&o.collapse(!0),n.range.select(o),!1}return!0}else{var x=l.prev(),C=l.parent(),S=void 0;if(x){if(a.isInline(x)&&!x.isCard()){var R=l.text(),z=R.substr(0,u);if(!/^\u200b$/.test(z))return!0;S=x}}else if(u===0){for(;!x&&C&&!a.isBlock(C);){var F;x=C.prev(),C=(F=C)===null||F===void 0?void 0:F.parent()}if(x&&!x.isText())return!0;if(x){if(!/^\u200b$/.test(x.text()))return!0;if(x=x.prev(),x&&a.isInline(x))S=x;else return!0}}else return!0;if(S){e.preventDefault();var G=S.last(),M=G==null?void 0:G.text();if(G&&G.isText()&&M&&/\u200b$/.test(M)){var O=o.cloneRange(),A=O.collapsed;return o.setStart(G,M.length-1),A&&!Le("shift+left",e)&&o.collapse(!0),n.range.select(o),!1}}}}return!0}}]),f}(),Eb=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.inline,a=t.node,o=n.range.get().cloneRange().shrinkToTextNode(),l=o.endNode,u=o.endOffset,c=this.engine.card.getSingleCard(o);if(!c&&l.type===Node.TEXT_NODE){var h=r.closest(l),v=l.text();if(a.isInline(h)){if(h.isCard())return;if(u<v.length-1)return!0;var g=l.next(),p=l.parent();if(p&&a.isInline(p)){if(g)return!0;var b=v.substr(u);if(!/^\u200b$/.test(b))return!0}else if(u===v.length||u===v.length-1){for(;!g&&p&&!a.isInline(p);){var y;g=p.next(),p=(y=p)===null||y===void 0?void 0:y.parent()}if(g&&!g.isText())return!0;if(g){if(!/^\u200b$/.test(g.text()))return!0;if(u===v.length-1){e.preventDefault();var k=o.cloneRange(),E=k.collapsed;return o.setEnd(g,0),E&&o.collapse(!1),n.range.select(o),!1}}}else return!0;var _=h.next(),T=_==null?void 0:_.text();if(_&&_.isText()&&T&&/^\u200b/.test(T)){e.preventDefault();var x=o.cloneRange(),C=x.collapsed;return o.setEnd(_,1),C&&o.collapse(!1),n.range.select(o),!1}return!0}else{var S=l.next(),R=l.parent(),z=void 0;if(S){if(a.isInline(S)&&!S.isCard()){var F=v.substr(u);if(!/^\u200b$/.test(F))return!0;z=S}}else if(u===v.length){for(;!S&&R&&!a.isBlock(R);){var G;S=R.next(),R=(G=R)===null||G===void 0?void 0:G.parent()}if(S&&!S.isText())return!0;if(S){if(!/^\u200b$/.test(S.text()))return!0;if(S=S.next(),S&&a.isInline(S))z=S;else return!0}}else return!0;if(z){e.preventDefault();var M=z.first(),O=M==null?void 0:M.text();if(M&&M.isText()&&O&&/^\u200b/.test(O)){var A=o.cloneRange(),I=A.collapsed;return o.setEnd(M,1),I&&!Le("shift+right",e)&&o.collapse(!1),n.range.select(o),!1}}}}return!0}}]),f}(),xb=function(){function f(i){be(this,f),this.editor=void 0,this.editor=i}return ke(f,[{key:"init",value:function(){var e=this.editor;if(Ne(e)){var t,n,r,a=e.typing;e.event;var o=new wb(e);(t=a.getHandleListener("backspace","keydown"))===null||t===void 0||t.on(function(c){return o.trigger(c)});var l=new kb(e);(n=a.getHandleListener("left","keydown"))===null||n===void 0||n.on(function(c){return l.trigger(c)});var u=new Eb(e);(r=a.getHandleListener("right","keydown"))===null||r===void 0||r.on(function(c){return u.trigger(c)})}}},{key:"repairRange",value:function(e){var t=this.editor,n=t.change,r=t.node;e=e||n.range.get();var a=e,o=a.startNode,l=a.startOffset,u=a.endNode,c=a.endOffset,h=a.collapsed;if(h)return e;var v=this.closest(o);if(v&&r.isInline(v)&&l<=1){for(var g=!0,p=o;p&&!p.equal(v);){if(p.prev()){g=!1;break}p=p.parent()}if(g){var b=v.prev(),y=(b==null?void 0:b.text())||"";b&&b.isText()&&/\u200B$/g.test(y)&&e.setStart(b,y.length-1)}}var k=this.closest(u),E=k.last();if(k&&r.isInline(k)&&E&&u.equal(E)&&c>=E.text().length-1){for(var _=!0,T=o;T&&!T.equal(k);){if(T.next()){_=!1;break}T=T.parent()}if(_){var x=k.next(),C=(x==null?void 0:x.text())||"";x&&x.isText()&&/^\u200B/g.test(C)&&e.setEnd(x,1)}}return e}},{key:"closest",value:function(e){for(var t=this.editor.node,n=e.parent();n&&!n.isEditable()&&!t.isBlock(n);){if(t.isInline(n))return n;var r=n.parent();if(!r)break;n=r}return e}},{key:"closestNotInline",value:function(e){for(var t=this.editor.node;(t.isInline(e)||t.isMark(e)||e.isText())&&!e.isEditable();){var n=e.parent();if(!n)break;e=n}return e}},{key:"wrap",value:function(e,t){var n=this;if(!!Ne(this.editor)){var r=this.editor,a=r.change,o=r.mark,l=r.node,u=t||a.range.toTrusty(),c=wt(u.startContainer);if(typeof e=="string"||je(e)?e=H(e,c):e=e,!!l.isInline(e)){if(u.collapsed){this.insert(e,u),t||a.apply(u);return}o.split(u),this.split(u);var h=u.commonAncestorNode;if(h.type===Node.TEXT_NODE||l.isMark(h))for(h=h.parent();l.isMark(h);)h=h.parent();var v=u.enlargeToElementNode().createSelection();if(!v.has()){t||a.apply(u);return}var g=!1,p=l.clone(e,!1),b=[];h.traverse(function(R){if(R.equal(v.anchor)){g=!0;return}else{if(g){if(R.equal(v.focus))return g=!1,!1;if(l.isInline(R))if(R.isCard())b.push(R);else{var z=R.children();l.unwrap(R),R=z}if(l.isMark(R)&&!R.isCard()||R.isText())return l.isEmpty(R)?(R.remove(),!0):(p.parent()||R.before(p),p.append(R),n.repairCursor(p),b.push(p),!0);p[0].childNodes.length!==0&&!!p.parent()&&(p=l.clone(p,!1,!1))}return}});var y=v.anchor,k=v.focus,E=y==null?void 0:y.parent();if(E&&l.isRootBlock(E)&&!y.prev()&&!y.next()&&y.after("<br />"),!y.equal(k)){var _=k==null?void 0:k.parent();_&&l.isRootBlock(_)&&!k.prev()&&!k.next()&&k.before("<br />")}if(v.move(),b.length>0){var T=b[0];if(!T.isCard()){var x=T.first();u.setStart(x,1)}var C=b[b.length-1];if(!C.isCard()){var S=C.last();u.setEnd(S,S.text().length-1)}}t||a.apply(u)}}}},{key:"unwrap",value:function(e){var t=this.editor;if(!!Ne(t)){var n=t.change,r=t.mark,a=!e||!Li(e)?n.range.toTrusty():e;this.repairRange(a),r.split(a);var o=e&&!Li(e)?[e]:this.findInlines(a),l=a.createSelection();o.forEach(function(u){var c,h,v,g,p=u.prev();p&&p.isCursor()&&(p=p.prev());var b=u.next();b&&b.isCursor()&&(b=b.prev());var y=u.first();y&&y.isCursor()&&(y=y.next());var k=((c=p)===null||c===void 0?void 0:c.text())||"",E=((h=b)===null||h===void 0?void 0:h.text())||"",_=((v=y)===null||v===void 0?void 0:v.text())||"";p&&p.isText()&&/\u200B$/g.test(k)&&(/^\u200B$/g.test(k)?p.remove():p.text(k.substr(0,k.length-1))),b&&b.isText()&&/^\u200B/g.test(E)&&(/^\u200B$/g.test(E)?b.remove():b.text(E.substr(1))),y&&y.isText()&&/^\u200B/g.test(_)&&(/^\u200B$/g.test(_)||y.get().splitText(1),y.remove());var T=u.last();T&&T.isCursor()&&(T=T.prev());var x=((g=T)===null||g===void 0?void 0:g.text())||"";T&&T.isText()&&/\u200B$/g.test(x)&&(/^\u200B$/g.test(x)?T.remove():T.get().splitText(x.length-1).remove()),t.node.unwrap(u)}),l.move(),r.merge(a),e||n.apply(a)}}},{key:"insert",value:function(e,t){var n,r;if(!!Ne(this.editor)){var a=this.editor,o=a.change,l=a.node,u=a.mark,c=t||o.range.toTrusty(),h=wt(c.startContainer);if((typeof e=="string"||je(e))&&(e=H(e,h)),!!l.isInline(e)){c.collapsed||o.delete(c),u.split(c),this.split(c),(n=l.insert(e,c))===null||n===void 0||n.select(e).collapse(!1),e.name!=="br"&&c.handleBr();var v=((r=e.get())===null||r===void 0?void 0:r.childNodes.length)!==0;if(this.repairCursor(e),!e.isCard()&&!l.isVoid(e))if(v){var g=e.next();c.setStart(g,1),c.setEnd(g,1)}else{var p=e.last(),b=p.text();c.setStart(p,b.length-1),c.setEnd(p,b.length-1)}t||o.apply(c)}}}},{key:"unwrapEmptyInlines",value:function(e,t){var n=this.editor.node,r=e.allChildren();r.forEach(function(a){n.isEmpty(a)&&n.isInline(a)&&(!t||t(a))&&n.unwrap(a)})}},{key:"splitOnCollapsed",value:function(e,t){var n=this;if(!!e.collapsed){e.enlargeFromTextNode(),e.shrinkToElementNode();var r=e.startNode,a=r.parent(),o=this.editor.node,l=r.isCard()?r:r.closest(yt);if((l.length===0||l.attributes(Ot)!=="inline")&&(o.isInline(r)||a&&o.isInline(a))){var u,c=this.closestNotInline(r),h=e.createSelection(),v=h.getNode(c,"left"),g=void 0,p=void 0,b=[];if(t){je(t)&&(t=H(t));var y=t.getPath(c.get()),k=c.clone(!0);b=y.slice(1),p=H(k.getChildByPath(y.slice(0,1))),g=h.getNode(k,"right",!1)}else g=h.getNode(c,"right");this.unwrapEmptyInlines(v),this.unwrapEmptyInlines(g);var E=c.children();E.each(function(O,A){var I;if(!(!((I=E.eq(A))===null||I===void 0)&&I.isCard())){var $;($=E.eq(A))===null||$===void 0||$.remove()}});var _=void 0,T=function(A){A.each(function(I,$){var ie=A.eq($);if(ie!=null&&ie.isCard()){_=_?_.next():c.first(),_&&(A[$]=_[0]);return}_?(_.after(I),_=ie):(_=ie,c.prepend(I))})},x=v.children(),C=x.toArray();T(x);var S=g.children(),R=S.toArray();if(p&&(t=(u=R.find(function(O){return O.equal(p)}))===null||u===void 0?void 0:u.getChildByPath(b)),T(S),R=S.toArray(),C.length===1&&C[0].name==="br"&&(C[0].remove(),C.splice(0,1)),R.length===1&&R[0].name==="br"&&(R[0].remove(),R.splice(0,1)),R.filter(function(O){return!O.isCursor()}).length>0){for(var z=R[0],F=0;F<R.length-1&&(z=R[F],!!z.isCursor());F++);e.setStartBefore(z),e.collapse(!0)}else if(C.filter(function(O){return!O.isCursor()}).length>0){for(var G=C[C.length-1],M=C.length-1;M>=0&&(G=C[M],!!G.isCursor());M--);e.setStartAfter(G),e.collapse(!0)}else e.select(c,!0).collapse(!0);c.traverse(function(O){o.isInline(O)&&n.repairCursor(O)})}return e.enlargeToElementNode(!o.isBlock(e.startNode),!1),t}}},{key:"splitOnExpanded",value:function(e){var t=this;if(!e.collapsed){e.enlargeToElementNode(),e.shrinkToElementNode();var n=e.startNode,r=e.endNode,a=n.isCard()?n:n.closest(yt),o=r.isCard()?r:r.closest(yt);if(!(a.length>0&&a.attributes(Ot)==="inline"||o.length>0&&o.attributes(Ot)==="inline")){var l=this.closestNotInline(n),u=this.closestNotInline(r);if(!l.equal(u)){var c=e.cloneRange();c.collapse(!0);var h=e.cloneRange();h.collapse(!1);var v=void 0,g=c.startOffset,p=h.endOffset;l.contains(u)?(v=this.splitOnCollapsed(c,h.endNode),e.setStart(c.startContainer,c.startOffset),v&&h.setOffset(v,p,p),this.splitOnCollapsed(h),e.setEnd(h.startContainer,h.startOffset)):(v=this.splitOnCollapsed(h,c.startNode),e.setEnd(h.startContainer,h.startOffset),v&&c.setOffset(v,g,g),this.splitOnCollapsed(c),e.setStart(c.startContainer,c.startOffset));return}var b=this.editor.node,y=n.parent(),k=b.isInline(n)||y&&b.isInline(y),E=r.parent(),_=b.isInline(r)||E&&b.isInline(E);if(!k&&!_)return;var T=e.commonAncestorNode;T.isText()&&(T=T.parent());var x=this.closestNotInline(T),C=e.createSelection(),S=C.getNode(x,"left"),R=C.getNode(x),z=C.getNode(x,"right");this.unwrapEmptyInlines(S),this.unwrapEmptyInlines(z);var F=x.children();F.each(function(I,$){var ie;if(!(!((ie=F.eq($))===null||ie===void 0)&&ie.isCard())){var N;(N=F.eq($))===null||N===void 0||N.remove()}});var G=void 0,M=function($){$.each(function(ie,N){var P;if(!((P=$.eq(N))===null||P===void 0)&&P.isCard()){G=G?G.next():x.first(),G&&($[N]=G[0]);return}G?(G.after(ie),G=$.eq(N)):(G=$.eq(N),x.prepend(ie))})};M(S.children());var O=R.children(),A=O.toArray();M(O),M(z.children()),x.traverse(function(I){b.isInline(I)&&t.repairCursor(I)}),e.setStartBefore(A[0][0]),e.setEndAfter(A[A.length-1][0])}}}},{key:"split",value:function(e){if(!!Ne(this.editor)){var t=this.editor.change,n=e||t.range.toTrusty();n.collapsed?this.splitOnCollapsed(n):this.splitOnExpanded(n),e||t.apply(n)}}},{key:"findInlines",value:function(e){var t=e.cloneRange();if(t.startNode.isRoot()&&t.shrinkToElementNode(),!t.startNode.inEditor()||this.editor.card.find(t.startNode))return[];var n=this.editor.node,r=function(R,z){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!!z.collapsed){var G=z.startNode,M=z.startOffset,O=G.findParent();if(!!O){var A=z.cloneRange();if(A.select(O,!0),F){A.setEnd(G,M),A.enlargeFromTextNode(),A.enlargeToElementNode(!0);var I=G.children(),$=A.endNode,ie=A.endOffset,N=$.children(),P=N.eq(ie),V=I.eq(M)||I.eq(M-1);if(!R&&$.type===Node.ELEMENT_NODE&&P&&n.isBlock(P)&&(G.type!==Node.ELEMENT_NODE||!!V&&!n.isBlock(V)))return;A.select(O,!0),A.setStart($,ie),A.shrinkToElementNode(),A.shrinkToTextNode(),z.setStart(A.startContainer,A.startOffset),z.collapse(!0)}else{A.setStart(G,M),A.enlargeFromTextNode(),A.enlargeToElementNode(!0);var W=G.children(),Y=A.startNode,Q=A.startOffset,re=Y.children(),te=re.eq(Q),J=W.eq(M)||W.eq(M-1);if(!R&&Y.type===Node.ELEMENT_NODE&&te&&n.isBlock(te)&&(G.type!==Node.ELEMENT_NODE||J&&!n.isBlock(J)))return;A.select(O,!0),A.setEnd(Y,Q),A.shrinkToElementNode(),A.shrinkToTextNode(),z.setEnd(A.endContainer,A.endOffset),z.collapse(!1)}}}};if(!t.collapsed){var a=t.cloneRange(),o=t.cloneRange();a.collapse(!0),o.collapse(!1),r(!0,a,!0),r(!0,o),t.setStart(a.startContainer,a.startOffset),t.setEnd(o.startContainer,o.startOffset)}r(!1,t);var l=t.startContainer,u=t.startOffset,c=t.endContainer,h=t.endOffset,v=l,g=c;l.nodeType===Node.ELEMENT_NODE&&l.childNodes[u]&&(v=l.childNodes[u]||l),c.nodeType===Node.ELEMENT_NODE&&h>0&&c.childNodes[h-1]&&(g=c.childNodes[h-1]||l),t.collapsed&&(v=g);var p=function(R,z){R.some(function(F){return F[0]===z[0]})||R.push(z)},b=function(R){for(var z=[];R&&!R.isEditable();){n.isInline(R)&&z.push(R);var F=R.parent();if(!F)break;R=F}return z},y=b(H(v)),k=t.commonAncestorNode,E=this.editor.card.find(k,!0),_=E==null?void 0:E.isEditable,T=_?E!=null&&E.getSelectionNodes?E.getSelectionNodes():[]:[k];if(T.length===0&&(_=!1,T.push(k)),(!t.collapsed||_)&&(b(H(g)).forEach(function(S){return p(y,S)}),l!==c||_)){var x=!1,C=!1;T.forEach(function(S){S.traverse(function(R){if(C)return!1;if(R.equal(l))x=!0;else if(x){if(R.equal(c))return C=!0,!1;n.isInline(R)&&!R.attributes(He)&&!R.attributes(lt)&&p(y,R)}})})}return y}},{key:"repairCursor",value:function(e){var t,n,r=this.editor.node;if(je(e)&&(e=H(e)),!r.isInline(e)||e.closest(yt).attributes(or)==="false"||r.isVoid(e)||e.isCard()){var a=e.prev(),o=a!=null&&a.isText()?a.text():void 0;if(o&&/\u200b$/.test(o)){var l=a==null?void 0:a.prev();(!l||!r.isInline(l))&&(o.length===1?a==null||a.remove():a==null||a.text(o.slice(0,-1)))}var u=e.next(),c=u!=null&&u.isText()?u.text():void 0;if(c&&/^\u200b/.test(c)){var h=u==null?void 0:u.next();(!h||!r.isInline(h))&&(c.length===1?u==null||u.remove():u==null||u.text(c.slice(1)))}return}var v=e.children();v.each(function(b,y){var k=v.eq(y);if(k!=null&&k.isText()){var E=k.text();if(E.length===1&&/\u200b/.test(E)){k.remove();return}k.text(E.replace(/\u200b/g,""))}}),this.repairBoth(e);var g=e.first();!((t=g)===null||t===void 0)&&t.isCursor()&&(g=g.next()),(!g||g.type!==Node.TEXT_NODE||!/^\u200B/g.test(g.text()))&&(g?g.isText()?g.text("\u200B"+g.text()):g.before(H("\u200B",null)):e.append(H("\u200B",null)));var p=e.last();!((n=p)===null||n===void 0)&&n.isCursor()&&(p=p.prev()),p&&(/^\u200B$/g.test(e.text())||p.type!==Node.TEXT_NODE||!/\u200B$/g.test(p.text()))&&(p.isText()?p.text(p.text()+"\u200B"):p.after(H("\u200B",null)))}},{key:"repairBoth",value:function(e){var t,n=this.editor.node;if(je(e)&&(e=H(e)),((t=e.get())===null||t===void 0?void 0:t.parentNode)&&!n.isVoid(e)){var r=H("\u200B",null),a=e.prev(),o=a==null?void 0:a.prev(),l=(a==null?void 0:a.text())||"";!a||!a.isText()||!/\u200B$/g.test(l)||o&&n.isInline(o)&&!/\u200B.*\u200B$/g.test(l)?a&&a.isText()?a.text(l+"\u200B"):e.before(n.clone(r,!0,!1)):a&&a.isText()&&/\u200B\u200B$/g.test(l)&&o&&!n.isInline(o)&&a.text(l.substr(0,l.length-1));var u=e.next(),c=(u==null?void 0:u.text())||"",h=u==null?void 0:u.next();!u||!u.isText()||!/^\u200B/g.test(c)||h&&n.isInline(h)&&!/^\u200B\u200B/g.test(c)?u&&u.isText()?u.text("\u200B"+u.text()):(e.after(n.clone(r,!0,!1)),(u==null?void 0:u.name)==="br"&&u.remove()):u&&u.isText()&&/\u200B\u200B$/g.test(c)&&h&&!n.isInline(h)&&u.text(c.substr(0,c.length-1))}}},{key:"flat",value:function(e,t){var n=this;if(Li(e)){var r=e.cloneRange().shrinkToElementNode().createSelection(),a=this.findInlines(e),o=[];a.forEach(function(g){if(!g.isCard()){var p=n.flat(g);p&&o.push(p)}}),r.move();var l=this.editor.node;o.forEach(function(g){var p,b,y=(p=g.prev())===null||p===void 0?void 0:p.prev(),k=(b=g.next())===null||b===void 0?void 0:b.next();y&&l.isMark(y)&&y.get().childNodes.length===0&&y.remove(),k&&l.isMark(k)&&k.get().childNodes.length===0&&k.remove()});return}if(!e.isCard()){var u=this.editor.node,c=this.editor.mark;if(u.isInline(e,t)&&e.name!=="br"){var h=this.closest(e);if(!h.equal(e)&&u.isInline(h,t))u.unwrap(e);else{var v=function(){for(var g=c.closest(e),p=e,b=function(){var k=g.clone(),E=e.clone(),_=g.children();_.each(function(T){if(!(T.nodeType===3&&/^\u200b$/.test(T.textContent||""))){var x=H(T);p.equal(x)||x.contains(p)?(p=u.wrap(u.replace(p,k),E),n.repairBoth(p)):u.wrap(x,k)}}),u.unwrap(g),g=c.closest(p)};g&&!g.equal(e)&&u.isMark(g,t);)b();return{v:p}}();if(et(v)==="object")return v.v}}}}}]),f}(),Cb=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.node;t.list;var a=n.range.get().shrinkToElementNode().shrinkToTextNode(),o=this.engine.block,l=o.closest(a.endNode),u=l.parent();if(u&&u.inEditor()&&r.isBlock(u)){var c;if(u.name==="li"&&l.name==="p"){var h,v;((h=l.get())===null||h===void 0?void 0:h.childNodes.length)===1&&((v=l.first())===null||v===void 0?void 0:v.name)==="br"&&l.first().remove();var g=a.createSelection();n.unwrap(l),g.move(),l=o.closest(a.endNode)}if(a.collapsed&&(a.startContainer.childNodes.length===1&&((c=a.startContainer.firstChild)===null||c===void 0?void 0:c.nodeName)==="BR"||o.isLastOffset(a,"end")&&o.isFirstOffset(a,"end")))return e.preventDefault(),["li"].indexOf(u.name)>=0?(o.unwrap("<".concat(u.name," />")),o.setBlocks("<".concat(u.name," />"))):(o.unwrap("<".concat(u.name," />")),o.setBlocks("<p />")),!1}if(r.isBlock(l)&&(!u||!r.isList(u))&&!l.isCard())return e.preventDefault(),o.insertOrSplit(a,l),!1;if(l.name!=="li")return!0}}]),f}(),_b=function(){function f(i){be(this,f),this.engine=void 0,this.engine=i}return ke(f,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.node,a=t.block,o=t.card,l=n.range.get();if(!!l.collapsed){var u=l.getPrevNode();if(u&&r.isBlock(u)&&r.isEmptyWithTrim(u)){e.preventDefault();var c=u.parent();return u.remove(),c&&this.engine.node.isEmpty(c)&&(c.isEditable()?(this.engine.node.html(c,"<p><br /></p>"),l.select(c,!0).shrinkToElementNode().collapse(!1)):(this.engine.node.html(c,"<br />"),l.select(c,!0).collapse(!1)),n.apply(l)),!1}var h=!!o.closest(l.startNode);if(!h&&!a.isFirstOffset(l,"start")){var v=l.cloneRange().shrinkToElementNode().shrinkToTextNode();v.startContainer.nodeType===Node.TEXT_NODE&&function(p){var b=p,y=b.commonAncestorContainer,k=b.commonAncestorNode,E=k.parent(),_=E==null?void 0:E.attributes();if(p.collapsed&&p.startOffset===1&&p.startContainer===y&&y.nodeType===Node.TEXT_NODE&&(!_||!["left","right"].includes(_[lt]))){var T,x,C;if(p=p.cloneRange(),(((T=y.parentNode)===null||T===void 0||(x=T.childNodes)===null||x===void 0?void 0:x.length)||0)<=1&&((C=y.textContent)===null||C===void 0?void 0:C.length)===1){var S=p,R=S.startNode,z=S.startOffset,F=R.parent();if(F&&r.isMark(F)&&z>0){var G=R.text(),M=G.substr(z-1,1);if(/^\u200b$/.test(M))if(z===1){var O=F.prev();if(O&&!r.isEmpty(O)){var A=p.cloneRange().select(O,!0).shrinkToTextNode().collapse(!1),I=A.startNode,$=A.startOffset;p.setStart(I,$-1)}}else p.setStart(R,z-1)}return p.collapsed&&p.select(y,!0),n.delete(p,!0),n.apply(p),!0}}return!1}(v)&&(e.preventDefault(),e.isDelete=!0,n.change());return}var g=a.closest(l.startNode);return!h&&r.isRootBlock(g)?(e.preventDefault(),r.isEmpty(g)&&g.html("<br />"),n.mergeAfterDelete(g),n.change(!1),!1):!0}}}]),f}(),Ab=function(){function f(i){be(this,f),this.editor=void 0,this.pluginCaches=new Map,this.editor=i}return ke(f,[{key:"init",value:function(){var e=this,t=this.editor;if(Ne(t)){var n,r,a=t.typing,o=t.event,l=new Cb(t);(n=a.getHandleListener("enter","keydown"))===null||n===void 0||n.on(function(c){return l.trigger(c)});var u=new _b(t);(r=a.getHandleListener("backspace","keydown"))===null||r===void 0||r.on(function(c){return u.trigger(c)}),o.on("keyup:space",function(c){return e.triggerMarkdown(c)})}}},{key:"triggerMarkdown",value:function(e){var t,n=this.editor;if(!(!Ne(n)||((t=n.options.markdown)===null||t===void 0?void 0:t.mode)===!1)){var r=n.change;n.block;var a=r.range.get();if(!(!a.collapsed||r.isComposing())){var o=a.startNode,l=a.startOffset,u=o.type===Node.TEXT_NODE?o:o.children().eq(l-1);if(!!u){var c=this.closest(u);if(!!n.node.isRootBlock(c)){var h=u.text().trimEnd(),v=a.toPath(),g=ho(this.editor,"zero"),p=g.parse(h,{});if(p.length!==0){var b=tl(this.editor,g,p,!1);return b?(e.preventDefault(),a.select(c,!0),r.paste(b,a),r.rangePathBeforeCommand=v,r.range.select(a),!1):!0}}}}}}},{key:"findPlugin",value:function(e){var t=this.editor,n=t.node,r=t.schema,a=t.plugin;if(!(e.length===0||!n.isBlock(e))){var o=e.get().cloneNode(),l=o.outerHTML,u=this.pluginCaches.get(l);if(u)return u;for(var c in a.components){var h=a.components[c];if(df(h)&&(!h.tagName||typeof h.tagName=="string"?e.name===h.tagName:h.tagName.indexOf(e.name)>-1)){var v=h.schema();if(Array.isArray(v)?v.find(function(g){return r.checkNode(e,g.attributes)}):r.checkNode(e,v.attributes))return this.pluginCaches.set(l,h),h}}return u}}},{key:"findTop",value:function(e,t){var n=this.editor,r=n.schema,a=n.node,o=n.list,l=r.closest(e.name),u=r.closest(t.name);if(l===parent.name||u===t.name)return t;if(r.isAllowIn(e.name,t.name))return e;if(a.isList(e)&&a.isList(t)){var c=parseInt(t.attributes(o.INDENT_KEY),10)||0,h=parseInt(e.attributes(o.INDENT_KEY),10)||0;t.attributes(o.INDENT_KEY,h?h+1:c+1)}return t}},{key:"closest",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},n=e;e;){if((e.isEditable()||this.editor.node.isBlock(e))&&t(e))return e;var r=e.parent();if(!r)break;e=r}return n}},{key:"wrap",value:function(e,t){var n=this,r;if(!!Ne(this.editor)){var a=this.editor,o=a.change,l=a.node,u=a.schema,c=a.list,h=a.mark,v=t||o.range.toTrusty(),g=wt(v.startContainer);if(typeof e=="string"||je(e)?e=H(e,g):e=e,!!l.isBlock(e)){var p=this.getBlocks(v),b=this.findPlugin(e);if(p=p.map(function(_){var T;if(!_||_.isCard())return null;for(var x=e,C=(T=_)===null||T===void 0?void 0:T.parent();C&&!C.isEditable();){_=C;var S=C.parent();if(S&&l.isBlock(S))C=S;else break}return u.isAllowIn(x.name,_.name)?_:n.findPlugin(_)===b?_.children():null}).filter(function(_){return _!==null}),p.length===0){var y=this.closest(v.startNode);if(y.isCard()||y.isEditable()||!u.isAllowIn(e.name,y.name))return;var k=v.createSelection();y.children().each(function(_){e.append(_)}),y.append(e),k.move();return}var E=v.createSelection();(r=p[0])===null||r===void 0||r.before(e),p.forEach(function(_){_&&(b&&_.allChildren().forEach(function(T){if(l.isMark(T)){var x,C=h.findPlugin(T);if(!C)return;!((x=b.disableMark)===null||x===void 0)&&x.indexOf(C.constructor.pluginName)&&l.unwrap(T)}}),e.append(_))}),E.move(),this.merge(v),c.merge(void 0,v),t||o.apply(v)}}}},{key:"unwrap",value:function(e,t){if(!!Ne(this.editor)){var n=this.editor,r=n.change,a=n.node,o=t||r.range.toTrusty(),l=wt(o.startContainer);if(typeof e=="string"||je(e)?e=H(e,l):e=e,!!a.isBlock(e)){var u=this.getSiblings(o,e);if(u.length!==0){var c=u[0].node.parent();if(!!(c!=null&&c.inEditor())){var h=u.some(function(_){return _.position==="left"}),v=u.some(function(_){return _.position==="right"}),g=void 0;if(h){var p=c;g=a.clone(p,!1,!1),p.before(g)}var b=void 0;if(v){var y=u[u.length-1].node.parent();y&&(b=a.clone(y,!1,!1),y==null||y.after(b))}var k=o.createSelection(),E=a;u.forEach(function(_){var T=_.position,x=_.node,C=x.parent();if(T==="left"){var S;(S=g)===null||S===void 0||S.append(x)}if(T==="center"){var R;(C==null?void 0:C.name)===((R=e)===null||R===void 0?void 0:R.name)&&(C==null?void 0:C.inEditor())&&E.unwrap(C)}if(T==="right"){var z;(z=b)===null||z===void 0||z.append(x)}}),g&&g.name==="ol"&&b&&b.name==="ol"&&b.attributes("start",(parseInt(g.attributes("start"),10)||1)+g.find("li").length),k.move(),t||r.apply(o)}}}}}},{key:"getSiblings",value:function(e,t){var n=this,r=[],a=this.editor.node;if(!a.isBlock(t))return r;for(var o=function(p,b){for(var y=n.closest(p);y;){var k=y.parent();if(!k||!y.inEditor()||y.text().trim()!==k.text().trim()||k.name===b)break;y=k}return y},l=o(e.startNode,t.name),u=o(e.endNode,t.name),c=l.parent(),h="left",v=c==null?void 0:c.first();v;){if(v=H(v),!a.isBlock(v)||!v.inEditor())return r;v[0]===l[0]&&(h="center"),r.push({position:h,node:v}),v[0]===u[0]&&(h="right"),v=v.next()}return r}},{key:"split",value:function(e){var t=this,n,r;if(!!Ne(this.editor)){var a=this.editor,o=a.change,l=a.mark,u=a.nodeId,c=e||o.range.toTrusty();c.collapsed||o.delete(c);var h=this.closest(c.startNode);if(!(!h.isEditable()&&!h.inEditor())){if(h.isEditable()){var v=c.getStartOffsetNode();v&&c.select(v,!0).shrinkToElementNode().collapse(!1),e||o.apply(c);return}var g=c.cloneRange();g.shrinkToElementNode().shrinkToTextNode().collapse(!0);var p=l.findMarks(g).filter(function(E){var _=t.editor.mark.findPlugin(E);return(_==null?void 0:_.copyOnEnter)!==!1&&(_==null?void 0:_.followStyle)!==!1}),b=this.getBlockByRange({block:h[0],range:c,isLeft:!1,keepDataId:!0}),y=this.editor.node;b.traverse(function(E){!y.isVoid(E)&&(y.isInline(E)||y.isMark(E))&&y.isEmpty(E)&&E.remove()},!0);var k=function(_){return y.isBlock(_)&&(_.childNodes.length===0||_.innerText==="")};return k(h[0])&&!k(b[0])?u.generate(h,!0):u.generate(b,!0),h.after(b),y.isEmpty(h)&&y.html(h,y.getBatchAppendHTML(p,p.length>0?"&#8203;":"<br />")),y.isEmpty(b)&&y.html(b,y.getBatchAppendHTML(p,p.length>0?"&#8203;":"<br />")),h.children().each(function(E){y.isInline(E)&&t.editor.inline.repairCursor(E)}),b.children().each(function(E){y.isInline(E)&&t.editor.inline.repairCursor(E)}),c.select(b,!0).shrinkToElementNode(),((n=b.get())===null||n===void 0?void 0:n.childNodes.length)===1&&((r=b.first())===null||r===void 0?void 0:r.name)==="br"?c.collapse(!1):c.collapse(!0),e||o.apply(c),b}}}},{key:"insert",value:function(e,t,n){var r,a,o=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!!Ne(this.editor)){var u=this.editor,c=u.change,h=u.node,v=u.list,g=u.inline,p=t||c.range.toTrusty(),b=wt(p.startContainer);if(typeof e=="string"||je(e)?e=H(e,b):e=e,!!h.isBlock(e)){p.collapsed||c.delete(p);var y=this.closest(p.startNode);if(!y.isEditable()&&!y.inEditor()){t||c.apply(p);return}if(y.isEditable()){h.insert(e,p,l),p.collapse(!1),t||c.apply(p);return}if(h.isList(p.startNode)||p.startNode.closest("li").length>0){var k=b.createDocumentFragment();k.appendChild(e[0]),v.insert(k,p),t||c.apply(p);return}((r=y.get())===null||r===void 0?void 0:r.childNodes.length)===1&&((a=y.first())===null||a===void 0?void 0:a.name)==="br"&&p.select(y,!0).collapse(!1);var E=p.enlargeToElementNode().createSelection();if(!E.has()){t||c.apply(p);return}y=n?n(y):y;var _=E.getNode(y,"left");_.traverse(function(F){F.equal(_)||h.isBlock(F)&&(h.isEmpty(F)||v.isEmptyItem(F))&&F.remove()});var T=E.getNode(y,"right",!0,function(F){if(F.isCard()){var G=F.parent();if(G&&h.isCustomize(G))return!1}return!0}),x=y.children();if(h.isEmpty(y)||x.each(function(F,G){var M=x.eq(G);if(!(M!=null&&M.isCard())){var O;(O=x.eq(G))===null||O===void 0||O.remove()}}),T.traverse(function(F){!F.equal(T)||(h.isBlock(F)&&(h.isEmpty(F)||v.isEmptyItem(F))?F.remove():h.isList(F)&&v.addBr(F))}),T.length>0&&!h.isEmpty(T)&&!v.isEmptyItem(T)){var C=T.clone(!1);this.editor.nodeId.generate(C,!0);var S=T.children();S.each(function(F,G){var M;if(!((M=S.eq(G))===null||M===void 0)&&M.isCard()){var O=o.editor.card.find(F);O&&C.append(O.root)}else C.append(F)}),T=C,y.after(C)}if(_.length>0&&!h.isEmpty(_)&&!v.isEmptyItem(_)){var R=void 0,z=function(G){G.each(function(M,O){var A=G.eq(O);if(A&&h.isInline(A)&&g.repairCursor(A),A!=null&&A.isCard()){R=R?R.next():y.first(),R&&(G[O]=R[0]);return}R?(R.after(M),R=A):(R=A,y.prepend(M))})};z(_.children())}y&&y.length>0&&(p.select(y,!0),p.collapse(!1)),E.focus&&E.focus.remove(),E.anchor&&E.anchor.remove(),h.insert(e,p,l),t||c.apply(p)}}}},{key:"setBlocks",value:function(e,t){var n=this;if(!!Ne(this.editor)){var r=this.editor,a=r.node,o=r.schema,l=r.mark,u=this.editor.change,c=t||u.range.toTrusty(),h=wt(c.startContainer),v=null,g={};typeof e=="string"?(v=H(e,h),g=v.attributes(),g.style=v.css()):g=e;var p=this.getBlocks(c),b=c.startNode;if(b.isEditable()&&p.length===0){if(b.isCard()||b.isEditable())return;var y=v||H("<p></p>");if(!o.isAllowIn(y.name,b.name))return;a.setAttributes(y,g);var k=c.createSelection();b.children().each(function(R){y.append(R)});var E=o.data.globals.block||{},_=b.attributes();Object.keys(_).forEach(function(R){R!==qe&&R!=="id"&&E.name&&y.attributes(R,_[R])});var T=E.style||{},x=b.css();Object.keys(x).forEach(function(R){T[R]||delete x[R]}),y.css(x),b.append(y),k.move(),t||u.apply(c);return}var C=v?this.findPlugin(v):void 0,S=c.createSelection();p.forEach(function(R){if(!R.attributes(He)){if(v){var z=o.data.globals.block||{},F=R.attributes();Object.keys(F).forEach(function(I){if(I!==qe&&I!=="id"&&z.name){var $;($=v)===null||$===void 0||$.attributes(I,F[I])}});var G=z.style||{},M=R.css();Object.keys(M).forEach(function(I){G[I]||delete M[I]}),v.css(M)}if(!v||n.findPlugin(R)===C&&R.name===v.name){v&&(g=v.attributes()),a.setAttributes(R,g);return}if(!(v.name!=="p"&&o.isAllowIn(R.name,v.name))){C&&R.allChildren().forEach(function(I){if(a.isMark(I)){var $=l.findPlugin(I);if(!$)return;C.disableMark&&C.disableMark.indexOf($.constructor.pluginName)>-1&&a.unwrap(I)}});var O=a.replace(R,v),A=O.parent();A&&!A.isEditable()&&!o.isAllowIn(A.name,O.name)&&a.unwrap(A)}}}),S.move(),t||u.apply(c)}}},{key:"merge",value:function(e){if(!!Ne(this.editor)){var t=this.editor,n=t.change,r=t.schema,a=e||n.range.toTrusty(),o=this.getBlocks(a);if(o.length!==0){var l=o[0].closest(Tr),u=r.getCanMergeTags();if(u.length!==0){var c=l.find(u.join(","));if(c.length>0){for(var h=a.createSelection(),v=c.next();v&&u.indexOf(v.name)>0;){var g=v.prev(),p=v.attributes(),b=g==null?void 0:g.attributes();v.name===(g==null?void 0:g.name)&&p.class===(b?b.class:void 0)&&Object.keys(p).join(",")===Object.keys(b||{}).join(",")&&this.editor.node.merge(g,v),v=v.next()}h.move()}e||n.apply(a)}}}}},{key:"findBlocks",value:function(e){var t,n=this;if(e=e.cloneRange(),e.startNode.isRoot()&&e.shrinkToElementNode(),!e.startNode.inEditor()||((t=this.editor.card.find(e.startNode))===null||t===void 0?void 0:t.type)===Nt.BLOCK)return[];var r=e.startContainer,a=e.startOffset,o=e.endContainer,l=e.endOffset,u=r,c=o;r.nodeType===Node.ELEMENT_NODE&&r.childNodes[a]&&(u=r.childNodes[a]||r),o.nodeType===Node.ELEMENT_NODE&&l>0&&o.childNodes[l-1]&&(c=o.childNodes[l-1]||r),e.collapsed&&(u=c);var h=function(T,x,C){T.some(function(S){return S[0]===x[0]})||(C?T.unshift(x):T.push(x))},v=function(T){for(var x=[];T&&!T.isEditable();){n.editor.node.isBlock(T)&&x.push(T);var C=T.parent();if(!C)break;T=C}return x},g=this.getBlocks(e);v(H(u)).forEach(function(_){return h(g,_,!0)});var p=e,b=p.commonAncestorNode,y=this.editor.card.find(b,!0),k=y==null?void 0:y.isEditable,E=k?y!=null&&y.getSelectionNodes?y.getSelectionNodes():[]:[];return E.length===0&&(k=!1),(!e.collapsed||k)&&(v(H(c)).forEach(function(_){return h(g,_)}),E.forEach(function(_){_.traverse(function(T){T.isElement()&&!T.isCard()&&n.editor.node.isBlock(T)&&h(g,T)},!0,"editable")})),g}},{key:"isFirstOffset",value:function(e,t){var n=e,r=n.startNode,a=n.endNode,o=n.startOffset,l=n.endOffset,u=t==="start"?r:a,c=t==="start"?o:l;e=e.cloneRange();var h=this.closest(u);e.select(h,!0),e.setEnd(u[0],c),this.editor.node.isBlock(u)||e.enlargeToElementNode();var v=e.cloneContents();if(!v.firstChild)return!0;var g=this.editor.node;if(v.childNodes.length===1&&H(v.firstChild).name==="br")return!0;var p=H("<div />");return p.append(v),g.isEmpty(p)}},{key:"isLastOffset",value:function(e,t){var n=e,r=n.startNode,a=n.endNode,o=n.startOffset,l=n.endOffset,u=t==="start"?r:a,c=t==="start"?o:l;e=e.cloneRange();var h=this.closest(u);e.select(h,!0),e.setStart(u,c),this.editor.node.isBlock(u)||e.enlargeToElementNode();var v=e.cloneContents();if(!v.firstChild)return!0;var g=this.editor.node,p=H("<div />");return p.append(v),0>=p.find("br").length&&g.isEmpty(p)}},{key:"getBlocks",value:function(e){var t=this;e=e.cloneRange(),e.shrinkToElementNode(),e.shrinkToTextNode();var n=this.editor.node,r=this.closest(e.startNode);e.startNode.isRoot()&&(r=H(e.getStartOffsetNode()));var a=this.closest(e.endNode);e.endNode.isRoot()&&(a=H(e.getEndOffsetNode()));var o=this.closest(e.commonAncestorNode),l=[],u=!1,c=e,h=c.commonAncestorNode,v=this.editor.card.find(h,!0),g=v==null?void 0:v.isEditable,p=g?v!=null&&v.getSelectionNodes?v.getSelectionNodes():[]:[o];return p.length===0&&(g=!1,p.push(o)),p.forEach(function(b){b.traverse(function(y){var k=H(y);if(k.equal(r)&&(u=!0),(u||g)&&t.editor.node.isBlock(k)&&!k.isCard()&&k.inEditor()&&l.push(k),k.equal(a))return u=!1,!1},!0,"editable")}),l.length>1&&this.isFirstOffset(e,"end")&&!n.isEmpty(a)&&l.pop(),l}},{key:"getBlockByRange",value:function(e){var t=e.block,n=e.range,r=e.isLeft,a=e.clone,o=a===void 0?!1:a,l=e.keepDataId,u=l===void 0?!1:l;je(t)&&(t=H(t));var c=Ge.create(this.editor,t.document);r?(c.select(t,!0),c.setEnd(n.startContainer,n.startOffset)):(c.select(t,!0),c.setStart(n.endContainer,n.endOffset));var h=o?c.cloneContents():c.extractContents(),v=u?t.clone(!1):this.editor.node.clone(t,!1,!1);return v.append(h),o&&v.find(yt).each(function(g){var p=H(g),b=p.attributes(He);p.attributes(bt,b),p.removeAttributes(He)}),v}},{key:"getLeftText",value:function(e,t){if(!Ne(this.editor))return"";t=t||this.editor.change.range.get();var n=this.getBlockByRange({block:e,range:t,isLeft:!0,clone:!0});return n.text().replace(/\u200B/g,"")}},{key:"removeLeftText",value:function(e,t){if(!!Ne(this.editor)){t=t||this.editor.change.range.get(),je(e)&&(e=H(e)),t.createSelection();var n=e.find(co),r=!1;e.traverse(function(a){var o=H(a);if(o.equal(n)){n.remove(),r=!0;return}r&&o.isText()&&o.remove()},!1)}}},{key:"flat",value:function(e,t){if(!!Ne(this.editor))for(var n=this.editor,r=n.schema,a=n.node,o=r.getCanMergeTags(),l=e.parent(),u=t.fragment?t[0].parentNode:t.get();l&&u&&l.get()!==u&&l.inEditor();){if(e.isCard())l.before(e);else if(a.isList(l)&&e.name==="li"||o.indexOf(l.name)>-1&&a.isBlock(e)&&l.name!==e.name){var c=a.clone(l,!1,!1);c.append(e),e=c,l.before(e)}else e=a.replace(e,a.clone(this.findTop(l,e),!1,!1)),l.before(e);l.first()||l.remove(),l=e.parent()}}},{key:"insertEmptyBlock",value:function(e,t){var n=this.editor;if(!!Ne(n)){var r=n.change,a=r.blocks,o=r.marks,l=n.node;if(this.insert(t),a[0]){var u=a[0].css();t.css(u)}var c=t.find("br");o.forEach(function(v){var g=n.mark.findPlugin(v);v=l.clone(v,!1,!1),(g==null?void 0:g.copyOnEnter)!==!1&&(g==null?void 0:g.followStyle)!==!1&&(v=l.clone(v,!1,!1),c.before(v),v.append(c),c=v)}),c=t.find("br");var h=c.parent();h&&l.isMark(h)&&(c=l.replace(c,H("\u200B",null))),e.select(c).shrinkToTextNode(),e.collapse(!1),e.scrollIntoView(),r.range.select(e)}}},{key:"insertOrSplit",value:function(e,t){var n,r,a,o=e.cloneRange();if(o.enlargeFromTextNode(),this.isLastOffset(e,"end")||o.endNode.type===Node.ELEMENT_NODE&&(((n=t.get())===null||n===void 0?void 0:n.childNodes.length)||0)>0&&o.endContainer.childNodes[o.endOffset]===((r=t.last())===null||r===void 0?void 0:r.get())&&((a=t.first())===null||a===void 0?void 0:a.name)==="br"){var l=H("<p><br /></p>");if(t.name==="p"){var u=t.attributes();Object.keys(u).forEach(function(c){c!==qe&&l.attributes(c,u[c])})}this.insertEmptyBlock(e,l)}else this.split()}}]),f}(),Tn=Yr("_scrollNode"),Tb=function(){function f(i,e){var t=this;be(this,f),this.kind="editor",this.options={lang:"zh-CN",locale:{},plugins:[],cards:[],config:{},iconFonts:"url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.woff2?t=1638071536645') format('woff2'), url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.woff?t=1638071536645') format('woff'), url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.ttf?t=1638071536645') format('truetype')"},this.container=void 0,this.language=void 0,this.root=void 0,this.card=void 0,this.plugin=void 0,this.node=void 0,this.nodeId=void 0,this.list=void 0,this.mark=void 0,this.inline=void 0,this.block=void 0,this.event=void 0,this.schema=void 0,this.conversion=void 0,this.command=void 0,this.clipboard=void 0,this.request=void 0,Object.defineProperty(this,Tn,{writable:!0,value:null}),this.options=Ve(Ve({},this.options),e);var n=this.options.iconFonts,r=document.querySelector("#am-iconfont");if(!r&&n!==!1){r=document.createElement("style"),r.setAttribute("type","text/css"),r.setAttribute("id","am-iconfont");var a='@font-face { font-family: "data-icon";';Array.isArray(n)&&(n=n.map(function(l){return"url('".concat(l.url,"') format('").concat(l.format,"')")}).join(",")),a+="src: ".concat(n,";}"),r.innerHTML=a,document.head.appendChild(r)}this.container=H(i),this.container.attributes(Ae,ir),this.language=new B0(this.options.lang||"zh-CN",Ye.exports.merge(F0,e==null?void 0:e.locale)),this.event=new Xc,this.command=new G0(this),this.schema=new $0,this.schema.add(zm),this.conversion=new Z0(this),Fm.forEach(function(l){return t.conversion.add(l.from,l.to)}),this.card=new ib(this,this.options.lazyRender),this.clipboard=new sb(this),this.request=new gb,this.plugin=new j0(this),this.node=new Vm(this),this.nodeId=new ab(this.schema),this.list=new mb(this),this.mark=new yb(this),this.inline=new xb(this),this.block=new Ab(this),this.root=H(this.options.root||this.container.parent()||document.body);var o=this.root.css("position");(!o||o==="static")&&this.root.css("position","relative")}return ke(f,[{key:"scrollNode",get:function(){if(ct(this,Tn)[Tn])return ct(this,Tn)[Tn];for(var e=this.options.scrollNode,t=e?typeof e=="function"?e():e:null,n=["auto","scroll"],r=this.container.parent();!t&&r&&r.length>0&&r.name!=="body";)if(n.includes(r.css("overflow"))||n.includes(r.css("overflow-y"))){t=r.get();break}else r=r.parent();return t===null&&(t=document.documentElement),ct(this,Tn)[Tn]=t?H(t):null,ct(this,Tn)[Tn]}},{key:"init",value:function(){this.mark.init(),this.inline.init(),this.block.init(),this.list.init(),this.card.init(this.options.cards||[]),this.plugin.init(this.options.plugins||[],this.options.config||{}),this.nodeId.init()}},{key:"setScrollNode",value:function(e){ct(this,Tn)[Tn]=e?H(e):null}},{key:"on",value:function(e,t,n){return this.event.on(e,t,n),this}},{key:"off",value:function(e,t){return this.event.off(e,t),this}},{key:"trigger",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=this.event).trigger.apply(t,[e].concat(r))}},{key:"messageSuccess",value:function(e,t){for(var n,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];(n=console).log.apply(n,[e,"success:".concat(t)].concat(a))}},{key:"messageError",value:function(e,t){for(var n,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];(n=console).error.apply(n,[e,"error:".concat(t)].concat(a))}},{key:"messageConfirm",value:function(e,t){for(var n,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return(n=console).log.apply(n,[e,"confirm:".concat(t)].concat(a)),Promise.reject(!1)}},{key:"getSelectionData",value:function(e){var t,n,r=this;if(e||(e=(t=Ge.from(this))!==null&&t!==void 0?t:void 0),!!e){e=e.cloneRange();var a=e.startNode.closest("[".concat(He,"]"),function(ae){return H(ae).isEditable()?void 0:ae.parentNode||void 0});if(a.length>0&&!e.collapsed&&e.endOffset===0&&(e.endContainer.previousSibling&&e.setEndAfter(e.endContainer.previousSibling),!e.collapsed&&e.endOffset>0&&e.endContainer.childNodes[e.endOffset-1]===a[0])){var o=e.startNode.closest("[".concat(lt,'="center"]'),function(ae){return H(ae).isEditable()?void 0:ae.parentNode||void 0});o.length>0?e.setEnd(o[0],o[0].childNodes.length):e.setEnd(a[0],a[0].childNodes.length)}var l=e.commonAncestorNode;if(a=l.closest("[".concat(He,"]"),function(ae){return H(ae).isEditable()?void 0:ae.parentNode||void 0}),a.length>0){var u=l.closest("[".concat(lt,'="center"]'),function(ae){return H(ae).isEditable()?void 0:ae.parentNode||void 0});u.length===0&&(e.select(a),l=e.commonAncestorNode)}if(!(!l.inEditor()&&!l.isRoot())&&!e.collapsed){var c=function(fe){if(fe.length===0)return{};for(var pe=fe.length-1;pe>0;pe--){var ge=fe[pe];ge.appendChild(fe[pe-1])}return{inner:fe[0],outter:fe[fe.length-1]}};if(a=l.closest("[".concat(He,"]"),function(ae){return ae.parentNode||void 0}),a.length>0){var h=this.card.find(a);if(h&&h.getSelectionNodes){var v=h.getSelectionNodes();if(v.length>0){var g=c(v.map(function(ae){return ae[0]})),p=g.inner,b=g.outter,y=v.map(function(ae){return ae.html()}).join(""),k=new ur("<div>".concat(y,"</div>"),this);y=k.toHTML(p,b);var E=new ur(y,this).toText(this.schema,!0);return{html:y,text:E}}}else if(!(h!=null&&h.isEditable))return}var _=this.node,T=this.list,x,C=e.startNode.closest("li");if(C&&_.isCustomize(C)){var S=e.endNode.closest("li");if(!C.equal(S)||T.isLast(e)&&T.isFirst(e))if(T.isFirst(e)){var R=C.parent(),z=C.getIndex();R&&e.setStart(R,z<0?0:z)}else{var F,G,M=C.parent(),O=e.createSelection(),A=O.getNode(C,"center",!0);if((F=O.anchor)===null||F===void 0||F.remove(),(G=O.focus)===null||G===void 0||G.remove(),Ne(this)&&this.change.combinText(),A.length>0){var I=!1;A.each(function(ae,fe){var pe=A.eq(fe);if(!I&&(pe==null?void 0:pe.name)==="li"){I=!0;return}I&&(pe==null||pe.remove())});var $=C.first(),ie=$?this.card.find($):void 0;ie&&(x=A,this.list.addCardToCustomize(x,ie.name,ie.getValue()),M&&_.wrap(x,M==null?void 0:M.clone()))}}}var N=e.enlargeToElementNode(!0).cloneContents(),P=[];if(l.isText()&&N.childNodes.length===1&&((n=N.firstChild)===null||n===void 0?void 0:n.nodeType)===Node.TEXT_NODE)for(var V=l.parent();V&&(_.isMark(V)||_.isInline(V));)P.push(V.clone(!1).get()),V=V.parent();N.querySelectorAll("li").forEach(function(ae){var fe,pe,ge=H(ae),ye=ge.attributes(qe);if(!!ye){var L=(fe=r.container.get())===null||fe===void 0?void 0:fe.querySelector("[".concat(qe,"=").concat(ye,"]"));_.isCustomize(ge)&&!(!((pe=ge.first())===null||pe===void 0)&&pe.isCard())&&(L==null?void 0:L.firstChild)&&ge.prepend(_.clone(H(L.firstChild),!0,!1));var K=L==null?void 0:L.parentElement;K=K?H(K.cloneNode(!1)):null;var U=ae.parentElement;L&&K&&_.isList(K)&&(!U||!_.isList(U))&&(K.name==="ol"&&K.removeAttributes("start"),_.wrap(ae,K))}});var W=c(P),Y=W.inner,Q=W.outter,re=[];N.childNodes.forEach(function(ae){var fe=H(ae);(_.isList(fe)||fe.name==="li")&&re.push(fe)}),this.nodeId.generateAll(H(N),!0),this.list.merge(re);var te=new ur(N,this),J=te.toHTML(Y,Q),ne=new ur(J,this).toText(this.schema,!0);return{html:J,text:ne}}}}},{key:"destroy",value:function(){this.container.removeAttributes(Ae),this.event.destroy(),this.plugin.destroy(),this.card.destroy(),this.container.empty()}}]),f}(),Sb=`  .data-icon {\r
    font-family: "data-icon" !important;\r
    font-size: 16px;\r
    font-style: normal;\r
    -webkit-font-smoothing: antialiased;\r
    -moz-osx-font-smoothing: grayscale;\r
  }\r
  \r
  .data-icon-block-image:before {\r
    content: "\\ea20";\r
  }\r
  \r
  .data-icon-inline-image:before {\r
    content: "\\e601";\r
  }\r
  \r
  .data-icon-no-border:before {\r
    content: "\\e608";\r
  }\r
  \r
  .data-icon-line-height:before {\r
    content: "\\e697";\r
  }\r
  \r
  .data-icon-text:before {\r
    content: "\\e600";\r
  }\r
  \r
  .data-icon-comment:before {\r
    content: "\\e73e";\r
  }\r
  \r
  .data-icon-huanyuan:before {\r
    content: "\\e60a";\r
  }\r
  \r
  .data-icon-label:before {\r
    content: "\\e714";\r
  }\r
  \r
  .data-icon-video:before {\r
    content: "\\e741";\r
  }\r
  \r
  .data-icon-table:before {\r
    content: "\\e6a8";\r
  }\r
  \r
  .data-icon-h:before {\r
    content: "\\e7a0";\r
  }\r
  \r
  .data-icon-collapse-subtree:before {\r
    content: "\\e754";\r
  }\r
  \r
  .data-icon-expand-subtree:before {\r
    content: "\\e792";\r
  }\r
  \r
  .data-icon-sub-node:before {\r
    content: "\\e78e";\r
  }\r
  \r
  .data-icon-sister-node:before {\r
    content: "\\e784";\r
  }\r
  \r
  .data-icon-sup:before {\r
    content: "\\e790";\r
  }\r
  \r
  .data-icon-sub:before {\r
    content: "\\e75a";\r
  }\r
  \r
  .data-icon-maximize:before {\r
    content: "\\e752";\r
  }\r
  \r
  .data-icon-codeblock:before {\r
    content: "\\e709";\r
  }\r
  \r
  .data-icon-emoji:before {\r
    content: "\\e73a";\r
  }\r
  \r
  .data-icon-h4:before {\r
    content: "\\e759";\r
  }\r
  \r
  .data-icon-h1:before {\r
    content: "\\e75b";\r
  }\r
  \r
  .data-icon-h5:before {\r
    content: "\\e75c";\r
  }\r
  \r
  .data-icon-h2:before {\r
    content: "\\e75d";\r
  }\r
  \r
  .data-icon-h3:before {\r
    content: "\\e760";\r
  }\r
  \r
  .data-icon-h6:before {\r
    content: "\\e761";\r
  }\r
  \r
  .data-icon-liuchengtu:before {\r
    content: "\\e61c";\r
  }\r
  \r
  .data-icon-website:before {\r
    content: "\\e694";\r
  }\r
  \r
  .data-icon-preferences:before {\r
    content: "\\e788";\r
  }\r
  \r
  .data-icon-hr:before {\r
    content: "\\e76a";\r
  }\r
  \r
  .data-icon-task-list:before {\r
    content: "\\e79f";\r
  }\r
  \r
  .data-icon-unordered-list:before {\r
    content: "\\e777";\r
  }\r
  \r
  .data-icon-ordered-list:before {\r
    content: "\\e795";\r
  }\r
  \r
  .data-icon-arrow-left:before {\r
    content: "\\e748";\r
  }\r
  \r
  .data-icon-arrow-up:before {\r
    content: "\\e769";\r
  }\r
  \r
  .data-icon-arrow-right:before {\r
    content: "\\e779";\r
  }\r
  \r
  .data-icon-arrow-down:before {\r
    content: "\\e79a";\r
  }\r
  \r
  .data-icon-moremark:before {\r
    content: "\\e772";\r
  }\r
  \r
  .data-icon-clean:before {\r
    content: "\\e74d";\r
  }\r
  \r
  .data-icon-paintformat:before {\r
    content: "\\e756";\r
  }\r
  \r
  .data-icon-lock:before {\r
    content: "\\e768";\r
  }\r
  \r
  .data-icon-loading:before {\r
    content: "\\e76b";\r
  }\r
  \r
  .data-icon-unlock:before {\r
    content: "\\e796";\r
  }\r
  \r
  .data-icon-collapse:before {\r
    content: "\\e79e";\r
  }\r
  \r
  .data-icon-align-bottom:before {\r
    content: "\\e72b";\r
  }\r
  \r
  .data-icon-attachment:before {\r
    content: "\\e72c";\r
  }\r
  \r
  .data-icon-bold:before {\r
    content: "\\e72d";\r
  }\r
  \r
  .data-icon-border-color:before {\r
    content: "\\e72e";\r
  }\r
  \r
  .data-icon-border-all:before {\r
    content: "\\e72f";\r
  }\r
  \r
  .data-icon-border-inner:before {\r
    content: "\\e730";\r
  }\r
  \r
  .data-icon-border-left:before {\r
    content: "\\e731";\r
  }\r
  \r
  .data-icon-border-bottom:before {\r
    content: "\\e732";\r
  }\r
  \r
  .data-icon-border-none:before {\r
    content: "\\e733";\r
  }\r
  \r
  .data-icon-box:before {\r
    content: "\\e734";\r
  }\r
  \r
  .data-icon-border-outer:before {\r
    content: "\\e735";\r
  }\r
  \r
  .data-icon-border-right:before {\r
    content: "\\e736";\r
  }\r
  \r
  .data-icon-clear:before {\r
    content: "\\e737";\r
  }\r
  \r
  .data-icon-close:before {\r
    content: "\\e738";\r
  }\r
  \r
  .data-icon-code-example:before {\r
    content: "\\e739";\r
  }\r
  \r
  .data-icon-clip:before {\r
    content: "\\e73b";\r
  }\r
  \r
  .data-icon-border-up:before {\r
    content: "\\e73c";\r
  }\r
  \r
  .data-icon-code:before {\r
    content: "\\e73d";\r
  }\r
  \r
  .data-icon-command:before {\r
    content: "\\e73f";\r
  }\r
  \r
  .data-icon-compact-display:before {\r
    content: "\\e740";\r
  }\r
  \r
  .data-icon-copy:before {\r
    content: "\\e742";\r
  }\r
  \r
  .data-icon-download:before {\r
    content: "\\e743";\r
  }\r
  \r
  .data-icon-deletecolumn:before {\r
    content: "\\e744";\r
  }\r
  \r
  .data-icon-cut:before {\r
    content: "\\e745";\r
  }\r
  \r
  .data-icon-decreasedecimalplace:before {\r
    content: "\\e746";\r
  }\r
  \r
  .data-icon-drag:before {\r
    content: "\\e747";\r
  }\r
  \r
  .data-icon-delete:before {\r
    content: "\\e749";\r
  }\r
  \r
  .data-icon-drag-circle:before {\r
    content: "\\e74a";\r
  }\r
  \r
  .data-icon-deleterow:before {\r
    content: "\\e74b";\r
  }\r
  \r
  .data-icon-edit:before {\r
    content: "\\e74c";\r
  }\r
  \r
  .data-icon-filter:before {\r
    content: "\\e74e";\r
  }\r
  \r
  .data-icon-expand:before {\r
    content: "\\e74f";\r
  }\r
  \r
  .data-icon-error:before {\r
    content: "\\e750";\r
  }\r
  \r
  .data-icon-freezerowcoloum:before {\r
    content: "\\e751";\r
  }\r
  \r
  .data-icon-freezefirstrow:before {\r
    content: "\\e753";\r
  }\r
  \r
  .data-icon-freezzecolumn:before {\r
    content: "\\e755";\r
  }\r
  \r
  .data-icon-border-style:before {\r
    content: "\\e757";\r
  }\r
  \r
  .data-icon-gotolink:before {\r
    content: "\\e758";\r
  }\r
  \r
  .data-icon-increasedecimalplace:before {\r
    content: "\\e75e";\r
  }\r
  \r
  .data-icon-insertrowbelow:before {\r
    content: "\\e75f";\r
  }\r
  \r
  .data-icon-image:before {\r
    content: "\\e762";\r
  }\r
  \r
  .data-icon-italic:before {\r
    content: "\\e763";\r
  }\r
  \r
  .data-icon-indent:before {\r
    content: "\\e764";\r
  }\r
  \r
  .data-icon-insertrowabove:before {\r
    content: "\\e765";\r
  }\r
  \r
  .data-icon-insertrowright:before {\r
    content: "\\e766";\r
  }\r
  \r
  .data-icon-left-circle-fill:before {\r
    content: "\\e767";\r
  }\r
  \r
  .data-icon-link:before {\r
    content: "\\e76c";\r
  }\r
  \r
  .data-icon-keyboard:before {\r
    content: "\\e76d";\r
  }\r
  \r
  .data-icon-more:before {\r
    content: "\\e76e";\r
  }\r
  \r
  .data-icon-merge-cells:before {\r
    content: "\\e76f";\r
  }\r
  \r
  .data-icon-outdent:before {\r
    content: "\\e770";\r
  }\r
  \r
  .data-icon-mention:before {\r
    content: "\\e771";\r
  }\r
  \r
  .data-icon-plus:before {\r
    content: "\\e773";\r
  }\r
  \r
  .data-icon-minus-circle-o:before {\r
    content: "\\e774";\r
  }\r
  \r
  .data-icon-highlight:before {\r
    content: "\\e775";\r
  }\r
  \r
  .data-icon-paste:before {\r
    content: "\\e776";\r
  }\r
  \r
  .data-icon-insertrowleft:before {\r
    content: "\\e778";\r
  }\r
  \r
  .data-icon-quote:before {\r
    content: "\\e77a";\r
  }\r
  \r
  .data-icon-plus-circle-o:before {\r
    content: "\\e77b";\r
  }\r
  \r
  .data-icon-right-circle-fill:before {\r
    content: "\\e77c";\r
  }\r
  \r
  .data-icon-question-circle-o:before {\r
    content: "\\e77d";\r
  }\r
  \r
  .data-icon-preview:before {\r
    content: "\\e77e";\r
  }\r
  \r
  .data-icon-reload:before {\r
    content: "\\e77f";\r
  }\r
  \r
  .data-icon-rotate-left:before {\r
    content: "\\e780";\r
  }\r
  \r
  .data-icon-math:before {\r
    content: "\\e781";\r
  }\r
  \r
  .data-icon-overflow:before {\r
    content: "\\e782";\r
  }\r
  \r
  .data-icon-redo:before {\r
    content: "\\e783";\r
  }\r
  \r
  .data-icon-searchreplace:before {\r
    content: "\\e785";\r
  }\r
  \r
  .data-icon-save:before {\r
    content: "\\e786";\r
  }\r
  \r
  .data-icon-singleselect:before {\r
    content: "\\e787";\r
  }\r
  \r
  .data-icon-rotate-right:before {\r
    content: "\\e789";\r
  }\r
  \r
  .data-icon-sort-ascending:before {\r
    content: "\\e78a";\r
  }\r
  \r
  .data-icon-sort-descending:before {\r
    content: "\\e78b";\r
  }\r
  \r
  .data-icon-toc:before {\r
    content: "\\e78c";\r
  }\r
  \r
  .data-icon-solit-cells:before {\r
    content: "\\e78d";\r
  }\r
  \r
  .data-icon-translate:before {\r
    content: "\\e78f";\r
  }\r
  \r
  .data-icon-successful:before {\r
    content: "\\e791";\r
  }\r
  \r
  .data-icon-strikethrough:before {\r
    content: "\\e793";\r
  }\r
  \r
  .data-icon-undo:before {\r
    content: "\\e794";\r
  }\r
  \r
  .data-icon-underline:before {\r
    content: "\\e797";\r
  }\r
  \r
  .data-icon-unlink:before {\r
    content: "\\e798";\r
  }\r
  \r
  .data-icon-wrap:before {\r
    content: "\\e799";\r
  }\r
  \r
  .data-icon-upload:before {\r
    content: "\\e79b";\r
  }\r
  \r
  .data-icon-zoom-out:before {\r
    content: "\\e79c";\r
  }\r
  \r
  .data-icon-zoom-in:before {\r
    content: "\\e79d";\r
  }\r
  \r
  .data-icon-align-center:before {\r
    content: "\\e725";\r
  }\r
  \r
  .data-icon-align-justify:before {\r
    content: "\\e726";\r
  }\r
  \r
  .data-icon-align-left:before {\r
    content: "\\e727";\r
  }\r
  \r
  .data-icon-align-top:before {\r
    content: "\\e728";\r
  }\r
  \r
  .data-icon-align-right:before {\r
    content: "\\e729";\r
  }\r
  \r
  .data-icon-align-middle:before {\r
    content: "\\e72a";\r
  }\r
\r
.data-anticon {\r
    display: inline-block;\r
    font-style: normal;\r
    vertical-align: -0.125em;\r
    text-align: center;\r
    text-transform: none;\r
    line-height: 0;\r
    text-rendering: optimizeLegibility;\r
    -webkit-font-smoothing: antialiased;\r
}\r
\r
.data-anticon svg {\r
    display: inline-block;\r
}\r
\r
@-webkit-keyframes loadingCircle {\r
    100% {\r
      transform: rotate(360deg);\r
    }\r
}\r
@keyframes loadingCircle {\r
    100% {\r
      transform: rotate(360deg);\r
    }\r
}\r
\r
.data-anticon .data-anticon-spin {\r
    display: inline-block;\r
    -webkit-animation: loadingCircle 1s infinite linear;\r
    animation: loadingCircle 1s infinite linear;\r
}\r
\r
.data-anticon > * {\r
    line-height: 1;\r
}\r
\r
.am-engine {\r
    position: relative;\r
    background-color: #FFFFFF;\r
}\r
\r
.am-engine.am-engine-placeholder:before {\r
  content: attr(data-placeholder);\r
  pointer-events: none;\r
  position: absolute;\r
  color: #bbbfc4;\r
  height: 0;\r
}\r
\r
.am-engine ::-moz-selection {\r
    background: rgba(180, 213, 254, 0.5) !important;\r
    color: inherit!important;\r
}\r
\r
.am-engine ::selection {\r
    background: rgba(180, 213, 254, 0.5) !important;\r
    color: inherit!important;\r
}\r
\r
.am-engine , .am-engine-view {\r
    font-family: 'Chinese Quote', 'Segoe UI', Roboto, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji';\r
	word-wrap: break-word;\r
	outline-style: none;\r
	white-space: pre-wrap;\r
    -webkit-user-select: auto;\r
       -moz-user-select: auto;\r
        -ms-user-select: auto;\r
            user-select: auto;\r
    font-size: 14px;\r
    line-height: 1.74;\r
    color: #262626;\r
    letter-spacing: .05em;\r
    /* pt / px \u6362\u7B97\u8868\uFF1Ahttps://websemantics.uk/articles/font-size-conversion/ */\r
}\r
\r
.am-engine > *:first-child,.am-engine-view > *:first-child {\r
	margin-top: 0 !important;\r
}\r
\r
.am-engine p , .am-engine-view p {\r
    white-space: normal;\r
    margin: 0;\r
    line-height: 1.74;\r
}\r
\r
.am-engine [contenteditable="true"],.am-engine-view [contenteditable="true"] {\r
	outline-style: none;\r
}\r
\r
.am-engine .selection-transparent::-moz-selection,.am-engine-view .selection-transparent::-moz-selection {\r
	background: transparent;\r
}\r
\r
.am-engine .selection-transparent::selection,.am-engine-view .selection-transparent::selection {\r
	background: transparent;\r
}\r
/*---------------------------\u5361\u7247 begin-----------------------*/\r
\r
.am-engine [data-card-type], .am-engine-view [data-card-type] {\r
    white-space: normal;\r
}\r
.am-engine span[data-card-type="inline"],.am-engine-view span[data-card-type="inline"] {\r
	display: inline-block;\r
	text-indent: 0;\r
	vertical-align: baseline;\r
	white-space: initial;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element],.am-engine-view span[data-card-type="inline"] span[data-card-element] {\r
	display: inline-block;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="center"],.am-engine-view span[data-card-type="inline"] span[data-card-element="center"] {\r
	vertical-align: bottom;\r
  border-radius: 2px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\r
	text-align: left;\r
	-webkit-user-select: text;\r
	   -moz-user-select: text;\r
	    -ms-user-select: text;\r
	        user-select: text;\r
  min-width: 1px;\r
  background: transparent;\r
  bottom: 0;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"] {\r
  left: -1px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\r
  right: -1px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"]::-moz-selection,\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"]::-moz-selection,.am-engine-view span[data-card-type="inline"] span[data-card-element="right"]::-moz-selection {\r
  background: transparent !important;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"]::selection,\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"]::selection,\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"]::selection,.am-engine-view span[data-card-type="inline"] span[data-card-element="right"]::selection {\r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"],.am-engine-view div[data-card-type="block"],.am-engine span[data-card-type="inline"].data-card-block,.am-engine-view span[data-card-type="inline"].data-card-block {\r
	display: block;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\r
	bottom: 0;\r
	position: absolute;\r
	width: 2px;\r
	overflow: hidden;\r
	outline: none;\r
	text-align: left;\r
	text-indent: 0;\r
	-webkit-box-flex: 0;\r
	flex: 0 0 auto;\r
	-webkit-user-select: text;\r
	-moz-user-select: text;\r
	 -ms-user-select: text;\r
	     user-select: text;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"] {\r
	left: -2px;\r
	text-align: left;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\r
	right: -2px;\r
	text-align: right;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection { \r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::selection { \r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection {\r
	background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::selection {\r
	background: transparent !important;\r
}\r
	\r
\r
.am-engine span[data-card-element="body"],.am-engine-view span[data-card-element="body"],.am-engine div[data-card-element="body"],.am-engine-view div[data-card-element="body"] {\r
	position: relative;\r
}\r
\r
.am-engine span[data-card-element="body"] [data-card-element="center"],.am-engine-view span[data-card-element="body"] [data-card-element="center"],.am-engine div[data-card-element="body"] [data-card-element="center"],.am-engine-view div[data-card-element="body"] [data-card-element="center"] {\r
	-webkit-user-select: text;\r
	-moz-user-select: text;\r
	 -ms-user-select: text;\r
	     user-select: text;\r
}\r
.am-engine span[data-card-element="body"] [data-element="editable"],.am-engine div[data-card-element="body"] [data-element="editable"]\r
{\r
    cursor: text;\r
}\r
/*---------------------------\u5361\u7247 end-----------------------*/`;cn(Sb);var Nb=function(f){rt(e,f);var i=it(e);function e(t,n){var r;be(this,e),r=i.call(this,t,n),r._readonly=!1,r._container=void 0,r.kind="engine",r.typing=void 0,r.ot=void 0,r.change=void 0,r.history=void 0,r.hotkey=void 0,r.options=Ve(Ve({},r.options),n),r.history=new h0(Zr(r)),r._container=new I0(r.container,{engine:Zr(r),lang:r.options.lang,className:r.options.className,tabIndex:r.options.tabIndex,placeholder:r.options.placeholder,autoPrepend:r.options.autoPrepend,autoAppend:r.options.autoAppend}),r.root=H(r.options.root||r.container.parent()||wt().body);var a=r.root.css("position");return(!a||a==="static")&&r.root.css("position","relative"),r._container.init(),r.change=new t0(Zr(r),{onChange:function(l){return r.trigger("change",l)},onSelect:function(){return r.trigger("select")},onRealtimeChange:function(l){r.trigger("realtimeChange",l)},onSetValue:function(){return r.trigger("afterSetValue")}}),r.change.init(),r.typing=new L0(Zr(r)),r._readonly=r.options.readonly===void 0?!1:r.options.readonly,r._container.setReadonly(r._readonly),r.hotkey=new v0(Zr(r)),r.init(),r.ot=new d0(Zr(r)),r.isEmpty()&&r._container.showPlaceholder(),r.ot.initLocal(),r}return ke(e,[{key:"readonly",get:function(){return this._readonly},set:function(n){this.readonly!==n&&(n?(this.hotkey.disable(),this._container.setReadonly(!0),this.ot.stopMutation()):(this.hotkey.enable(),this._container.setReadonly(!1),this.ot.startMutation()),this._readonly=n,this.card.reRender(),this.trigger("readonly",n))}},{key:"isFocus",value:function(){return this._container.isFocus()}},{key:"isEmpty",value:function(){return this.change.isEmpty()}},{key:"focus",value:function(n){this.change.range.focus(n)}},{key:"blur",value:function(){this.change.range.blur()}},{key:"getValue",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.change.getValue({ignoreCursor:n});return n?vo.removeTags(r):r}},{key:"getValueAsync",value:function(){var t=xn(ht.mark(function r(){var a=this,o,l,u=arguments;return ht.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=u.length>0&&u[0]!==void 0?u[0]:!1,l=u.length>1?u[1]:void 0,h.abrupt("return",new Promise(function(){var v=xn(ht.mark(function g(p,b){var y,k,E;return ht.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:y=ht.mark(function x(C){var S,R;return ht.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return S=a.plugin.components[C],F.next=3,new Promise(function(G){S.waiting?S.waiting(l).then(function(){return G(!0)}).catch(G):G(!0)});case 3:if(R=F.sent,et(R)!=="object"){F.next=7;break}return b(R),F.abrupt("return",{v:void 0});case 7:case"end":return F.stop()}},x)}),T.t0=ht.keys(a.plugin.components);case 2:if((T.t1=T.t0()).done){T.next=10;break}return k=T.t1.value,T.delegateYield(y(k),"t2",5);case 5:if(E=T.t2,et(E)!=="object"){T.next=8;break}return T.abrupt("return",E.v);case 8:T.next=2;break;case 10:p(a.getValue(o));case 11:case"end":return T.stop()}},g)}));return function(g,p){return v.apply(this,arguments)}}()));case 3:case"end":return h.stop()}},r)}));function n(){return t.apply(this,arguments)}return n}()},{key:"getHtml",value:function(){var n=H(this.container[0].cloneNode(!0));return n.removeAttributes($n),n.removeAttributes("tabindex"),n.removeAttributes("autocorrect"),n.removeAttributes("autocomplete"),n.removeAttributes("spellcheck"),n.removeAttributes("data-gramm"),n.removeAttributes("role"),new ur(n,this).toHTML()}},{key:"initDocOnReadonly",value:function(){if(this.readonly&&!this.ot.isRemote){var n;if(!((n=this.ot.doc)===null||n===void 0)&&n.type)this.ot.doc.data=Kn(this.container);else{var r;(r=this.ot.doc)===null||r===void 0||r.create(Kn(this.container))}}}},{key:"setValue",value:function(n,r){return n=this.trigger("beforeSetValue",n)||n,this.change.setValue(n,void 0,r),this.normalize(),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"setHtml",value:function(n,r){var a=this;return this.change.setHtml(n,function(o){a.normalize(),a.container.allChildren("editable").forEach(function(l){a.node.isInline(l)?a.inline.repairCursor(l):a.node.isMark(l)&&a.mark.repairCursor(l)}),r&&r(o)}),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"setMarkdown",value:function(n,r){var a=this;return this.change.setMarkdown(n,function(o){a.normalize(),a.container.allChildren("editable").forEach(function(l){a.node.isInline(l)?a.inline.repairCursor(l):a.node.isMark(l)&&a.mark.repairCursor(l)}),r&&r(o)}),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"setJsonValue",value:function(n,r){var a=H(rf(n)),o=this.node.html(a);return this.change.setValue(o,void 0,r),this.normalize(),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"getJsonValue",value:function(){return Kn(this.container)}},{key:"normalize",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container,a=H("<p />"),o=r.children();o.each(function(l,u){var c=o.eq(u);!c||(n.node.isBlock(c)?(a.get().childNodes.length>0&&c.before(a),a=H("<p />")):c.isCursor()||a.append(c))}),a.get().childNodes.length>0&&r.append(a),o=r.children(),o.each(function(l,u){var c=o.eq(u);if(!!c&&(n.node.removeMinusStyle(c,"text-indent"),n.node.isRootBlock(c))){var h=c.get().childNodes.length;if(h===0)c.append(H("<br />"));else{var v=c.first();h===1&&(v==null?void 0:v.name)==="span"&&[Wn,jn,Gn].indexOf(v.attributes(Ae))>=0&&c.prepend(H("<br />"))}}})}},{key:"showPlaceholder",value:function(){this._container.showPlaceholder()}},{key:"hidePlaceholder",value:function(){this._container.hidePlaceholder()}},{key:"destroy",value:function(){this._container.destroy(),this.change.destroy(),this.hotkey.destroy(),this.typing.destroy(),this.ot&&this.ot.destroy(),yi(Cr(e.prototype),"destroy",this).call(this)}}]),e}(Tb),Db=`.card-maximize-header {\r
    position: fixed !important;\r
    top: 0;\r
    right: 0;\r
    left: 0;\r
    z-index: 9999;\r
    height: 56px;\r
    background: #fff;\r
    border-bottom: 1px solid #e8e8e8;\r
    width: 100%;\r
}\r
\r
.card-maximize-header .header-crumb {\r
    float: left;\r
    line-height: 32px;\r
    display: flex;\r
    height: 100%;\r
    align-items: center;\r
    -webkit-box-align: center;\r
    -ms-flex-align: center;\r
}\r
\r
.card-maximize-header .header-crumb a\r
{\r
    color: #595959 !important;\r
    font-size: 14px;\r
    cursor: pointer;\r
}\r
\r
.card-maximize-header .header-crumb .split {\r
    display: inline-block;\r
    vertical-align: middle;\r
    padding: 0 15px;\r
    font-size: 20px;\r
    padding-right: 8px;\r
    font-weight: 200;\r
    margin: 0 8px;\r
}\r
\r
.card-maximize-header .header-crumb .split + a {\r
    display: inline-block;\r
    vertical-align: middle;\r
}\r
\r
.card-maximize-header .header-crumb .split + a:hover {\r
	color: #8C8C8C;\r
}\r
\r
.data-card-block-max > [data-card-element="body"] > [data-card-element="center"], .data-card-block-max > [data-card-element="body"] > [data-card-element="center"].data-card-background-selected {\r
    top: 96px;\r
    background: #fafafa !important;\r
    position: fixed!important;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    z-index: 124;\r
    overflow: auto;\r
    padding: 20px;\r
}\r
\r
.am-engine-mobile .data-card-block-max > [data-card-element="body"] > [data-card-element="center"],.am-engine-view .data-card-block-max > [data-card-element="body"] > [data-card-element="center"] {\r
    top:56px;\r
}`;cn(Db);var Rb=`.data-card-resize {\r
    position: absolute;\r
    bottom: -3px;\r
    right: 0px;\r
    left: 0px;\r
    margin: 0 auto;\r
    z-index: 2;\r
    display: flex;\r
    align-items: center;\r
    justify-content: center;\r
}\r
\r
.data-card-resize-btn{\r
    background: #d9dbdd;\r
    border-radius: 3px;\r
    height: 6px;\r
    padding: 0 50px;\r
    display: block;\r
}\r
\r
.data-card-resize-btn svg {\r
    display: block;\r
    color: #999;\r
}\r
\r
.data-card-resize-btn:hover {\r
    cursor: row-resize;\r
}`;cn(Rb);var Ob=`.data-card-dnd {\r
    position: absolute;\r
    top: 0;\r
    left: -21px;\r
    right: auto;\r
    bottom: auto;\r
    width: 18px;\r
    height: 24px;\r
    line-height: 24px;\r
    font-size: 14px;\r
    font-weight: normal;\r
    display: none;\r
    opacity: 0;\r
    z-index: 125;\r
    transition: all 0.3s ease-in-out;\r
    background: rgba(255, 255, 255, 0.9);\r
}\r
\r
.data-card-dnd-active {\r
    display: block;\r
    opacity: 1;\r
    cursor: pointer;\r
}\r
\r
.data-card-dnd:hover {\r
	background: #f4f4f4;\r
	color: #595959;\r
}\r
\r
.data-card-dnd-trigger {\r
    width: 18px;\r
    height: 24px;\r
    text-align: center;\r
    color: #BFBFBF;\r
    font-size: 16px;\r
    border-radius: 2px 2px;\r
    cursor: move;\r
    cursor: grab;\r
    cursor: -moz-grab;\r
    cursor: -webkit-grab;\r
}\r
\r
.am-engine-view .data-toolbar-active {\r
	min-width: 200px;\r
}\r
\r
.data-card-toolbar.data-toolbar-block {\r
	top: -48px;\r
	bottom: auto;\r
	display: none;\r
}\r
\r
.data-card-toolbar.data-card-toolbar-active {\r
	display: block;\r
}\r
\r
.data-card-toolbar.data-toolbar-active {\r
	display: block;\r
}`;cn(Ob);var qb=`.data-scrollable::-webkit-scrollbar {\r
    display: none;\r
    overflow: hidden;\r
  }\r
  .data-scrollable.scroll-x {\r
    padding-bottom: 10px;\r
    overflow-x: hidden;\r
  }\r
  \r
  .data-scrollable.scroll-y {\r
    padding-right: 10px;\r
    overflow-y: hidden;\r
  }\r
\r
  .data-scrollable:hover .data-scrollbar {\r
    display: block;\r
  }\r
  .data-scrollable.scrolling {\r
    -webkit-user-select: none;\r
       -moz-user-select: none;\r
        -ms-user-select: none;\r
            user-select: none;\r
  }\r
  .data-scrollable.scrolling .data-scrollbar {\r
    display: block;\r
  }\r
  .data-scrollable .data-scrollbar {\r
    display: none;\r
    position: absolute;\r
    cursor: default;\r
    transition: opacity 0.3s ease-in-out;\r
  }\r
  .data-scrollable .data-scrollbar .data-scrollbar-trigger {\r
    position: absolute;\r
    background: #c1c1c1;\r
    border-radius: 10px;\r
    cursor: pointer;\r
  }\r
  .data-scrollable .data-scrollbar .data-scrollbar-trigger:hover {\r
    background: #888;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-x {\r
    height: 8px;\r
    bottom: 0px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\r
    height: 8px;\r
    min-width: 60px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-y {\r
    top: 0;\r
    width: 8px;\r
    height: 100%;\r
    right: 0px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-y .data-scrollbar-trigger {\r
    width: 8px;\r
    min-height: 60px;\r
  }\r
  .data-scrollable .scrollbar-shadow-left {\r
    position: absolute;\r
    z-index: 10;\r
    left: 0;\r
    top: 0;\r
    bottom: 0;\r
    width: 4px;\r
    opacity: 0.8;\r
    background: linear-gradient(270deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\r
    background: -webkit-linear-gradient(right, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\r
    pointer-events: none;\r
  }\r
  .data-scrollable .scrollbar-shadow-right {\r
    position: absolute;\r
    z-index: 10;\r
    left: 0;\r
    top: 0;\r
    bottom: 0;\r
    width: 4px;\r
    opacity: 0.8;\r
    background: linear-gradient(90deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\r
    background: -webkit-linear-gradient(left, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\r
    pointer-events: none;\r
  }`;cn(qb);var Lb=`.data-resizer {\r
    position: absolute;\r
    width: 100%;\r
    height: 100%;\r
    top: 0;\r
    left: 0;\r
    bottom: 0px;\r
    right: 0;\r
    z-index: 1;\r
    outline: 2px solid #1890FF;\r
    max-width: initial !important;\r
}\r
.data-resizer img {\r
    position: absolute;\r
    top: 0;\r
    left: 0;\r
    bottom: 0;\r
    right: 0;\r
    cursor: pointer;\r
    width: 100%;\r
    height: 100%;\r
    opacity: 0.3;\r
}\r
.data-resizer-holder {\r
    position: absolute;\r
    width: 14px;\r
    height: 14px;\r
    border: 2px solid #fff;\r
    border-radius: 50%;\r
    background: #1890FF;\r
    display: inline-block;\r
}\r
.data-resizer-holder-right-top {\r
    top: -6px;\r
    right: -6px;\r
    cursor: nesw-resize;\r
}\r
.data-resizer-holder-right-bottom {\r
    bottom: -6px;\r
    right: -6px;\r
    cursor: nwse-resize;\r
}\r
.data-resizer-holder-left-bottom {\r
    bottom: -6px;\r
    left: -6px;\r
    cursor: nesw-resize;\r
}\r
.data-resizer-holder-left-top {\r
    left: -6px;\r
    top: -6px;\r
    cursor: nwse-resize;\r
}\r
\r
.data-resizer-number {\r
    position: absolute;\r
    display: inline-block;\r
    line-height: 24px;\r
    padding: 0 4px;\r
    font-size: 12px;\r
    border-radius: 3px 3px;\r
    background: rgba(0, 0, 0, 0.86);\r
    color: rgba(255, 255, 255, 0.96);\r
    font-family: 'Lucida Console', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\r
    opacity: 0;\r
    visibility: hidden;\r
    transition: opacity 0.3s ease-in-out;\r
    transform: scale(0.8);\r
}\r
\r
.data-resizer-number-right-top {\r
    top: 0px;\r
    right: -6px;\r
    transform: translateX(100%) scale(0.8);\r
}\r
\r
.data-resizer-number-right-bottom {\r
    right: -6px;\r
    bottom: 0px;\r
    transform: translateX(100%) scale(0.8);\r
}\r
\r
.data-resizer-number-left-bottom {\r
    left: -6px;\r
    bottom: 0px;\r
    transform: translateX(-100%) scale(0.8);\r
}\r
\r
.data-resizer-number-left-top {\r
    left: -6px;\r
    top: 0px;\r
    transform: translateX(-100%) scale(0.8);\r
}\r
\r
.data-resizer-number-active {\r
    opacity: 1;\r
    visibility: visible;\r
}`;cn(Lb);var Lr="data-element",Ib="data-id",yf="root",dl="[".concat(Lr,'="').concat(yf,'"]'),Bb="ui",hl="editable",wf="[".concat(Lr,'="').concat(hl,'"]'),kf="anchor",Ef="focus",xf="cursor",Mb="card",Cf="data-card-key",_f="data-ready-card",oi="data-card-type",bo="data-card-value",ma="data-card-editable",dr=(typeof navigator!="undefined"?navigator:window.navigator).userAgent.toLowerCase(),Af=/edge/i.test(dr),Pb=!Af&&/chrome/i.test(dr);/firefox/i.test(dr),!Af&&!Pb&&/safari/i.test(dr),/mobile/i.test(dr);var Fb=/os [\.\_\d]+ like mac os/i.test(dr);/android/i.test(dr),!Fb&&/mac os x/i.test(dr),/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(dr);var vl;(function(f){f.UPPER="upper",f.LOWER="lower"})(vl||(vl={}));var gl=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vl.LOWER;return i.split("-").map(function(t,n){return e==="upper"||n>0?t.charAt(0).toUpperCase()+t.substr(1):e==="lower"&&n===0?t.charAt(0).toLowerCase()+t.substr(1):t}).join("")},zb=function(i){var e=function(r){var a=parseInt(r,10).toString(16).toUpperCase();return a.length>1?a:"0"+a},t=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi;return i.replace(t,function(n,r,a,o){return"#"+e(r)+e(a)+e(o)})},Tf=new Map,Ub=function(i){var e=i.replace(/\s+/g,""),t={};if(!e)return t;var n=Tf.get(e);if(n)return Object.assign({},n);var r=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,a;for(i=i.toLowerCase();a=r.exec(i);){var o=a,l=Ai(o,3);l[0];var u=l[1],c=l[2];(u.endsWith("color")||c.includes("rgb"))&&(c=zb(c)),t[u.trim()]=c.trim()}return Tf.set(e,t),Object.assign({},t)},Vb=function(i,e){var t=gl(e),n=window.getComputedStyle(i,null);return n?n[t]:""},Hb=function(i){var e;return i&&(e=/^((-?\d+)(\.\d+)?)/.exec(i))?Math.floor(parseFloat(e[1])*1e4)/1e4:0},yo=function(i){if(typeof document=="undefined"&&typeof global.__amWindow=="undefined")throw"document is not defined,If you are using ssr, you can assign a value to the `__amWindow` global variable.";return i?i.ownerDocument||i.document||i:typeof document=="undefined"?global.__amWindow.document:document},fn=function(i){return i.kind==="engine"},jb=function(){function f(){be(this,f),this.listeners={}}return ke(f,[{key:"on",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),(et(n)!=="object"||!n.once)&&this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=this.listeners[e];if(!!n){for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}}}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=this.listeners[e];if(a){var o=void 0;return a.every(function(l){return o=l.apply(void 0,n),typeof o!="boolean"||o!==!1}),o}}},{key:"destroy",value:function(){var e=this;Object.keys(this.listeners).forEach(function(t){e.listeners[t].forEach(function(n){e.off(t,n)})})}}]),f}(),Sf=function(i){return!!i&&i.get!==void 0},Gb=function(i){return!!i&&i.entries!==void 0},Sn=function(i){return!!i&&i.nodeType!==void 0},pl=function(i,e){if(i.nodeType!==Node.ELEMENT_NODE||!e)return!1;var t=function(a,o){for(var l,u=(l=yo(a))===null||l===void 0?void 0:l.querySelectorAll(o),c=u?u.length:0;--c>=0&&(u==null?void 0:u.item(c))!==a;);return c>-1},n=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.matchesSelector||t;return n.call(i,e)},Wb=function(i){return i.nodeName===Mb||!!i.getAttribute(oi)},$b=function(i){return i.getAttribute(oi)==="block"},Kb=function(i){return i.getAttribute(oi)==="inline"},Zb=function(i){return i.getAttribute(Lr)===hl||i.getAttribute(ma)==="true"||!!(i!=null&&i.querySelector(wf))},ml=function(i,e){return i.getAttribute(Lr)===yf&&(!e||i===e)},Yb=function(i){return ml(i)||i.getAttribute(Lr)===hl},Xb=function(i,e){if(i.nodeType===Node.ELEMENT_NODE&&ml(i,e))return!1;var t=Qb(i,dl);return!!t&&(!e||t===e)},Jb=function(i){var e=i.getAttribute(Lr);return!!e&&[kf,Ef,xf].indexOf(e)>-1},Qb=function(i,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(r){return r.parentElement||void 0},n=i||void 0;n;){if(pl(n,e))return n;n=t(n)}return n},Nf=new Map;function si(f,i){if(!f)return[];if(typeof f=="string"){if(!i||/<.+>/.test(f)){var e=f.indexOf("<tr")===0,t=f.indexOf("<td")===0;f=f.trim().replace(/<!--[^>]*-->/g,"");var n=Nf.get(f);if(n){if(e){var r=n.querySelector("tbody");return r?r.cloneNode(!0).childNodes:[]}if(t){var a=n.querySelector("tr");return a?a.cloneNode(!0).childNodes:[]}return n.cloneNode(!0).childNodes}e&&(f="<table><tbody>".concat(f,"</tbody></table>")),t&&(f="<table><tbody><tr>".concat(f,"</tr></tbody></table>"));var o=yo().createElement("div");if(o.innerHTML=f,Nf.set(f,o.cloneNode(!0)),e){var l=o.querySelector("tbody");return l?l.childNodes:[]}if(t){var u=o.querySelector("tr");return u?u.childNodes:[]}return o.childNodes}return i.querySelectorAll(f)}if(Gb(f)||Array.isArray(f))return f;if(Sf(f)){var c=[];return f.each(function(b){c.push(b)}),c}if(Sn(f)&&f.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var h=[],v=_r(f.childNodes),g;try{for(v.s();!(g=v.n()).done;){var p=g.value;h.push(p)}}catch(b){v.e(b)}finally{v.f()}return h}return[f]}var ey=function(){function f(i,e){var t=this;be(this,f),this.events=[],this.document=null,this.context=void 0,this.name="",this.type=void 0,this.window=null,this.display=void 0,this.fragment=void 0,Sn(i)&&(i.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(this.fragment=i),i=[i]),i.forEach(function(o,l){t[l]=o,t.events[l]=new jb});var n=this[0];if(n){this.document=yo(e),this.context=e;var r=n.nodeName,a=n.nodeType;this.name=r.toLowerCase(),this.type=a,this.window=this.document.defaultView||window}}return ke(f,[{key:"length",get:function(){for(var e=0;this[e];)e++;return e}},{key:"each",value:function(e){for(var t=0,n;(n=this[t])&&e(n,t)!==!1;)t++;return this}},{key:"toArray",value:function(){var e=[];return this.each(function(t){e.push(new f(t))}),e}},{key:"isElement",value:function(){return this.type===Node.ELEMENT_NODE}},{key:"isText",value:function(){return this.type===Node.TEXT_NODE}},{key:"isCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&Wb(e)}},{key:"isBlockCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&$b(e)}},{key:"isInlineCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&Kb(e)}},{key:"isEditableCard",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&Zb(e)}},{key:"isRoot",value:function(e){var t,n=this.get();return(n==null?void 0:n.nodeType)===Node.ELEMENT_NODE&&ml(n,e?(t=e[0])!==null&&t!==void 0?t:e:void 0)}},{key:"isEditable",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&Yb(e)}},{key:"inEditor",value:function(e){var t,n=this.get();return!!n&&Xb(n,e?(t=e[0])!==null&&t!==void 0?t:e:void 0)}},{key:"isCursor",value:function(){var e=this.get();return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&Jb(e)}},{key:"get",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.length===0?null:this[e]}},{key:"eq",value:function(e){return e>-1&&e<this.length?new f(this[e]):void 0}},{key:"index",value:function(){for(var e,t=(e=this.get())===null||e===void 0?void 0:e.previousSibling,n=0;t&&t.nodeType===Node.ELEMENT_NODE;)n++,t=t.previousSibling;return n}},{key:"parent",value:function(){var e,t=(e=this.get())===null||e===void 0?void 0:e.parentNode;return t?new f(t):void 0}},{key:"children",value:function(e){if(this.length===0)return new f([]);var t=this.get().childNodes;if(e){for(var n=[],r=0;r<t.length;r++){var a=t[r];pl(a,e)&&n.push(a)}return new f(n)}return new f(t)}},{key:"first",value:function(){var e;if(this.fragment)return this.eq(0)||null;var t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.firstChild;return t?new f(t):null}},{key:"last",value:function(){var e;if(this.fragment)return this.eq(this.length-1)||null;var t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.lastChild;return t?new f(t):null}},{key:"prev",value:function(){var e,t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.previousSibling;return t?new f(t):null}},{key:"next",value:function(){var e,t=this.length===0?null:(e=this.get())===null||e===void 0?void 0:e.nextSibling;return t?new f(t):null}},{key:"prevElement",value:function(){var e=this.length===0?null:this.get().previousElementSibling;return e?new f(e):null}},{key:"nextElement",value:function(){var e=this.length===0?null:this.get().nextElementSibling;return e?new f(e):null}},{key:"getPath",value:function(e,t,n){e=e||document.body;var r=[];if(this.length>0){var a=this.getIndex(t);if(n){var o=n(a,r,this);o&&(r=o)}else r.unshift(a)}if(this.equal(e))return r;for(var l=this.parent();l&&!l.equal(e);){var u=l.getIndex(t);if(n){var c=n(u,r,l);c&&(r=c)}else r.unshift(u);l=l.parent()}return r}},{key:"contains",value:function(e){var t,n=Sn(e)?e:e.get();if(this.length===0)return!1;if(this.get().nodeType===Node.DOCUMENT_NODE&&((t=n)===null||t===void 0?void 0:t.nodeType)!==Node.DOCUMENT_NODE||n===this[0])return!0;for(;n=((r=n)===null||r===void 0?void 0:r.parentNode)||null;){var r;if(n===this[0])return!0}return!1}},{key:"find",value:function(e){if(this.length>0&&(this.isElement()||this.fragment)){var t,n=(t=this.fragment?this.fragment:this.get())===null||t===void 0?void 0:t.querySelectorAll(e);return new f(n||[])}return new f([])}},{key:"closest",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(a){return a.parentNode||void 0},n=[],r=this.get()||void 0;r;){if(pl(r,e))return n.push(r),new f(n);r=t(r)}return new f(n)}},{key:"on",value:function(e,t,n){var r=this;return this.each(function(a,o){a.addEventListener(e,t,n),r.events[o]&&r.events[o].on(e,t,n)}),this}},{key:"off",value:function(e,t,n){var r=this;return this.each(function(a,o){a.removeEventListener(e,t,n),r.events[o]&&r.events[o].off(e,t,n)}),this}},{key:"getBoundingClientRect",value:function(e){if(this.length!==0){try{var t=this.get(),n=t.getBoundingClientRect(),r=document.documentElement.clientTop,a=document.documentElement.clientLeft;return{top:n.top-r,bottom:n.bottom-r,left:n.left-a,right:n.right-a}}catch(o){console.error(o)}return e}}},{key:"removeAllEvents",value:function(){var e=this;return this.each(function(t,n){!e.events[n]||Object.keys(e.events[n].listeners).forEach(function(r){for(var a=e.events[n].listeners[r],o=0;o<a.length;o++)e.off(r,a[o]),e.events[n].off(r,a[o]),t.removeEventListener(r,a[o],!1)})}),this}},{key:"attributes",value:function(e,t){if(e===void 0){var n=this.get();if(!n)return{};for(var r={},a=n.attributes,o=a.length;o--;){var l=a[o];r[l.name]=l.value}return r}if(et(e)==="object"){for(var u in e){var c=e[u];this.attributes(u,c)}return this}if(t===void 0){var h=this.get();return this.length>0&&this.isElement()&&(h==null?void 0:h.getAttribute(e))||""}var v=e==="style"&&t==="";return this.each(function(g){var p=g;v?p.removeAttribute("style"):p.setAttribute(e,t.toString())}),this}},{key:"removeAttributes",value:function(e){return this.each(function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=t;n.removeAttribute(e)}}),this}},{key:"hasClass",value:function(e){if(this.length===0)return!1;var t=this.get();if(!t)return!1;for(var n=0,r=null,a=t.classList||{};r=a[n];){if(r===e)return!0;n++}return!1}},{key:"addClass",value:function(e){return this.each(function(t){var n=t;n.classList.add(e)}),this}},{key:"removeClass",value:function(e){return this.each(function(t){var n=t;n.classList.remove(e)}),this}},{key:"css",value:function(e,t){if(e===void 0)return Ub(this.attributes("style")||"");if(et(e)==="object"){for(var n in e){var r=e[n];this.css(n,r)}return this}if(t===void 0){if(this.length===0||this.isText())return"";var a=this.get();return a&&(a.style[gl(e)]||Vb(this[0],e))||""}return this.each(function(o){var l=o;l.style[gl(e)]=t.toString(),l.style.length===0&&l.removeAttribute("style")}),this}},{key:"width",value:function(){var e=this.css("width");if(e==="auto"){var t=this.get();e=t.offsetWidth.toString()}return e&&Hb(e)||0}},{key:"height",value:function(){var e=this.css("height");if(e==="auto"){var t=this.get();e=t.offsetHeight.toString()}return e&&parseFloat(e)||0}},{key:"html",value:function(e){if(e!==void 0){var t=si(e);return this.each(function(n){if(n.nodeType===Node.ELEMENT_NODE){for(var r=n.firstChild;r;){var a=r.nextSibling;n.removeChild(r),r=a}t.forEach(function(o){n.appendChild(o.cloneNode(!0))})}}),this}return this.length>0?this[0].innerHTML:""}},{key:"text",value:function(e){var t;return e!==void 0?(this.each(function(n){n.textContent=e}),this):this.length===0?"":((t=this.get())===null||t===void 0?void 0:t.textContent)||""}},{key:"show",value:function(e){return e===void 0&&(e=this.display||""),e==="none"&&(e=""),this.css("display")!=="none"?this:this.css("display",e)}},{key:"hide",value:function(){var e;return this.length===0?this:(this.display=(e=this.get())===null||e===void 0?void 0:e.style.display,this.css("display","none"))}},{key:"remove",value:function(){var e=this;return this.each(function(t,n){!t.parentNode||(t.parentNode.removeChild(t),delete e[n])}),this}},{key:"empty",value:function(){return this.each(function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.removeChild(t),t=n}}),this}},{key:"equal",value:function(e){return Sn(e)?this.get()===e:Sf(e)?this.get()===e.get():!1}},{key:"clone",value:function(e){var t=[];return this.each(function(n){t.push(n.cloneNode(e))}),new f(t)}},{key:"prepend",value:function(e){var t=si(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){for(var a=t.length-1;a>=0;a--){var o=n?t[a].cloneNode(!0):t[a];r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)}}),this}},{key:"append",value:function(e){var t=si(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){for(var a=0;a<t.length;a++){var o=n?t[a].cloneNode(!0):t[a];typeof e=="string"?r.append(o):r.appendChild(o)}}),this}},{key:"before",value:function(e){var t=si(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){var a=r.parentNode;!a||t.forEach(function(o){n&&(o=o.cloneNode(!0)),a.insertBefore(o,r),r=o})}),this}},{key:"after",value:function(e){var t=si(e,this.context),n=typeof e=="string"&&/<.+>/.test(e);return this.each(function(r){var a=r.parentNode;!a||t.forEach(function(o){n&&(o=o.cloneNode(!0)),r.nextSibling?(a.insertBefore(o,r.nextSibling),r=o):a.appendChild(o)})}),this}},{key:"replaceWith",value:function(e){var t=[],n=si(e,this.context),r=typeof e=="string"&&/<.+>/.test(e);return this.each(function(a){var o=a.parentNode;if(!!o){var l=r?n[0].cloneNode(!0):n[0];o.replaceChild(l,a),t.push(l)}}),new f(t)}},{key:"getRoot",value:function(){return this.closest(dl)}},{key:"traverse",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=function l(u){var c=u.isCard();if(!(c&&(!n||n==="editable"&&!u.isEditableCard())))for(var h=t?u.first():u.last();h;){var v=t?h.next():h.prev();r&&r(h);var g=e(h);if(g===!1)return;if(g!==!0){var p=g&&typeof g!="boolean";p&&(h=g),c=h.isCard(),c?n===!0?(p&&e(h),l(h)):n==="editable"&&h.isEditableCard()&&function(){var b=h.find(wf);b.each(function(y,k){var E=b.eq(k);E&&l(E)})}():(p&&e(h),l(h))}a&&a(h,v),h=v}};e(this),o(this)}},{key:"getChildByPath",value:function(e,t){var n=this.get();if(e.length===0)return n;for(var r=function(u){var c=0,h=_r(n.childNodes),v;try{for(h.s();!(v=h.n()).done;){var g=v.value;if(!(t&&!t(g))){if(c==u)return g;c++}}}catch(p){h.e(p)}finally{h.f()}},a=0;e[a]!==void 0;){var o=r(e[a]);if(!o)break;n=o,a++}return n}},{key:"getIndex",value:function(e){var t=this[0].parentNode;if(!t)return 0;var n=0,r=_r(t.childNodes),a;try{for(r.s();!(a=r.n()).done;){var o=a.value;if(!(e&&!e(o))){if(o===this[0])return n;n++}}}catch(l){r.e(l)}finally{r.f()}return-1}},{key:"findParent",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.closest(dl),n=(e=t[0])!==null&&e!==void 0?e:t;if(this.length===0||!n.parentNode)return null;for(var r=this[0];r.parentNode!==n;){if(!r.parentNode)return null;r=r.parentNode}return new f(r)}},{key:"allChildren",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=[];return this.traverse(function(n){t.push(n)},void 0,e),t.shift(),t}},{key:"getViewport",value:function(){var e,t=this.window||{innerHeight:0,innerWidth:0},n=t.innerHeight,r=t.innerWidth,a=this.isText()?(e=this.parent())===null||e===void 0?void 0:e.get():this.get();if(!a)return{top:0,left:0,bottom:0,right:0};var o=a.getBoundingClientRect(),l=o.top,u=o.left,c=o.bottom,h=o.right;return{top:l,left:u,bottom:Math.min(c,n),right:Math.min(h,r)}}},{key:"inViewport",value:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=null;if(e.type!==Node.ELEMENT_NODE){if(!e.document)return!1;if(r=e.document.createElement("span"),e.next()){var a;(a=e[0].parentNode)===null||a===void 0||a.insertBefore(r,e[0].nextSibling)}else{var o;(o=e[0].parentNode)===null||o===void 0||o.appendChild(r)}e=new f(r)}var l=e.get();if(!l)return!0;var u=l.getBoundingClientRect(),c=u.top,h=u.left,v=u.right,g=u.bottom,p=this.getViewport();return r&&((t=r.parentNode)===null||t===void 0||t.removeChild(r)),n?c>0&&c<=p.bottom||g>0&&g<=p.bottom:c>0&&c>=p.top&&h>0&&h>=p.left&&g<=p.bottom&&v<=p.right}},{key:"scrollIntoView",value:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"nearest";if(typeof((t=e.document)===null||t===void 0?void 0:t.body.scrollIntoView)=="function"){var r,a=null;if(e.type!==Node.ELEMENT_NODE||e.name.toLowerCase()==="br"){var o;a=e.document.createElement("span"),a.innerHTML="&nbsp;",(o=e[0].parentNode)===null||o===void 0||o.insertBefore(a,e[0]),e=new f(a)}if(!this.inViewport(e)){var l;(l=e.get())===null||l===void 0||l.scrollIntoView({block:n,inline:n})}a&&((r=a.parentNode)===null||r===void 0||r.removeChild(a))}}}]),f}(),Zn=function(f,i,e){i===void 0&&(i=yo());var t=si(f,i),n=new(e||ey)(t,i||void 0);return Sn(f)&&f.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE&&(n.fragment=f),n},Ir,Br,Mr,Pr;Ce({},Ib,"*"),Ce({},Lr,{required:!0,value:["anchor","cursor","focus"]}),Ir={},Ce(Ir,Cf,{required:!0,value:/\w+/}),Ce(Ir,oi,{required:!0,value:"inline"}),Ce(Ir,bo,"*"),Ce(Ir,ma,"*"),Ce(Ir,"class","*"),Ce(Ir,"contenteditable","*"),Br={},Ce(Br,_f,{required:!0,value:/\w+/}),Ce(Br,oi,{required:!0,value:"inline"}),Ce(Br,bo,"*"),Ce(Br,ma,"*"),Ce(Br,"class","*"),Ce(Br,"contenteditable","*"),Mr={},Ce(Mr,Cf,{required:!0,value:/\w+/}),Ce(Mr,oi,{required:!0,value:"block"}),Ce(Mr,bo,"*"),Ce(Mr,ma,"*"),Ce(Mr,"class","*"),Ce(Mr,"contenteditable","*"),Pr={},Ce(Pr,_f,{required:!0,value:/\w+/}),Ce(Pr,oi,{required:!0,value:"block"}),Ce(Pr,bo,"*"),Ce(Pr,ma,"*"),Ce(Pr,"class","*"),Ce(Pr,"contenteditable","*");function dn(f,i){i===void 0&&(i={});var e=i.insertAt;if(!(!f||typeof document=="undefined")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=f:n.appendChild(document.createTextNode(f))}}var ty=`.data-drop-cursor {\r
	position: absolute;\r
	width: 2px;\r
	background-color: #347EFF;\r
}\r
\r
div.data-drag-image {\r
	background-color: #f9f9f9;\r
}`;dn(ty);var Df;(function(f){f.INLINE="inline",f.BLOCK="block"})(Df||(Df={}));var Rf;(function(f){f.CARD_CHANGE="card_change",f.CLICK="click",f.MOUSE_DOWN="mouse_down"})(Rf||(Rf={}));var Of;(function(f){f.NONE="none",f.BACKGROUND="background",f.BORDER="border"})(Of||(Of={}));var ny=`.data-tooltip {\r
	font-size: 14px;\r
	font-variant: tabular-nums;\r
	line-height: 1.5;\r
	color: rgba(0, 0, 0, 0.65);\r
	-webkit-box-sizing: border-box;\r
	box-sizing: border-box;\r
	margin: 0;\r
	padding: 0;\r
	list-style: none;\r
	position: absolute;\r
	z-index: 1060;\r
	display: block;\r
	visibility: visible;\r
	max-width: 320px;\r
	word-wrap:break-word;\r
    top: 0;\r
}\r
\r
.data-tooltip-hidden {\r
	opacity: 0;\r
	visibility: hidden;\r
	transition: opacity 0.3s ease-in-out;\r
}\r
\r
.data-tooltip-active {\r
	opacity: 1;\r
	visibility: visible;\r
}\r
\r
.data-tooltip-placement-top,.data-tooltip-placement-topLeft,.data-tooltip-placement-topRight {\r
	padding-bottom: 8px;\r
}\r
\r
.data-tooltip-placement-right,.data-tooltip-placement-rightTop,.data-tooltip-placement-rightBottom {\r
	padding-left: 8px;\r
}\r
\r
.data-tooltip-placement-bottom,.data-tooltip-placement-bottomLeft,.data-tooltip-placement-bottomRight {\r
	padding-top: 8px;\r
}\r
\r
.data-tooltip-placement-left,.data-tooltip-placement-leftTop,.data-tooltip-placement-leftBottom {\r
	padding-right: 8px;\r
}\r
\r
.data-tooltip-inner {\r
	padding: 6px 8px;\r
	color: #fff;\r
	text-align: left;\r
	text-decoration: none;\r
	background-color: rgba(0, 0, 0, 0.75);\r
	border-radius: 4px;\r
	-webkit-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r
	word-wrap: break-word;\r
}\r
\r
.data-tooltip-arrow {\r
	position: absolute;\r
	width: 0;\r
	height: 0;\r
	border-color: transparent;\r
	border-style: solid;\r
}\r
\r
.data-tooltip-placement-top .data-tooltip-arrow,.data-tooltip-placement-topLeft .data-tooltip-arrow,.data-tooltip-placement-topRight .data-tooltip-arrow {\r
	bottom: 3px;\r
	border-width: 5px 5px 0;\r
	border-top-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-top .data-tooltip-arrow {\r
	left: 50%;\r
	margin-left: -5px;\r
}\r
\r
.data-tooltip-placement-topLeft .data-tooltip-arrow {\r
	left: 16px;\r
}\r
\r
.data-tooltip-placement-topRight .data-tooltip-arrow {\r
	right: 16px;\r
}\r
\r
.data-tooltip-placement-right .data-tooltip-arrow,.data-tooltip-placement-rightTop .data-tooltip-arrow,.data-tooltip-placement-rightBottom .data-tooltip-arrow {\r
	left: 3px;\r
	border-width: 5px 5px 5px 0;\r
	border-right-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-right .data-tooltip-arrow {\r
	top: 50%;\r
	margin-top: -5px;\r
}\r
\r
.data-tooltip-placement-rightTop .data-tooltip-arrow {\r
	top: 8px;\r
}\r
\r
.data-tooltip-placement-rightBottom .data-tooltip-arrow {\r
	bottom: 8px;\r
}\r
\r
.data-tooltip-placement-left .data-tooltip-arrow,.data-tooltip-placement-leftTop .data-tooltip-arrow,.data-tooltip-placement-leftBottom .data-tooltip-arrow {\r
	right: 3px;\r
	border-width: 5px 0 5px 5px;\r
	border-left-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-left .data-tooltip-arrow {\r
	top: 50%;\r
	margin-top: -5px;\r
}\r
\r
.data-tooltip-placement-leftTop .data-tooltip-arrow {\r
	top: 8px;\r
}\r
\r
.data-tooltip-placement-leftBottom .data-tooltip-arrow {\r
	bottom: 8px;\r
}\r
\r
.data-tooltip-placement-bottom .data-tooltip-arrow,.data-tooltip-placement-bottomLeft .data-tooltip-arrow,.data-tooltip-placement-bottomRight .data-tooltip-arrow {\r
	top: 3px;\r
	border-width: 0 5px 5px;\r
	border-bottom-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-bottom .data-tooltip-arrow {\r
	left: 50%;\r
	margin-left: -5px;\r
}\r
\r
.data-tooltip-placement-bottomLeft .data-tooltip-arrow {\r
	left: 16px;\r
}\r
\r
.data-tooltip-placement-bottomRight .data-tooltip-arrow {\r
	right: 16px;\r
}`;dn(ny);var ry=`.data-toolbar {\r
	position: absolute;\r
	opacity: 0;\r
	visibility: hidden;\r
	width: auto;\r
	line-height: 26px;\r
	display: flex;\r
	flex-direction: row;\r
	font-size: 14px;\r
	font-weight: normal;\r
	text-indent: 0;\r
	-webkit-user-select: none;\r
	-moz-user-select: none;\r
	 -ms-user-select: none;\r
	     user-select: none;\r
    z-index: 127;\r
}\r
\r
.data-toolbar-active {\r
	opacity: 1;\r
	visibility: visible;\r
}\r
\r
.data-toolbar-block {\r
	top: auto;\r
	bottom: -46px;\r
	left: -1px;\r
	right: auto;\r
	height: 40px;\r
}\r
\r
.data-toolbar-btn {\r
	line-height: 26px;\r
	min-width: 28px;\r
	display: inline-block;\r
	text-align: center;\r
	color: #595959;\r
	transition: background-color 0.3s ease-in-out;\r
	cursor: pointer;\r
}\r
\r
.data-toolbar-btn-disabled,.data-toolbar-btn-disabled:hover {\r
	background-color: transparent;\r
	box-shadow: none;\r
	cursor: not-allowed;\r
}\r
\r
.data-toolbar-group {\r
	border: 1px solid rgba(226, 226, 226, 0.84);\r
    border-radius: 4px;\r
    box-shadow: 0px 2px 4px 0px rgb(225 225 225 / 50%);\r
    background: #fff;\r
    position: relative;\r
    display: inline-flex;\r
    padding: 5px;\r
    align-items: center;\r
}\r
\r
.data-toolbar-item {\r
	position: relative;\r
	display: inline-block;\r
	line-height: 26px;\r
	text-align: left;\r
	color: #595959;\r
	flex: 0 0 auto;\r
    font-size: 12px;\r
    cursor: pointer;\r
}\r
\r
.data-toolbar-item:not(.data-toolbar-item-input):hover, .data-toolbar-item.active:not(.data-toolbar-item-input){\r
    background-color: #f4f4f4;\r
    border-radius: 2px;\r
}\r
\r
.data-toolbar-item > * {\r
    font-size: 12px !important;\r
}\r
\r
.data-toolbar-item[disabled] {\r
	opacity: 0.5;\r
	cursor: not-allowed;\r
}\r
\r
.data-toolbar-item-split {\r
	width: 1px;\r
	height: 16px;\r
	line-height: 16px;\r
	margin: 6px 4px;\r
	border-left: 1px solid #e8e8e8;\r
	display: inline-block;\r
}\r
\r
.data-toolbar-item-dropdown-active {\r
	opacity: 1;\r
	visibility: visible;\r
	transform: translateY(0px);\r
}\r
\r
.data-toolbar-item-input {\r
	display: flex;\r
    margin: 0 4px;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input {\r
    width: 46px;\r
    line-height: 12px;\r
    font-size: 12px;\r
    outline: none;\r
    border: 1px solid #dadada;\r
    border-radius: 4px;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input::-moz-selection {\r
    color: inherit;\r
    background:transparent\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input::selection {\r
    color: inherit;\r
    background:transparent\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input:focus::-moz-selection\r
{\r
    color: #fff;\r
    background: #1890ff;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input:focus::selection\r
{\r
    color: #fff;\r
    background: #1890ff;\r
}\r
\r
.data-toolbar-item-dropdown .dropdown-container {\r
	display: none;\r
	position: absolute;\r
	padding: 8px 0;\r
	top: 100%;\r
	margin-top: 6px;\r
	border-radius: 2px;\r
	background-color: #fff;\r
	box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\r
    z-index: 99999;\r
}\r
\r
.data-toolbar-item-dropdown .dropdown-container.show {\r
	display: block;\r
}\r
\r
.data-toolbar-dropdown-item {\r
	padding: 2px 16px;\r
	margin: 0;\r
	white-space: nowrap;\r
	line-height: 26px;\r
	color: #404040;\r
	cursor: pointer;\r
    display: block;\r
}\r
\r
.data-toolbar-dropdown-item:hover {\r
	background-color: #f5f5f5;\r
}\r
\r
.data-toolbar-dropdown-switch {\r
	display: flex;\r
	align-items: center;\r
}\r
\r
.data-toolbar-dropdown-switch .data-toolbar-dropdown-item-content {\r
	flex: 1;\r
    margin-right: 4px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn {\r
    margin: 0;\r
    padding: 0;\r
    color: #595959;\r
    font-size: 14px;\r
    font-variant: tabular-nums;\r
    line-height: 1.5;\r
    list-style: none;\r
    -webkit-font-feature-settings: "tnum";\r
    font-feature-settings: "tnum";\r
    position: relative;\r
    display: inline-block;\r
    -webkit-box-sizing: border-box;\r
    box-sizing: border-box;\r
    vertical-align: middle;\r
    background-color: rgba(0,0,0,.25);\r
    border: 0;\r
    border-radius: 100px;\r
    cursor: pointer;\r
    -webkit-transition: all .2s;\r
    transition: all .2s;\r
    -webkit-user-select: none;\r
    -moz-user-select: none;\r
    -ms-user-select: none;\r
    user-select: none;\r
    min-width: 28px;\r
    height: 16px;\r
    line-height: 16px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked {\r
    background-color: #347EFF\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle {\r
    top: 2px;\r
    left: 2px;\r
    width: 12px;\r
    height: 12px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle, .data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\r
    position: absolute;\r
    -webkit-transition: all .2s ease-in-out;\r
    transition: all .2s ease-in-out;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-handle {\r
    left: calc(100% - 14px);\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\r
    top: 0;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    background-color: #fff;\r
    border-radius: 9px;\r
    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    content: "";\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-inner {\r
    display: block;\r
    margin: 0 5px 0 18px;\r
    font-size: 12px;\r
    color: #fff;\r
    -webkit-transition: margin .2s;\r
    transition: margin .2s;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-inner {\r
    margin: 0 18px 0 5px;\r
}\r
.data-toolbar-switch {\r
	display: flex;\r
	align-items: center;\r
    padding: 0 4px;\r
    cursor: pointer;\r
    width: -webkit-max-content;\r
    width: -moz-max-content;\r
    width: max-content;\r
}\r
\r
.data-toolbar-switch:hover {\r
    background-color: #f4f4f4;\r
    border-radius: 2px;\r
}\r
\r
.data-toolbar-switch .switch-content {\r
	flex: 1;\r
    margin-right: 4px;\r
}\r
\r
.data-toolbar-switch .switch-btn {\r
    margin: 0;\r
    padding: 0;\r
    color: #595959;\r
    font-size: 14px;\r
    font-variant: tabular-nums;\r
    line-height: 1.5;\r
    list-style: none;\r
    -webkit-font-feature-settings: "tnum";\r
    font-feature-settings: "tnum";\r
    position: relative;\r
    display: inline-block;\r
    -webkit-box-sizing: border-box;\r
    box-sizing: border-box;\r
    vertical-align: middle;\r
    background-color: rgba(0,0,0,.25);\r
    border: 0;\r
    border-radius: 100px;\r
    cursor: pointer;\r
    -webkit-transition: all .2s;\r
    transition: all .2s;\r
    -webkit-user-select: none;\r
    -moz-user-select: none;\r
    -ms-user-select: none;\r
    user-select: none;\r
    min-width: 28px;\r
    height: 16px;\r
    line-height: 16px;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked {\r
    background-color: #347EFF\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle {\r
    top: 2px;\r
    left: 2px;\r
    width: 12px;\r
    height: 12px;\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle, .data-toolbar-switch .switch-btn .switch-handle:before {\r
    position: absolute;\r
    -webkit-transition: all .2s ease-in-out;\r
    transition: all .2s ease-in-out;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked .switch-handle {\r
    left: calc(100% - 14px);\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle:before {\r
    top: 0;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    background-color: #fff;\r
    border-radius: 9px;\r
    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    content: "";\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-inner {\r
    display: block;\r
    margin: 0 5px 0 18px;\r
    font-size: 12px;\r
    color: #fff;\r
    -webkit-transition: margin .2s;\r
    transition: margin .2s;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked .switch-inner {\r
    margin: 0 18px 0 5px;\r
}`;dn(ry);var iy=`.ot-user-cursor {\r
	position: absolute;\r
	z-index: 125;\r
	width: 2px;\r
}\r
\r
.ot-user-cursor-trigger {\r
	position: absolute;\r
	top: -5px;\r
	left: -2px;\r
	border-radius: 100%;\r
	color: #ffffff;\r
	width: 6px;\r
	height: 6px;\r
	font-size: 0;\r
	overflow: hidden;\r
	transition: all 0.1s linear;\r
}\r
\r
.ot-user-cursor-trigger-active {\r
	top: -17px;\r
	border-radius: 2px;\r
	color: #ffffff;\r
	font-size: 10px;\r
	line-height: 18px;\r
	height: 18px;\r
	width: auto;\r
	padding: 0 3px;\r
	white-space: nowrap;\r
}\r
\r
.ot-card-mask {\r
	position: absolute;\r
	z-index: 10;\r
	background: transparent;\r
	cursor: not-allowed;\r
}\r
\r
.ot-user-background {\r
  z-index: 120;\r
}\r
\r
.ot-user-cursor-card {\r
	position: absolute;\r
}\r
\r
.ot-user-cursor-card .ot-user-cursor-trigger {\r
	display: none;\r
}\r
\r
.ot-user-cursor-card .ot-user-cursor-trigger-active {\r
	position: absolute;\r
	display: block;\r
	top: -19px;\r
	left: 0;\r
	border-radius: 2px;\r
	color: #ffffff;\r
	font-size: 10px;\r
	line-height: 18px;\r
	height: 18px;\r
	width: auto;\r
	padding: 0 3px;\r
	white-space: nowrap;\r
}`;dn(iy);var ba=function f(i,e){be(this,f),this.editor=void 0,this.options=void 0,this.kind="plugin",this.name=this.constructor.pluginName,this.disabled=void 0,this.editor=i,this.options=e||{};var t=this.options.disabled;this.disabled=t};ba.pluginName=void 0;var ay=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.kind="element",t.sechamCache=void 0,t.tagName=void 0,t.style=void 0,t.attributes=void 0,t.variable=void 0,t}return ke(e,[{key:"init",value:function(){var n=this.editor,r=n.schema,a=n.conversion;r.add(this.schema()),this.conversion&&this.conversion().forEach(function(o){var l=o.from,u=o.to;a.add(l,u)})}},{key:"setStyle",value:function(n){for(var r=this,a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];Sn(n)&&(n=Zn(n)),this.style&&Object.keys(this.style).forEach(function(u){var c,h=r.style[u];et(h)==="object"&&(h=h.value),(c=h.match(/@var\d/g))===null||c===void 0||c.forEach(function(v){var g=parseInt(v.replace("@var",""),10);h=h.replace(new RegExp(v,"gm"),o[g]||"")}),n.css(u,h)})}},{key:"setAttributes",value:function(n){for(var r=this,a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];Sn(n)&&(n=Zn(n)),this.attributes&&Object.keys(this.attributes).forEach(function(u){var c,h=r.attributes[u];et(h)==="object"&&(h=h.value),(c=h.match(/@var\d/g))===null||c===void 0||c.forEach(function(v){var g=parseInt(v.replace("@var",""),10);h=h.replace(new RegExp(v,"gm"),o[g]||"")}),n.attributes(u,h)})}},{key:"getStyle",value:function(n){var r=this;Sn(n)&&(n=Zn(n));var a={};return this.style&&this.isSelf(n)&&Object.keys(this.style).forEach(function(o){n=n;var l=o.toLowerCase().indexOf("color")>-1?tr(n.css(o)||"").toHexString():n.css(o),u=r.style[o];et(u)==="object"&&(l=u.format(l)),l&&(a[o]=l)}),a}},{key:"getAttributes",value:function(n){var r=this;Sn(n)&&(n=Zn(n));var a={};return this.attributes&&this.isSelf(n)&&Object.keys(this.attributes).forEach(function(o){var l=n.attributes(o),u=r.attributes[o];et(u)==="object"&&(l=u.format(l)),l&&(a[o]=l)}),a}},{key:"isSelf",value:function(n){Sn(n)&&(n=Zn(n));var r=this.schema();return Array.isArray(r)&&(r=r.find(function(a){var o=a.name;return o===n.name})),r?(Array.isArray(this.tagName)?this.tagName.indexOf(n.name)>-1:n.name===this.tagName)&&this.editor.schema.checkNode(n,r.attributes):!1}},{key:"schema",value:function(){var n=this;if(this.sechamCache)return this.sechamCache;var r={};if(this.attributes&&Object.keys(this.attributes).forEach(function(l){var u,c=n.attributes[l];et(c)==="object"&&(c=c.value),r[l]=c,(u=c.match(/@var\d/g))===null||u===void 0||u.forEach(function(h){if(!n.variable)throw"Please specify the variable type";r[l]=n.variable[h]})}),this.style){var a={};Object.keys(this.style).forEach(function(l){var u,c=n.style[l];et(c)==="object"&&(c=c.value),(u=c.match(/@var\d/g))===null||u===void 0||u.forEach(function(h){if(!n.variable)throw"Please specify the variable type";a[l]=n.variable[h]})}),r=Ve(Ve({},r),{},{style:a})}if(this.sechamCache={type:this.kind,attributes:r},typeof this.tagName=="string")this.sechamCache.name=this.tagName.toLowerCase();else if(Array.isArray(this.tagName)){var o=[];this.tagName.forEach(function(l){o.push(Ve(Ve({},n.sechamCache),{},{name:l}))}),this.sechamCache=o}return this.sechamCache}},{key:"createElement",value:function(){for(var n=Zn("<".concat(this.tagName," />")),r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return this.setStyle.apply(this,[n].concat(a)),this.setAttributes.apply(this,[n].concat(a)),n}}]),e}(ba),oy=`.am-engine ol, .am-engine-view ol, .am-engine ul, .am-engine-view ul {\r
    margin: 0 0 0 3px;\r
    padding: 0;\r
    list-style: none;\r
}\r
\r
.am-engine ol ul,.am-engine-view ol ul,.am-engine ul ul,.am-engine-view ul ul,.am-engine ol ol,.am-engine-view ol ol,.am-engine ul ol,.am-engine-view ul ol {\r
	margin-left: 0;\r
}\r
\r
.am-engine ol ul li,.am-engine-view ol ul li,.am-engine ul ul li,.am-engine-view ul ul li,.am-engine ol ol li,.am-engine-view ol ol li,.am-engine ul ol li,.am-engine-view ul ol li {\r
	margin-left: 2em;\r
}\r
\r
.am-engine ol ol[data-indent-new="0"],.am-engine-view ol ol[data-indent-new="0"],.am-engine ul ol[data-indent-new="0"],.am-engine-view ul ol[data-indent-new="0"],.am-engine ol ol[data-indent-new="3"],.am-engine-view ol ol[data-indent-new="3"],.am-engine ul ol[data-indent-new="3"],.am-engine-view ul ol[data-indent-new="3"],.am-engine ol ol[data-indent-new="6"],.am-engine-view ol ol[data-indent-new="6"],.am-engine ul ol[data-indent-new="6"],.am-engine-view ul ol[data-indent-new="6"] {\r
	list-style-type: decimal;\r
}\r
\r
.am-engine ol ol[data-indent-new="1"],.am-engine-view ol ol[data-indent-new="1"],.am-engine ul ol[data-indent-new="1"],.am-engine-view ul ol[data-indent-new="1"],.am-engine ol ol[data-indent-new="4"],.am-engine-view ol ol[data-indent-new="4"],.am-engine ul ol[data-indent-new="4"],.am-engine-view ul ol[data-indent-new="4"],.am-engine ol ol[data-indent-new="7"],.am-engine-view ol ol[data-indent-new="7"],.am-engine ul ol[data-indent-new="7"],.am-engine-view ul ol[data-indent-new="7"] {\r
	list-style-type: lower-alpha;\r
}\r
\r
.am-engine ol ol[data-indent-new="2"],.am-engine-view ol ol[data-indent-new="2"],.am-engine ul ol[data-indent-new="2"],.am-engine-view ul ol[data-indent-new="2"],.am-engine ol ol[data-indent-new="5"],.am-engine-view ol ol[data-indent-new="5"],.am-engine ul ol[data-indent-new="5"],.am-engine-view ul ol[data-indent-new="5"],.am-engine ol ol[data-indent-new="8"],.am-engine-view ol ol[data-indent-new="8"],.am-engine ul ol[data-indent-new="8"],.am-engine-view ul ol[data-indent-new="8"] {\r
	list-style-type: lower-roman;\r
}\r
\r
.am-engine ol ul[data-indent-new="3"],.am-engine-view ol ul[data-indent-new="3"],.am-engine ul ul[data-indent-new="3"],.am-engine-view ul ul[data-indent-new="3"],.am-engine ol ul[data-indent-new="6"],.am-engine-view ol ul[data-indent-new="6"],.am-engine ul ul[data-indent-new="6"],.am-engine-view ul ul[data-indent-new="6"] {\r
	list-style-type: disc;\r
}\r
\r
.am-engine ol ul[data-indent-new="1"],.am-engine-view ol ul[data-indent-new="1"],.am-engine ul ul[data-indent-new="1"],.am-engine-view ul ul[data-indent-new="1"],.am-engine ol ul[data-indent-new="4"],.am-engine-view ol ul[data-indent-new="4"],.am-engine ul ul[data-indent-new="4"],.am-engine-view ul ul[data-indent-new="4"],.am-engine ol ul[data-indent-new="7"],.am-engine-view ol ul[data-indent-new="7"],.am-engine ul ul[data-indent-new="7"],.am-engine-view ul ul[data-indent-new="7"] {\r
	list-style-type: circle;\r
}\r
\r
.am-engine ol ul[data-indent-new="2"],.am-engine-view ol ul[data-indent-new="2"],.am-engine ul ul[data-indent-new="2"],.am-engine-view ul ul[data-indent-new="2"],.am-engine ol ul[data-indent-new="5"],.am-engine-view ol ul[data-indent-new="5"],.am-engine ul ul[data-indent-new="5"],.am-engine-view ul ul[data-indent-new="5"],.am-engine ol ul[data-indent-new="8"],.am-engine-view ol ul[data-indent-new="8"],.am-engine ul ul[data-indent-new="8"],.am-engine-view ul ul[data-indent-new="8"] {\r
	list-style-type: square;\r
}\r
\r
.am-engine li,.am-engine-view li {\r
	margin-left: 23px;\r
    position: relative;\r
}\r
\r
.am-engine ol,.am-engine-view ol,.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"] {\r
	list-style-type: decimal;\r
}\r
\r
.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"] {\r
	list-style-type: lower-alpha;\r
}\r
\r
.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"] {\r
	list-style-type: lower-roman;\r
}\r
\r
.am-engine ul,.am-engine-view ul,.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\r
	list-style-type: disc;\r
}\r
\r
.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\r
	list-style-type: circle;\r
}\r
\r
.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\r
	list-style-type: square;\r
}\r
\r
.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"] {\r
	padding-left: 2em;\r
}\r
\r
.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"] {\r
	padding-left: 4em;\r
}\r
\r
.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"] {\r
	padding-left: 6em;\r
}\r
\r
.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"] {\r
	padding-left: 8em;\r
}\r
\r
.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"] {\r
	padding-left: 10em;\r
}\r
\r
.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\r
	padding-left: 12em;\r
}\r
\r
.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\r
	padding-left: 14em;\r
}\r
\r
.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\r
	padding-left: 16em;\r
}\r
\r
.am-engine .data-list,.am-engine-view .data-list {\r
	color: #262626;\r
	text-indent: 0;\r
}\r
\r
.am-engine .data-list-item,.am-engine-view .data-list-item {\r
    line-height: inherit;\r
    position: relative;\r
    list-style: none;\r
    text-indent: 0;\r
}`;dn(oy);var sy=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.kind="mark",t.copyOnEnter=void 0,t.followStyle=!0,t.combineValueByWrap=!1,t.mergeLeval=1,t}return ke(e,[{key:"execute",value:function(){var n=this.editor;if(!!fn(n)){var r=n.change,a=n.mark,o=this.createElement.apply(this,arguments),l=this.isTrigger?this.isTrigger.apply(this,arguments):!this.queryState();if(l){if(!this.followStyle&&r.range.get().collapsed)return;a.wrap(o)}else a.unwrap(o)}}},{key:"queryState",value:function(){var n=this,r=this.editor;if(!!fn(r)){var a=r.change;if(!this.style&&!this.attributes)return a.marks.some(function(l){return l.name===n.tagName});var o=[];return a.marks.forEach(function(l){o.push.apply(o,gt(Object.values(n.getStyle(l)))),o.push.apply(o,gt(Object.values(n.getAttributes(l))))}),o.length===0?void 0:o}}},{key:"schema",value:function(){var n=yi(Cr(e.prototype),"schema",this).call(this);return Array.isArray(n)?n.map(function(r){return Ve({},r)}):Ve({},n)}}]),e}(ay),ly=`.am-engine .card-selected [data-card-element="center"].data-card-background-selected {\r
    background: rgba(27, 162, 227, 0.2);\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected {\r
    outline: 2px solid #1890FF;\r
    border-radius: 2px;\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected::-moz-selection {\r
    background: transparent;\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected::selection {\r
    background: transparent;\r
}\r
\r
.am-engine-view [data-card-element="center"] .data-card-loading,.am-engine [data-card-element="center"] .data-card-loading {\r
    display: inline-block;\r
    font-style: normal;\r
    vertical-align: -0.125em;\r
    text-align: center;\r
    text-transform: none;\r
    line-height: 0;\r
    text-rendering: optimizeLegibility;\r
    -webkit-font-smoothing: antialiased;\r
    margin-right: 5px;\r
    padding: 16px;\r
    width: 100%;\r
}\r
\r
.am-engine-view [data-card-element="center"] .data-card-loading .data-card-spin,.am-engine [data-card-element="center"] .data-card-loading .data-card-spin {\r
    display: inline-block;\r
    -webkit-animation: loadingCircle 1s infinite linear;\r
    animation: loadingCircle 1s infinite linear;\r
}`;dn(ly);var uy=`  .data-icon {\r
    font-family: "data-icon" !important;\r
    font-size: 16px;\r
    font-style: normal;\r
    -webkit-font-smoothing: antialiased;\r
    -moz-osx-font-smoothing: grayscale;\r
  }\r
  \r
  .data-icon-block-image:before {\r
    content: "\\ea20";\r
  }\r
  \r
  .data-icon-inline-image:before {\r
    content: "\\e601";\r
  }\r
  \r
  .data-icon-no-border:before {\r
    content: "\\e608";\r
  }\r
  \r
  .data-icon-line-height:before {\r
    content: "\\e697";\r
  }\r
  \r
  .data-icon-text:before {\r
    content: "\\e600";\r
  }\r
  \r
  .data-icon-comment:before {\r
    content: "\\e73e";\r
  }\r
  \r
  .data-icon-huanyuan:before {\r
    content: "\\e60a";\r
  }\r
  \r
  .data-icon-label:before {\r
    content: "\\e714";\r
  }\r
  \r
  .data-icon-video:before {\r
    content: "\\e741";\r
  }\r
  \r
  .data-icon-table:before {\r
    content: "\\e6a8";\r
  }\r
  \r
  .data-icon-h:before {\r
    content: "\\e7a0";\r
  }\r
  \r
  .data-icon-collapse-subtree:before {\r
    content: "\\e754";\r
  }\r
  \r
  .data-icon-expand-subtree:before {\r
    content: "\\e792";\r
  }\r
  \r
  .data-icon-sub-node:before {\r
    content: "\\e78e";\r
  }\r
  \r
  .data-icon-sister-node:before {\r
    content: "\\e784";\r
  }\r
  \r
  .data-icon-sup:before {\r
    content: "\\e790";\r
  }\r
  \r
  .data-icon-sub:before {\r
    content: "\\e75a";\r
  }\r
  \r
  .data-icon-maximize:before {\r
    content: "\\e752";\r
  }\r
  \r
  .data-icon-codeblock:before {\r
    content: "\\e709";\r
  }\r
  \r
  .data-icon-emoji:before {\r
    content: "\\e73a";\r
  }\r
  \r
  .data-icon-h4:before {\r
    content: "\\e759";\r
  }\r
  \r
  .data-icon-h1:before {\r
    content: "\\e75b";\r
  }\r
  \r
  .data-icon-h5:before {\r
    content: "\\e75c";\r
  }\r
  \r
  .data-icon-h2:before {\r
    content: "\\e75d";\r
  }\r
  \r
  .data-icon-h3:before {\r
    content: "\\e760";\r
  }\r
  \r
  .data-icon-h6:before {\r
    content: "\\e761";\r
  }\r
  \r
  .data-icon-liuchengtu:before {\r
    content: "\\e61c";\r
  }\r
  \r
  .data-icon-website:before {\r
    content: "\\e694";\r
  }\r
  \r
  .data-icon-preferences:before {\r
    content: "\\e788";\r
  }\r
  \r
  .data-icon-hr:before {\r
    content: "\\e76a";\r
  }\r
  \r
  .data-icon-task-list:before {\r
    content: "\\e79f";\r
  }\r
  \r
  .data-icon-unordered-list:before {\r
    content: "\\e777";\r
  }\r
  \r
  .data-icon-ordered-list:before {\r
    content: "\\e795";\r
  }\r
  \r
  .data-icon-arrow-left:before {\r
    content: "\\e748";\r
  }\r
  \r
  .data-icon-arrow-up:before {\r
    content: "\\e769";\r
  }\r
  \r
  .data-icon-arrow-right:before {\r
    content: "\\e779";\r
  }\r
  \r
  .data-icon-arrow-down:before {\r
    content: "\\e79a";\r
  }\r
  \r
  .data-icon-moremark:before {\r
    content: "\\e772";\r
  }\r
  \r
  .data-icon-clean:before {\r
    content: "\\e74d";\r
  }\r
  \r
  .data-icon-paintformat:before {\r
    content: "\\e756";\r
  }\r
  \r
  .data-icon-lock:before {\r
    content: "\\e768";\r
  }\r
  \r
  .data-icon-loading:before {\r
    content: "\\e76b";\r
  }\r
  \r
  .data-icon-unlock:before {\r
    content: "\\e796";\r
  }\r
  \r
  .data-icon-collapse:before {\r
    content: "\\e79e";\r
  }\r
  \r
  .data-icon-align-bottom:before {\r
    content: "\\e72b";\r
  }\r
  \r
  .data-icon-attachment:before {\r
    content: "\\e72c";\r
  }\r
  \r
  .data-icon-bold:before {\r
    content: "\\e72d";\r
  }\r
  \r
  .data-icon-border-color:before {\r
    content: "\\e72e";\r
  }\r
  \r
  .data-icon-border-all:before {\r
    content: "\\e72f";\r
  }\r
  \r
  .data-icon-border-inner:before {\r
    content: "\\e730";\r
  }\r
  \r
  .data-icon-border-left:before {\r
    content: "\\e731";\r
  }\r
  \r
  .data-icon-border-bottom:before {\r
    content: "\\e732";\r
  }\r
  \r
  .data-icon-border-none:before {\r
    content: "\\e733";\r
  }\r
  \r
  .data-icon-box:before {\r
    content: "\\e734";\r
  }\r
  \r
  .data-icon-border-outer:before {\r
    content: "\\e735";\r
  }\r
  \r
  .data-icon-border-right:before {\r
    content: "\\e736";\r
  }\r
  \r
  .data-icon-clear:before {\r
    content: "\\e737";\r
  }\r
  \r
  .data-icon-close:before {\r
    content: "\\e738";\r
  }\r
  \r
  .data-icon-code-example:before {\r
    content: "\\e739";\r
  }\r
  \r
  .data-icon-clip:before {\r
    content: "\\e73b";\r
  }\r
  \r
  .data-icon-border-up:before {\r
    content: "\\e73c";\r
  }\r
  \r
  .data-icon-code:before {\r
    content: "\\e73d";\r
  }\r
  \r
  .data-icon-command:before {\r
    content: "\\e73f";\r
  }\r
  \r
  .data-icon-compact-display:before {\r
    content: "\\e740";\r
  }\r
  \r
  .data-icon-copy:before {\r
    content: "\\e742";\r
  }\r
  \r
  .data-icon-download:before {\r
    content: "\\e743";\r
  }\r
  \r
  .data-icon-deletecolumn:before {\r
    content: "\\e744";\r
  }\r
  \r
  .data-icon-cut:before {\r
    content: "\\e745";\r
  }\r
  \r
  .data-icon-decreasedecimalplace:before {\r
    content: "\\e746";\r
  }\r
  \r
  .data-icon-drag:before {\r
    content: "\\e747";\r
  }\r
  \r
  .data-icon-delete:before {\r
    content: "\\e749";\r
  }\r
  \r
  .data-icon-drag-circle:before {\r
    content: "\\e74a";\r
  }\r
  \r
  .data-icon-deleterow:before {\r
    content: "\\e74b";\r
  }\r
  \r
  .data-icon-edit:before {\r
    content: "\\e74c";\r
  }\r
  \r
  .data-icon-filter:before {\r
    content: "\\e74e";\r
  }\r
  \r
  .data-icon-expand:before {\r
    content: "\\e74f";\r
  }\r
  \r
  .data-icon-error:before {\r
    content: "\\e750";\r
  }\r
  \r
  .data-icon-freezerowcoloum:before {\r
    content: "\\e751";\r
  }\r
  \r
  .data-icon-freezefirstrow:before {\r
    content: "\\e753";\r
  }\r
  \r
  .data-icon-freezzecolumn:before {\r
    content: "\\e755";\r
  }\r
  \r
  .data-icon-border-style:before {\r
    content: "\\e757";\r
  }\r
  \r
  .data-icon-gotolink:before {\r
    content: "\\e758";\r
  }\r
  \r
  .data-icon-increasedecimalplace:before {\r
    content: "\\e75e";\r
  }\r
  \r
  .data-icon-insertrowbelow:before {\r
    content: "\\e75f";\r
  }\r
  \r
  .data-icon-image:before {\r
    content: "\\e762";\r
  }\r
  \r
  .data-icon-italic:before {\r
    content: "\\e763";\r
  }\r
  \r
  .data-icon-indent:before {\r
    content: "\\e764";\r
  }\r
  \r
  .data-icon-insertrowabove:before {\r
    content: "\\e765";\r
  }\r
  \r
  .data-icon-insertrowright:before {\r
    content: "\\e766";\r
  }\r
  \r
  .data-icon-left-circle-fill:before {\r
    content: "\\e767";\r
  }\r
  \r
  .data-icon-link:before {\r
    content: "\\e76c";\r
  }\r
  \r
  .data-icon-keyboard:before {\r
    content: "\\e76d";\r
  }\r
  \r
  .data-icon-more:before {\r
    content: "\\e76e";\r
  }\r
  \r
  .data-icon-merge-cells:before {\r
    content: "\\e76f";\r
  }\r
  \r
  .data-icon-outdent:before {\r
    content: "\\e770";\r
  }\r
  \r
  .data-icon-mention:before {\r
    content: "\\e771";\r
  }\r
  \r
  .data-icon-plus:before {\r
    content: "\\e773";\r
  }\r
  \r
  .data-icon-minus-circle-o:before {\r
    content: "\\e774";\r
  }\r
  \r
  .data-icon-highlight:before {\r
    content: "\\e775";\r
  }\r
  \r
  .data-icon-paste:before {\r
    content: "\\e776";\r
  }\r
  \r
  .data-icon-insertrowleft:before {\r
    content: "\\e778";\r
  }\r
  \r
  .data-icon-quote:before {\r
    content: "\\e77a";\r
  }\r
  \r
  .data-icon-plus-circle-o:before {\r
    content: "\\e77b";\r
  }\r
  \r
  .data-icon-right-circle-fill:before {\r
    content: "\\e77c";\r
  }\r
  \r
  .data-icon-question-circle-o:before {\r
    content: "\\e77d";\r
  }\r
  \r
  .data-icon-preview:before {\r
    content: "\\e77e";\r
  }\r
  \r
  .data-icon-reload:before {\r
    content: "\\e77f";\r
  }\r
  \r
  .data-icon-rotate-left:before {\r
    content: "\\e780";\r
  }\r
  \r
  .data-icon-math:before {\r
    content: "\\e781";\r
  }\r
  \r
  .data-icon-overflow:before {\r
    content: "\\e782";\r
  }\r
  \r
  .data-icon-redo:before {\r
    content: "\\e783";\r
  }\r
  \r
  .data-icon-searchreplace:before {\r
    content: "\\e785";\r
  }\r
  \r
  .data-icon-save:before {\r
    content: "\\e786";\r
  }\r
  \r
  .data-icon-singleselect:before {\r
    content: "\\e787";\r
  }\r
  \r
  .data-icon-rotate-right:before {\r
    content: "\\e789";\r
  }\r
  \r
  .data-icon-sort-ascending:before {\r
    content: "\\e78a";\r
  }\r
  \r
  .data-icon-sort-descending:before {\r
    content: "\\e78b";\r
  }\r
  \r
  .data-icon-toc:before {\r
    content: "\\e78c";\r
  }\r
  \r
  .data-icon-solit-cells:before {\r
    content: "\\e78d";\r
  }\r
  \r
  .data-icon-translate:before {\r
    content: "\\e78f";\r
  }\r
  \r
  .data-icon-successful:before {\r
    content: "\\e791";\r
  }\r
  \r
  .data-icon-strikethrough:before {\r
    content: "\\e793";\r
  }\r
  \r
  .data-icon-undo:before {\r
    content: "\\e794";\r
  }\r
  \r
  .data-icon-underline:before {\r
    content: "\\e797";\r
  }\r
  \r
  .data-icon-unlink:before {\r
    content: "\\e798";\r
  }\r
  \r
  .data-icon-wrap:before {\r
    content: "\\e799";\r
  }\r
  \r
  .data-icon-upload:before {\r
    content: "\\e79b";\r
  }\r
  \r
  .data-icon-zoom-out:before {\r
    content: "\\e79c";\r
  }\r
  \r
  .data-icon-zoom-in:before {\r
    content: "\\e79d";\r
  }\r
  \r
  .data-icon-align-center:before {\r
    content: "\\e725";\r
  }\r
  \r
  .data-icon-align-justify:before {\r
    content: "\\e726";\r
  }\r
  \r
  .data-icon-align-left:before {\r
    content: "\\e727";\r
  }\r
  \r
  .data-icon-align-top:before {\r
    content: "\\e728";\r
  }\r
  \r
  .data-icon-align-right:before {\r
    content: "\\e729";\r
  }\r
  \r
  .data-icon-align-middle:before {\r
    content: "\\e72a";\r
  }\r
\r
.data-anticon {\r
    display: inline-block;\r
    font-style: normal;\r
    vertical-align: -0.125em;\r
    text-align: center;\r
    text-transform: none;\r
    line-height: 0;\r
    text-rendering: optimizeLegibility;\r
    -webkit-font-smoothing: antialiased;\r
}\r
\r
.data-anticon svg {\r
    display: inline-block;\r
}\r
\r
@-webkit-keyframes loadingCircle {\r
    100% {\r
      transform: rotate(360deg);\r
    }\r
}\r
@keyframes loadingCircle {\r
    100% {\r
      transform: rotate(360deg);\r
    }\r
}\r
\r
.data-anticon .data-anticon-spin {\r
    display: inline-block;\r
    -webkit-animation: loadingCircle 1s infinite linear;\r
    animation: loadingCircle 1s infinite linear;\r
}\r
\r
.data-anticon > * {\r
    line-height: 1;\r
}\r
\r
.am-engine {\r
    position: relative;\r
    background-color: #FFFFFF;\r
}\r
\r
.am-engine.am-engine-placeholder:before {\r
  content: attr(data-placeholder);\r
  pointer-events: none;\r
  position: absolute;\r
  color: #bbbfc4;\r
  height: 0;\r
}\r
\r
.am-engine ::-moz-selection {\r
    background: rgba(180, 213, 254, 0.5) !important;\r
    color: inherit!important;\r
}\r
\r
.am-engine ::selection {\r
    background: rgba(180, 213, 254, 0.5) !important;\r
    color: inherit!important;\r
}\r
\r
.am-engine , .am-engine-view {\r
    font-family: 'Chinese Quote', 'Segoe UI', Roboto, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji';\r
	word-wrap: break-word;\r
	outline-style: none;\r
	white-space: pre-wrap;\r
    -webkit-user-select: auto;\r
       -moz-user-select: auto;\r
        -ms-user-select: auto;\r
            user-select: auto;\r
    font-size: 14px;\r
    line-height: 1.74;\r
    color: #262626;\r
    letter-spacing: .05em;\r
    /* pt / px \u6362\u7B97\u8868\uFF1Ahttps://websemantics.uk/articles/font-size-conversion/ */\r
}\r
\r
.am-engine > *:first-child,.am-engine-view > *:first-child {\r
	margin-top: 0 !important;\r
}\r
\r
.am-engine p , .am-engine-view p {\r
    white-space: normal;\r
    margin: 0;\r
    line-height: 1.74;\r
}\r
\r
.am-engine [contenteditable="true"],.am-engine-view [contenteditable="true"] {\r
	outline-style: none;\r
}\r
\r
.am-engine .selection-transparent::-moz-selection,.am-engine-view .selection-transparent::-moz-selection {\r
	background: transparent;\r
}\r
\r
.am-engine .selection-transparent::selection,.am-engine-view .selection-transparent::selection {\r
	background: transparent;\r
}\r
/*---------------------------\u5361\u7247 begin-----------------------*/\r
\r
.am-engine [data-card-type], .am-engine-view [data-card-type] {\r
    white-space: normal;\r
}\r
.am-engine span[data-card-type="inline"],.am-engine-view span[data-card-type="inline"] {\r
	display: inline-block;\r
	text-indent: 0;\r
	vertical-align: baseline;\r
	white-space: initial;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element],.am-engine-view span[data-card-type="inline"] span[data-card-element] {\r
	display: inline-block;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="center"],.am-engine-view span[data-card-type="inline"] span[data-card-element="center"] {\r
	vertical-align: bottom;\r
  border-radius: 2px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\r
	text-align: left;\r
	-webkit-user-select: text;\r
	   -moz-user-select: text;\r
	    -ms-user-select: text;\r
	        user-select: text;\r
  min-width: 1px;\r
  background: transparent;\r
  bottom: 0;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"] {\r
  left: -1px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\r
  right: -1px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"]::-moz-selection,\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"]::-moz-selection,.am-engine-view span[data-card-type="inline"] span[data-card-element="right"]::-moz-selection {\r
  background: transparent !important;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"]::selection,\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"]::selection,\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"]::selection,.am-engine-view span[data-card-type="inline"] span[data-card-element="right"]::selection {\r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"],.am-engine-view div[data-card-type="block"],.am-engine span[data-card-type="inline"].data-card-block,.am-engine-view span[data-card-type="inline"].data-card-block {\r
	display: block;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\r
	bottom: 0;\r
	position: absolute;\r
	width: 2px;\r
	overflow: hidden;\r
	outline: none;\r
	text-align: left;\r
	text-indent: 0;\r
	-webkit-box-flex: 0;\r
	flex: 0 0 auto;\r
	-webkit-user-select: text;\r
	-moz-user-select: text;\r
	 -ms-user-select: text;\r
	     user-select: text;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"] {\r
	left: -2px;\r
	text-align: left;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\r
	right: -2px;\r
	text-align: right;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection { \r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::selection { \r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection {\r
	background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::selection {\r
	background: transparent !important;\r
}\r
	\r
\r
.am-engine span[data-card-element="body"],.am-engine-view span[data-card-element="body"],.am-engine div[data-card-element="body"],.am-engine-view div[data-card-element="body"] {\r
	position: relative;\r
}\r
\r
.am-engine span[data-card-element="body"] [data-card-element="center"],.am-engine-view span[data-card-element="body"] [data-card-element="center"],.am-engine div[data-card-element="body"] [data-card-element="center"],.am-engine-view div[data-card-element="body"] [data-card-element="center"] {\r
	-webkit-user-select: text;\r
	-moz-user-select: text;\r
	 -ms-user-select: text;\r
	     user-select: text;\r
}\r
.am-engine span[data-card-element="body"] [data-element="editable"],.am-engine div[data-card-element="body"] [data-element="editable"]\r
{\r
    cursor: text;\r
}\r
/*---------------------------\u5361\u7247 end-----------------------*/`;dn(uy);var cy=`.card-maximize-header {\r
    position: fixed !important;\r
    top: 0;\r
    right: 0;\r
    left: 0;\r
    z-index: 9999;\r
    height: 56px;\r
    background: #fff;\r
    border-bottom: 1px solid #e8e8e8;\r
    width: 100%;\r
}\r
\r
.card-maximize-header .header-crumb {\r
    float: left;\r
    line-height: 32px;\r
    display: flex;\r
    height: 100%;\r
    align-items: center;\r
    -webkit-box-align: center;\r
    -ms-flex-align: center;\r
}\r
\r
.card-maximize-header .header-crumb a\r
{\r
    color: #595959 !important;\r
    font-size: 14px;\r
    cursor: pointer;\r
}\r
\r
.card-maximize-header .header-crumb .split {\r
    display: inline-block;\r
    vertical-align: middle;\r
    padding: 0 15px;\r
    font-size: 20px;\r
    padding-right: 8px;\r
    font-weight: 200;\r
    margin: 0 8px;\r
}\r
\r
.card-maximize-header .header-crumb .split + a {\r
    display: inline-block;\r
    vertical-align: middle;\r
}\r
\r
.card-maximize-header .header-crumb .split + a:hover {\r
	color: #8C8C8C;\r
}\r
\r
.data-card-block-max > [data-card-element="body"] > [data-card-element="center"], .data-card-block-max > [data-card-element="body"] > [data-card-element="center"].data-card-background-selected {\r
    top: 96px;\r
    background: #fafafa !important;\r
    position: fixed!important;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    z-index: 124;\r
    overflow: auto;\r
    padding: 20px;\r
}\r
\r
.am-engine-mobile .data-card-block-max > [data-card-element="body"] > [data-card-element="center"],.am-engine-view .data-card-block-max > [data-card-element="body"] > [data-card-element="center"] {\r
    top:56px;\r
}`;dn(cy);var fy=`.data-card-resize {\r
    position: absolute;\r
    bottom: -3px;\r
    right: 0px;\r
    left: 0px;\r
    margin: 0 auto;\r
    z-index: 2;\r
    display: flex;\r
    align-items: center;\r
    justify-content: center;\r
}\r
\r
.data-card-resize-btn{\r
    background: #d9dbdd;\r
    border-radius: 3px;\r
    height: 6px;\r
    padding: 0 50px;\r
    display: block;\r
}\r
\r
.data-card-resize-btn svg {\r
    display: block;\r
    color: #999;\r
}\r
\r
.data-card-resize-btn:hover {\r
    cursor: row-resize;\r
}`;dn(fy);var dy=`.data-card-dnd {\r
    position: absolute;\r
    top: 0;\r
    left: -21px;\r
    right: auto;\r
    bottom: auto;\r
    width: 18px;\r
    height: 24px;\r
    line-height: 24px;\r
    font-size: 14px;\r
    font-weight: normal;\r
    display: none;\r
    opacity: 0;\r
    z-index: 125;\r
    transition: all 0.3s ease-in-out;\r
    background: rgba(255, 255, 255, 0.9);\r
}\r
\r
.data-card-dnd-active {\r
    display: block;\r
    opacity: 1;\r
    cursor: pointer;\r
}\r
\r
.data-card-dnd:hover {\r
	background: #f4f4f4;\r
	color: #595959;\r
}\r
\r
.data-card-dnd-trigger {\r
    width: 18px;\r
    height: 24px;\r
    text-align: center;\r
    color: #BFBFBF;\r
    font-size: 16px;\r
    border-radius: 2px 2px;\r
    cursor: move;\r
    cursor: grab;\r
    cursor: -moz-grab;\r
    cursor: -webkit-grab;\r
}\r
\r
.am-engine-view .data-toolbar-active {\r
	min-width: 200px;\r
}\r
\r
.data-card-toolbar.data-toolbar-block {\r
	top: -48px;\r
	bottom: auto;\r
	display: none;\r
}\r
\r
.data-card-toolbar.data-card-toolbar-active {\r
	display: block;\r
}\r
\r
.data-card-toolbar.data-toolbar-active {\r
	display: block;\r
}`;dn(dy);var hy=`.data-scrollable::-webkit-scrollbar {\r
    display: none;\r
    overflow: hidden;\r
  }\r
  .data-scrollable.scroll-x {\r
    padding-bottom: 10px;\r
    overflow-x: hidden;\r
  }\r
  \r
  .data-scrollable.scroll-y {\r
    padding-right: 10px;\r
    overflow-y: hidden;\r
  }\r
\r
  .data-scrollable:hover .data-scrollbar {\r
    display: block;\r
  }\r
  .data-scrollable.scrolling {\r
    -webkit-user-select: none;\r
       -moz-user-select: none;\r
        -ms-user-select: none;\r
            user-select: none;\r
  }\r
  .data-scrollable.scrolling .data-scrollbar {\r
    display: block;\r
  }\r
  .data-scrollable .data-scrollbar {\r
    display: none;\r
    position: absolute;\r
    cursor: default;\r
    transition: opacity 0.3s ease-in-out;\r
  }\r
  .data-scrollable .data-scrollbar .data-scrollbar-trigger {\r
    position: absolute;\r
    background: #c1c1c1;\r
    border-radius: 10px;\r
    cursor: pointer;\r
  }\r
  .data-scrollable .data-scrollbar .data-scrollbar-trigger:hover {\r
    background: #888;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-x {\r
    height: 8px;\r
    bottom: 0px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\r
    height: 8px;\r
    min-width: 60px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-y {\r
    top: 0;\r
    width: 8px;\r
    height: 100%;\r
    right: 0px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-y .data-scrollbar-trigger {\r
    width: 8px;\r
    min-height: 60px;\r
  }\r
  .data-scrollable .scrollbar-shadow-left {\r
    position: absolute;\r
    z-index: 10;\r
    left: 0;\r
    top: 0;\r
    bottom: 0;\r
    width: 4px;\r
    opacity: 0.8;\r
    background: linear-gradient(270deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\r
    background: -webkit-linear-gradient(right, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\r
    pointer-events: none;\r
  }\r
  .data-scrollable .scrollbar-shadow-right {\r
    position: absolute;\r
    z-index: 10;\r
    left: 0;\r
    top: 0;\r
    bottom: 0;\r
    width: 4px;\r
    opacity: 0.8;\r
    background: linear-gradient(90deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\r
    background: -webkit-linear-gradient(left, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\r
    pointer-events: none;\r
  }`;dn(hy);var vy=`.data-resizer {\r
    position: absolute;\r
    width: 100%;\r
    height: 100%;\r
    top: 0;\r
    left: 0;\r
    bottom: 0px;\r
    right: 0;\r
    z-index: 1;\r
    outline: 2px solid #1890FF;\r
    max-width: initial !important;\r
}\r
.data-resizer img {\r
    position: absolute;\r
    top: 0;\r
    left: 0;\r
    bottom: 0;\r
    right: 0;\r
    cursor: pointer;\r
    width: 100%;\r
    height: 100%;\r
    opacity: 0.3;\r
}\r
.data-resizer-holder {\r
    position: absolute;\r
    width: 14px;\r
    height: 14px;\r
    border: 2px solid #fff;\r
    border-radius: 50%;\r
    background: #1890FF;\r
    display: inline-block;\r
}\r
.data-resizer-holder-right-top {\r
    top: -6px;\r
    right: -6px;\r
    cursor: nesw-resize;\r
}\r
.data-resizer-holder-right-bottom {\r
    bottom: -6px;\r
    right: -6px;\r
    cursor: nwse-resize;\r
}\r
.data-resizer-holder-left-bottom {\r
    bottom: -6px;\r
    left: -6px;\r
    cursor: nesw-resize;\r
}\r
.data-resizer-holder-left-top {\r
    left: -6px;\r
    top: -6px;\r
    cursor: nwse-resize;\r
}\r
\r
.data-resizer-number {\r
    position: absolute;\r
    display: inline-block;\r
    line-height: 24px;\r
    padding: 0 4px;\r
    font-size: 12px;\r
    border-radius: 3px 3px;\r
    background: rgba(0, 0, 0, 0.86);\r
    color: rgba(255, 255, 255, 0.96);\r
    font-family: 'Lucida Console', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\r
    opacity: 0;\r
    visibility: hidden;\r
    transition: opacity 0.3s ease-in-out;\r
    transform: scale(0.8);\r
}\r
\r
.data-resizer-number-right-top {\r
    top: 0px;\r
    right: -6px;\r
    transform: translateX(100%) scale(0.8);\r
}\r
\r
.data-resizer-number-right-bottom {\r
    right: -6px;\r
    bottom: 0px;\r
    transform: translateX(100%) scale(0.8);\r
}\r
\r
.data-resizer-number-left-bottom {\r
    left: -6px;\r
    bottom: 0px;\r
    transform: translateX(-100%) scale(0.8);\r
}\r
\r
.data-resizer-number-left-top {\r
    left: -6px;\r
    top: 0px;\r
    transform: translateX(-100%) scale(0.8);\r
}\r
\r
.data-resizer-number-active {\r
    opacity: 1;\r
    visibility: visible;\r
}`;dn(vy);var qf="markdown-it",gy=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.tagName="strong",t.markdownIt=function(o){t.options.markdown!==!1&&o.enable("emphasis")},t}return ke(e,[{key:"init",value:function(){yi(Cr(e.prototype),"init",this).call(this);var n=this.editor;fn(n)&&n.on(qf,this.markdownIt)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+b"}},{key:"conversion",value:function(){return[{from:{span:{style:{"font-weight":["bold","700"]}}},to:this.tagName},{from:"b",to:this.tagName}]}},{key:"destroy",value:function(){this.editor.off(qf,this.markdownIt)}}],[{key:"pluginName",get:function(){return"bold"}}]),e}(sy),py=function(f){rt(e,f);var i=it(e);function e(){return be(this,e),i.apply(this,arguments)}return ke(e,[{key:"execute",value:function(){var n=this.editor;!fn(n)||n.readonly||n.history.undo()}},{key:"queryState",value:function(){var n=this.editor;if(!(!fn(n)||n.readonly))return n.history.hasUndo()}},{key:"hotkey",value:function(){return this.options.hotkey||["mod+z","shift+mod+z"]}}],[{key:"pluginName",get:function(){return"undo"}}]),e}(ba),my=function(f){rt(e,f);var i=it(e);function e(){return be(this,e),i.apply(this,arguments)}return ke(e,[{key:"execute",value:function(){var n=this.editor;!fn(n)||n.readonly||n.history.redo()}},{key:"queryState",value:function(){var n=this.editor;if(!(!fn(n)||n.readonly))return n.history.hasRedo()}},{key:"hotkey",value:function(){return this.options.hotkey||["mod+y","shift+mod+y"]}}],[{key:"pluginName",get:function(){return"redo"}}]),e}(ba);function by(f,i){i===void 0&&(i={});var e=i.insertAt;if(!(!f||typeof document=="undefined")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=f:n.appendChild(document.createTextNode(f))}}var yy=`.am-engine.data-paintformat-mode,\r
.am-engine-view.data-paintformat-mode {\r
    cursor: text;\r
    cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAUCAYAAACTQC2+AAAABGdBTUEAALGPC/xhBQAAATtJREFUSA3dlTFLA0EQhU+jlSkEG63EYGdlZZFG7QUbSyG/QP/C/Q0rqzQWQX+BwUKwtrexEFRQtFSI35NZWDa3soOHhQ8eM/v2zWw2N9xVVVUdwXUYoFxaq5il2wa8hvtG5dJaxYx16xFvLN8i3lmehiFC6Y94wbsTGsxZosajKA/7aewjrKZiyTocJO9DSYHT82r+YXyQs0eRfYBrD/Y1DB58OMyfeM/hrWq8N9qlZkmFBXiPPd6D7ikWUxwjrKWirTeJkzDeNYttKIxhDUuxiFGjfAnfMkUX3hs19emYqFt9P48mU6zVLEQPFjCfwgk8gyuwEd6pS5t0EQYmHhCXLZ8Kvz1oqmFO+H8HxVOXfZC5vwNd46y3xbx5ni1mQ4+dJ6NyDw4xX0GN9484YfcRhg+fcmmt408+5V99wSyVTWN94gAAAABJRU5ErkJggg==) 5 10, text;\r
}`;by(yy);var wy="data-paintformat-mode",ky=function(f){rt(e,f);var i=it(e);function e(){var t;be(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r)),t.activeMarks=void 0,t.activeBlocks=void 0,t.type=void 0,t.event=void 0,t.isFormat=!1,t.onBeforeCommandExecute=function(o){o!=="paintformat"&&!t.isFormat&&t.event&&t.removeActiveNodes(t.editor.container[0].ownerDocument)},t.onContainerMouseUp=function(o){if(!(!t.activeMarks||!o.target)){var l=t.editor;if(l.card.closest(Zn(o.target))){t.removeActiveNodes(l.container[0].ownerDocument);return}t.isFormat=!0,t.paintFormat(t.activeMarks,t.activeBlocks),t.isFormat=!1,t.type==="single"&&t.removeActiveNodes(l.container[0].ownerDocument)}},t}return ke(e,[{key:"init",value:function(){var n=this.editor;!fn(n)||(n.on("beforeCommandExecute",this.onBeforeCommandExecute),n.container.on("mouseup",this.onContainerMouseUp))}},{key:"removeActiveNodes",value:function(n){Sn(n)&&(n=Zn(n));var r=this.editor;r.container.removeClass(wy),this.activeMarks=void 0,this.activeBlocks=void 0,this.event&&(n.off("keydown",this.event),this.event=void 0),fn(r)&&r.trigger("select")}},{key:"bindEvent",value:function(n){var r=this,a=n[0].ownerDocument,o=function l(u){u.metaKey||u.ctrlKey||u.shiftKey||(r.event=void 0,(u.key==="Escape"||u.keyCode===27)&&(n.off("keydown",l),a&&r.removeActiveNodes(a)))};a&&(Zn(a).on("keydown",o),this.event=o)}},{key:"paintFormat",value:function(n,r){var a=this,o=this.editor;if(!!fn(o)){var l=o.change,u=o.command,c=o.block,h=l.range.get(),v=this.options.removeCommand||"removeformat";if(h.collapsed){var g=Zn("<img ".concat(Lr,'="').concat(Bb,'" role="format-dummy" style="display: none;" />'));h.insertNode(g[0]);var p=c.closest(h.startNode);h.select(p,!0),l.range.select(h),typeof v=="function"?v(h):u.execute(v),this.paintMarks(n);var b=c.getBlocks(h);r&&b.forEach(function(k){a.paintBlocks(k,r)}),g=p.find('img[role="format-dummy"]'),h.select(g),h.collapse(!0),g.remove(),l.apply(h)}else{typeof v=="function"?v(h):u.execute(v),this.paintMarks(n);var y=c.getBlocks(h);r&&y.forEach(function(k){a.paintBlocks(k,r)})}o.mark.merge(h)}}},{key:"paintMarks",value:function(n){for(var r=this.editor,a=r.mark,o=n.length-1;o>=0;o--){var l=n[o];a.wrap(r.node.clone(l,!1,!1))}}},{key:"paintBlocks",value:function(n,r){var a=this,o=this.editor;if(!(!fn(o)||!n.inEditor())){var l=o.node,u=o.change,c=o.block,h=u.range.get(),v=h.createSelection("removeformat");r.forEach(function(g){if(!!n.inEditor()){if(a.options.paintBlock){var p=a.options.paintBlock(n,g);if(p===!1)return}if(g.name!==n.name){if(h.select(n).shrinkToElementNode(),u.blocks=[n],g.name==="p"){var b=c.findPlugin(n);b&&b.execute(g.name)}else if(l.isRootBlock(g)){var y=c.findPlugin(g);y&&y.execute(g.name)}else if(l.isList(g)&&g.name!=="li"){var k=c.findPlugin(g),E=c.findPlugin(n.name==="li"?n.parent():n);k&&E!==k&&k.execute()}}var _=g.css();Object.keys(_).length>0&&c.setBlocks({style:_})}}),v.move()}}},{key:"execute",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"single",r=this.editor;if(!!fn(r)){if(this.activeMarks){this.removeActiveNodes(r.container);return}this.type=n,this.bindEvent(r.container);var a=r.change,o=r.mark,l=r.block,u=a.range.get();this.activeMarks=o.findMarks(u),this.activeBlocks=l.findBlocks(u),r.trigger("select"),r.container.addClass("data-paintformat-mode")}}},{key:"queryState",value:function(){return!!this.activeMarks}},{key:"destroy",value:function(){var n=this.editor;n.off("beforeCommandExecute",this.onBeforeCommandExecute),n.container.off("mouseup",this.onContainerMouseUp)}}],[{key:"pluginName",get:function(){return"paintformat"}}]),e}(ba);class Ey{constructor(i){const e=document.querySelector(i),t=document.createElement("div");t.setAttribute("class","m-0 p-10");const n=document.createElement("div");n.setAttribute("class","flex children:m-1 bg-blue-200"),e.appendChild(n),e.appendChild(t);const r=new Nb(t,{plugins:[gy,py,my,ky]});r.setValue("<h1>\u6765\u4E86\u8001\u5F1F</h1>"),r.on("change",()=>{const c=r.getValue();console.log(`value:${c}`)});const a=document.createElement("button");a.type="button",a.innerText="B",a.title="\u52A0\u7C97",a.addEventListener("click",()=>r.command.execute("bold"));const o=document.createElement("button");o.type="button",o.innerText="\u64A4\u9500",o.title="\u64A4\u9500",o.addEventListener("click",()=>r.command.execute("undo"));const l=document.createElement("button");l.type="button",l.innerText="\u6062\u590D",l.title="\u6062\u590D",l.addEventListener("click",()=>r.command.execute("redo"));const u=document.createElement("button");u.type="button",u.innerText="\u683C\u5F0F\u5237",u.title="\u683C\u5F0F\u5237",u.addEventListener("click",()=>r.command.execute("paintformat")),n.appendChild(a),n.appendChild(o),n.appendChild(l),n.appendChild(u),this.engine=r}}return Ey});
//# sourceMappingURL=index.umd.js.map
