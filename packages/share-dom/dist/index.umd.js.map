{"version":3,"file":"index.umd.js","sources":["../src/utils/copy.ts","../src/utils/detector.ts"],"sourcesContent":["/*\n * @Author: zhangyang\n * @Date: 2022-04-28 14:56:04\n * @LastEditTime: 2022-04-28 14:58:40\n * @Description: 复制内容到剪切板的方法\n */\nfunction select(element) {\n  let selectedText;\n  if (element.nodeName === 'SELECT') {\n    element.focus();\n    selectedText = element.value;\n  }\n  else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n    var isReadOnly = element.hasAttribute('readonly');\n    if (!isReadOnly) {\n      element.setAttribute('readonly', '');\n    }\n\n    element.select();\n    element.setSelectionRange(0, element.value.length);\n\n    if (!isReadOnly) {\n      element.removeAttribute('readonly');\n    }\n    selectedText = element.value;\n  }\n  else {\n    if (element.hasAttribute('contenteditable')) {\n      element.focus();\n    }\n\n    const selection = window.getSelection();\n    const range = document.createRange();\n\n    range.selectNodeContents(element);\n    selection.removeAllRanges();\n    selection.addRange(range);\n\n    selectedText = selection.toString();\n  }\n  return selectedText;\n}\n\nexport function copy(text: string, options?: any) {\n  let debug, fakeElem, success = false;\n  options = options || {};\n  debug = options.debug || false;\n  try {\n    const isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n    fakeElem = document.createElement('textarea');\n    // Prevent zooming on iOS\n    fakeElem.style.fontSize = '12pt';\n    // Reset box model\n    fakeElem.style.border = '0';\n    fakeElem.style.padding = '0';\n    fakeElem.style.margin = '0';\n    // Move element out of screen horizontally\n    fakeElem.style.position = 'absolute';\n    fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n    // Move element to the same position vertically\n    let yPosition = window.pageYOffset || document.documentElement.scrollTop;\n    fakeElem.style.top = `${yPosition}px`;\n    fakeElem.setAttribute('readonly', '');\n    fakeElem.value = text;\n    document.body.appendChild(fakeElem);\n\n    select(fakeElem);\n\n    let successful = document.execCommand('copy');\n    if (!successful) {\n      throw new Error('copy command was unsuccessful');\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error('unable to copy using execCommand: ', err);\n    debug && console.warn('trying IE specific stuff');\n    try {\n      (window as any).clipboardData.setData('text', text);\n      success = true;\n    } catch (err) {\n      debug && console.error('unable to copy using clipboardData: ', err);\n    }\n  } finally {\n    if (fakeElem) {\n      document.body.removeChild(fakeElem);\n    }\n  }\n  return success;\n}\n","/*\n * @Author: zhangyang\n * @Date: 2022-04-28 14:54:49\n * @LastEditTime: 2022-04-28 14:57:50\n * @Description: 宿主环境判断\n */\nfunction typeOf(type: string) {\n  return function (object: any) {\n    return Object.prototype.toString.call(object) === \"[object \" + type + \"]\";\n  };\n}\nfunction each(object: any, factory: any) {\n  for (let i = 0, l = object.length; i < l; i++) {\n    if (factory.call(object, object[i], i) === false) {\n      break;\n    }\n  }\n}\n\nexport class Detector {\n  _rules: { os: any[], browser: any[] }\n  constructor(rules: any) {\n    this._rules = rules;\n  }\n\n  _detect(name: string, expression: any, ua: string) {\n    const expr = typeOf(\"Function\")(expression) ? expression.call(null, ua) : expression;\n    if (!expr) { return null; }\n    const info = {\n      name: name,\n      version: \"0\",\n      codename: \"\",\n    };\n    if (expr === true) {\n      return info;\n    } else if (typeOf(\"String\")(expr)) {\n      if (ua.indexOf(expr) !== -1) {\n        return info;\n      }\n    } else if (typeOf(\"Object\")(expr)) {\n      if (expr.hasOwnProperty(\"version\")) {\n        info.version = expr.version;\n      }\n      return info;\n    } else if (typeOf(\"RegExp\")(expr)) {\n      const m = expr.exec(ua);\n      if (m) {\n        if (m.length >= 2 && m[1]) {\n          info.version = m[1].replace(/_/g, \".\");\n        }\n        return info;\n      }\n    }\n  }\n\n  _parseItem(ua: string, patterns: any[], factory: any, detector: any) {\n    let self = this;\n    let detected = {\n      name: \"na\",\n      version: \"0\",\n    };\n    each(patterns, function (pattern: any) {\n      const d = self._detect(pattern[0], pattern[1], ua);\n      if (d) {\n        detected = d;\n        return false;\n      }\n    });\n    factory.call(detector, detected.name, detected.version);\n  }\n\n  /**\n   * parse ua\n   * @param ua \n   */\n  parse(ua: string) {\n    ua = (ua || \"\").toLowerCase();\n    const d: any = {};\n\n    this._parseItem(ua, this._rules.os, function (name: string, version: string) {\n      const v = parseFloat(version);\n      d.os = {\n        name: name,\n        version: v,\n        fullVersion: version,\n      };\n      d.os[name] = v;\n    }, d);\n\n    this._parseItem(ua, this._rules.browser, function (name: string, version: string) {\n      let mode = version;\n      const v = parseFloat(version);\n      d.browser = {\n        name: name,\n        version: v,\n        fullVersion: version,\n        mode: parseFloat(mode),\n        fullMode: mode,\n      };\n      d.browser[name] = v;\n    }, d);\n    return d;\n  }\n}\n\nconst OS = [\n  [\"ios\", function (ua: string) {\n    if (/\\bcpu(?: iphone)? os /.test(ua)) {\n      return /\\bcpu(?: iphone)? os ([0-9._]+)/;\n    } else if (ua.indexOf(\"iph os \") !== -1) {\n      return /\\biph os ([0-9_]+)/;\n    } else {\n      return /\\bios\\b/;\n    }\n  }],\n  [\"android\", function (ua: string) {\n    if (ua.indexOf(\"android\") >= 0) {\n      return /\\bandroid[ \\/-]?([0-9.x]+)?/;\n    } else if (ua.indexOf(\"adr\") >= 0) {\n      if (ua.indexOf(\"mqqbrowser\") >= 0) {\n        return /\\badr[ ]\\(linux; u; ([0-9.]+)?/;\n      } else {\n        return /\\badr(?:[ ]([0-9.]+))?/;\n      }\n    }\n    return \"android\";\n    //return /\\b(?:android|\\badr)(?:[\\/\\- ](?:\\(linux; u; )?)?([0-9.x]+)?/;\n  }],\n  [\"wp\", function (ua: string) {\n    if (ua.indexOf(\"windows phone \") !== -1) {\n      return /\\bwindows phone (?:os )?([0-9.]+)/;\n    } else if (ua.indexOf(\"xblwp\") !== -1) {\n      return /\\bxblwp([0-9.]+)/;\n    } else if (ua.indexOf(\"zunewp\") !== -1) {\n      return /\\bzunewp([0-9.]+)/;\n    }\n    return \"windows phone\";\n  }],\n  [\"symbian\", /\\bsymbian(?:os)?\\/([0-9.]+)/],\n  [\"chromeos\", /\\bcros i686 ([0-9.]+)/],\n  [\"linux\", \"linux\"],\n  [\"windowsce\", /\\bwindows ce(?: ([0-9.]+))?/]\n];\nconst BROWSER = [\n  // app\n  [\"micromessenger\", /\\bmicromessenger\\/([\\d.]+)/],\n  [\"qq\", /\\bqq/i],\n  [\"qzone\", /qzone\\/.*_qz_([\\d.]+)/i],\n  [\"qqbrowser\", /\\bm?qqbrowser\\/([0-9.]+)/],\n  [\"tt\", /\\btencenttraveler ([0-9.]+)/],\n  [\"weibo\", /weibo__([0-9.]+)/],\n  [\"uc\", function (ua: string) {\n    if (ua.indexOf(\"ucbrowser/\") >= 0) {\n      return /\\bucbrowser\\/([0-9.]+)/;\n    } else if (ua.indexOf(\"ubrowser/\") >= 0) {\n      return /\\bubrowser\\/([0-9.]+)/;\n    } else if (/\\buc\\/[0-9]/.test(ua)) {\n      return /\\buc\\/([0-9.]+)/;\n    } else if (ua.indexOf(\"ucweb\") >= 0) {\n      // `ucweb/2.0` is compony info.\n      // `UCWEB8.7.2.214/145/800` is browser info.\n      return /\\bucweb([0-9.]+)?/;\n    } else {\n      return /\\b(?:ucbrowser|uc)\\b/;\n    }\n  }],\n  [\"360\", function (ua: string) {\n    if (ua.indexOf(\"360 aphone browser\") !== -1) {\n      return /\\b360 aphone browser \\(([^\\)]+)\\)/;\n    }\n    return /\\b360(?:se|ee|chrome|browser)\\b/;\n  }],\n  [\"baidu\",\n    function (ua) {\n      let back = 0;\n      let a;\n      if (/ baiduboxapp\\//i.test(ua)) {\n        if (a = /([\\d+.]+)_(?:diordna|enohpi)_/.exec(ua)) {\n          a = a[1].split(\".\");\n          back = a.reverse().join(\".\");\n        } else if ((a = /baiduboxapp\\/([\\d+.]+)/.exec(ua))) {\n          back = a[1];\n        }\n        return {\n          version: back,\n        };\n      }\n      return false;\n    },\n  ],\n  [\"baidubrowser\", /\\b(?:ba?idubrowser|baiduhd)[ \\/]([0-9.x]+)/],\n  [\"bdminivideo\", /bdminivideo\\/([0-9.]+)/],\n  [\"sogou\", function (ua: string) {\n    if (ua.indexOf(\"sogoumobilebrowser\") >= 0) {\n      return /sogoumobilebrowser\\/([0-9.]+)/;\n    } else if (ua.indexOf(\"sogoumse\") >= 0) {\n      return true;\n    }\n    return / se ([0-9.x]+)/;\n  }],\n  [\"ali-ap\", function (ua: string) {\n    if (ua.indexOf(\"aliapp\") > 0) {\n      return /\\baliapp\\(ap\\/([0-9.]+)\\)/;\n    } else {\n      return /\\balipayclient\\/([0-9.]+)\\b/;\n    }\n  }],\n  [\"ali-tb\", /\\baliapp\\(tb\\/([0-9.]+)\\)/],\n  [\"ali-tm\", /\\baliapp\\(tm\\/([0-9.]+)\\)/],\n  [\"tao\", /\\btaobrowser\\/([0-9.]+)/],\n  // 厂商\n  [\"mi\", /\\bmiuibrowser\\/([0-9.]+)/],\n  [\"oppo\", /\\boppobrowser\\/([0-9.]+)/],\n  [\"vivo\", /\\bvivobrowser\\/([0-9.]+)/],\n  [\"meizu\", /\\bmzbrowser\\/([0-9.]+)/],\n  [\"nokia\", /\\bnokiabrowser\\/([0-9.]+)/],\n  // [\"huawei\", /\\bhuaweibrowser\\/([0-9.]+)/],\n  [\"samsung\", /\\bsamsungbrowser\\/([0-9.]+)/],\n  // browser\n  [\"maxthon\", /\\b(?:maxthon|mxbrowser)(?:[ \\/]([0-9.]+))?/],\n  // Opera 15 之后开始使用 Chromniun 内核，需要放在 Chrome 的规则之前。\n  [\"opera\", function (ua: string) {\n    const re_opera_old = /\\bopera.+version\\/([0-9.ab]+)/;\n    const re_opera_new = /\\bopr\\/([0-9.]+)/;\n    return re_opera_old.test(ua) ? re_opera_old : re_opera_new;\n  }],\n  [\"edge\", /edge\\/([0-9.]+)/],\n  [\"firefox\", /\\bfirefox\\/([0-9.ab]+)/],\n  [\"chrome\", / (?:chrome|crios|crmo)\\/([0-9.]+)/],\n  // Android 默认浏览器。该规则需要在 safari 之前。\n  [\"android\", function (ua: string) {\n    if (ua.indexOf(\"android\") === -1) { return; }\n    return /\\bversion\\/([0-9.]+(?: beta)?)/;\n  }],\n  [\"safari\", /\\bversion\\/([0-9.]+(?: beta)?)(?: mobile(?:\\/[a-z0-9]+)?)? safari\\//],\n  // 如果不能识别为浏览器则为webview。\n  [\"webview\", /\\bcpu(?: iphone)? os (?:[0-9._]+).+\\bapplewebkit\\b/],\n];\n\nconst detector = new Detector({\n  os: OS,\n  browser: BROWSER\n});\nconst ua = navigator.userAgent + \" \" + navigator.appVersion + \" \" + navigator.vendor;\nconst d = detector.parse(ua);\nexport { d as detector, ua }\n"],"names":[],"mappings":"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"}