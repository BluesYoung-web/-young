{"version":3,"file":"index.es.js","sources":["../node_modules/@bluesyoung/share-dom/dist/index.es.js","../node_modules/defu/dist/defu.mjs","../src/index.ts"],"sourcesContent":["function select(element) {\n  let selectedText;\n  if (element.nodeName === \"SELECT\") {\n    element.focus();\n    selectedText = element.value;\n  } else if (element.nodeName === \"INPUT\" || element.nodeName === \"TEXTAREA\") {\n    var isReadOnly = element.hasAttribute(\"readonly\");\n    if (!isReadOnly) {\n      element.setAttribute(\"readonly\", \"\");\n    }\n    element.select();\n    element.setSelectionRange(0, element.value.length);\n    if (!isReadOnly) {\n      element.removeAttribute(\"readonly\");\n    }\n    selectedText = element.value;\n  } else {\n    if (element.hasAttribute(\"contenteditable\")) {\n      element.focus();\n    }\n    const selection = window.getSelection();\n    const range = document.createRange();\n    range.selectNodeContents(element);\n    selection.removeAllRanges();\n    selection.addRange(range);\n    selectedText = selection.toString();\n  }\n  return selectedText;\n}\nfunction copy(text, options) {\n  let debug, fakeElem, success = false;\n  options = options || {};\n  debug = options.debug || false;\n  try {\n    const isRTL = document.documentElement.getAttribute(\"dir\") == \"rtl\";\n    fakeElem = document.createElement(\"textarea\");\n    fakeElem.style.fontSize = \"12pt\";\n    fakeElem.style.border = \"0\";\n    fakeElem.style.padding = \"0\";\n    fakeElem.style.margin = \"0\";\n    fakeElem.style.position = \"absolute\";\n    fakeElem.style[isRTL ? \"right\" : \"left\"] = \"-9999px\";\n    let yPosition = window.pageYOffset || document.documentElement.scrollTop;\n    fakeElem.style.top = `${yPosition}px`;\n    fakeElem.setAttribute(\"readonly\", \"\");\n    fakeElem.value = text;\n    document.body.appendChild(fakeElem);\n    select(fakeElem);\n    let successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(\"text\", text);\n      success = true;\n    } catch (err2) {\n      debug && console.error(\"unable to copy using clipboardData: \", err2);\n    }\n  } finally {\n    if (fakeElem) {\n      document.body.removeChild(fakeElem);\n    }\n  }\n  return success;\n}\nfunction typeOf(type) {\n  return function(object) {\n    return Object.prototype.toString.call(object) === \"[object \" + type + \"]\";\n  };\n}\nfunction each(object, factory) {\n  for (let i = 0, l = object.length; i < l; i++) {\n    if (factory.call(object, object[i], i) === false) {\n      break;\n    }\n  }\n}\nclass Detector {\n  constructor(rules) {\n    this._rules = rules;\n  }\n  _detect(name, expression, ua2) {\n    const expr = typeOf(\"Function\")(expression) ? expression.call(null, ua2) : expression;\n    if (!expr) {\n      return null;\n    }\n    const info = {\n      name,\n      version: \"0\",\n      codename: \"\"\n    };\n    if (expr === true) {\n      return info;\n    } else if (typeOf(\"String\")(expr)) {\n      if (ua2.indexOf(expr) !== -1) {\n        return info;\n      }\n    } else if (typeOf(\"Object\")(expr)) {\n      if (expr.hasOwnProperty(\"version\")) {\n        info.version = expr.version;\n      }\n      return info;\n    } else if (typeOf(\"RegExp\")(expr)) {\n      const m = expr.exec(ua2);\n      if (m) {\n        if (m.length >= 2 && m[1]) {\n          info.version = m[1].replace(/_/g, \".\");\n        }\n        return info;\n      }\n    }\n  }\n  _parseItem(ua2, patterns, factory, detector2) {\n    let self = this;\n    let detected = {\n      name: \"na\",\n      version: \"0\"\n    };\n    each(patterns, function(pattern) {\n      const d2 = self._detect(pattern[0], pattern[1], ua2);\n      if (d2) {\n        detected = d2;\n        return false;\n      }\n    });\n    factory.call(detector2, detected.name, detected.version);\n  }\n  parse(ua2) {\n    ua2 = (ua2 || \"\").toLowerCase();\n    const d2 = {};\n    this._parseItem(ua2, this._rules.os, function(name, version) {\n      const v = parseFloat(version);\n      d2.os = {\n        name,\n        version: v,\n        fullVersion: version\n      };\n      d2.os[name] = v;\n    }, d2);\n    this._parseItem(ua2, this._rules.browser, function(name, version) {\n      let mode = version;\n      const v = parseFloat(version);\n      d2.browser = {\n        name,\n        version: v,\n        fullVersion: version,\n        mode: parseFloat(mode),\n        fullMode: mode\n      };\n      d2.browser[name] = v;\n    }, d2);\n    return d2;\n  }\n}\nconst OS = [\n  [\"ios\", function(ua2) {\n    if (/\\bcpu(?: iphone)? os /.test(ua2)) {\n      return /\\bcpu(?: iphone)? os ([0-9._]+)/;\n    } else if (ua2.indexOf(\"iph os \") !== -1) {\n      return /\\biph os ([0-9_]+)/;\n    } else {\n      return /\\bios\\b/;\n    }\n  }],\n  [\"android\", function(ua2) {\n    if (ua2.indexOf(\"android\") >= 0) {\n      return /\\bandroid[ \\/-]?([0-9.x]+)?/;\n    } else if (ua2.indexOf(\"adr\") >= 0) {\n      if (ua2.indexOf(\"mqqbrowser\") >= 0) {\n        return /\\badr[ ]\\(linux; u; ([0-9.]+)?/;\n      } else {\n        return /\\badr(?:[ ]([0-9.]+))?/;\n      }\n    }\n    return \"android\";\n  }],\n  [\"wp\", function(ua2) {\n    if (ua2.indexOf(\"windows phone \") !== -1) {\n      return /\\bwindows phone (?:os )?([0-9.]+)/;\n    } else if (ua2.indexOf(\"xblwp\") !== -1) {\n      return /\\bxblwp([0-9.]+)/;\n    } else if (ua2.indexOf(\"zunewp\") !== -1) {\n      return /\\bzunewp([0-9.]+)/;\n    }\n    return \"windows phone\";\n  }],\n  [\"symbian\", /\\bsymbian(?:os)?\\/([0-9.]+)/],\n  [\"chromeos\", /\\bcros i686 ([0-9.]+)/],\n  [\"linux\", \"linux\"],\n  [\"windowsce\", /\\bwindows ce(?: ([0-9.]+))?/]\n];\nconst BROWSER = [\n  [\"micromessenger\", /\\bmicromessenger\\/([\\d.]+)/],\n  [\"qq\", /\\bqq/i],\n  [\"qzone\", /qzone\\/.*_qz_([\\d.]+)/i],\n  [\"qqbrowser\", /\\bm?qqbrowser\\/([0-9.]+)/],\n  [\"tt\", /\\btencenttraveler ([0-9.]+)/],\n  [\"weibo\", /weibo__([0-9.]+)/],\n  [\"uc\", function(ua2) {\n    if (ua2.indexOf(\"ucbrowser/\") >= 0) {\n      return /\\bucbrowser\\/([0-9.]+)/;\n    } else if (ua2.indexOf(\"ubrowser/\") >= 0) {\n      return /\\bubrowser\\/([0-9.]+)/;\n    } else if (/\\buc\\/[0-9]/.test(ua2)) {\n      return /\\buc\\/([0-9.]+)/;\n    } else if (ua2.indexOf(\"ucweb\") >= 0) {\n      return /\\bucweb([0-9.]+)?/;\n    } else {\n      return /\\b(?:ucbrowser|uc)\\b/;\n    }\n  }],\n  [\"360\", function(ua2) {\n    if (ua2.indexOf(\"360 aphone browser\") !== -1) {\n      return /\\b360 aphone browser \\(([^\\)]+)\\)/;\n    }\n    return /\\b360(?:se|ee|chrome|browser)\\b/;\n  }],\n  [\n    \"baidu\",\n    function(ua2) {\n      let back = 0;\n      let a;\n      if (/ baiduboxapp\\//i.test(ua2)) {\n        if (a = /([\\d+.]+)_(?:diordna|enohpi)_/.exec(ua2)) {\n          a = a[1].split(\".\");\n          back = a.reverse().join(\".\");\n        } else if (a = /baiduboxapp\\/([\\d+.]+)/.exec(ua2)) {\n          back = a[1];\n        }\n        return {\n          version: back\n        };\n      }\n      return false;\n    }\n  ],\n  [\"baidubrowser\", /\\b(?:ba?idubrowser|baiduhd)[ \\/]([0-9.x]+)/],\n  [\"bdminivideo\", /bdminivideo\\/([0-9.]+)/],\n  [\"sogou\", function(ua2) {\n    if (ua2.indexOf(\"sogoumobilebrowser\") >= 0) {\n      return /sogoumobilebrowser\\/([0-9.]+)/;\n    } else if (ua2.indexOf(\"sogoumse\") >= 0) {\n      return true;\n    }\n    return / se ([0-9.x]+)/;\n  }],\n  [\"ali-ap\", function(ua2) {\n    if (ua2.indexOf(\"aliapp\") > 0) {\n      return /\\baliapp\\(ap\\/([0-9.]+)\\)/;\n    } else {\n      return /\\balipayclient\\/([0-9.]+)\\b/;\n    }\n  }],\n  [\"ali-tb\", /\\baliapp\\(tb\\/([0-9.]+)\\)/],\n  [\"ali-tm\", /\\baliapp\\(tm\\/([0-9.]+)\\)/],\n  [\"tao\", /\\btaobrowser\\/([0-9.]+)/],\n  [\"mi\", /\\bmiuibrowser\\/([0-9.]+)/],\n  [\"oppo\", /\\boppobrowser\\/([0-9.]+)/],\n  [\"vivo\", /\\bvivobrowser\\/([0-9.]+)/],\n  [\"meizu\", /\\bmzbrowser\\/([0-9.]+)/],\n  [\"nokia\", /\\bnokiabrowser\\/([0-9.]+)/],\n  [\"samsung\", /\\bsamsungbrowser\\/([0-9.]+)/],\n  [\"maxthon\", /\\b(?:maxthon|mxbrowser)(?:[ \\/]([0-9.]+))?/],\n  [\"opera\", function(ua2) {\n    const re_opera_old = /\\bopera.+version\\/([0-9.ab]+)/;\n    const re_opera_new = /\\bopr\\/([0-9.]+)/;\n    return re_opera_old.test(ua2) ? re_opera_old : re_opera_new;\n  }],\n  [\"edge\", /edge\\/([0-9.]+)/],\n  [\"firefox\", /\\bfirefox\\/([0-9.ab]+)/],\n  [\"chrome\", / (?:chrome|crios|crmo)\\/([0-9.]+)/],\n  [\"android\", function(ua2) {\n    if (ua2.indexOf(\"android\") === -1) {\n      return;\n    }\n    return /\\bversion\\/([0-9.]+(?: beta)?)/;\n  }],\n  [\"safari\", /\\bversion\\/([0-9.]+(?: beta)?)(?: mobile(?:\\/[a-z0-9]+)?)? safari\\//],\n  [\"webview\", /\\bcpu(?: iphone)? os (?:[0-9._]+).+\\bapplewebkit\\b/]\n];\nconst detector = new Detector({\n  os: OS,\n  browser: BROWSER\n});\nconst ua = navigator.userAgent + \" \" + navigator.appVersion + \" \" + navigator.vendor;\nconst d = detector.parse(ua);\nfunction preventKeyScroll(e) {\n  const keys = [\n    \"ArrowUp\",\n    \"ArrowDown\",\n    \"PageUp\",\n    \"PageDown\",\n    \"Home\",\n    \"End\",\n    \"Tab\"\n  ];\n  if (keys.includes(e.key)) {\n    e.preventDefault();\n  }\n}\nfunction preventWheelScroll(e) {\n  e.preventDefault();\n}\nconst disableScroll = () => {\n  window.addEventListener(\"wheel\", preventWheelScroll, { passive: false });\n  window.addEventListener(\"keyup\", preventKeyScroll);\n  window.addEventListener(\"keydown\", preventKeyScroll);\n  window.addEventListener(\"keypress\", preventKeyScroll);\n};\nconst enableScroll = () => {\n  window.removeEventListener(\"wheel\", preventWheelScroll);\n  window.removeEventListener(\"keyup\", preventKeyScroll);\n  window.removeEventListener(\"keydown\", preventKeyScroll);\n  window.removeEventListener(\"keypress\", preventKeyScroll);\n};\nconst parseUnicode = (str) => {\n  const srcArr = str.match(/(\\\\u[0-9A-F]+\\s?)+/img) || [];\n  for (const name of srcArr) {\n    const tp = name.split(/\\s/);\n    let s = \"\";\n    for (const char of tp) {\n      s += String.fromCharCode(...char.split(\"\\\\u\").filter((c) => c).map((c) => +`0x${c}`));\n    }\n    str = str.replace(name, s);\n    console.log(str);\n  }\n  return str;\n};\nexport { Detector, copy, d as detector, disableScroll, enableScroll, parseUnicode, ua };\n//# sourceMappingURL=index.es.js.map\n","function isObject(value) {\n  return value !== null && typeof value === \"object\";\n}\nfunction _defu(baseObject, defaults, namespace = \".\", merger) {\n  if (!isObject(defaults)) {\n    return _defu(baseObject, {}, namespace, merger);\n  }\n  const object = Object.assign({}, defaults);\n  for (const key in baseObject) {\n    if (key === \"__proto__\" || key === \"constructor\") {\n      continue;\n    }\n    const value = baseObject[key];\n    if (value === null || value === void 0) {\n      continue;\n    }\n    if (merger && merger(object, key, value, namespace)) {\n      continue;\n    }\n    if (Array.isArray(value) && Array.isArray(object[key])) {\n      object[key] = [...value, ...object[key]];\n    } else if (isObject(value) && isObject(object[key])) {\n      object[key] = _defu(\n        value,\n        object[key],\n        (namespace ? `${namespace}.` : \"\") + key.toString(),\n        merger\n      );\n    } else {\n      object[key] = value;\n    }\n  }\n  return object;\n}\nfunction createDefu(merger) {\n  return (...arguments_) => (\n    // eslint-disable-next-line unicorn/no-array-reduce\n    arguments_.reduce((p, c) => _defu(p, c, \"\", merger), {})\n  );\n}\nconst defu = createDefu();\nconst defuFn = createDefu((object, key, currentValue) => {\n  if (typeof object[key] !== \"undefined\" && typeof currentValue === \"function\") {\n    object[key] = currentValue(object[key]);\n    return true;\n  }\n});\nconst defuArrayFn = createDefu((object, key, currentValue) => {\n  if (Array.isArray(object[key]) && typeof currentValue === \"function\") {\n    object[key] = currentValue(object[key]);\n    return true;\n  }\n});\n\nexport { createDefu, defu as default, defu, defuArrayFn, defuFn };\n","/*\n * @Author: zhangyang\n * @Date: 2022-04-28 14:22:04\n * @LastEditTime: 2023-02-02 09:42:23\n * @Description:\n */\nimport { copy, detector } from '@bluesyoung/share-dom';\nimport { defu } from 'defu';\nimport type { SetOptional } from '@bluesyoung/utils';\nconst isIos = detector.os.name === 'ios';\nconst inWeixin = detector.browser.name === 'micromessenger';\n// const inQQ = detector.browser.name === 'qq';\n// const inWeibo = detector.browser.name === 'weibo';\n// const inBaidu = detector.browser.name === 'baidu';\n\nenum QuickCall {\n  wechat = 'weixin://',\n}\n\n/**\n * 快捷唤端的配置\n */\ntype QuickCallConfig = {\n  quickType: QuickCall;\n};\n/**\n * 基本唤端配置\n */\ntype CommonCallConfig = {\n  /**\n   * 安卓唤端地址\n   */\n  android_shceme: string;\n  /**\n   * ios 唤端地址\n   */\n  ios_shceme: string;\n  /**\n   * 特定渠道的下载地址\n   */\n  download?: {\n    /**\n     * 安卓\n     */\n    android?: string;\n    /**\n     * ios\n     */\n    ios?: string;\n    /**\n     * 应用宝\n     */\n    yyb?: string;\n  };\n  /**\n   * 唤端路径\n   */\n  path?: string;\n  /**\n   * 需要传递的参数\n   */\n  params?: Record<string, string>;\n  /**\n   * 兜底的落地页\n   */\n  landpage?: string;\n};\n\ntype Cbk = () => void;\ntype Options = {\n  /**\n   * 超时时间\n   * @default 2500 ms\n   */\n  timeout: number;\n  /**\n   * 特殊环境的遮罩\n   */\n  mask: {\n    wechat: Cbk;\n  };\n  startCall: Cbk;\n  callFail: Cbk;\n};\n\nconst defaultOptions: Options = {\n  timeout: 2500,\n  mask: {\n    wechat: () => null,\n  },\n  startCall: () => console.log('---开始唤端---'),\n  callFail: () => console.log('---唤起失败，跳转下载---'),\n};\n\nclass YoungCallApp {\n  static QuickCall = QuickCall;\n\n  public scheme: string;\n  public download: string;\n  public info: string;\n  public options: Options;\n  constructor(conf: QuickCallConfig, options?: SetOptional<Options, keyof Options>);\n  constructor(conf: CommonCallConfig, options?: SetOptional<Options, keyof Options>);\n  constructor(conf: any, options: SetOptional<Options, keyof Options> = {}) {\n    this.options = defu(options, defaultOptions);\n    if (conf.quickType) {\n      this.scheme = conf.quickType;\n    } else {\n      this.generateScheme(conf);\n    }\n  }\n\n  /**\n   * 生成通用唤端地址\n   */\n  generateScheme(conf: CommonCallConfig) {\n    let scheme = '',\n      download = '',\n      info = '(复制此消息打开app)|';\n    if (isIos) {\n      if (conf.ios_shceme.includes('://')) {\n        scheme = conf.ios_shceme;\n      } else {\n        scheme = `${conf.ios_shceme}://`;\n      }\n      download = conf?.download?.ios || conf.landpage;\n    } else {\n      if (conf.android_shceme.includes('://')) {\n        scheme = conf.android_shceme;\n      } else {\n        scheme = `${conf.android_shceme}://`;\n      }\n      download = conf?.download?.yyb || conf.landpage;\n      if (inWeixin && conf?.download?.yyb) {\n        download = conf.download.yyb;\n      }\n    }\n    if (conf.path) {\n      scheme += conf.path;\n    }\n    if (conf.params) {\n      const query = new URLSearchParams(conf.params).toString();\n      scheme += `?${query}`;\n      info += query;\n    }\n\n    this.scheme = scheme;\n    this.download = download;\n    this.info = info;\n  }\n\n  call() {\n    const { mask, startCall } = this.options;\n    if (inWeixin && mask.wechat) {\n      mask.wechat();\n      return;\n    }\n    this.copyInfo();\n    startCall?.();\n    // 开始唤端\n    window.location.href = this.scheme;\n    this.fallback();\n  }\n\n  copyInfo() {\n    copy(this.info);\n  }\n\n  fallback() {\n    const t = setTimeout(() => {\n      /**\n       * 调用唤起失败的回调函数\n       */\n      this.options.callFail();\n      if (this.download) {\n        /**\n         * 拥有兜底的落地页，跳转\n         */\n        window.location.href = this.download;\n      }\n    }, this.options.timeout);\n\n    setTimeout(() => {\n      window.addEventListener('blur', () => clearTimeout(t));\n    }, this.options.timeout - 500);\n  }\n}\n\nexport default YoungCallApp;\n"],"names":["select","element","selectedText","isReadOnly","selection","range","copy","text","options","debug","fakeElem","success","isRTL","yPosition","err","err2","typeOf","type","object","each","factory","i","l","Detector","rules","name","expression","ua2","expr","info","m","patterns","detector2","self","detected","pattern","d2","version","v","mode","OS","BROWSER","back","a","re_opera_old","re_opera_new","detector","ua","d","isObject","value","_defu","baseObject","defaults","namespace","merger","key","createDefu","arguments_","p","c","defu","isIos","inWeixin","QuickCall","defaultOptions","YoungCallApp","conf","__publicField","_a","_b","_c","scheme","download","query","mask","startCall","t"],"mappings":"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"}